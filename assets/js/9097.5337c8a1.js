"use strict";(self.webpackChunksentinel_docs=self.webpackChunksentinel_docs||[]).push([[9097],{19097:(t,e,i)=>{i.r(e),i.d(e,{dyte_participants_viewer_list:()=>p});var s=i(72944),a=(i(26468),i(6302),i(93514)),n=(i(94370),i(17073)),r=i(59990);i(55055),i(55524),i(81195);const p=class{constructor(t){(0,s.r)(this,t),this.updateStageViewers=()=>{this.getViewers(this.search)},this.shouldShowViewers=()=>{var t,e,i,s,a;return(null===(i=null===(e=null===(t=this.meeting)||void 0===t?void 0:t.self)||void 0===e?void 0:e.permissions)||void 0===i?void 0:i.stageEnabled)&&"LIVESTREAM"!==(null===(a=null===(s=this.meeting)||void 0===s?void 0:s.meta)||void 0===a?void 0:a.viewType)},this.meeting=void 0,this.config=a.d,this.size=void 0,this.iconPack=n.d,this.view="sidebar",this.search="",this.t=(0,r.u)(),this.stageViewers=[]}connectedCallback(){this.meetingChanged(this.meeting),this.searchChanged(this.search)}meetingChanged(t){null!=t&&(this.participantJoinedListener=t=>{if("ON_STAGE"===t.stageStatus)return;const e=this.search.toLowerCase();e.length>0&&!t.name.toLowerCase().includes(e)||(this.stageViewers=[...this.stageViewers.filter((e=>e.id!==t.id)),t])},this.participantLeftListener=t=>{this.stageViewers=this.stageViewers.filter((e=>e.id!==t.id))},t.participants.joined.addListener("participantJoined",this.participantJoinedListener),t.participants.joined.addListener("participantLeft",this.participantLeftListener),t.participants.joined.on("stageStatusUpdate",this.updateStageViewers),t.stage.on("stageStatusUpdate",this.updateStageViewers))}searchChanged(t){this.getViewers(t)}disconnectedCallback(){const{participants:t,stage:e}=this.meeting;this.participantJoinedListener&&this.meeting.participants.joined.removeListener("participantJoined",this.participantJoinedListener),this.participantLeftListener&&this.meeting.participants.joined.removeListener("participantLeft",this.participantLeftListener),t.joined.removeListener("stageStatusUpdate",this.updateStageViewers),e.removeListener("stageStatusUpdate",this.updateStageViewers)}getViewers(t){let e="ON_STAGE"===this.meeting.stage.status?[]:[this.meeting.self];e=[...e,...this.meeting.participants.joined.toArray()].filter((t=>"ON_STAGE"!==t.stageStatus)),this.stageViewers=""===t?e:e.filter((e=>{var i;return(null!==(i=e.name)&&void 0!==i?i:e.id).toLowerCase().includes(t.toLowerCase())}))}render(){if("sidebar"===this.view&&this.shouldShowViewers())return(0,s.h)("div",{class:"list"},(0,s.h)("div",{class:"heading-count",part:"heading-count"},this.t("viewers")," (",this.stageViewers.length,")"),(0,s.h)("ul",{class:"participants",part:"participants"},this.stageViewers.map((t=>(0,s.h)("dyte-participant",{role:"listitem",key:t.id,meeting:this.meeting,participant:t,view:this.view,iconPack:this.iconPack,config:this.config,t:this.t}))),0===this.stageViewers.length&&(0,s.h)("div",{class:"empty-message",part:"empty-message"},this.search.length>0?this.t("participants.errors.empty_results"):this.t("participants.empty_list"))))}static get watchers(){return{meeting:["meetingChanged"],search:["searchChanged"]}}};p.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;width:100%;flex-direction:column;font-size:14px}.list{margin-bottom:var(--dyte-space-4, 16px);display:flex;flex-direction:column}h3,.heading-count{margin:var(--dyte-space-0, 0px);align-items:center;justify-content:center;padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:400;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));text-align:center}.heading-count{font-size:14px}.participants{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.empty-message{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);text-align:center;font-size:12px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}"}}]);