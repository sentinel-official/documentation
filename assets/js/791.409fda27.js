"use strict";(self.webpackChunksentinel_docs=self.webpackChunksentinel_docs||[]).push([[791],{30791:(t,e,s)=>{s.r(e),s.d(e,{dyte_participants_stage_list:()=>c});var i=s(37176),r=s(68753),n=s(74710),a=s(9367),o=(s(78410),s(60804),s(67341)),p=s(39571);const c=class{constructor(t){(0,i.r)(this,t),this.updateStageList=()=>{var t,e,s;"LIVESTREAM"===(null===(t=this.meeting)||void 0===t?void 0:t.meta.viewType)?this.showStageList="ON_STAGE"===(null===(s=null===(e=this.meeting)||void 0===e?void 0:e.stage)||void 0===s?void 0:s.status):this.showStageList=!0,this.getParticipants(this.search)},this.meeting=void 0,this.config=a.d,this.size=void 0,this.iconPack=r.d,this.view="sidebar",this.t=(0,n.u)(),this.search="",this.participants=[],this.showStageList=!1}connectedCallback(){this.meetingChanged(this.meeting),this.searchChanged(this.search)}disconnectedCallback(){const{participants:t,stage:e}=this.meeting;null!=this.meeting&&(this.participantJoinedListener&&this.meeting.participants.joined.removeListener("participantJoined",this.participantJoinedListener),this.participantLeftListener&&this.meeting.participants.joined.removeListener("participantLeft",this.participantLeftListener),t.joined.removeListener("stageStatusUpdate",this.getParticipants),null==e||e.removeListener("stageStatusUpdate",this.updateStageList))}meetingChanged(t){null!=t&&(this.participantJoinedListener=t=>{if("ON_STAGE"!==t.stageStatus)return;const e=this.search.toLowerCase();t.name.toLowerCase().includes(e)&&t.id.toLowerCase().includes(e)&&(this.participants=[...this.participants.filter((e=>e.id!==t.id)),t])},this.participantLeftListener=t=>{this.participants=this.participants.filter((e=>e.id!==t.id))},t.participants.joined.addListener("participantJoined",this.participantJoinedListener),t.participants.joined.addListener("participantLeft",this.participantLeftListener),this.updateStageList(),null==t||t.participants.joined.on("stageStatusUpdate",this.updateStageList),null==t||t.stage.on("stageStatusUpdate",this.updateStageList))}searchChanged(t){this.getParticipants(t)}getParticipants(t=this.search){let e="ON_STAGE"===this.meeting.stage.status?[this.meeting.self]:[];e=[...e,...this.meeting.participants.joined.toArray().filter((t=>"ON_STAGE"===t.stageStatus))],this.participants=""===t?e:e.filter((e=>{var s;return(null!==(s=e.name)&&void 0!==s?s:e.id).toLowerCase().includes(t.toLowerCase())}))}render(){if(!this.showStageList)return;const t={meeting:this.meeting,view:this.view,t:this.t,config:this.config,states:p.s,size:this.size,iconPack:this.iconPack};return(0,i.h)(i.H,null,(0,i.h)("div",{class:"participants-container"},(0,i.h)("div",{class:"heading-count",part:"heading-count"},this.t("participants")," (",this.participants.length,")"),(0,i.h)("ul",{class:"participants",part:"participants"},this.participants.map((e=>(0,i.h)(o.R,{element:"dyte-participant",defaults:t,props:{role:"listitem",participant:e},childProps:Object.assign(Object.assign({},t),{participant:e,size:this.size}),deepProps:!0}))),0===this.participants.length&&(0,i.h)("div",{class:"empty-message",part:"empty-message"},this.search.length>0?this.t("search.could_not_find"):this.t("search.empty")))))}static get watchers(){return{meeting:["meetingChanged"],search:["searchChanged"]}}};c.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;width:100%;flex-direction:column;font-size:14px}.participants-container{margin-bottom:var(--dyte-space-4, 16px);width:100%}h3,.heading-count{margin:var(--dyte-space-0, 0px);display:flex;align-items:center;justify-content:center;padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:400;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));text-align:center}.heading-count{font-size:14px}.participants{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.empty-message{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-4, 16px);text-align:center;font-size:12px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}dyte-participant{width:100%}"},67341:(t,e,s)=>{s.d(e,{R:()=>p,l:()=>o});var i=s(37176);const r=({element:t,size:e,states:s={},config:i={}})=>{let r=[];const n=null==i?void 0:i.root[t],a=t=>{r.push(t),"string"==typeof e&&r.push(`${t}.${e}`)};if(a(t),"object"==typeof n&&!Array.isArray(n)&&null!==n){const{state:e,states:i}=n;let r=t,o=[];if(Array.isArray(i)){o=i.filter((t=>s[t])),o.sort();for(const t of o)a(`${r}.${t}`);if(o.length>1){a([r,...o].join("."))}}if("string"==typeof e){const i=`${t}[${e}=${s[e]}]`;a(i);for(const t of o)a(`${i}.${t}`);if(o.length>1){a([i,...o].join("."))}}}return r},n=({selectors:t,root:e})=>{if(!e||!Array.isArray(t))return[];let s=[];for(const i of t){const t=e[i];if(Array.isArray(t))s=[...t];else if(t){if(t.children&&(s=[...t.children]),Array.isArray(t.remove))for(const e of t.remove)s=s.filter((t=>"string"==typeof t?t!==e:!Array.isArray(t)||t[0]!==e));if(t.addBefore)for(const[e,i]of Object.entries(t.addBefore)){const t=s.findIndex((t=>"string"==typeof t?t===e:!!Array.isArray(t)&&t[0]===e));t>=0&&s.splice(t,0,...i)}Array.isArray(t.add)&&(s=s.concat(t.add)),Array.isArray(t.prepend)&&(s=t.prepend.concat(s))}}return s},a=({elements:t,defaults:e,props:s={},deepProps:r=!1,elementProps:n={}})=>Array.isArray(t)&&0!==t.length?t.map((t=>(0,i.h)(p,{element:t,defaults:e,props:s,childProps:r&&s,elementProps:n}))):null,o=({element:t,defaults:e,props:s={},elementProps:i={}})=>{var a;const{config:o,size:p,states:c}=e;let l,d={},h=[];Array.isArray(t)?[l,d,...h]=t:l=t;const g=null===(a=null==o?void 0:o.root)||void 0===a?void 0:a[l];null!=g&&"props"in g&&(s=Object.assign(Object.assign({},g.props),s)),s=Object.assign(Object.assign({},s),d),l in i&&(s=Object.assign(Object.assign({},s),i[l]));const f=r({element:l,size:p,states:c,config:o});return n({selectors:f,root:o.root}).length},p=({element:t,defaults:e,childProps:s={},props:o={},onlyChildren:p=!1,asHost:c=!1,deepProps:l=!1,elementProps:d={}},h)=>{var g;const{config:f,size:u,states:y}=e;let m,v={},b=[];Array.isArray(t)?[m,v,...b]=t:m=t;const A=null===(g=null==f?void 0:f.root)||void 0===g?void 0:g[m];null!=A&&"props"in A&&(o=Object.assign(Object.assign({},A.props),o)),o=Object.assign(Object.assign({},o),v),m in d&&(o=Object.assign(Object.assign({},o),d[m]));const j=r({element:m,size:u,states:y,config:f}),L=n({selectors:j,root:f.root});if(p)return(0,i.h)(a,{elements:L,defaults:e,props:s,deepProps:l,elementProps:d});const O=(({selectors:t,styles:e})=>{if(!Array.isArray(t)||null==e)return{};const s={};for(const i of t){const t=e[i];null!=t&&Object.assign(s,t)}return s})({selectors:j,styles:f.styles});if(c)return(0,i.h)(i.H,Object.assign({},e,{style:O},o),(0,i.h)(a,{elements:L,defaults:e,props:s,deepProps:l,elementProps:d}),h,b.map((t=>{if(Array.isArray(t)){const[s,r]=t;return(0,i.h)(s,Object.assign({},e,r))}return t})));if(["dyte-header","dyte-controlbar"].includes(m)&&(o.disableRender=!0),m.startsWith("dyte-"))return(0,i.h)(m,Object.assign({},e,{style:O},o),(0,i.h)(a,{elements:L,defaults:e,props:s,deepProps:l,elementProps:d}),h,b.map((t=>{if(Array.isArray(t)){const[s,r]=t;return(0,i.h)(s,Object.assign({},e,r))}return t})));{const[t,r]=m.split("#");return(0,i.h)(t,Object.assign({id:r,style:O},o),(0,i.h)(a,{elements:L,defaults:e,props:s,deepProps:l,elementProps:d}),h,b.map((t=>{if(Array.isArray(t)){const[s,r]=t;return(0,i.h)(s,Object.assign({},e,r))}return t})))}}},39571:(t,e,s)=>{s.d(e,{o:()=>c,s:()=>p});var i=s(37176);const r=t=>!("isConnected"in t)||t.isConnected,n=((t,e)=>{let s;return(...i)=>{s&&clearTimeout(s),s=setTimeout((()=>{s=0,t(...i)}),e)}})((t=>{for(let e of t.keys())t.set(e,t.get(e).filter(r))}),2e3),a=t=>"function"==typeof t?t():t,o=(t,e)=>{const s=t.indexOf(e);s>=0&&(t[s]=t[t.length-1],t.length--)},{state:p,onChange:c}=((t,e)=>{const s=((t,e=((t,e)=>t!==e))=>{const s=a(t);let i=new Map(Object.entries(null!=s?s:{}));const r={dispose:[],get:[],set:[],reset:[]},n=()=>{var e;i=new Map(Object.entries(null!==(e=a(t))&&void 0!==e?e:{})),r.reset.forEach((t=>t()))},p=t=>(r.get.forEach((e=>e(t))),i.get(t)),c=(t,s)=>{const n=i.get(t);e(s,n,t)&&(i.set(t,s),r.set.forEach((e=>e(t,s,n))))},l="undefined"==typeof Proxy?{}:new Proxy(s,{get:(t,e)=>p(e),ownKeys:t=>Array.from(i.keys()),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),has:(t,e)=>i.has(e),set:(t,e,s)=>(c(e,s),!0)}),d=(t,e)=>(r[t].push(e),()=>{o(r[t],e)});return{state:l,get:p,set:c,on:d,onChange:(e,s)=>{const i=d("set",((t,i)=>{t===e&&s(i)})),r=d("reset",(()=>s(a(t)[e])));return()=>{i(),r()}},use:(...t)=>{const e=t.reduce(((t,e)=>(e.set&&t.push(d("set",e.set)),e.get&&t.push(d("get",e.get)),e.reset&&t.push(d("reset",e.reset)),e.dispose&&t.push(d("dispose",e.dispose)),t)),[]);return()=>e.forEach((t=>t()))},dispose:()=>{r.dispose.forEach((t=>t())),n()},reset:n,forceUpdate:t=>{const e=i.get(t);r.set.forEach((s=>s(t,e,e)))}}})(t,e);return s.use((()=>{if("function"!=typeof i.a)return{};const t=new Map;return{dispose:()=>t.clear(),get:e=>{const s=(0,i.a)();s&&((t,e,s)=>{const i=t.get(e);i?i.includes(s)||i.push(s):t.set(e,[s])})(t,e,s)},set:e=>{const s=t.get(e);s&&t.set(e,s.filter(i.f)),n(t)},reset:()=>{t.forEach((t=>t.forEach(i.f))),n(t)}}})()),s})({})}}]);