"use strict";(self.webpackChunksentinel_docs=self.webpackChunksentinel_docs||[]).push([[8861],{7641:(t,e,i)=>{i.d(e,{F:()=>a,d:()=>o,i:()=>r,u:()=>n});var s=i(35189);const a={PLAY_PARTICIPANT_TILE_VIDEO_ON_PAUSE:"play_participant_tile_video_on_pause",DISABLE_EMOJI_PICKER:"disable_emoji_picker",FEAT_PAGINATED_CHAT:"feat_paginated_chat",LOG_PLAYING_FAILURES:"log_playing_failures",FEAT_CHANNEL_CHAT:"feat_channel_chat",DISABLE_KICKING:"disable_kicking",ADMIN_CANTREMOVE_ADMIN:"admin_cantremove_admin",CANTINVITE_VIEWER:"cantinvite_viewer",PINNED_MESSAGES:"pinned_msgs"},r=t=>t.connectedMeetings.supportsConnectedMeetings,n=t=>{var e;return"CHAT"===(null==t?void 0:t.meta.viewType)||(0,s.s)(t)||(null===(e=null==t?void 0:t.__internals__)||void 0===e?void 0:e.features.hasFeature("feat_paginated_chat"))},o=t=>{var e,i;return(null===(e=null==t?void 0:t.__internals__)||void 0===e?void 0:e.browserSpecs.isFirefox())&&(null===(i=null==t?void 0:t.__internals__)||void 0===i?void 0:i.features.hasFeature("disable_firefox_setting_sink_id"))}},8263:(t,e,i)=>{i.d(e,{o:()=>c,s:()=>d});var s=i(26786),a=i(55055);const r=t=>!("isConnected"in t)||t.isConnected,n=((t,e)=>{let i;return(...s)=>{i&&clearTimeout(i),i=setTimeout((()=>{i=0,t(...s)}),e)}})((t=>{for(let e of t.keys())t.set(e,t.get(e).filter(r))}),2e3),o=t=>"function"==typeof t?t():t,l=(t,e)=>{const i=t.indexOf(e);i>=0&&(t[i]=t[t.length-1],t.length--)},{state:d,onChange:c}=((t,e)=>{const i=((t,e=(t,e)=>t!==e)=>{const i=o(t);let s=new Map(Object.entries(null!=i?i:{}));const a={dispose:[],get:[],set:[],reset:[]},r=()=>{var e;s=new Map(Object.entries(null!==(e=o(t))&&void 0!==e?e:{})),a.reset.forEach((t=>t()))},n=t=>(a.get.forEach((e=>e(t))),s.get(t)),d=(t,i)=>{const r=s.get(t);e(i,r,t)&&(s.set(t,i),a.set.forEach((e=>e(t,i,r))))},c="undefined"==typeof Proxy?{}:new Proxy(i,{get:(t,e)=>n(e),ownKeys:t=>Array.from(s.keys()),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),has:(t,e)=>s.has(e),set:(t,e,i)=>(d(e,i),!0)}),h=(t,e)=>(a[t].push(e),()=>{l(a[t],e)});return{state:c,get:n,set:d,on:h,onChange:(e,i)=>{const s=h("set",((t,s)=>{t===e&&i(s)})),a=h("reset",(()=>i(o(t)[e])));return()=>{s(),a()}},use:(...t)=>{const e=t.reduce(((t,e)=>(e.set&&t.push(h("set",e.set)),e.get&&t.push(h("get",e.get)),e.reset&&t.push(h("reset",e.reset)),e.dispose&&t.push(h("dispose",e.dispose)),t)),[]);return()=>e.forEach((t=>t()))},dispose:()=>{a.dispose.forEach((t=>t())),r()},reset:r,forceUpdate:t=>{const e=s.get(t);a.set.forEach((i=>i(t,e,e)))}}})(t,e);return i.use((()=>{if("function"!=typeof s.g)return{};const t=new Map;return{dispose:()=>t.clear(),get:e=>{const i=(0,s.g)();i&&((t,e,i)=>{const s=t.get(e);s?s.includes(i)||s.push(i):t.set(e,[i])})(t,e,i)},set:e=>{const i=t.get(e);i&&t.set(e,i.filter(s.f)),n(t)},reset:()=>{t.forEach((t=>t.forEach(s.f))),n(t)}}})()),i})({prefs:(0,a.g)()})},8327:(t,e,i)=>{i.d(e,{M:()=>y,T:()=>o,d:()=>a,e:()=>v,f:()=>d,g:()=>r,h:()=>n,i:()=>l,j:()=>s,k:()=>m,p:()=>w,r:()=>c,s:()=>f});i(55055);const s=t=>{let e=null;try{const i=JSON.parse(t.message),{target:s,message:a}=i;e=void 0===s||void 0===a?t:Object.assign(Object.assign({},t),{targetUserIds:s,message:a})}catch(i){e=t}return e};function a(t,e){return t.localeCompare(e)}function r(t){return t.sort(((t,e)=>t.localeCompare(e))).join("_")}function n(t,e){if(null==t)return!0;for(const i of t)if("file"===i.kind){const t=i.getAsFile();i.type.startsWith("image/")?e("image",t):e("file",t)}}const o="dm__";function l(t){return t.isDirectMessage}function d(t){return[...new Set(t)].sort(a).join("<>")}function c(t){return t.split("").reverse().join("")}const h=/^\*([^*\s]+)\*/,p=/^_([^_\s]+)_/,g=/^~([^~\s]+)~/,u=/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.,~#?&//=]*)/,m=/<blockquote>[.\s\S]*<\/blockquote>\n\n/m;function v(t,e=!1){if(!m.test(t))return"";let i=0,s=13;return e&&(i=12,s=0),t.substring(t.indexOf("<blockquote>")+i,t.indexOf("</blockquote>")+s)}function f(t){return t.replace(m,"")}const y=2e3,b=["<a>","<b>","<i>","<q>","<s>"];function w(t){t=(t=t.split(" ").map((t=>{if(u.test(t)){const e=u.exec(t);t=t.replace(e[0],`<a>${e[0]}</a>`)}else{if(h.test(t)){const e=h.exec(t);t=t.replace(e[0],`<b>${e[1]}</b>`)}if(p.test(t)){const e=p.exec(t);t=t.replace(e[0],`<i>${e[1]}</i>`)}if(g.test(t)){const e=g.exec(t);t=t.replace(e[0],`<s>${e[1]}</s>`)}}return t})).join(" ")).split(" ").map(((t,e)=>">"!==t||0!==e&&">"!==t[e-1]?t:"<q></q>")).join(" ");const[e]=x(t);return e}function x(t,e=""){const i=[];if(0===t.length)return[i,0];let s=0;for(;s<t.length;){if(e.length&&e===t.substring(s,s+e.length))return[i,s+e.length];if(b.includes(t.substring(s,s+3))){const[e,a]=x(t.substring(s+3),`</${t[s+1]}>`);i.push({type:t[s+1],content:1===e.length&&"plain_text"===e[0].type?e[0].content:e}),s+=a+3}else{let e=i[i.length-1];e&&"plain_text"===e.type||(i.push({type:"plain_text",content:""}),e=i[i.length-1]),e.content+=t[s],s++}}return[i,s]}},8424:(t,e,i)=>{i.d(e,{B:()=>k});var s,a,r,n,o,l,d,c,h,p,g,u,m,v,f,y=i(41117),b=function(t,e,i,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!a:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(t,i):a?a.value=i:e.set(t,i),i},w=function(t,e,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(t):s?s.value:e.get(t)},x=function(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(i[s[a]]=t[s[a]])}return i};class k{constructor(){s.add(this),a.set(this,!1),r.set(this,void 0),n.set(this,void 0),o.set(this,void 0),l.set(this,void 0),d.set(this,void 0),c.set(this,void 0),h.set(this,void 0),p.set(this,void 0)}get hasLocalChanges(){return w(this,a,"f")}get currentState(){let t,e=[];return Array.from(w(this,l,"f").keys()).forEach((i=>{const a=w(this,c,"f").get(i);a.isParent?t=Object.assign(Object.assign({},a),{participants:w(this,s,"m",f).call(this,i)}):e.push(Object.assign(Object.assign({},a),{participants:w(this,s,"m",f).call(this,i)}))})),{parentMeeting:t,meetings:e}}get allConnectedMeetings(){return this.currentState.meetings.sort(((t,e)=>t.title.localeCompare(e.title)))}get allParticipants(){return Array.from(w(this,d,"f").values())}get unassignedParticipants(){return w(this,s,"m",f).call(this,w(this,r,"f").parentMeeting.id)}getParticipantsForMeeting(t){return w(this,s,"m",f).call(this,t)}addNewMeeting(){b(this,a,!0,"f");const t=(0,y.c)(),e=x(t,["participants"]);return w(this,s,"m",u).call(this,Object.assign(Object.assign({},e),{isParent:!1})),e}addNewMeetings(t){return Array.from({length:t}).map((()=>this.addNewMeeting()))}updateMeetingTitle(t,e){w(this,c,"f").get(t).title=e,(0,y.i)(t)||w(this,h,"f").add(t)}deleteMeeting(t){b(this,a,!0,"f");const e=w(this,c,"f").get(t),i=w(this,s,"m",f).call(this,e.id).map(y.p);this.assignParticipantsToMeeting(i,w(this,r,"f").parentMeeting.id),w(this,c,"f").delete(e.id),w(this,l,"f").delete(e.id),(0,y.i)(e.id)||w(this,p,"f").add(e.id)}assignParticipantsToMeeting(t,e){return b(this,a,!0,"f"),t.forEach((t=>{const i=w(this,n,"f").get(t);w(this,l,"f").get(i).delete(t),w(this,l,"f").get(e).add(t),w(this,n,"f").set(t,e)})),this.currentState}assignParticipantsRandomly(){const t=(0,y.s)(this.unassignedParticipants,this.allConnectedMeetings.length);return this.allConnectedMeetings.forEach(((e,i)=>{const s=t[i];s&&0!==s.length&&this.assignParticipantsToMeeting(s.map((t=>t.customParticipantId)),e.id)})),this.currentState}unassignParticipants(t){const e=w(this,r,"f").parentMeeting.id;return this.assignParticipantsToMeeting(t,e)}unassignAllParticipants(){const t=w(this,r,"f").parentMeeting.id,e=this.allParticipants.map(y.p);return this.assignParticipantsToMeeting(e,t)}updateCurrentState(t){w(this,a,"f")||w(this,s,"m",g).call(this,t),[t.parentMeeting,...t.meetings].forEach(((t,e)=>{const i=Object.assign(Object.assign({},t),{isParent:0===e});w(this,s,"m",u).call(this,i),t.participants.forEach((t=>{w(this,s,"m",m).call(this,t,i)}))}))}get meetingsToCreate(){return this.allConnectedMeetings.filter((t=>(0,y.i)(t.id))).map((({id:t,title:e})=>({id:t,title:e})))}get meetingsToUpdate(){return this.allConnectedMeetings.filter((t=>w(this,h,"f").has(t.id))).map((({id:t,title:e})=>({id:t,title:e})))}get meetingsToDelete(){return Array.from(w(this,p,"f"))}get participantsToMove(){const t=new Map;return Array.from(w(this,n,"f").keys()).forEach((e=>{const i=w(this,o,"f").get(e),s=w(this,n,"f").get(e);if(i===s)return;const a=`${i}__${s}`;t.has(a)||t.set(a,[]);const r=w(this,d,"f").get(e);t.get(a).push(r.id)})),Array.from(t.keys()).map((e=>{const[i,s]=e.split("__");return{sourceMeetingId:i,destinationMeetingId:s,participantIds:t.get(e)}}))}async applyChanges(t){const e=0!==this.meetingsToCreate.length?t.connectedMeetings.createMeetings(this.meetingsToCreate):Promise.resolve([]),i=0!==this.meetingsToUpdate.length?t.connectedMeetings.updateMeetings(this.meetingsToUpdate):Promise.resolve(),[a]=await Promise.all([e,i]);a&&a.forEach((t=>{this.meetingsToCreate.forEach((e=>{e.title===t.title&&w(this,s,"m",v).call(this,w(this,c,"f").get(e.id),t.id)}))})),0!==this.participantsToMove.length&&this.participantsToMove.forEach((({sourceMeetingId:e,destinationMeetingId:i,participantIds:s})=>{t.connectedMeetings.moveParticipants(e,i,s)})),0!==this.meetingsToDelete.length&&t.connectedMeetings.deleteMeetings(this.meetingsToDelete)}discardChanges(){return b(this,a,!1,"f"),this.updateCurrentState(w(this,r,"f")),this.currentState}}a=new WeakMap,r=new WeakMap,n=new WeakMap,o=new WeakMap,l=new WeakMap,d=new WeakMap,c=new WeakMap,h=new WeakMap,p=new WeakMap,s=new WeakSet,g=function(t){b(this,r,t,"f"),b(this,c,new Map,"f"),b(this,d,new Map,"f"),b(this,h,new Set,"f"),b(this,p,new Set,"f"),b(this,l,new Map,"f"),b(this,n,new Map,"f"),b(this,o,new Map,"f"),b(this,o,new Map,"f"),w(this,r,"f").parentMeeting.participants.forEach((t=>{w(this,o,"f").set((0,y.p)(t),w(this,r,"f").parentMeeting.id)})),w(this,r,"f").meetings.forEach((t=>{t.participants.forEach((e=>{w(this,o,"f").set((0,y.p)(e),t.id)}))}))},u=function(t){w(this,c,"f").has(t.id)||(w(this,c,"f").set(t.id,t),w(this,l,"f").set(t.id,new Set))},m=function(t,e){w(this,d,"f").has((0,y.p)(t))||(w(this,d,"f").set((0,y.p)(t),t),w(this,n,"f").set((0,y.p)(t),e.id),w(this,l,"f").get(e.id).add((0,y.p)(t)))},v=function(t,e){const i=t.id;w(this,s,"m",u).call(this,Object.assign(Object.assign({},t),{id:e})),w(this,c,"f").delete(i);const a=w(this,l,"f").get(i);w(this,l,"f").set(e,a),w(this,l,"f").delete(i),Array.from(w(this,n,"f").keys()).forEach((t=>{w(this,n,"f").get(t)===i&&w(this,n,"f").set(t,e)}))},f=function(t){return Array.from(w(this,l,"f").get(t)).map((t=>w(this,d,"f").get(t)))}},8861:(t,e,i)=>{i.r(e),i.d(e,{BreakoutRoomsManager:()=>qe.B,DyteAi:()=>g,DyteAiChat:()=>u,DyteAiHome:()=>m,DyteAiToggle:()=>v,DyteAiTranscriptions:()=>f,DyteAudioGrid:()=>y,DyteAudioTile:()=>b,DyteAudioVisualizer:()=>w,DyteAvatar:()=>x,DyteBreakoutRoomManager:()=>k,DyteBreakoutRoomParticipants:()=>S,DyteBreakoutRoomsManager:()=>_,DyteBreakoutRoomsToggle:()=>C,DyteBroadcastMessageModal:()=>P,DyteButton:()=>L,DyteCameraSelector:()=>T,DyteCameraToggle:()=>E,DyteCaptionToggle:()=>A,DyteChannelCreator:()=>M,DyteChannelDetails:()=>R,DyteChannelHeader:()=>D,DyteChannelSelectorUi:()=>I,DyteChannelSelectorView:()=>O,DyteChat:()=>$,DyteChatComposerUi:()=>U,DyteChatComposerView:()=>F,DyteChatMessage:()=>z,DyteChatMessagesUi:()=>N,DyteChatMessagesUiPaginated:()=>j,DyteChatSearchResults:()=>B,DyteChatSelectorUi:()=>H,DyteChatToggle:()=>V,DyteClock:()=>G,DyteConfirmationModal:()=>q,DyteControlbar:()=>Z,DyteControlbarButton:()=>K,DyteCounter:()=>W,DyteDebugger:()=>Y,DyteDebuggerAudio:()=>Q,DyteDebuggerScreenshare:()=>J,DyteDebuggerSystem:()=>X,DyteDebuggerToggle:()=>tt,DyteDebuggerVideo:()=>et,DyteDialog:()=>it,DyteDialogManager:()=>st,DyteDraftAttachmentView:()=>at,DyteEmojiPicker:()=>rt,DyteEmojiPickerButton:()=>nt,DyteEndedScreen:()=>ot,DyteFileDropzone:()=>lt,DyteFileMessage:()=>dt,DyteFileMessageView:()=>ct,DyteFilePickerButton:()=>ht,DyteFullscreenToggle:()=>pt,DyteGrid:()=>gt,DyteGridPagination:()=>ut,DyteHeader:()=>mt,DyteIcon:()=>vt,DyteIdleScreen:()=>ft,DyteImageMessage:()=>yt,DyteImageMessageView:()=>bt,DyteImageViewer:()=>wt,DyteInformationTooltip:()=>xt,DyteJoinStage:()=>kt,DyteLeaveButton:()=>St,DyteLeaveMeeting:()=>_t,DyteLivestreamIndicator:()=>Ct,DyteLivestreamPlayer:()=>Pt,DyteLivestreamToggle:()=>Lt,DyteLogo:()=>Tt,DyteMarkdownView:()=>Et,DyteMeeting:()=>At,DyteMeetingTitle:()=>Mt,DyteMenu:()=>Rt,DyteMenuItem:()=>Dt,DyteMenuList:()=>It,DyteMessageListView:()=>Ot,DyteMessageView:()=>$t,DyteMicToggle:()=>Ut,DyteMicrophoneSelector:()=>Ft,DyteMixedGrid:()=>zt,DyteMoreToggle:()=>Nt,DyteMuteAllButton:()=>jt,DyteMuteAllConfirmation:()=>Bt,DyteNameTag:()=>Ht,DyteNetworkIndicator:()=>Vt,DyteNotification:()=>Gt,DyteNotifications:()=>qt,DyteNotificationsAudio:()=>Qe.D,DyteOverlayModal:()=>Zt,DytePaginatedList:()=>Kt,DyteParticipant:()=>Wt,DyteParticipantCount:()=>Yt,DyteParticipantSetup:()=>Qt,DyteParticipantTile:()=>Jt,DyteParticipants:()=>Xt,DyteParticipantsAudio:()=>te,DyteParticipantsStageList:()=>ee,DyteParticipantsStageQueue:()=>ie,DyteParticipantsToggle:()=>se,DyteParticipantsViewerList:()=>ae,DyteParticipantsWaitingList:()=>re,DytePermissionsMessage:()=>ne,DytePipToggle:()=>oe,DytePluginMain:()=>le,DytePlugins:()=>de,DytePluginsToggle:()=>ce,DytePoll:()=>he,DytePollForm:()=>pe,DytePolls:()=>ge,DytePollsToggle:()=>ue,DyteRecordingIndicator:()=>me,DyteRecordingToggle:()=>ve,DyteScreenShareToggle:()=>fe,DyteScreenshareView:()=>ye,DyteSettings:()=>be,DyteSettingsAudio:()=>we,DyteSettingsToggle:()=>xe,DyteSettingsVideo:()=>ke,DyteSetupScreen:()=>Se,DyteSidebar:()=>_e,DyteSidebarUi:()=>Ce,DyteSimpleGrid:()=>Pe,DyteSpeakerSelector:()=>Le,DyteSpinner:()=>Te,DyteSpotlightGrid:()=>Ee,DyteSpotlightIndicator:()=>Ae,DyteStage:()=>Me,DyteStageToggle:()=>Re,DyteSwitch:()=>De,DyteTabBar:()=>Ie,DyteTextComposerView:()=>Oe,DyteTextField:()=>$e,DyteTextMessage:()=>Ue,DyteTextMessageView:()=>Fe,DyteTooltip:()=>ze,DyteTranscript:()=>Ne,DyteTranscripts:()=>je,DyteUIBuilder:()=>si,DyteUiProvider:()=>Be,DyteViewerCount:()=>He,DyteVirtualizedParticipantList:()=>Ve,DyteWaitingScreen:()=>Ge,defaultConfig:()=>Ke.d,defaultIconPack:()=>We.d,defaultLanguage:()=>Ye.d,extendConfig:()=>Ze.e,generateConfig:()=>Ze.g,provideDyteDesignSystem:()=>Ze.p,registerAddons:()=>ai,sendNotification:()=>Je,useLanguage:()=>Ye.u});var s=i(96540);const a=t=>t.replace(/([A-Z])/g,(t=>`-${t[0].toLowerCase()}`)),r=(t,e,i)=>{const s=e.className||e.class,a=i.className||i.class,r=l(t),n=l(s?s.split(" "):[]),o=l(a?a.split(" "):[]),d=[];return r.forEach((t=>{n.has(t)?(d.push(t),n.delete(t)):o.has(t)||d.push(t)})),n.forEach((t=>d.push(t))),d.join(" ")},n=t=>{if("undefined"==typeof document)return!0;{const e="on"+t;let i=e in document;if(!i){const t=document.createElement("div");t.setAttribute(e,"return;"),i="function"==typeof t[e]}return i}},o=(t,e,i)=>{const s=t.__events||(t.__events={}),a=s[e];a&&t.removeEventListener(e,a),t.addEventListener(e,s[e]=function(t){i&&i.call(this,t)})},l=t=>{const e=new Map;return t.forEach((t=>e.set(t,t))),e},d=(...t)=>e=>{t.forEach((t=>{((t,e)=>{"function"==typeof t?t(e):null!=t&&(t.current=e)})(t,e)}))};var c=function(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(i[s[a]]=t[s[a]])}return i};const h=(t,e,i,l)=>{void 0!==l&&l();const h=t.toLowerCase().split("-").map((t=>t.charAt(0).toUpperCase()+t.slice(1))).join("");const p=class extends s.Component{constructor(t){super(t),this.setComponentElRef=t=>{this.componentEl=t}}componentDidMount(){this.componentDidUpdate(this.props)}componentDidUpdate(t){((t,e,i={})=>{if(t instanceof Element){const s=r(t.classList,e,i);""!==s&&(t.className=s),Object.keys(e).forEach((i=>{if("children"!==i&&"style"!==i&&"ref"!==i&&"class"!==i&&"className"!==i&&"forwardedRef"!==i)if(0===i.indexOf("on")&&i[2]===i[2].toUpperCase()){const s=i.substring(2),a=s[0].toLowerCase()+s.substring(1);n(a)||o(t,a,e[i])}else t[i]=e[i],"string"==typeof e[i]&&t.setAttribute(a(i),e[i])}))}})(this.componentEl,this.props,t)}render(){const e=this.props,{children:r,forwardedRef:o,style:l,className:h,ref:p}=e,g=c(e,["children","forwardedRef","style","className","ref"]);let u=Object.keys(g).reduce(((t,e)=>{const i=g[e];if(0===e.indexOf("on")&&e[2]===e[2].toUpperCase()){const s=e.substring(2).toLowerCase();"undefined"!=typeof document&&n(s)&&(t[e]=i)}else{const s=typeof i;"string"!==s&&"boolean"!==s&&"number"!==s||(t[a(e)]=i)}return t}),{});i&&(u=i(this.props,u));const m=Object.assign(Object.assign({},u),{ref:d(o,this.setComponentElRef),style:l});return(0,s.createElement)(t,m,r)}static get displayName(){return h}};return e&&(p.contextType=e),((t,e)=>{const i=(e,i)=>s.createElement(t,Object.assign({},e,{forwardedRef:i}));return i.displayName=e,s.forwardRef(i)})(p,h)};i(40961);var p=i(62443);!function(){if("undefined"!=typeof window&&void 0!==window.Reflect&&void 0!==window.customElements){var t=HTMLElement;window.HTMLElement=function(){return Reflect.construct(t,[],this.constructor)},HTMLElement.prototype=t.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,t)}}(),(0,p.u)();const g=h("dyte-ai"),u=h("dyte-ai-chat"),m=h("dyte-ai-home"),v=h("dyte-ai-toggle"),f=h("dyte-ai-transcriptions"),y=h("dyte-audio-grid"),b=h("dyte-audio-tile"),w=h("dyte-audio-visualizer"),x=h("dyte-avatar"),k=h("dyte-breakout-room-manager"),S=h("dyte-breakout-room-participants"),_=h("dyte-breakout-rooms-manager"),C=h("dyte-breakout-rooms-toggle"),P=h("dyte-broadcast-message-modal"),L=h("dyte-button"),T=h("dyte-camera-selector"),E=h("dyte-camera-toggle"),A=h("dyte-caption-toggle"),M=h("dyte-channel-creator"),R=h("dyte-channel-details"),D=h("dyte-channel-header"),I=h("dyte-channel-selector-ui"),O=h("dyte-channel-selector-view"),$=h("dyte-chat"),U=h("dyte-chat-composer-ui"),F=h("dyte-chat-composer-view"),z=h("dyte-chat-message"),N=h("dyte-chat-messages-ui"),j=h("dyte-chat-messages-ui-paginated"),B=h("dyte-chat-search-results"),H=h("dyte-chat-selector-ui"),V=h("dyte-chat-toggle"),G=h("dyte-clock"),q=h("dyte-confirmation-modal"),Z=h("dyte-controlbar"),K=h("dyte-controlbar-button"),W=h("dyte-counter"),Y=h("dyte-debugger"),Q=h("dyte-debugger-audio"),J=h("dyte-debugger-screenshare"),X=h("dyte-debugger-system"),tt=h("dyte-debugger-toggle"),et=h("dyte-debugger-video"),it=h("dyte-dialog"),st=h("dyte-dialog-manager"),at=h("dyte-draft-attachment-view"),rt=h("dyte-emoji-picker"),nt=h("dyte-emoji-picker-button"),ot=h("dyte-ended-screen"),lt=h("dyte-file-dropzone"),dt=h("dyte-file-message"),ct=h("dyte-file-message-view"),ht=h("dyte-file-picker-button"),pt=h("dyte-fullscreen-toggle"),gt=h("dyte-grid"),ut=h("dyte-grid-pagination"),mt=h("dyte-header"),vt=h("dyte-icon"),ft=h("dyte-idle-screen"),yt=h("dyte-image-message"),bt=h("dyte-image-message-view"),wt=h("dyte-image-viewer"),xt=h("dyte-information-tooltip"),kt=h("dyte-join-stage"),St=h("dyte-leave-button"),_t=h("dyte-leave-meeting"),Ct=h("dyte-livestream-indicator"),Pt=h("dyte-livestream-player"),Lt=h("dyte-livestream-toggle"),Tt=h("dyte-logo"),Et=h("dyte-markdown-view"),At=h("dyte-meeting"),Mt=h("dyte-meeting-title"),Rt=h("dyte-menu"),Dt=h("dyte-menu-item"),It=h("dyte-menu-list"),Ot=h("dyte-message-list-view"),$t=h("dyte-message-view"),Ut=h("dyte-mic-toggle"),Ft=h("dyte-microphone-selector"),zt=h("dyte-mixed-grid"),Nt=h("dyte-more-toggle"),jt=h("dyte-mute-all-button"),Bt=h("dyte-mute-all-confirmation"),Ht=h("dyte-name-tag"),Vt=h("dyte-network-indicator"),Gt=h("dyte-notification"),qt=h("dyte-notifications"),Zt=h("dyte-overlay-modal"),Kt=h("dyte-paginated-list"),Wt=h("dyte-participant"),Yt=h("dyte-participant-count"),Qt=h("dyte-participant-setup"),Jt=h("dyte-participant-tile"),Xt=h("dyte-participants"),te=h("dyte-participants-audio"),ee=h("dyte-participants-stage-list"),ie=h("dyte-participants-stage-queue"),se=h("dyte-participants-toggle"),ae=h("dyte-participants-viewer-list"),re=h("dyte-participants-waiting-list"),ne=h("dyte-permissions-message"),oe=h("dyte-pip-toggle"),le=h("dyte-plugin-main"),de=h("dyte-plugins"),ce=h("dyte-plugins-toggle"),he=h("dyte-poll"),pe=h("dyte-poll-form"),ge=h("dyte-polls"),ue=h("dyte-polls-toggle"),me=h("dyte-recording-indicator"),ve=h("dyte-recording-toggle"),fe=h("dyte-screen-share-toggle"),ye=h("dyte-screenshare-view"),be=h("dyte-settings"),we=h("dyte-settings-audio"),xe=h("dyte-settings-toggle"),ke=h("dyte-settings-video"),Se=h("dyte-setup-screen"),_e=h("dyte-sidebar"),Ce=h("dyte-sidebar-ui"),Pe=h("dyte-simple-grid"),Le=h("dyte-speaker-selector"),Te=h("dyte-spinner"),Ee=h("dyte-spotlight-grid"),Ae=h("dyte-spotlight-indicator"),Me=h("dyte-stage"),Re=h("dyte-stage-toggle"),De=h("dyte-switch"),Ie=h("dyte-tab-bar"),Oe=h("dyte-text-composer-view"),$e=h("dyte-text-field"),Ue=h("dyte-text-message"),Fe=h("dyte-text-message-view"),ze=h("dyte-tooltip"),Ne=h("dyte-transcript"),je=h("dyte-transcripts"),Be=h("dyte-ui-provider"),He=h("dyte-viewer-count"),Ve=h("dyte-virtualized-participant-list"),Ge=h("dyte-waiting-screen");i(8263);var qe=i(8424),Ze=i(73726),Ke=i(50975),We=i(85621),Ye=i(33592),Qe=i(70010);i(8327),i(26786),i(55055),i(41117),i(7641),i(35189),i(61604),i(49583);const Je=(t,e=void 0)=>{if("undefined"==typeof document)return!1;const i=new CustomEvent("dyteNotification",{detail:Object.assign(Object.assign({},t),{playSound:e}),composed:!0});return document.dispatchEvent(i)};function Xe(t){return e=>Array.isArray(e)?e[0]===t:e===t}function ti(t){return e=>Array.isArray(e)?e[0]!==t:e!==t}function ei(t){return t.replace(/([a-z])([A-Z])/g,(t=>`${t[0]}-${t[1]}`.toLowerCase()))}class ii{constructor(t,e,i){this.elem=t,this.config=e,this.keyString=i}add(t,e={}){var i;let s=t=ei(t);return Object.keys(e).length>0&&(s=[t,e]),Array.isArray(this.elem)?this.elem.push(s):"children"in this.elem&&Array.isArray(this.elem.children)?this.elem.children=[...this.elem.children,s]:"remove"in this.elem&&Array.isArray(this.elem.remove)&&this.elem.remove.find(Xe(t))?this.elem.remove=this.elem.remove.filter(ti(t)):("add"in this.elem||(this.elem.add=[]),null===(i=this.elem.add)||void 0===i||i.push(s)),this}remove(t){var e;if(t=ei(t),Array.isArray(this.elem)){const e=this.elem.findIndex(Xe(t));e>-1&&this.elem.splice(e,1)}else"children"in this.elem&&Array.isArray(this.elem.children)?this.elem.children=this.elem.children.filter(ti(t)):"add"in this.elem&&Array.isArray(this.elem.add)&&this.elem.add.find((e=>e===t))?this.elem.add=this.elem.add.filter(ti(t)):("remove"in this.elem||(this.elem.remove=[]),null===(e=this.elem.remove)||void 0===e||e.push(t));return this}set style(t){console.log(t)}setChildrenProps(t,e){console.log(this.keyString,t,e)}getChildrenProps(t){return console.log(this.keyString,t),{}}replace(t){console.log(this.config,t)}}class si{constructor(t){this.config=t||Ke.d}find(t,e={}){t=ei(t);const i=[],s=[];Object.keys(e||{}).forEach((t=>{"boolean"==typeof e[t]?i.push(t):s.push([t,e[t]])})),i.sort();const a=this.config.root;if(void 0===a)return;let r=t,n="";i.length>0&&(n=`.${i.join(".")}`,r=`${t}${n}`,Array.isArray(a[t])&&(a[t]={states:[],children:a[t]}),void 0===a[t].states&&(a[t].states=[]),i.forEach((e=>{var i,s;-1===(null===(i=a[t].states)||void 0===i?void 0:i.indexOf(e))&&(null===(s=a[t].states)||void 0===s||s.push(e))}))),s.length>0&&s.forEach((e=>{const i=`[${e[0]}=${e[1]}]`;r=`${t}${i}${n}`,Array.isArray(a[t])&&(a[t]={state:e[0],children:a[t]})}));let o=a[r];return void 0===o&&(a[r]={},o=a[r]),new ii(o,this.config,r)}build(){return this.config}}function ai(t,e,i){if(!i){const t=(0,Ze.g)(e.self.config,e);i=t.config}return t.map((t=>{i=t.register(i,e,(t=>new si(t)))})),i}},26786:(t,e,i)=>{i.d(e,{F:()=>st,H:()=>f,a:()=>x,c:()=>k,f:()=>J,g:()=>Y,h:()=>m,r:()=>nt,w:()=>bt});let s,a,r,n=!1,o=!1,l=!1,d=!1,c=null,h=!1;const p="http://www.w3.org/1999/xlink",g={},u=t=>"object"===(t=typeof t)||"function"===t,m=(t,e,...i)=>{let s=null,a=null,r=null,n=!1,o=!1;const l=[],d=e=>{for(let i=0;i<e.length;i++)s=e[i],Array.isArray(s)?d(s):null!=s&&"boolean"!=typeof s&&((n="function"!=typeof t&&!u(s))&&(s=String(s)),n&&o?l[l.length-1].$text$+=s:l.push(n?v(null,s):s),o=n)};if(d(i),e){e.key&&(a=e.key),e.name&&(r=e.name);{const t=e.className||e.class;t&&(e.class="object"!=typeof t?t:Object.keys(t).filter((e=>t[e])).join(" "))}}if("function"==typeof t)return t(null===e?{}:e,l,y);const c=v(t,null);return c.$attrs$=e,l.length>0&&(c.$children$=l),c.$key$=a,c.$name$=r,c},v=(t,e)=>{const i={$flags$:0,$tag$:t,$text$:e,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null};return i},f={},y={forEach:(t,e)=>t.map(b).forEach(e),map:(t,e)=>t.map(b).map(e).map(w)},b=t=>({vattrs:t.$attrs$,vchildren:t.$children$,vkey:t.$key$,vname:t.$name$,vtag:t.$tag$,vtext:t.$text$}),w=t=>{if("function"==typeof t.vtag){const e=Object.assign({},t.vattrs);return t.vkey&&(e.key=t.vkey),t.vname&&(e.name=t.vname),m(t.vtag,e,...t.vchildren||[])}const e=v(t.vtag,t.vtext);return e.$attrs$=t.vattrs,e.$children$=t.vchildren,e.$key$=t.vkey,e.$name$=t.vname,e},x=t=>rt(t).$hostElement$,k=(t,e,i)=>{const s=x(t);return{emit:t=>S(s,e,{bubbles:!!(4&i),composed:!!(2&i),cancelable:!!(1&i),detail:t})}},S=(t,e,i)=>{const s=pt.ce(e,i);return t.dispatchEvent(s),s},_=new WeakMap,C=t=>{const e=t.$cmpMeta$,i=t.$hostElement$,s=e.$flags$,a=(e.$tagName$,()=>{}),r=((t,e)=>{let i=P(e);const s=dt.get(i);if(t=11===t.nodeType?t:ht,s)if("string"==typeof s){t=t.head||t;let e,a=_.get(t);a||_.set(t,a=new Set),a.has(i)||(e=ht.createElement("style"),e.innerHTML=s,t.insertBefore(e,t.querySelector("link")),a&&a.add(i))}else t.adoptedStyleSheets.includes(s)||(t.adoptedStyleSheets=[...t.adoptedStyleSheets,s]);return i})(i.shadowRoot?i.shadowRoot:i.getRootNode(),e);10&s&&(i["s-sc"]=r,i.classList.add(r+"-h")),a()},P=(t,e)=>"sc-"+t.$tagName$,L=(t,e,i,s,a,r)=>{if(i!==s){let o=ot(t,e),l=e.toLowerCase();if("class"===e){const e=t.classList,a=E(i),r=E(s);e.remove(...a.filter((t=>t&&!r.includes(t)))),e.add(...r.filter((t=>t&&!a.includes(t))))}else if("style"===e){for(const e in i)s&&null!=s[e]||(e.includes("-")?t.style.removeProperty(e):t.style[e]="");for(const e in s)i&&s[e]===i[e]||(e.includes("-")?t.style.setProperty(e,s[e]):t.style[e]=s[e])}else if("key"===e);else if("ref"===e)s&&s(t);else if(o||"o"!==e[0]||"n"!==e[1]){const d=u(s);if((o||d&&null!==s)&&!a)try{if(t.tagName.includes("-"))t[e]=s;else{const a=null==s?"":s;"list"===e?o=!1:null!=i&&t[e]==a||(t[e]=a)}}catch(n){}let c=!1;l!==(l=l.replace(/^xlink\:?/,""))&&(e=l,c=!0),null==s||!1===s?!1===s&&""!==t.getAttribute(e)||(c?t.removeAttributeNS(p,e):t.removeAttribute(e)):(!o||4&r||a)&&!d&&(s=!0===s?"":s,c?t.setAttributeNS(p,e,s):t.setAttribute(e,s))}else e="-"===e[2]?e.slice(3):ot(ct,l)?l.slice(2):l[2]+e.slice(3),i&&pt.rel(t,e,i,!1),s&&pt.ael(t,e,s,!1)}},T=/\s/,E=t=>t?t.split(T):[],A=(t,e,i,s)=>{const a=11===e.$elm$.nodeType&&e.$elm$.host?e.$elm$.host:e.$elm$,r=t&&t.$attrs$||g,n=e.$attrs$||g;for(s in r)s in n||L(a,s,r[s],void 0,i,e.$flags$);for(s in n)L(a,s,r[s],n[s],i,e.$flags$)},M=(t,e,i,o)=>{const c=e.$children$[i];let h,p,g,u=0;if(n||(l=!0,"slot"===c.$tag$&&(s&&o.classList.add(s+"-s"),c.$flags$|=c.$children$?2:1)),null!==c.$text$)h=c.$elm$=ht.createTextNode(c.$text$);else if(1&c.$flags$)h=c.$elm$=ht.createTextNode("");else if(h=c.$elm$=ht.createElement(2&c.$flags$?"slot-fb":c.$tag$),A(null,c,d),null!=s&&h["s-si"]!==s&&h.classList.add(h["s-si"]=s),c.$children$)for(u=0;u<c.$children$.length;++u)p=M(t,c,u,h),p&&h.appendChild(p);return h["s-hn"]=r,3&c.$flags$&&(h["s-sr"]=!0,h["s-cr"]=a,h["s-sn"]=c.$name$||"",g=t&&t.$children$&&t.$children$[i],g&&g.$tag$===c.$tag$&&t.$elm$&&R(t.$elm$,!1)),h},R=(t,e)=>{pt.$flags$|=1;const i=t.childNodes;for(let s=i.length-1;s>=0;s--){const t=i[s];t["s-hn"]!==r&&t["s-ol"]&&(U(t).insertBefore(t,$(t)),t["s-ol"].remove(),t["s-ol"]=void 0,l=!0),e&&R(t,e)}pt.$flags$&=-2},D=(t,e,i,s,a,n)=>{let o,l=t["s-cr"]&&t["s-cr"].parentNode||t;for(l.shadowRoot&&l.tagName===r&&(l=l.shadowRoot);a<=n;++a)s[a]&&(o=M(null,i,a,t),o&&(s[a].$elm$=o,l.insertBefore(o,$(e))))},I=(t,e,i,s,a)=>{for(;e<=i;++e)(s=t[e])&&(a=s.$elm$,H(s),o=!0,a["s-ol"]?a["s-ol"].remove():R(a,!0),a.remove())},O=(t,e)=>t.$tag$===e.$tag$&&("slot"===t.$tag$?t.$name$===e.$name$:t.$key$===e.$key$),$=t=>t&&t["s-ol"]||t,U=t=>(t["s-ol"]?t["s-ol"]:t).parentNode,F=(t,e)=>{const i=e.$elm$=t.$elm$,s=t.$children$,a=e.$children$,r=e.$tag$,n=e.$text$;let o;null===n?("slot"===r||A(t,e,d),null!==s&&null!==a?((t,e,i,s)=>{let a,r,n=0,o=0,l=0,d=0,c=e.length-1,h=e[0],p=e[c],g=s.length-1,u=s[0],m=s[g];for(;n<=c&&o<=g;)if(null==h)h=e[++n];else if(null==p)p=e[--c];else if(null==u)u=s[++o];else if(null==m)m=s[--g];else if(O(h,u))F(h,u),h=e[++n],u=s[++o];else if(O(p,m))F(p,m),p=e[--c],m=s[--g];else if(O(h,m))"slot"!==h.$tag$&&"slot"!==m.$tag$||R(h.$elm$.parentNode,!1),F(h,m),t.insertBefore(h.$elm$,p.$elm$.nextSibling),h=e[++n],m=s[--g];else if(O(p,u))"slot"!==h.$tag$&&"slot"!==m.$tag$||R(p.$elm$.parentNode,!1),F(p,u),t.insertBefore(p.$elm$,h.$elm$),p=e[--c],u=s[++o];else{for(l=-1,d=n;d<=c;++d)if(e[d]&&null!==e[d].$key$&&e[d].$key$===u.$key$){l=d;break}l>=0?(r=e[l],r.$tag$!==u.$tag$?a=M(e&&e[o],i,l,t):(F(r,u),e[l]=void 0,a=r.$elm$),u=s[++o]):(a=M(e&&e[o],i,o,t),u=s[++o]),a&&U(h.$elm$).insertBefore(a,$(h.$elm$))}n>c?D(t,null==s[g+1]?null:s[g+1].$elm$,i,s,o,g):o>g&&I(e,n,c)})(i,s,e,a):null!==a?(null!==t.$text$&&(i.textContent=""),D(i,null,e,a,0,a.length-1)):null!==s&&I(s,0,s.length-1)):(o=i["s-cr"])?o.parentNode.textContent=n:t.$text$!==n&&(i.data=n)},z=t=>{const e=t.childNodes;let i,s,a,r,n,o;for(s=0,a=e.length;s<a;s++)if(i=e[s],1===i.nodeType){if(i["s-sr"])for(n=i["s-sn"],i.hidden=!1,r=0;r<a;r++)if(o=e[r].nodeType,e[r]["s-hn"]!==i["s-hn"]||""!==n){if(1===o&&n===e[r].getAttribute("slot")){i.hidden=!0;break}}else if(1===o||3===o&&""!==e[r].textContent.trim()){i.hidden=!0;break}z(i)}},N=[],j=t=>{let e,i,s,a,r,n,l=0;const d=t.childNodes,c=d.length;for(;l<c;l++){if(e=d[l],e["s-sr"]&&(i=e["s-cr"])&&i.parentNode)for(s=i.parentNode.childNodes,a=e["s-sn"],n=s.length-1;n>=0;n--)i=s[n],i["s-cn"]||i["s-nr"]||i["s-hn"]===e["s-hn"]||(B(i,a)?(r=N.find((t=>t.$nodeToRelocate$===i)),o=!0,i["s-sn"]=i["s-sn"]||a,r?r.$slotRefNode$=e:N.push({$slotRefNode$:e,$nodeToRelocate$:i}),i["s-sr"]&&N.map((t=>{B(t.$nodeToRelocate$,i["s-sn"])&&(r=N.find((t=>t.$nodeToRelocate$===i)),r&&!t.$slotRefNode$&&(t.$slotRefNode$=r.$slotRefNode$))}))):N.some((t=>t.$nodeToRelocate$===i))||N.push({$nodeToRelocate$:i}));1===e.nodeType&&j(e)}},B=(t,e)=>1===t.nodeType?null===t.getAttribute("slot")&&""===e||t.getAttribute("slot")===e:t["s-sn"]===e||""===e,H=t=>{t.$attrs$&&t.$attrs$.ref&&t.$attrs$.ref(null),t.$children$&&t.$children$.map(H)},V=(t,e)=>{const i=t.$hostElement$,d=t.$cmpMeta$,c=t.$vnode$||v(null,null),h=(p=e)&&p.$tag$===f?e:m(null,null,e);var p;if(r=i.tagName,d.$attrsToReflect$&&(h.$attrs$=h.$attrs$||{},d.$attrsToReflect$.map((([t,e])=>h.$attrs$[e]=i[t]))),h.$tag$=null,h.$flags$|=4,t.$vnode$=h,h.$elm$=c.$elm$=i.shadowRoot||i,s=i["s-sc"],a=i["s-cr"],n=!!(1&d.$flags$),o=!1,F(c,h),pt.$flags$|=1,l){let t,e,i,s,a,r;j(h.$elm$);let n=0;for(;n<N.length;n++)t=N[n],e=t.$nodeToRelocate$,e["s-ol"]||(i=ht.createTextNode(""),i["s-nr"]=e,e.parentNode.insertBefore(e["s-ol"]=i,e));for(n=0;n<N.length;n++)if(t=N[n],e=t.$nodeToRelocate$,t.$slotRefNode$){for(s=t.$slotRefNode$.parentNode,a=t.$slotRefNode$.nextSibling,i=e["s-ol"];i=i.previousSibling;)if(r=i["s-nr"],r&&r["s-sn"]===e["s-sn"]&&s===r.parentNode&&(r=r.nextSibling,!r||!r["s-nr"])){a=r;break}(!a&&s!==e.parentNode||e.nextSibling!==a)&&e!==a&&(!e["s-hn"]&&e["s-ol"]&&(e["s-hn"]=e["s-ol"].parentNode.nodeName),s.insertBefore(e,a))}else 1===e.nodeType&&(e.hidden=!0)}o&&z(h.$elm$),pt.$flags$&=-2,N.length=0},G=(t,e)=>{e&&!t.$onRenderResolve$&&e["s-p"]&&e["s-p"].push(new Promise((e=>t.$onRenderResolve$=e)))},q=(t,e)=>{if(t.$flags$|=16,4&t.$flags$)return void(t.$flags$|=512);G(t,t.$ancestorComponent$);return bt((()=>Z(t,e)))},Z=(t,e)=>{const i=(t.$cmpMeta$.$tagName$,()=>{}),s=t.$lazyInstance$;let a;return e?(t.$flags$|=256,t.$queuedListeners$&&(t.$queuedListeners$.map((([t,e])=>tt(s,t,e))),t.$queuedListeners$=null),a=tt(s,"componentWillLoad")):a=tt(s,"componentWillUpdate"),i(),et(a,(()=>K(t,s,e)))},K=async(t,e,i)=>{const s=t.$hostElement$,a=(t.$cmpMeta$.$tagName$,()=>{}),r=s["s-rc"];i&&C(t);const n=(t.$cmpMeta$.$tagName$,()=>{});W(t,e),r&&(r.map((t=>t())),s["s-rc"]=void 0),n(),a();{const e=s["s-p"],i=()=>Q(t);0===e.length?i():(Promise.all(e).then(i),t.$flags$|=4,e.length=0)}},W=(t,e,i)=>{try{c=e,e=e.render(),t.$flags$&=-17,t.$flags$|=2,V(t,e)}catch(s){lt(s,t.$hostElement$)}return c=null,null},Y=()=>c,Q=t=>{t.$cmpMeta$.$tagName$;const e=t.$hostElement$,i=()=>{},s=t.$lazyInstance$,a=t.$ancestorComponent$;tt(s,"componentDidRender"),64&t.$flags$?(tt(s,"componentDidUpdate"),i()):(t.$flags$|=64,it(e),tt(s,"componentDidLoad"),i(),t.$onReadyResolve$(e),a||X()),t.$onInstanceResolve$(e),t.$onRenderResolve$&&(t.$onRenderResolve$(),t.$onRenderResolve$=void 0),512&t.$flags$&&yt((()=>q(t,!1))),t.$flags$&=-517},J=t=>{{const e=rt(t),i=e.$hostElement$.isConnected;return i&&2==(18&e.$flags$)&&q(e,!1),i}},X=t=>{it(ht.documentElement),yt((()=>S(ct,"appload",{detail:{namespace:"dyte-ui-kit"}})))},tt=(t,e,i)=>{if(t&&t[e])try{return t[e](i)}catch(s){lt(s)}},et=(t,e)=>t&&t.then?t.then(e):e(),it=t=>t.classList.add("hydrated"),st=(t,e)=>e,at=new WeakMap,rt=t=>at.get(t),nt=(t,e)=>at.set(e.$lazyInstance$=t,e),ot=(t,e)=>e in t,lt=(t,e)=>(0,console.error)(t,e),dt=new Map,ct="undefined"!=typeof window?window:{},ht=ct.document||{head:{}},pt={$flags$:0,$resourcesUrl$:"",jmp:t=>t(),raf:t=>requestAnimationFrame(t),ael:(t,e,i,s)=>t.addEventListener(e,i,s),rel:(t,e,i,s)=>t.removeEventListener(e,i,s),ce:(t,e)=>new CustomEvent(t,e)},gt=[],ut=[],mt=(t,e)=>i=>{t.push(i),h||(h=!0,e&&4&pt.$flags$?yt(ft):pt.raf(ft))},vt=t=>{for(let i=0;i<t.length;i++)try{t[i](performance.now())}catch(e){lt(e)}t.length=0},ft=()=>{vt(gt),vt(ut),(h=gt.length>0)&&pt.raf(ft)},yt=t=>{return Promise.resolve(e).then(t);var e},bt=mt(ut,!0)},33592:(t,e,i)=>{i.d(e,{d:()=>s,u:()=>a});const s={about_call:"About Call",screen:"Screen",camera:"Camera",leave:"Leave",dismiss:"Dismiss",logo:"Logo",page:"Page",more:"More","page.prev":"Previous Page","page.next":"Next Page",layout:"Layout","layout.auto":"Auto Layout",settings:"Settings",file:"File",image:"Image",connection:"Connection",leave_confirmation:"Are you sure you want to leave the call?",cancel:"Cancel",yes:"Yes","(you)":"(you)",you:"You",everyone:"Everyone",to:"To",mute:"Mute",kick:"Kick",pin:"Pin",pinned:"Pinned",accept:"Accept",unpin:"Unpin",pip_on:"Show PiP",pip_off:"Hide PiP",viewers:"Viewers",join:"Join",joined:"Joined",create:"Create",close:"Close",ask:"Ask",type:"Type",activate:"Activate",requests:"Requests",mic_off:"Mic Off",disable_mic:"Disable Mic",mic_on:"Mic On",enable_mic:"Enable Mic",audio:"Audio",test:"Test",minimize:"Hide Tile",maximize:"Show Tile",mute_all:"Mute all","mute_all.description":"Everyone in the meeting will be muted.","mute_all.header":"Are you sure?","mute_all.allow_unmute":"Allow others to unmute",video_off:"Video Off",disable_video:"Disable Video",video_on:"Video On",enable_video:"Enable Video",video:"Video",offline:"You're offline","offline.description":"Please ensure that you are connected to the internet.",disconnected:"You haven't joined the meeting.",failed:"You've been disconnected","failed.description":"We could not connect you back to the meeting room. Please try rejoining the meeting.","disconnected.description":"Please join the meeting in order to see and interact with other participants.",participants:"Participants","participants.errors.empty_results":"Couldn't find a participant with the specified name or ID.","participants.empty_list":"It looks like nobody is here.","participants.no_pending_requests":"There are no pending requests.","participants.turn_off_video":"Turn off video",polls:"Polls","polls.by":"Poll by","polls.question":"Poll Question","polls.question.placeholder":"What is your poll for?","polls.answers":"Answers","polls.option":"Add an option.","polls.option.placeholder":"Enter an option","polls.results.anon":"Anonymous","polls.results.hide":"Hide results before voting","polls.create":"Create Poll","polls.cancel":"Cancel Poll Creation","polls.empty":"No polls available","polls.errors.question_required":"Question is required.","polls.errors.empty_option":"Empty options not allowed.",screenshare:"Screen Share","screenshare.min_preview":"Minimize Preview","screenshare.max_preview":"Expand Preview","screenshare.shared":"Your screen is being shared.","screenshare.start":"Share Screen","screenshare.stop":"Stop Sharing","screenshare.error.unknown":"An error occured while starting screenshare.","screenshare.error.max_count":"Maximum screen share limit reached.",plugins:"Plugins",perm_denied:"Permission denied by browser.","perm_denied.audio":"Mic Permission denied by browser","perm_denied.video":"Camera Permission denied by browser","perm_denied.screenshare":"Screenshare Permission denied by browser","perm_denied.audio.chrome.message":"In the top navigation bar, click on the icon left to the URL and ensure  'Microphone' permission is checked","perm_denied.video.chrome.message":"In the top navigation bar, click on the icon left to the URL and ensure  'Camera' permission is checked","perm_denied.screenshare.chrome.message":"Under Chrome settings, navigate to 'Privacy and Security > Site Settings > Permissions'. Select 'Screenshare', provide permission and reload this application.","perm_denied.audio.safari.message":"Under Safari settings, navigate to 'Websites > Microphone', provide permission and reload this application.","perm_denied.video.safari.message":"Under Safari settings, navigate to 'Websites > Camera', provide permission and reload this application.","perm_denied.screenshare.safari.message":"Under Safari settings, navigate to 'Websites > Screenshare', provide permission and reload this application.","perm_denied.audio.edge.message":"Under Edge settings, navigate to 'Site Permissions > Microphone', provide permission and reload this application.","perm_denied.video.edge.message":"Under Edge settings, navigate to 'Site Permissions > Camera', provide permission and reload this application.","perm_denied.screenshare.edge.message":"Under Edge settings, navigate to 'Site Permissions > Screenshare', provide permission and reload this application.","perm_denied.audio.microsoft edge.message":"Under Edge settings, navigate to 'Site Permissions > Microphone', provide permission and reload this application.","perm_denied.video.microsoft edge.message":"Under Edge settings, navigate to 'Site Permissions > Camera', provide permission and reload this application.","perm_denied.screenshare.microsoft edge.message":"Under Edge settings, navigate to 'Site Permissions > Screenshare', provide permission and reload this application.","perm_denied.audio.firefox.message":"Under Firefox settings, navigate to 'Privacy and Security > Permissions > Microphone', provide permission and reload this application.","perm_denied.video.firefox.message":"Under Firefox settings, navigate to 'Privacy and Security > Permissions > Camera', provide permission and reload this application.","perm_denied.screenshare.firefox.message":"Under Firefox settings, navigate to 'Privacy and Security > Permissions > Screenshare', provide permission and reload this application.","perm_denied.audio.others.message":"From your browser settings, enable 'Microphone' permissions and reload this application.","perm_denied.video.others.message":"From your browser settings, enable 'Camera' permissions and reload this application.","perm_denied.screenshare.others.message":"From your browser settings, enable 'Screenshare' permissions and reload this application.",perm_sys_denied:"Permission denied by system","perm_sys_denied.audio":"Mic permission denied by system","perm_sys_denied.video":"Camera permission denied by system","perm_sys_denied.screenshare":"Screenshare permission denied by system","perm_sys_denied.audio.macos.message":"Open Apple Menu, Navigate to 'System Settings > Privacy & Security > Microphone'. Allow access to your browser and reload this application.","perm_sys_denied.video.macos.message":"Open Apple Menu, Navigate to 'System Settings > Privacy & Security > Camera'. Allow access to your browser and reload this application.","perm_sys_denied.screenshare.macos.message":"Open Apple Menu, Navigate to 'System Settings > Privacy & Security > Screenshare'. Allow access to your browser and reload this application.","perm_sys_denied.audio.ios.message":"On your iPhone, navigate to 'Settings > Privacy > Microphone', allow access to your browser and reload this application.","perm_sys_denied.video.ios.message":"On your iPhone, navigate to 'Settings > Privacy > Camera', allow access to your browser and reload this application.","perm_sys_denied.screenshare.ios.message":"On your iPhone, navigate to 'Settings > Privacy > Screenshare', allow access to your browser and reload this application.","perm_sys_denied.audio.windows.message":"Go to windows settings, select 'Settings > Privacy > Microphone'. Allow permissions to your browser and reload this application.","perm_sys_denied.video.windows.message":"Go to windows settings, select 'Settings > Privacy > Camera'. Allow permissions to your browser and reload this application.","perm_sys_denied.screenshare.windows.message":"Go to windows settings, select 'Settings > Privacy > Screenshare'. Allow permissions to your browser and reload this application.","perm_sys_denied.audio.android.message":"On you device, navigate to 'Settings > Apps'. Select your browser, allow Microphone permissions and reload this application.","perm_sys_denied.video.android.message":"On you device, navigate to 'Settings > Apps'. Select your browser, allow Camera permissions and reload this application.","perm_sys_denied.screenshare.android.message":"On you device, navigate to 'Settings > Apps'. Select your browser, allow Screenshare permissions and reload this application.","perm_sys_denied.audio.others.message":"Navigate to your system settings. Allow 'Microphone' permissions for your browser and reload this application.","perm_sys_denied.video.others.message":"Navigate to your system settings. Allow 'Camera' permissions for your browser and reload this application.","perm_sys_denied.screenshare.others.message":"Navigate to your system settings. Allow 'Screenshare' permissions for your browser and reload this application.",perm_could_not_start:"Could not capture device.","perm_could_not_start.audio":"Unable to start your Microphone","perm_could_not_start.video":"Unable to start your Camera","perm_could_not_start.screenshare":"Unable to start your Screenshare","perm_could_not_start.audio.message":"Looks like the system could not capture your microphone. Please restart your device or upgrade your browser to fix this.","perm_could_not_start.video.message":"Looks like the system could not capture your camera. Please restart your device or upgrade your browser to fix this.","perm_could_not_start.screenshare.message":"Looks like the system could not capture your screenshare. Please restart your device or upgrade your browser to fix this.",full_screen:"Full Screen","full_screen.exit":"Exit Full Screen","waitlist.header_title":"Waiting","waitlist.body_text":"You are in the waiting room, the host will let you in soon.","waitlist.deny_request":"Deny request","waitlist.accept_request":"Accept request","waitlist.accept_all":"Accept all","stage_request.header_title":"Join Stage Requests","stage_request.deny_request":"Deny request","stage_request.accept_request":"Accept request","stage_request.accept_all":"Accept all","stage_request.deny_all":"Deny all","stage_request.approval_pending":"Pending","stage_request.denied":"Denied","stage_request.request":"Join stage","stage_request.requested":"Requested","stage_request.cancel_request":"Cancel request","stage_request.leave_stage":"Leave stage","stage_request.request_tip":"Request to join the discussion","stage_request.leave_tip":"Leave the stage","stage_request.pending_tip":"Request pending","stage_request.denied_tip":"Rejected request","stage.empty_host":"The stage is empty","stage.empty_host_summary":"You are off stage. You can manage stage request from the participants tab.","stage.empty_viewer":"There is no one on stage","stage.remove_from_stage":"Remove from stage","stage.invited_notification":"has been invited to join stage.","stage.add_to_stage":"Invite to stage","stage.join_title":"Join Stage","stage.join_summary":"You are about to join the stage, your video & audio as shown above will be visible to all participants.","stage.join_cancel":"Cancel","stage.join_confirm":"Join","setup_screen.join_in_as":"Join in as","setup_screen.joining_as":"Joining as","setup_screen.your_name":"Your name","stage.reconnecting":"Reconnecting...","recording.label":"REC","recording.indicator":"This meeting is being recorded.","recording.started":"This meeting is being recorded.","recording.stopped":"Recording for this meeting has been stopped.","recording.paused":"Recording for this meeting has been paused.","recording.error.start":"Error while starting recording.","recording.error.stop":"Error while stopping recording","recording.error.resume":"Error while resuming recording","recording.start":"Start Recording","recording.stop":"Stop Recording","recording.resume":"Resume Recording","recording.starting":"Starting","recording.stopping":"Stopping","recording.loading":"Loading","recording.idle":"Record",audio_playback:"Play Audio","audio_playback.title":"Allow Audio Playback","audio_playback.description":"In order to play audio properly on your device, click the button below.",breakout_rooms:"Breakout Rooms","breakout_rooms.room_config_header":"Create Breakout","breakout_rooms.join_breakout_header":"Join Breakout","breakout_rooms.empty":"Nobody here yet.","breakout_rooms.delete":"Delete Room","breakout_rooms.switch":"Switch","breakout_rooms.main_room":"Main Room","breakout_rooms.shuffle_participants":"Shuffle Participants","breakout_rooms.deselect":"Deselect","breakout_rooms.selected":"selected","breakout_rooms.num_of_rooms":"No. of Rooms","breakout_rooms.approx":"Approx.","breakout_rooms.participants_per_room":"participants/room","breakout_rooms.division_text":"when equally divided.","breakout_rooms.start_breakout":"Start Breakout","breakout_rooms.close_breakout":"Close Breakout","breakout_rooms.update_breakout":"Update Breakout","breakout_rooms.discard_changes":"Discard Changes","breakout_rooms.room":"Room","breakout_rooms.rooms":"Rooms","breakout_rooms.room_name":"Room Name","breakout_rooms.edit_room_name":"Edit Room Name","breakout_rooms.save_room_name":"Save Room Name","breakout_rooms.add_room":"Add","breakout_rooms.add_room_brief":"Add Room","breakout_rooms.select_all":"Select all","breakout_rooms.unassign_all":"Unassign all","breakout_rooms.assign":"Assign","breakout_rooms.assign_participants":"Assign Participants","breakout_rooms.none_assigned":"No participants assigned yet","breakout_rooms.drag_drop_participants":"Drag and drop participants","breakout_rooms.click_drop_participants":"Click here to assign","breakout_rooms.status.assign_multiple":"Assign multiple participants at once by clicking and selecting them","breakout_rooms.status.select_room":"Select a room to assign","breakout_rooms.ephemeral_status.participants_assigned":"Participants assigned","breakout_rooms.ephemeral_status.participants_assigned_randomly":"Participants assigned randomly","breakout_rooms.ephemeral_status.changes_discarded":"Changes discarded","breakout_rooms.confirm_modal.start_breakout.header":"Start breakout rooms?","breakout_rooms.confirm_modal.start_breakout.content":"Once started, all participants will be moved to their assigned rooms.","breakout_rooms.confirm_modal.start_breakout.cancelText":"No, go back","breakout_rooms.confirm_modal.start_breakout.ctaText":"Yes, start","breakout_rooms.confirm_modal.close_breakout.header":"Close breakout rooms?","breakout_rooms.confirm_modal.close_breakout.content":"All breakout rooms will be closed & participants will be moved back to the main room.","breakout_rooms.confirm_modal.close_breakout.ctaText":"Yes, close breakout","breakout_rooms.move_reason.started_msg":"Starting breakout rooms...","breakout_rooms.move_reason.started_desc":"You are being moved to your assigned room","breakout_rooms.move_reason.closed_msg":"Closing Breakout rooms...","breakout_rooms.move_reason.closed_desc":"You are being moved back to the main room","breakout_rooms.move_reason.switch_room":"Joining Breakout Room...","breakout_rooms.move_reason.switch_main_room":"Joining Main Room...","breakout_rooms.all_assigned":"All participants have been assigned","breakout_rooms.empty_main_room":"No more participants in the main room.","breakout_rooms.leave_confirmation":"Are you sure you want to leave the call? You are in a breakout room, you can join the main room too.","breakout_rooms.leave_confirmation.main_room_btn":"Go back to main room",ai:"AI","ai.meeting_ai":"MeetingAI","ai.home":"Home","ai.transcriptions":"Transcriptions","ai.personal":"Personal","ai.caption_view":"Caption View","ai.chat.tooltip":"This conversation will just be visible to you and not to others in the call.","ai.chat.summerise":"Hey AI, summarise this call","ai.chat.agenda":"Hey AI, what is today's agenda?",search:"Search","search.could_not_find":"Couldn't find a participant with the specified name or ID.","search.empty":"It looks like nobody is here.",end:"End Meeting","end.all":"End meeting for all",ended:"The meeting ended.","ended.rejected":"Your request to join the meeting was denied.","ended.left":"You left the meeting.","ended.kicked":"You were removed from the meeting.","ended.disconnected":"The call ended because the connection was lost.","ended.network":"Please check your internet connection and try again.",network:"Network","network.reconnecting":"Connection lost. Trying to reconnect.","network.delay_extended":"Taking too long to reconnect. Please check your network connection.","network.disconnected":"Could not reconnect. Please leave the meeting and try refreshing the window.","network.leaving":"Automatically leaving the meeting in 10 seconds.","network.restored":"Connection restored","network.delay":"Taking too long to reconnect.","network.lost":"Connection lost","network.lost_extended":"Connection lost. Please check your network connection.",livestream:"Livestream","livestream.indicator":"This meeting is being livestreamed.","livestream.skip":"Skip to Live","livestream.idle":"Waiting to go live.","livestream.starting":"Livestream is starting...","livestream.stopping":"Livestream is stopping...","livestream.waiting_on_manual_ingestion":"Please ingest livestream media.","livestream.error.not_supported":"Player not supported.","livestream.error.not_found":"Playback URL not found.","livestream.error.unknown":"An unknown error occured.","livestream.error.sync":"Could not sync livestream please try again later.","livestream.error.start":"Error while starting livestream.","livestream.error.stop":"Error while stopping livestream.","livestream.go_live":"Go Live","livestream.end_live":"End Live","livestream.error":"Error","cta.help":"Need help on how to do this?","cta.continue":"Ignore","cta.reload":"Reload","cta.confirmation":"Are you sure?","cta.system_settings":"Open Settings","remote_access.empty":"There are no remote requests, yet.","remote_access.requests":"The following people have requested remote control to your screen share.","remote_access.allow":"Please select whom you want to give access to.","remote_access.grant":"Grant acess","remote_access.indicator":"Any plugin or screenshare you switch to will sync the change across the meeting",chat:"Chat","chat.new":"New","chat.max_limit_warning":"Max Character Limit","chat.rate_limit_error":"Please wait before you can send another message","chat.new_channel":"Create new channel","chat.channel_name":"Enter channel name","chat.member_name":"Enter member name","chat.add_members":"Add members","chat.delete_msg":"Delete","chat.edit_msg":"Edit","chat.send_msg":"Send message","chat.send_attachment":"Drop files/images to send","chat.send_img":"Send an image","chat.send_file":"Send a file","chat.send_emoji":"Send an emoji","chat.update_msg":"Update message","chat.channel_members":"Channel Members","chat.img.loading":"Loading image","chat.error.img_not_found":"Image not found","chat.error.empty_results":"Couldn't find a member with the specified name.","chat.img.shared_by":"Shared by","chat.reply":"Reply","chat.message_placeholder":"Message..","chat.click_to_send":"Click to send as message","chat.search_msgs":"Search messages","chat.search_conversations":"Search conversations","chat.start_conversation":"Start a conversation..","chat.empty_search":"No messages found","chat.empty_channel":"Send a message to get started","chat.cancel_upload":"Cancel upload","chat.view_chats":"View chats","chat.everyone":"everyone","chat.pinned_msgs":"Pinned messages","chat.toggle_pinned_msgs":"Toggle pinned messages","date.today":"Today","date.yesteday":"Yesterday","date.sunday":"Sunday","date.monday":"Monday","date.tuesday":"Tuesday","date.wednesday":"Wednesday","date.thursday":"Thursday","date.friday":"Friday","date.saturday":"Saturday","list.empty":"No items found","grid.listening":"Listening","transcript.off":"Turn off Transcripts","transcript.on":"Turn on Transcripts","settings.notification_sound":"Notification sound","settings.microphone_input":"Microphone","settings.speaker_output":"Speaker","settings.mirror_video":"Mirror my Video","settings.camera_off":"Camera is off","dialog.close":"Close dialog","notifications.joined":"just joined","notifications.left":"left","notifications.requesting_to_join_meeting":"is requesting to join the meeting","notifications.requested_to_join_stage":"has requested to join stage","notifications.joined_stage":"has joined stage","notifications.request_to_join_accepted":"Request to join accepted","notifications.request_to_join_rejected":"Request to join rejected","notifications.accept":"Accept","notifications.new_poll_created_by":"New poll created by","notifications.connected_to":"Connected to","notifications.plugin_switched_to":"Plugin switched to","notifications.remote_control_requested":"has requested for remote control","notifications.remote_control_request_sent":"Sent remote control request to","notifications.remote_control_request_accepted":"has granted remote control","notifications.remote_control_granted":"Granted remote control to","notifications.remote_control_terminated":"Existing remote control has been terminated","debugger.troubleshooting.label":"Troubleshooting","debugger.quality.good":"Good","debugger.quality.average":"Average","debugger.quality.poor":"Poor","debugger.stats.bitrate.label":"Bitrate","debugger.stats.bitrate.description":"Data transmitted per second, affects quality and file size.","debugger.stats.packet_loss.label":"Packet Loss","debugger.stats.packet_loss.description":"Amount of data lost during transfer","debugger.stats.jitter.label":"Jitter","debugger.stats.jitter.description":"Variance or fluctuation in latency","debugger.stats.cpu_limitations.label":"CPU Limitations","debugger.stats.cpu_limitations.description":"CPU limitations can impact WebRTC call quality and performance.","debugger.stats.bandwidth_limitations.label":"Bandwidth Limitations","debugger.stats.bandwidth_limitations.description":"Slow internet speeds can degrade video quality.","debugger.audio.label":"Audio","debugger.audio.troubleshooting.label":"Audio Troubleshooting","debugger.audio.messages.generating_report":"Generating report. Please wait for a few seconds.","debugger.audio.messages.enable_media":"Please enable mic to see the report.","debugger.audio.sections.network_media":"Network & Media","debugger.video.label":"Video","debugger.video.troubleshooting.label":"Video Troubleshooting","debugger.video.messages.generating_report":"Generating report. Please wait for a few seconds.","debugger.video.messages.enable_media":"Please enable camera to see the report.","debugger.video.sections.network_media":"Network & Media","debugger.screenshare.label":"Screenshare","debugger.screenshare.troubleshooting.label":"Screenshare Troubleshooting","debugger.screenshare.sections.network_media":"Network & Media","debugger.screenshare.messages.generating_report":"Generating report. Please wait for a few seconds.","debugger.screenshare.messages.enable_media":"Please share screen to see the report.","debugger.system.label":"System","debugger.system.troubleshooting.label":"System Troubleshooting","debugger.system.sections.battery":"Battery","debugger.system.battery.level.label":"Battery Level","debugger.system.battery.level.description":"A low battery charge may result in reduced performance.","debugger.system.battery.charging.label":"Battery Charging Status","debugger.system.battery.charging.description":"A device running on power performs optimally.","debugger.system.battery.charging.is_charging":"Charging","debugger.system.battery.charging.is_not_charging":"Not charging"},a=(t=s)=>{const e=Object.assign({},s,t);return t=>{var i;return null!==(i=e[t])&&void 0!==i?i:t}}},35189:(t,e,i)=>{i.d(e,{P:()=>n,a:()=>s,g:()=>l,i:()=>a,s:()=>r});const s=t=>!!r(t)&&("LIVESTREAM"===t.meta.viewType&&"ON_STAGE"!==t.stage.status),a=t=>{var e;return!!r(t)&&("LIVESTREAM"===t.meta.viewType&&(null===(e=null==t?void 0:t.self)||void 0===e?void 0:e.permissions.canLivestream))},r=t=>null==t?void 0:t.livestream;var n,o;function l({meeting:t,hlsLevels:e}){let i=t.self.config.livestreamViewerQualities||[];if(!i.length)return{autoLevelChangeAllowed:!0,levels:e};const s=e.filter((t=>i.includes(t.height)));return s.length?{autoLevelChangeAllowed:!1,levels:s}:{autoLevelChangeAllowed:!0,levels:e}}!function(t){t.BUFFERING="Buffering",t.ENDED="Ended",t.IDLE="Idle",t.PAUSED="Paused",t.PLAYING="Playing",t.READY="Ready"}(n||(n={})),function(t){t.INITIALIZED="PlayerInitialized",t.QUALITY_CHANGED="PlayerQualityChanged",t.DURATION_CHANGED="PlayerDurationChanged",t.VOLUME_CHANGED="PlayerVolumeChanged",t.MUTED_CHANGED="PlayerMutedChanged",t.PLAYBACK_RATE_CHANGED="PlayerPlaybackRateChanged",t.REBUFFERING="PlayerRebuffering",t.AUDIO_BLOCKED="PlayerAudioBlocked",t.PLAYBACK_BLOCKED="PlayerPlaybackBlocked",t.ERROR="PlayerError",t.RECOVERABLE_ERROR="PlayerRecoverableError",t.ANALYTICS_EVENT="PlayerAnalyticsEvent",t.TIME_UPDATE="PlayerTimeUpdate",t.BUFFER_UPDATE="PlayerBufferUpdate",t.SEEK_COMPLETED="PlayerSeekCompleted",t.SESSION_DATA="PlayerSessionData",t.STATE_CHANGED="PlayerStateChanged",t.WORKER_ERROR="PlayerWorkerError",t.METADATA="PlayerMetadata",t.TEXT_CUE="PlayerTextCue",t.TEXT_METADATA_CUE="PlayerTextMetadataCue",t.AD_CUE="PlayerAdCue",t.STREAM_SOURCE_CUE="PlayerStreamSourceCue",t.NETWORK_UNAVAILABLE="PlayerNetworkUnavailable",t.SEGMENT_DISCONTINUITY="PlayerSegmentDiscontinuity",t.SEGMENT_METADATA="PlayerSegmentMetadata",t.PLAYER_METADATA="PlayerMetadata"}(o||(o={}))},41117:(t,e,i)=>{i.d(e,{a:()=>p,c:()=>o,g:()=>h,i:()=>l,p:()=>c,r:()=>r,s:()=>d});var s=i(7641);let a=0;function r(){a=0}const n="temp-";function o(){return{id:`${n}${Math.random().toString(36)}`,title:"Room "+ ++a,participants:[]}}function l(t){return t.includes(n)}function d(t,e){const i=t.length,s=Math.ceil(i/e),a=new Array(e);let r=0;for(let n=0;n<e;n++)a[n]=t.slice(r,r+s),r+=s;return a.filter((t=>t.length))}function c(t){var e;return null!==(e=t.customParticipantId)&&void 0!==e?e:t.clientSpecificId}function h(t){const e=new Map;return[t.self,...t.participants.joined.toArray()].map((t=>{e.set(c(t),t.picture)})),[t.connectedMeetings.parentMeeting,...t.connectedMeetings.meetings].flatMap((t=>t.participants)).map((t=>({id:t.id,customParticipantId:c(t),displayName:t.displayName,displayPictureUrl:""!==t.displayPictureUrl?t.displayPictureUrl:e.get(c(t))})))}const p=t=>{if(!(0,s.i)(t))return!1;const e=t.self.permissions.connectedMeetings;return!!e.canAlterConnectedMeetings||!(!e.canSwitchConnectedMeetings&&!e.canSwitchToParentMeeting)&&t.connectedMeetings.isActive}},41960:(t,e,i)=>{i.d(e,{l:()=>s});const s=console},49583:(t,e,i)=>{i.d(e,{S:()=>n,a:()=>v,b:()=>m,f:()=>s,i:()=>f,r:()=>r});var s="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g,a="object"==typeof self&&self&&self.Object===Object&&self,r=s||a||Function("return this")(),n=r.Symbol,o=Object.prototype,l=o.hasOwnProperty,d=o.toString,c=n?n.toStringTag:void 0;var h=Object.prototype.toString;var p="[object Null]",g="[object Undefined]",u=n?n.toStringTag:void 0;function m(t){return null==t?void 0===t?g:p:u&&u in Object(t)?function(t){var e=l.call(t,c),i=t[c];try{t[c]=void 0;var s=!0}catch(r){}var a=d.call(t);return s&&(e?t[c]=i:delete t[c]),a}(t):function(t){return h.call(t)}(t)}function v(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function f(t){return null!=t&&"object"==typeof t}},50975:(t,e,i)=>{i.d(e,{d:()=>s});const s={designTokens:{spacingBase:4,googleFont:"Inter"},styles:{"dyte-header":{display:"grid",height:"48px",gridTemplateColumns:"repeat(3, 1fr)",gridTemplateRows:"1fr",alignItems:"center"},"dyte-header.sm":{display:"grid",gridArea:"header",gridTemplateColumns:"repeat(2, 1fr)",gridTemplateRows:"1fr",alignItems:"center"},"div#header-left":{display:"flex",alignItems:"center",height:"48px",wordBreak:"break-all"},"dyte-logo":{height:"26px"},"div#header-center":{display:"flex",alignItems:"center",justifyContent:"center",wordBreak:"break-all"},"div#header-right":{display:"flex",alignItems:"center",justifyContent:"flex-end"},"dyte-stage":{display:"flex",flex:"1"},"dyte-grid":{flex:"1",height:"auto"},"dyte-controlbar":{display:"grid",gridTemplateColumns:"repeat(3,1fr)",gridTemplateRows:"1fr",alignItems:"center",padding:"8px"},"dyte-controlbar.sm":{display:"flex",position:"relative",backgroundColor:"rgb(var(--dyte-colors-background-1000, 0 0 0))"},"dyte-controlbar.md":{display:"flex",position:"relative",backgroundColor:"rgb(var(--dyte-colors-background-1000, 0 0 0))"},"div#controlbar-left":{display:"flex",alignItems:"center"},"div#controlbar-center":{display:"flex",alignItems:"center",position:"relative",overflow:"visible",justifyContent:"center"},"div#controlbar-mobile":{display:"flex",flex:"1",alignItems:"center",justifyContent:"center"},"div#controlbar-right":{display:"flex",alignItems:"center",justifyContent:"flex-end"},"dyte-settings":{width:"720px",height:"480px"},"dyte-debugger":{width:"720px",height:"480px"},"dyte-breakout-rooms-manager":{minHeight:"400px",minWidth:"500px",maxWidth:"80%",maxHeight:"480px"},"div#setupcontrols-media":{position:"absolute",bottom:"8px",right:"8px",display:"flex",gap:"4px"},"div#setupcontrols-settings":{position:"absolute",top:"8px",right:"8px",display:"flex",flexDirection:"column",gap:"6px"},"dyte-meeting-title.sm":{marginLeft:"0"},"dyte-clock":{marginRight:"0"}},root:{"dyte-meeting":{state:"meeting",states:["activeSidebar","activeAI"]},"dyte-meeting[meeting=waiting]":["dyte-waiting-screen"],"dyte-meeting[meeting=idle]":["dyte-idle-screen"],"dyte-meeting[meeting=setup]":["dyte-setup-screen","dyte-dialog-manager"],"dyte-meeting[meeting=joined]":["dyte-header","dyte-stage","dyte-controlbar","dyte-participants-audio","dyte-dialog-manager"],"dyte-meeting[meeting=joined].activeSidebar.sm":{add:[["dyte-sidebar",{view:"full-screen"}]]},"dyte-meeting[meeting=joined].activeSidebar.md":{add:[["dyte-sidebar",{view:"full-screen"}]]},"dyte-meeting[meeting=joined].activeAI.sm":{add:[["dyte-ai",{view:"full-screen"}]]},"dyte-meeting[meeting=joined].activeAI.md":{add:[["dyte-ai",{view:"full-screen"}]]},"dyte-meeting[meeting=ended]":["dyte-ended-screen"],"dyte-header":["div#header-left","div#header-center","div#header-right"],"dyte-header.sm":{remove:["div#header-center"]},"div#header-left":["dyte-logo","dyte-recording-indicator","dyte-livestream-indicator"],"div#header-center":["dyte-meeting-title"],"div#header-right":["dyte-grid-pagination","dyte-clock","dyte-participant-count","dyte-viewer-count"],"div#header-left.sm":["dyte-meeting-title","dyte-recording-indicator","dyte-livestream-indicator"],"dyte-stage":{states:["activeSidebar","activeAI"],children:["dyte-grid","dyte-notifications","dyte-transcripts"]},"dyte-stage.activeSidebar":{add:[["dyte-sidebar",{view:"sidebar"}]]},"dyte-stage.activeSidebar.sm":{remove:["dyte-sidebar"]},"dyte-stage.activeAI":{add:[["dyte-ai",{view:"sidebar"}]]},"dyte-stage.activeAI.sm":{remove:["dyte-ai"]},"dyte-grid":{states:["activeScreenShare","activePlugin","activeSpotlight"],children:["dyte-simple-grid"]},"dyte-grid.activeSpotlight":["dyte-spotlight-grid"],"dyte-grid.activeScreenShare":["dyte-mixed-grid"],"dyte-grid.activePlugin":["dyte-mixed-grid"],"dyte-grid.activeScreenShare.activeSpotlight":["dyte-mixed-grid"],"dyte-grid.activePlugin.activeSpotlight":["dyte-mixed-grid"],"dyte-grid.activePlugin.activeScreenShare.activeSpotlight":["dyte-mixed-grid"],"dyte-mixed-grid":{states:["activeSpotlight"],children:["dyte-simple-grid"]},"dyte-mixed-grid.activeSpotlight":["dyte-spotlight-grid"],"dyte-participant-tile":{state:"meeting",children:["dyte-name-tag","dyte-avatar","dyte-network-indicator"]},"dyte-participant-setup":["dyte-avatar","div#setupcontrols-media"],"dyte-participant-tile[meeting=setup]":["dyte-avatar","div#setupcontrols-settings","div#setupcontrols-media"],"div#setupcontrols-media":[["dyte-mic-toggle",{size:"sm"}],["dyte-camera-toggle",{size:"sm"}]],"div#setupcontrols-settings":[["dyte-settings-toggle",{size:"sm"}]],"dyte-screenshare-view":{children:["dyte-name-tag","dyte-network-indicator"]},"dyte-name-tag":[["dyte-audio-visualizer",{slot:"start"}]],"dyte-controlbar":{states:["activeMoreMenu"],props:{variant:"solid"},children:["div#controlbar-left","div#controlbar-center","div#controlbar-right"]},"dyte-more-toggle":{states:["activeMoreMenu"],children:[]},"dyte-controlbar.sm":["div#controlbar-mobile"],"dyte-controlbar.md":["div#controlbar-mobile"],"dyte-more-toggle.activeMoreMenu":[["dyte-fullscreen-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-pip-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-caption-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-mute-all-button",{variant:"horizontal",slot:"more-elements"}],["dyte-breakout-rooms-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-recording-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-debugger-toggle",{variant:"horizontal"}]],"dyte-more-toggle.activeMoreMenu.sm":[["dyte-chat-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-participants-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-polls-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-plugins-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-fullscreen-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-screen-share-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-pip-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-caption-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-mute-all-button",{variant:"horizontal",slot:"more-elements"}],["dyte-breakout-rooms-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-settings-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-ai-toggle",{variant:"horizontal"}],["dyte-debugger-toggle",{variant:"horizontal"}]],"dyte-more-toggle.activeMoreMenu.md":[["dyte-chat-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-participants-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-polls-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-plugins-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-fullscreen-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-screen-share-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-pip-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-caption-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-mute-all-button",{variant:"horizontal",slot:"more-elements"}],["dyte-breakout-rooms-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-settings-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-ai-toggle",{variant:"horizontal"}],["dyte-debugger-toggle",{variant:"horizontal"}]],"div#controlbar-mobile":["dyte-mic-toggle","dyte-camera-toggle","dyte-webinar-stage-toggle","dyte-stage-toggle","dyte-leave-button","dyte-more-toggle"],"div#controlbar-left":["dyte-settings-toggle","dyte-screen-share-toggle","dyte-livestream-toggle"],"div#controlbar-center":["dyte-mic-toggle","dyte-camera-toggle","dyte-webinar-stage-toggle","dyte-stage-toggle","dyte-more-toggle","dyte-leave-button"],"div#controlbar-right":["dyte-chat-toggle","dyte-polls-toggle","dyte-participants-toggle","dyte-plugins-toggle","dyte-ai-toggle"]},config:{notification_sounds:{participant_left:!1},participant_joined_sound_notification_limit:10,participant_chat_message_sound_notification_limit:10,videoFit:"cover"}}},55055:(t,e,i)=>{i.d(e,{a:()=>r,b:()=>l,c:()=>c,g:()=>d,s:()=>o});const s={get:(t,e,i)=>(...s)=>{try{return Reflect.get(t,e,i).apply(t,s)}catch(a){return null}}};let a;try{a=new Proxy(localStorage,s)}catch(h){a=new Proxy({},s)}const r=a,n="dyte-prefs",o=(t,e)=>{const i=JSON.parse(r.getItem(n)||"{}");i[t]=JSON.stringify(e),r.setItem("dyte-prefs",JSON.stringify(i))},l=t=>JSON.parse(r.getItem(n)||"{}")[t],d=()=>{const t=JSON.parse(r.getItem(n)||"{}");return{mirrorVideo:!t["mirror-video"]||"true"===t["mirror-video"],muteNotificationSounds:!!t["mute-notification-sounds"]&&"true"===t["mute-notification-sounds"]}},c={}},61604:(t,e,i)=>{i.d(e,{M:()=>P,S:()=>D,a:()=>ct,b:()=>O,c:()=>xt,d:()=>yt,e:()=>a,f:()=>st,g:()=>K,h:()=>V,i:()=>nt,j:()=>N,k:()=>Et,l:()=>H,m:()=>it,n:()=>p,o:()=>Q,p:()=>I,q:()=>_t,r:()=>C,s:()=>Z,t:()=>Y,u:()=>Pt,v:()=>f,w:()=>B,x:()=>pt,y:()=>vt,z:()=>wt});var s=i(49583);function a(t,e){return t===e||t!=t&&e!=e}function r(t,e){for(var i=t.length;i--;)if(a(t[i][0],e))return i;return-1}t=i.hmd(t);var n=Array.prototype.splice;function o(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var s=t[e];this.set(s[0],s[1])}}o.prototype.clear=function(){this.__data__=[],this.size=0},o.prototype.delete=function(t){var e=this.__data__,i=r(e,t);return!(i<0)&&(i==e.length-1?e.pop():n.call(e,i,1),--this.size,!0)},o.prototype.get=function(t){var e=this.__data__,i=r(e,t);return i<0?void 0:e[i][1]},o.prototype.has=function(t){return r(this.__data__,t)>-1},o.prototype.set=function(t,e){var i=this.__data__,s=r(i,t);return s<0?(++this.size,i.push([t,e])):i[s][1]=e,this};var l="[object AsyncFunction]",d="[object Function]",c="[object GeneratorFunction]",h="[object Proxy]";function p(t){if(!(0,s.a)(t))return!1;var e=(0,s.b)(t);return e==d||e==c||e==l||e==h}var g,u=s.r["__core-js_shared__"],m=(g=/[^.]+$/.exec(u&&u.keys&&u.keys.IE_PROTO||""))?"Symbol(src)_1."+g:"";var v=Function.prototype.toString;function f(t){if(null!=t){try{return v.call(t)}catch(e){}try{return t+""}catch(e){}}return""}var y=/^\[object .+?Constructor\]$/,b=Function.prototype,w=Object.prototype,x=b.toString,k=w.hasOwnProperty,S=RegExp("^"+x.call(k).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function _(t){return!(!(0,s.a)(t)||(e=t,m&&m in e))&&(p(t)?S:y).test(f(t));var e}function C(t,e){var i=function(t,e){return null==t?void 0:t[e]}(t,e);return _(i)?i:void 0}var P=C(s.r,"Map"),L=C(Object,"create");var T=Object.prototype.hasOwnProperty;var E=Object.prototype.hasOwnProperty;function A(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var s=t[e];this.set(s[0],s[1])}}function M(t,e){var i,s,a=t.__data__;return("string"==(s=typeof(i=e))||"number"==s||"symbol"==s||"boolean"==s?"__proto__"!==i:null===i)?a["string"==typeof e?"string":"hash"]:a.map}function R(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var s=t[e];this.set(s[0],s[1])}}A.prototype.clear=function(){this.__data__=L?L(null):{},this.size=0},A.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},A.prototype.get=function(t){var e=this.__data__;if(L){var i=e[t];return"__lodash_hash_undefined__"===i?void 0:i}return T.call(e,t)?e[t]:void 0},A.prototype.has=function(t){var e=this.__data__;return L?void 0!==e[t]:E.call(e,t)},A.prototype.set=function(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=L&&void 0===e?"__lodash_hash_undefined__":e,this},R.prototype.clear=function(){this.size=0,this.__data__={hash:new A,map:new(P||o),string:new A}},R.prototype.delete=function(t){var e=M(this,t).delete(t);return this.size-=e?1:0,e},R.prototype.get=function(t){return M(this,t).get(t)},R.prototype.has=function(t){return M(this,t).has(t)},R.prototype.set=function(t,e){var i=M(this,t),s=i.size;return i.set(t,e),this.size+=i.size==s?0:1,this};function D(t){var e=this.__data__=new o(t);this.size=e.size}D.prototype.clear=function(){this.__data__=new o,this.size=0},D.prototype.delete=function(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i},D.prototype.get=function(t){return this.__data__.get(t)},D.prototype.has=function(t){return this.__data__.has(t)},D.prototype.set=function(t,e){var i=this.__data__;if(i instanceof o){var s=i.__data__;if(!P||s.length<199)return s.push([t,e]),this.size=++i.size,this;i=this.__data__=new R(s)}return i.set(t,e),this.size=i.size,this};var I=function(){try{var t=C(Object,"defineProperty");return t({},"",{}),t}catch(e){}}();function O(t,e,i){"__proto__"==e&&I?I(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i}var $="object"==typeof exports&&exports&&!exports.nodeType&&exports,U=$&&t&&!t.nodeType&&t,F=U&&U.exports===$?s.r.Buffer:void 0,z=F?F.allocUnsafe:void 0;function N(t,e){if(e)return t.slice();var i=t.length,s=z?z(i):new t.constructor(i);return t.copy(s),s}var j=s.r.Uint8Array;function B(t){var e=new t.constructor(t.byteLength);return new j(e).set(new j(t)),e}function H(t,e){var i=e?B(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}function V(t,e){var i=-1,s=t.length;for(e||(e=Array(s));++i<s;)e[i]=t[i];return e}var G=Object.create,q=function(){function t(){}return function(e){if(!(0,s.a)(e))return{};if(G)return G(e);t.prototype=e;var i=new t;return t.prototype=void 0,i}}();function Z(t,e){return function(i){return t(e(i))}}var K=Z(Object.getPrototypeOf,Object),W=Object.prototype;function Y(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||W)}function Q(t){return"function"!=typeof t.constructor||Y(t)?{}:q(K(t))}function J(t){return(0,s.i)(t)&&"[object Arguments]"==(0,s.b)(t)}var X=Object.prototype,tt=X.hasOwnProperty,et=X.propertyIsEnumerable,it=J(function(){return arguments}())?J:function(t){return(0,s.i)(t)&&tt.call(t,"callee")&&!et.call(t,"callee")},st=Array.isArray,at=9007199254740991;function rt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=at}function nt(t){return null!=t&&rt(t.length)&&!p(t)}var ot="object"==typeof exports&&exports&&!exports.nodeType&&exports,lt=ot&&t&&!t.nodeType&&t,dt=lt&&lt.exports===ot?s.r.Buffer:void 0,ct=(dt?dt.isBuffer:void 0)||function(){return!1},ht={};function pt(t){return function(e){return t(e)}}ht["[object Float32Array]"]=ht["[object Float64Array]"]=ht["[object Int8Array]"]=ht["[object Int16Array]"]=ht["[object Int32Array]"]=ht["[object Uint8Array]"]=ht["[object Uint8ClampedArray]"]=ht["[object Uint16Array]"]=ht["[object Uint32Array]"]=!0,ht["[object Arguments]"]=ht["[object Array]"]=ht["[object ArrayBuffer]"]=ht["[object Boolean]"]=ht["[object DataView]"]=ht["[object Date]"]=ht["[object Error]"]=ht["[object Function]"]=ht["[object Map]"]=ht["[object Number]"]=ht["[object Object]"]=ht["[object RegExp]"]=ht["[object Set]"]=ht["[object String]"]=ht["[object WeakMap]"]=!1;var gt="object"==typeof exports&&exports&&!exports.nodeType&&exports,ut=gt&&t&&!t.nodeType&&t,mt=ut&&ut.exports===gt&&s.f.process,vt=function(){try{var t=ut&&ut.require&&ut.require("util").types;return t||mt&&mt.binding&&mt.binding("util")}catch(e){}}(),ft=vt&&vt.isTypedArray,yt=ft?pt(ft):function(t){return(0,s.i)(t)&&rt(t.length)&&!!ht[(0,s.b)(t)]},bt=Object.prototype.hasOwnProperty;function wt(t,e,i){var s=t[e];bt.call(t,e)&&a(s,i)&&(void 0!==i||e in t)||O(t,e,i)}function xt(t,e,i,s){var a=!i;i||(i={});for(var r=-1,n=e.length;++r<n;){var o=e[r],l=s?s(i[o],t[o],o,i,t):void 0;void 0===l&&(l=t[o]),a?O(i,o,l):wt(i,o,l)}return i}var kt=9007199254740991,St=/^(?:0|[1-9]\d*)$/;function _t(t,e){var i=typeof t;return!!(e=null==e?kt:e)&&("number"==i||"symbol"!=i&&St.test(t))&&t>-1&&t%1==0&&t<e}var Ct=Object.prototype.hasOwnProperty;function Pt(t,e){var i=st(t),s=!i&&it(t),a=!i&&!s&&ct(t),r=!i&&!s&&!a&&yt(t),n=i||s||a||r,o=n?function(t,e){for(var i=-1,s=Array(t);++i<t;)s[i]=e(i);return s}(t.length,String):[],l=o.length;for(var d in t)!e&&!Ct.call(t,d)||n&&("length"==d||a&&("offset"==d||"parent"==d)||r&&("buffer"==d||"byteLength"==d||"byteOffset"==d)||_t(d,l))||o.push(d);return o}var Lt=Object.prototype.hasOwnProperty;function Tt(t){if(!(0,s.a)(t))return function(t){var e=[];if(null!=t)for(var i in Object(t))e.push(i);return e}(t);var e=Y(t),i=[];for(var a in t)("constructor"!=a||!e&&Lt.call(t,a))&&i.push(a);return i}function Et(t){return nt(t)?Pt(t,!0):Tt(t)}},62443:(t,e,i)=>{i.d(e,{u:()=>Ot}),t=i.hmd(t);let s,a,r,n=!1,o=!1,l=!1,d=!1,c=null,h=!1;const p="http://www.w3.org/1999/xlink",g={},u=t=>"object"===(t=typeof t)||"function"===t,m=(t,e,...i)=>{let s=null,a=null,r=null,n=!1,o=!1;const l=[],d=e=>{for(let i=0;i<e.length;i++)s=e[i],Array.isArray(s)?d(s):null!=s&&"boolean"!=typeof s&&((n="function"!=typeof t&&!u(s))&&(s=String(s)),n&&o?l[l.length-1].$text$+=s:l.push(n?v(null,s):s),o=n)};if(d(i),e){e.key&&(a=e.key),e.name&&(r=e.name);{const t=e.className||e.class;t&&(e.class="object"!=typeof t?t:Object.keys(t).filter((e=>t[e])).join(" "))}}if("function"==typeof t)return t(null===e?{}:e,l,y);const c=v(t,null);return c.$attrs$=e,l.length>0&&(c.$children$=l),c.$key$=a,c.$name$=r,c},v=(t,e)=>{const i={$flags$:0,$tag$:t,$text$:e,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null};return i},f={},y={forEach:(t,e)=>t.map(b).forEach(e),map:(t,e)=>t.map(b).map(e).map(w)},b=t=>({vattrs:t.$attrs$,vchildren:t.$children$,vkey:t.$key$,vname:t.$name$,vtag:t.$tag$,vtext:t.$text$}),w=t=>{if("function"==typeof t.vtag){const e=Object.assign({},t.vattrs);return t.vkey&&(e.key=t.vkey),t.vname&&(e.name=t.vname),m(t.vtag,e,...t.vchildren||[])}const e=v(t.vtag,t.vtext);return e.$attrs$=t.vattrs,e.$children$=t.vchildren,e.$key$=t.vkey,e.$name$=t.vname,e},x=t=>mt(t).$hostElement$,k=(t,e,i)=>{const s=x(t);return{emit:t=>S(s,e,{bubbles:!!(4&i),composed:!!(2&i),cancelable:!!(1&i),detail:t})}},S=(t,e,i)=>{const s=Ct.ce(e,i);return t.dispatchEvent(s),s},_=new WeakMap,C=t=>{const e=t.$cmpMeta$,i=t.$hostElement$,s=e.$flags$,a=(e.$tagName$,()=>{}),r=((t,e)=>{let i=P(e);const s=kt.get(i);if(t=11===t.nodeType?t:_t,s)if("string"==typeof s){t=t.head||t;let e,a=_.get(t);a||_.set(t,a=new Set),a.has(i)||(e=_t.createElement("style"),e.innerHTML=s,t.insertBefore(e,t.querySelector("link")),a&&a.add(i))}else t.adoptedStyleSheets.includes(s)||(t.adoptedStyleSheets=[...t.adoptedStyleSheets,s]);return i})(i.shadowRoot?i.shadowRoot:i.getRootNode(),e);10&s&&(i["s-sc"]=r,i.classList.add(r+"-h")),a()},P=(t,e)=>"sc-"+t.$tagName$,L=(t,e,i,s,a,r)=>{if(i!==s){let o=yt(t,e),l=e.toLowerCase();if("class"===e){const e=t.classList,a=E(i),r=E(s);e.remove(...a.filter((t=>t&&!r.includes(t)))),e.add(...r.filter((t=>t&&!a.includes(t))))}else if("style"===e){for(const e in i)s&&null!=s[e]||(e.includes("-")?t.style.removeProperty(e):t.style[e]="");for(const e in s)i&&s[e]===i[e]||(e.includes("-")?t.style.setProperty(e,s[e]):t.style[e]=s[e])}else if("key"===e);else if("ref"===e)s&&s(t);else if(o||"o"!==e[0]||"n"!==e[1]){const d=u(s);if((o||d&&null!==s)&&!a)try{if(t.tagName.includes("-"))t[e]=s;else{const a=null==s?"":s;"list"===e?o=!1:null!=i&&t[e]==a||(t[e]=a)}}catch(n){}let c=!1;l!==(l=l.replace(/^xlink\:?/,""))&&(e=l,c=!0),null==s||!1===s?!1===s&&""!==t.getAttribute(e)||(c?t.removeAttributeNS(p,e):t.removeAttribute(e)):(!o||4&r||a)&&!d&&(s=!0===s?"":s,c?t.setAttributeNS(p,e,s):t.setAttribute(e,s))}else e="-"===e[2]?e.slice(3):yt(St,l)?l.slice(2):l[2]+e.slice(3),i&&Ct.rel(t,e,i,!1),s&&Ct.ael(t,e,s,!1)}},T=/\s/,E=t=>t?t.split(T):[],A=(t,e,i,s)=>{const a=11===e.$elm$.nodeType&&e.$elm$.host?e.$elm$.host:e.$elm$,r=t&&t.$attrs$||g,n=e.$attrs$||g;for(s in r)s in n||L(a,s,r[s],void 0,i,e.$flags$);for(s in n)L(a,s,r[s],n[s],i,e.$flags$)},M=(t,e,i,o)=>{const c=e.$children$[i];let h,p,g,u=0;if(n||(l=!0,"slot"===c.$tag$&&(s&&o.classList.add(s+"-s"),c.$flags$|=c.$children$?2:1)),null!==c.$text$)h=c.$elm$=_t.createTextNode(c.$text$);else if(1&c.$flags$)h=c.$elm$=_t.createTextNode("");else if(h=c.$elm$=_t.createElement(2&c.$flags$?"slot-fb":c.$tag$),A(null,c,d),null!=s&&h["s-si"]!==s&&h.classList.add(h["s-si"]=s),c.$children$)for(u=0;u<c.$children$.length;++u)p=M(t,c,u,h),p&&h.appendChild(p);return h["s-hn"]=r,3&c.$flags$&&(h["s-sr"]=!0,h["s-cr"]=a,h["s-sn"]=c.$name$||"",g=t&&t.$children$&&t.$children$[i],g&&g.$tag$===c.$tag$&&t.$elm$&&R(t.$elm$,!1)),h},R=(t,e)=>{Ct.$flags$|=1;const i=t.childNodes;for(let s=i.length-1;s>=0;s--){const t=i[s];t["s-hn"]!==r&&t["s-ol"]&&(U(t).insertBefore(t,$(t)),t["s-ol"].remove(),t["s-ol"]=void 0,l=!0),e&&R(t,e)}Ct.$flags$&=-2},D=(t,e,i,s,a,n)=>{let o,l=t["s-cr"]&&t["s-cr"].parentNode||t;for(l.shadowRoot&&l.tagName===r&&(l=l.shadowRoot);a<=n;++a)s[a]&&(o=M(null,i,a,t),o&&(s[a].$elm$=o,l.insertBefore(o,$(e))))},I=(t,e,i,s,a)=>{for(;e<=i;++e)(s=t[e])&&(a=s.$elm$,H(s),o=!0,a["s-ol"]?a["s-ol"].remove():R(a,!0),a.remove())},O=(t,e)=>t.$tag$===e.$tag$&&("slot"===t.$tag$?t.$name$===e.$name$:t.$key$===e.$key$),$=t=>t&&t["s-ol"]||t,U=t=>(t["s-ol"]?t["s-ol"]:t).parentNode,F=(t,e)=>{const i=e.$elm$=t.$elm$,s=t.$children$,a=e.$children$,r=e.$tag$,n=e.$text$;let o;null===n?("slot"===r||A(t,e,d),null!==s&&null!==a?((t,e,i,s)=>{let a,r,n=0,o=0,l=0,d=0,c=e.length-1,h=e[0],p=e[c],g=s.length-1,u=s[0],m=s[g];for(;n<=c&&o<=g;)if(null==h)h=e[++n];else if(null==p)p=e[--c];else if(null==u)u=s[++o];else if(null==m)m=s[--g];else if(O(h,u))F(h,u),h=e[++n],u=s[++o];else if(O(p,m))F(p,m),p=e[--c],m=s[--g];else if(O(h,m))"slot"!==h.$tag$&&"slot"!==m.$tag$||R(h.$elm$.parentNode,!1),F(h,m),t.insertBefore(h.$elm$,p.$elm$.nextSibling),h=e[++n],m=s[--g];else if(O(p,u))"slot"!==h.$tag$&&"slot"!==m.$tag$||R(p.$elm$.parentNode,!1),F(p,u),t.insertBefore(p.$elm$,h.$elm$),p=e[--c],u=s[++o];else{for(l=-1,d=n;d<=c;++d)if(e[d]&&null!==e[d].$key$&&e[d].$key$===u.$key$){l=d;break}l>=0?(r=e[l],r.$tag$!==u.$tag$?a=M(e&&e[o],i,l,t):(F(r,u),e[l]=void 0,a=r.$elm$),u=s[++o]):(a=M(e&&e[o],i,o,t),u=s[++o]),a&&U(h.$elm$).insertBefore(a,$(h.$elm$))}n>c?D(t,null==s[g+1]?null:s[g+1].$elm$,i,s,o,g):o>g&&I(e,n,c)})(i,s,e,a):null!==a?(null!==t.$text$&&(i.textContent=""),D(i,null,e,a,0,a.length-1)):null!==s&&I(s,0,s.length-1)):(o=i["s-cr"])?o.parentNode.textContent=n:t.$text$!==n&&(i.data=n)},z=t=>{const e=t.childNodes;let i,s,a,r,n,o;for(s=0,a=e.length;s<a;s++)if(i=e[s],1===i.nodeType){if(i["s-sr"])for(n=i["s-sn"],i.hidden=!1,r=0;r<a;r++)if(o=e[r].nodeType,e[r]["s-hn"]!==i["s-hn"]||""!==n){if(1===o&&n===e[r].getAttribute("slot")){i.hidden=!0;break}}else if(1===o||3===o&&""!==e[r].textContent.trim()){i.hidden=!0;break}z(i)}},N=[],j=t=>{let e,i,s,a,r,n,l=0;const d=t.childNodes,c=d.length;for(;l<c;l++){if(e=d[l],e["s-sr"]&&(i=e["s-cr"])&&i.parentNode)for(s=i.parentNode.childNodes,a=e["s-sn"],n=s.length-1;n>=0;n--)i=s[n],i["s-cn"]||i["s-nr"]||i["s-hn"]===e["s-hn"]||(B(i,a)?(r=N.find((t=>t.$nodeToRelocate$===i)),o=!0,i["s-sn"]=i["s-sn"]||a,r?r.$slotRefNode$=e:N.push({$slotRefNode$:e,$nodeToRelocate$:i}),i["s-sr"]&&N.map((t=>{B(t.$nodeToRelocate$,i["s-sn"])&&(r=N.find((t=>t.$nodeToRelocate$===i)),r&&!t.$slotRefNode$&&(t.$slotRefNode$=r.$slotRefNode$))}))):N.some((t=>t.$nodeToRelocate$===i))||N.push({$nodeToRelocate$:i}));1===e.nodeType&&j(e)}},B=(t,e)=>1===t.nodeType?null===t.getAttribute("slot")&&""===e||t.getAttribute("slot")===e:t["s-sn"]===e||""===e,H=t=>{t.$attrs$&&t.$attrs$.ref&&t.$attrs$.ref(null),t.$children$&&t.$children$.map(H)},V=(t,e)=>{const i=t.$hostElement$,d=t.$cmpMeta$,c=t.$vnode$||v(null,null),h=(p=e)&&p.$tag$===f?e:m(null,null,e);var p;if(r=i.tagName,d.$attrsToReflect$&&(h.$attrs$=h.$attrs$||{},d.$attrsToReflect$.map((([t,e])=>h.$attrs$[e]=i[t]))),h.$tag$=null,h.$flags$|=4,t.$vnode$=h,h.$elm$=c.$elm$=i.shadowRoot||i,s=i["s-sc"],a=i["s-cr"],n=!!(1&d.$flags$),o=!1,F(c,h),Ct.$flags$|=1,l){let t,e,i,s,a,r;j(h.$elm$);let n=0;for(;n<N.length;n++)t=N[n],e=t.$nodeToRelocate$,e["s-ol"]||(i=_t.createTextNode(""),i["s-nr"]=e,e.parentNode.insertBefore(e["s-ol"]=i,e));for(n=0;n<N.length;n++)if(t=N[n],e=t.$nodeToRelocate$,t.$slotRefNode$){for(s=t.$slotRefNode$.parentNode,a=t.$slotRefNode$.nextSibling,i=e["s-ol"];i=i.previousSibling;)if(r=i["s-nr"],r&&r["s-sn"]===e["s-sn"]&&s===r.parentNode&&(r=r.nextSibling,!r||!r["s-nr"])){a=r;break}(!a&&s!==e.parentNode||e.nextSibling!==a)&&e!==a&&(!e["s-hn"]&&e["s-ol"]&&(e["s-hn"]=e["s-ol"].parentNode.nodeName),s.insertBefore(e,a))}else 1===e.nodeType&&(e.hidden=!0)}o&&z(h.$elm$),Ct.$flags$&=-2,N.length=0},G=(t,e)=>{e&&!t.$onRenderResolve$&&e["s-p"]&&e["s-p"].push(new Promise((e=>t.$onRenderResolve$=e)))},q=(t,e)=>{if(t.$flags$|=16,4&t.$flags$)return void(t.$flags$|=512);G(t,t.$ancestorComponent$);return It((()=>Z(t,e)))},Z=(t,e)=>{const i=(t.$cmpMeta$.$tagName$,()=>{}),s=t.$lazyInstance$;let a;return e?(t.$flags$|=256,t.$queuedListeners$&&(t.$queuedListeners$.map((([t,e])=>tt(s,t,e))),t.$queuedListeners$=null),a=tt(s,"componentWillLoad")):a=tt(s,"componentWillUpdate"),i(),et(a,(()=>K(t,s,e)))},K=async(t,e,i)=>{const s=t.$hostElement$,a=(t.$cmpMeta$.$tagName$,()=>{}),r=s["s-rc"];i&&C(t);const n=(t.$cmpMeta$.$tagName$,()=>{});W(t,e),r&&(r.map((t=>t())),s["s-rc"]=void 0),n(),a();{const e=s["s-p"],i=()=>Q(t);0===e.length?i():(Promise.all(e).then(i),t.$flags$|=4,e.length=0)}},W=(t,e,i)=>{try{c=e,e=e.render(),t.$flags$&=-17,t.$flags$|=2,V(t,e)}catch(s){bt(s,t.$hostElement$)}return c=null,null},Y=()=>c,Q=t=>{t.$cmpMeta$.$tagName$;const e=t.$hostElement$,i=()=>{},s=t.$lazyInstance$,a=t.$ancestorComponent$;tt(s,"componentDidRender"),64&t.$flags$?(tt(s,"componentDidUpdate"),i()):(t.$flags$|=64,it(e),tt(s,"componentDidLoad"),i(),t.$onReadyResolve$(e),a||X()),t.$onInstanceResolve$(e),t.$onRenderResolve$&&(t.$onRenderResolve$(),t.$onRenderResolve$=void 0),512&t.$flags$&&Dt((()=>q(t,!1))),t.$flags$&=-517},J=t=>{{const e=mt(t),i=e.$hostElement$.isConnected;return i&&2==(18&e.$flags$)&&q(e,!1),i}},X=t=>{it(_t.documentElement),Dt((()=>S(St,"appload",{detail:{namespace:"dyte-ui-kit"}})))},tt=(t,e,i)=>{if(t&&t[e])try{return t[e](i)}catch(s){bt(s)}},et=(t,e)=>t&&t.then?t.then(e):e(),it=t=>t.classList.add("hydrated"),st=(t,e,i,s)=>{const a=mt(t),r=a.$hostElement$,n=a.$instanceValues$.get(e),o=a.$flags$,l=a.$lazyInstance$;var d,c;d=i,c=s.$members$[e][0],i=null==d||u(d)?d:4&c?"false"!==d&&(""===d||!!d):2&c?parseFloat(d):1&c?String(d):d;const h=Number.isNaN(n)&&Number.isNaN(i);if((!(8&o)||void 0===n)&&(i!==n&&!h)&&(a.$instanceValues$.set(e,i),l)){if(s.$watchers$&&128&o){const t=s.$watchers$[e];t&&t.map((t=>{try{l[t](i,n,e)}catch(s){bt(s,r)}}))}2==(18&o)&&q(a,!1)}},at=(t,e,i)=>{if(e.$members$){t.watchers&&(e.$watchers$=t.watchers);const s=Object.entries(e.$members$),a=t.prototype;if(s.map((([t,[s]])=>{31&s||2&i&&32&s?Object.defineProperty(a,t,{get(){return e=t,mt(this).$instanceValues$.get(e);var e},set(i){st(this,t,i,e)},configurable:!0,enumerable:!0}):1&i&&64&s&&Object.defineProperty(a,t,{value(...e){const i=mt(this);return i.$onInstancePromise$.then((()=>i.$lazyInstance$[t](...e)))}})})),1&i){const i=new Map;a.attributeChangedCallback=function(t,e,s){Ct.jmp((()=>{const e=i.get(t);if(this.hasOwnProperty(e))s=this[e],delete this[e];else if(a.hasOwnProperty(e)&&"number"==typeof this[e]&&this[e]==s)return;this[e]=(null!==s||"boolean"!=typeof this[e])&&s}))},t.observedAttributes=s.filter((([t,e])=>15&e[0])).map((([t,s])=>{const a=s[1]||t;return i.set(a,t),512&s[0]&&e.$attrsToReflect$.push([t,a]),a}))}}return t},rt=async(t,e,i,s,a)=>{if(!(32&e.$flags$)){{if(e.$flags$|=32,(a=xt(i)).then){const t=()=>{};a=await a,t()}a.isProxied||(i.$watchers$=a.watchers,at(a,i,2),a.isProxied=!0);const t=(i.$tagName$,()=>{});e.$flags$|=8;try{new a(e)}catch(o){bt(o)}e.$flags$&=-9,e.$flags$|=128,t(),nt(e.$lazyInstance$)}if(a.style){let t=a.style;const e=P(i);if(!kt.has(e)){const s=(i.$tagName$,()=>{});((t,e,i)=>{let s=kt.get(t);Lt&&i?(s=s||new CSSStyleSheet,"string"==typeof s?s=e:s.replaceSync(e)):s=e,kt.set(t,s)})(e,t,!!(1&i.$flags$)),s()}}}const r=e.$ancestorComponent$,n=()=>q(e,!0);r&&r["s-rc"]?r["s-rc"].push(n):n()},nt=t=>{tt(t,"connectedCallback")},ot=t=>{const e=t["s-cr"]=_t.createComment("");e["s-cn"]=!0,t.insertBefore(e,t.firstChild)},lt=(t,e={})=>{const i=()=>{},s=[],a=e.exclude||[],r=St.customElements,n=_t.head,o=n.querySelector("meta[charset]"),l=_t.createElement("style"),d=[];let c,h=!0;Object.assign(Ct,e),Ct.$resourcesUrl$=new URL(e.resourcesUrl||"./",_t.baseURI).href,t.map((t=>{t[1].map((e=>{const i={$flags$:e[0],$tagName$:e[1],$members$:e[2],$listeners$:e[3]};i.$members$=e[2],i.$listeners$=e[3],i.$attrsToReflect$=[],i.$watchers$={};const n=i.$tagName$,o=class extends HTMLElement{constructor(t){super(t),ft(t=this,i),1&i.$flags$&&t.attachShadow({mode:"open"})}connectedCallback(){c&&(clearTimeout(c),c=null),h?d.push(this):Ct.jmp((()=>(t=>{if(!(1&Ct.$flags$)){const e=mt(t),i=e.$cmpMeta$,s=(i.$tagName$,()=>{});if(1&e.$flags$)ct(t,e,i.$listeners$),nt(e.$lazyInstance$);else{e.$flags$|=1,12&i.$flags$&&ot(t);{let i=t;for(;i=i.parentNode||i.host;)if(i["s-p"]){G(e,e.$ancestorComponent$=i);break}}i.$members$&&Object.entries(i.$members$).map((([e,[i]])=>{if(31&i&&t.hasOwnProperty(e)){const i=t[e];delete t[e],t[e]=i}})),rt(0,e,i)}s()}})(this)))}disconnectedCallback(){Ct.jmp((()=>(t=>{if(!(1&Ct.$flags$)){const e=mt(t),i=e.$lazyInstance$;e.$rmListeners$&&(e.$rmListeners$.map((t=>t())),e.$rmListeners$=void 0),tt(i,"disconnectedCallback")}})(this)))}componentOnReady(){return mt(this).$onReadyPromise$}};i.$lazyBundleId$=t[0],a.includes(n)||r.get(n)||(s.push(n),r.define(n,at(o,i,1)))}))})),l.innerHTML=s+"{visibility:hidden}.hydrated{visibility:inherit}",l.setAttribute("data-styles",""),n.insertBefore(l,o?o.nextSibling:n.firstChild),h=!1,d.length?d.map((t=>t.connectedCallback())):Ct.jmp((()=>c=setTimeout(X,30))),i()},dt=(t,e)=>e,ct=(t,e,i,s)=>{i&&i.map((([i,s,a])=>{const r=pt(t,i),n=ht(e,a),o=gt(i);Ct.ael(r,s,n,o),(e.$rmListeners$=e.$rmListeners$||[]).push((()=>Ct.rel(r,s,n,o)))}))},ht=(t,e)=>i=>{try{256&t.$flags$?t.$lazyInstance$[e](i):(t.$queuedListeners$=t.$queuedListeners$||[]).push([e,i])}catch(s){bt(s)}},pt=(t,e)=>8&e?St:t,gt=t=>!!(2&t),ut=new WeakMap,mt=t=>ut.get(t),vt=(t,e)=>ut.set(e.$lazyInstance$=t,e),ft=(t,e)=>{const i={$flags$:0,$hostElement$:t,$cmpMeta$:e,$instanceValues$:new Map};return i.$onInstancePromise$=new Promise((t=>i.$onInstanceResolve$=t)),i.$onReadyPromise$=new Promise((t=>i.$onReadyResolve$=t)),t["s-p"]=[],t["s-rc"]=[],ct(t,i,e.$listeners$),ut.set(t,i)},yt=(t,e)=>e in t,bt=(t,e)=>(0,console.error)(t,e),wt=new Map,xt=(t,e,s)=>{const a=t.$tagName$.replace(/-/g,"_"),r=t.$lazyBundleId$,n=wt.get(r);if(n)return n[a];if(!s||!BUILD.hotModuleReplacement){const t=t=>(wt.set(r,t),t[a]);switch(r){case"dyte-meeting":return Promise.resolve().then((function(){return Pa})).then(t,bt);case"dyte-ai":return Promise.resolve().then((function(){return Ta})).then(t,bt);case"dyte-ai-chat":return Promise.resolve().then((function(){return Aa})).then(t,bt);case"dyte-ai-home":return Promise.resolve().then((function(){return Va})).then(t,bt);case"dyte-ai-toggle":return Promise.resolve().then((function(){return qa})).then(t,bt);case"dyte-ai-transcriptions":return Promise.resolve().then((function(){return Ur})).then(t,bt);case"dyte-audio-grid":return Promise.resolve().then((function(){return Nr})).then(t,bt);case"dyte-audio-tile":return Promise.resolve().then((function(){return qr})).then(t,bt);case"dyte-breakout-rooms-manager":return Promise.resolve().then((function(){return Kr})).then(t,bt);case"dyte-breakout-rooms-toggle":return Promise.resolve().then((function(){return Yr})).then(t,bt);case"dyte-broadcast-message-modal":return Promise.resolve().then((function(){return Jr})).then(t,bt);case"dyte-camera-toggle":return Promise.resolve().then((function(){return tn})).then(t,bt);case"dyte-caption-toggle":return Promise.resolve().then((function(){return sn})).then(t,bt);case"dyte-channel-creator":return Promise.resolve().then((function(){return rn})).then(t,bt);case"dyte-channel-selector-ui":return Promise.resolve().then((function(){return Tn})).then(t,bt);case"dyte-chat":return Promise.resolve().then((function(){return An})).then(t,bt);case"dyte-chat-composer-ui":return Promise.resolve().then((function(){return Dn})).then(t,bt);case"dyte-chat-selector-ui":return Promise.resolve().then((function(){return On})).then(t,bt);case"dyte-chat-toggle":return Promise.resolve().then((function(){return jn})).then(t,bt);case"dyte-clock":return Promise.resolve().then((function(){return Vn})).then(t,bt);case"dyte-confirmation-modal":return Promise.resolve().then((function(){return qn})).then(t,bt);case"dyte-controlbar":return Promise.resolve().then((function(){return Kn})).then(t,bt);case"dyte-debugger":return Promise.resolve().then((function(){return Yn})).then(t,bt);case"dyte-debugger-toggle":return Promise.resolve().then((function(){return Jn})).then(t,bt);case"dyte-ended-screen":return Promise.resolve().then((function(){return to})).then(t,bt);case"dyte-file-dropzone":return Promise.resolve().then((function(){return io})).then(t,bt);case"dyte-grid":return Promise.resolve().then((function(){return zo})).then(t,bt);case"dyte-grid-pagination":return Promise.resolve().then((function(){return jo})).then(t,bt);case"dyte-header":return Promise.resolve().then((function(){return Ho})).then(t,bt);case"dyte-idle-screen":return Promise.resolve().then((function(){return Go})).then(t,bt);case"dyte-image-viewer":return Promise.resolve().then((function(){return Yo})).then(t,bt);case"dyte-information-tooltip":return Promise.resolve().then((function(){return Jo})).then(t,bt);case"dyte-leave-button":return Promise.resolve().then((function(){return tl})).then(t,bt);case"dyte-leave-meeting":return Promise.resolve().then((function(){return il})).then(t,bt);case"dyte-livestream-toggle":return Promise.resolve().then((function(){return al})).then(t,bt);case"dyte-meeting-title":return Promise.resolve().then((function(){return nl})).then(t,bt);case"dyte-message-list-view":return Promise.resolve().then((function(){return wl})).then(t,bt);case"dyte-mic-toggle":return Promise.resolve().then((function(){return kl})).then(t,bt);case"dyte-mixed-grid":return Promise.resolve().then((function(){return _l})).then(t,bt);case"dyte-more-toggle":return Promise.resolve().then((function(){return Pl})).then(t,bt);case"dyte-mute-all-button":return Promise.resolve().then((function(){return Tl})).then(t,bt);case"dyte-mute-all-confirmation":return Promise.resolve().then((function(){return Al})).then(t,bt);case"dyte-network-indicator":return Promise.resolve().then((function(){return Rl})).then(t,bt);case"dyte-participant-count":return Promise.resolve().then((function(){return Il})).then(t,bt);case"dyte-participant-setup":return Promise.resolve().then((function(){return $l})).then(t,bt);case"dyte-participants":return Promise.resolve().then((function(){return Fl})).then(t,bt);case"dyte-participants-audio":return Promise.resolve().then((function(){return Bl})).then(t,bt);case"dyte-participants-stage-list":return Promise.resolve().then((function(){return Vl})).then(t,bt);case"dyte-participants-stage-queue":return Promise.resolve().then((function(){return ql})).then(t,bt);case"dyte-participants-toggle":return Promise.resolve().then((function(){return Kl})).then(t,bt);case"dyte-participants-viewer-list":return Promise.resolve().then((function(){return Yl})).then(t,bt);case"dyte-participants-waiting-list":return Promise.resolve().then((function(){return Jl})).then(t,bt);case"dyte-permissions-message":return Promise.resolve().then((function(){return ed})).then(t,bt);case"dyte-pip-toggle":return Promise.resolve().then((function(){return sd})).then(t,bt);case"dyte-plugin-main":return Promise.resolve().then((function(){return rd})).then(t,bt);case"dyte-plugins":return Promise.resolve().then((function(){return od})).then(t,bt);case"dyte-plugins-toggle":return Promise.resolve().then((function(){return dd})).then(t,bt);case"dyte-polls":return Promise.resolve().then((function(){return hd})).then(t,bt);case"dyte-polls-toggle":return Promise.resolve().then((function(){return gd})).then(t,bt);case"dyte-recording-indicator":return Promise.resolve().then((function(){return md})).then(t,bt);case"dyte-recording-toggle":return Promise.resolve().then((function(){return fd})).then(t,bt);case"dyte-screen-share-toggle":return Promise.resolve().then((function(){return wd})).then(t,bt);case"dyte-screenshare-view":return Promise.resolve().then((function(){return Pd})).then(t,bt);case"dyte-settings":return Promise.resolve().then((function(){return Td})).then(t,bt);case"dyte-settings-toggle":return Promise.resolve().then((function(){return Ad})).then(t,bt);case"dyte-setup-screen":return Promise.resolve().then((function(){return Rd})).then(t,bt);case"dyte-sidebar":return Promise.resolve().then((function(){return Id})).then(t,bt);case"dyte-simple-grid":return Promise.resolve().then((function(){return $d})).then(t,bt);case"dyte-spotlight-grid":return Promise.resolve().then((function(){return Fd})).then(t,bt);case"dyte-stage":return Promise.resolve().then((function(){return Nd})).then(t,bt);case"dyte-stage-toggle":return Promise.resolve().then((function(){return Bd})).then(t,bt);case"dyte-text-field":return Promise.resolve().then((function(){return Vd})).then(t,bt);case"dyte-transcripts":return Promise.resolve().then((function(){return qd})).then(t,bt);case"dyte-ui-provider":return Promise.resolve().then((function(){return Zd})).then(t,bt);case"dyte-waiting-screen":return Promise.resolve().then((function(){return Wd})).then(t,bt);case"dyte-breakout-room-manager_3":return Promise.resolve().then((function(){return Xd})).then(t,bt);case"dyte-channel-header_8":return Promise.resolve().then((function(){return uc})).then(t,bt);case"dyte-debugger-audio_4":return Promise.resolve().then((function(){return Cc})).then(t,bt);case"dyte-livestream-indicator_3":return Promise.resolve().then((function(){return ry})).then(t,bt);case"dyte-name-tag":return Promise.resolve().then((function(){return oy})).then(t,bt);case"dyte-participant":return Promise.resolve().then((function(){return gb})).then(t,bt);case"dyte-poll_2":return Promise.resolve().then((function(){return vb})).then(t,bt);case"dyte-settings-audio_2":return Promise.resolve().then((function(){return bb})).then(t,bt);case"dyte-tab-bar":return Promise.resolve().then((function(){return xb})).then(t,bt);case"dyte-transcript":return Promise.resolve().then((function(){return Sb})).then(t,bt);case"dyte-audio-visualizer_4":return Promise.resolve().then((function(){return Eb})).then(t,bt);case"dyte-channel-details":return Promise.resolve().then((function(){return Mb})).then(t,bt);case"dyte-chat-message_5":return Promise.resolve().then((function(){return Ob})).then(t,bt);case"dyte-draft-attachment-view_5":return Promise.resolve().then((function(){return jb})).then(t,bt);case"dyte-fullscreen-toggle":return Promise.resolve().then((function(){return Hb})).then(t,bt);case"dyte-join-stage_2":return Promise.resolve().then((function(){return qb})).then(t,bt);case"dyte-notification":return Promise.resolve().then((function(){return Kb})).then(t,bt);case"dyte-camera-selector_2":return Promise.resolve().then((function(){return Qb})).then(t,bt);case"dyte-sidebar-ui":return Promise.resolve().then((function(){return Xb})).then(t,bt);case"dyte-spotlight-indicator":return Promise.resolve().then((function(){return ew})).then(t,bt);case"dyte-virtualized-participant-list":return Promise.resolve().then((function(){return sw})).then(t,bt);case"dyte-file-message-view_4":return Promise.resolve().then((function(){return lw})).then(t,bt);case"dyte-dialog":return Promise.resolve().then((function(){return cw})).then(t,bt);case"dyte-logo":return Promise.resolve().then((function(){return pw})).then(t,bt);case"dyte-markdown-view":return Promise.resolve().then((function(){return uw})).then(t,bt);case"dyte-menu_3":return Promise.resolve().then((function(){return yw})).then(t,bt);case"dyte-avatar":return Promise.resolve().then((function(){return ww})).then(t,bt);case"dyte-controlbar-button":return Promise.resolve().then((function(){return kw})).then(t,bt);case"dyte-tooltip":return Promise.resolve().then((function(){return _w})).then(t,bt);case"dyte-spinner":return Promise.resolve().then((function(){return Pw})).then(t,bt);case"dyte-button":return Promise.resolve().then((function(){return Tw})).then(t,bt);case"dyte-icon":return Promise.resolve().then((function(){return Mw})).then(t,bt)}}return i(14794)(`./${r}.entry.js`).then((t=>(wt.set(r,t),t[a])),bt)},kt=new Map,St="undefined"!=typeof window?window:{},_t=St.document||{head:{}},Ct={$flags$:0,$resourcesUrl$:"",jmp:t=>t(),raf:t=>requestAnimationFrame(t),ael:(t,e,i,s)=>t.addEventListener(e,i,s),rel:(t,e,i,s)=>t.removeEventListener(e,i,s),ce:(t,e)=>new CustomEvent(t,e)},Pt=t=>Promise.resolve(t),Lt=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch(t){}return!1})(),Tt=[],Et=[],At=(t,e)=>i=>{t.push(i),h||(h=!0,e&&4&Ct.$flags$?Dt(Rt):Ct.raf(Rt))},Mt=t=>{for(let i=0;i<t.length;i++)try{t[i](performance.now())}catch(e){bt(e)}t.length=0},Rt=()=>{Mt(Tt),Mt(Et),(h=Tt.length>0)&&Ct.raf(Rt)},Dt=t=>Pt().then(t),It=At(Et,!0),Ot=(t,e)=>"undefined"==typeof window?Promise.resolve():Pt().then((()=>lt(JSON.parse('[["dyte-icon",[[1,"dyte-icon",{"icon":[1],"iconPack":[16],"variant":[513],"t":[16],"size":[513]}]]],["dyte-chat",[[1,"dyte-chat",{"meeting":[16],"config":[16],"size":[513],"iconPack":[16],"t":[16],"disablePrivateChat":[4,"disable-private-chat"],"privatePresetFilter":[16],"displayFilter":[16],"canPinMessages":[32],"unreadCountGroups":[32],"chatGroups":[32],"selectedGroup":[32],"now":[32],"dropzoneActivated":[32],"showLatestMessageButton":[32],"canSend":[32],"canSendTextMessage":[32],"canSendFiles":[32],"canPrivateMessage":[32],"canSendPrivateTexts":[32],"canSendPrivateFiles":[32],"emojiPickerEnabled":[32],"chatRecipientId":[32],"participants":[32],"selectedParticipant":[32],"channels":[32],"selectedChannelId":[32],"editingMessage":[32],"replyMessage":[32],"searchQuery":[32],"selectorState":[32],"creatingChannel":[32],"showPinnedMessages":[32]},[[8,"editMessageInit","onEditMessageInit"],[0,"switchChannel","channelSwitchListener"]]]]],["dyte-settings",[[1,"dyte-settings",{"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"activeTab":[32],"isMobileMainVisible":[32],"networkStatus":[32],"canProduceVideo":[32]}]]],["dyte-breakout-rooms-manager",[[1,"dyte-breakout-rooms-manager",{"meeting":[16],"states":[16],"iconPack":[16],"t":[16],"loading":[32],"roomConfig":[32],"draftState":[32],"assigningParticipants":[32],"selectedParticipants":[32],"ephemeralStatusText":[32],"isDragMode":[32]},[[0,"participantDelete","onParticipantDelete"],[0,"participantsDragging","toggleDragMode"],[0,"selectedParticipantsUpdate","updateSelectedParticipants"],[0,"allParticipantsToggleUpdate","updateAllParticipants"]]]]],["dyte-grid",[[1,"dyte-grid",{"layout":[513],"aspectRatio":[513,"aspect-ratio"],"meeting":[16],"gap":[514],"size":[513],"states":[16],"config":[16],"iconPack":[16],"t":[16],"gridSize":[16],"overrides":[8],"participants":[32],"pinnedParticipants":[32],"screenShareParticipants":[32],"plugins":[32],"emptyStage":[32],"showLiveStreamPlayer":[32],"canCurrentPeerHost":[32],"pipSupported":[32],"pipEnabled":[32],"hidden":[32],"roomState":[32]}]]],["dyte-participants-viewer-list",[[1,"dyte-participants-viewer-list",{"meeting":[16],"config":[16],"size":[513],"hideHeader":[4,"hide-header"],"iconPack":[16],"view":[1],"search":[1],"t":[16],"stageViewers":[32]}]]],["dyte-chat-composer-ui",[[1,"dyte-chat-composer-ui",{"canSendTextMessage":[4,"can-send-text-message"],"canSendFiles":[4,"can-send-files"],"size":[513],"iconPack":[16],"t":[16],"disableEmojiPicker":[4,"disable-emoji-picker"],"prefill":[16],"members":[16],"channelId":[1,"channel-id"],"emojiPickerActive":[32],"mentionQuery":[32],"focusedMemberIndex":[32],"filePreview":[32]}]]],["dyte-debugger",[[1,"dyte-debugger",{"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"activeTab":[32],"isMobileMainVisible":[32],"progress":[32]},[[0,"testProgress","progressUpdate"]]]]],["dyte-setup-screen",[[1,"dyte-setup-screen",{"meeting":[16],"states":[16],"size":[513],"config":[16],"iconPack":[16],"t":[16],"displayName":[32],"isJoining":[32],"canEditName":[32],"canProduceAudio":[32],"connectionState":[32]}]]],["dyte-mixed-grid",[[1,"dyte-mixed-grid",{"layout":[513],"participants":[16],"pinnedParticipants":[16],"screenShareParticipants":[16],"plugins":[16],"aspectRatio":[1,"aspect-ratio"],"gap":[2],"size":[513],"meeting":[16],"states":[16],"config":[16],"iconPack":[16],"t":[16],"gridSize":[16],"activeTab":[32],"initialised":[32]}]]],["dyte-participants-stage-queue",[[1,"dyte-participants-stage-queue",{"meeting":[16],"config":[16],"size":[513],"iconPack":[16],"view":[1],"t":[16],"stageRequestedParticipants":[32]}]]],["dyte-participants-waiting-list",[[1,"dyte-participants-waiting-list",{"meeting":[16],"config":[16],"size":[513],"iconPack":[16],"view":[1],"t":[16],"waitlistedParticipants":[32]}]]],["dyte-polls",[[1,"dyte-polls",{"meeting":[16],"config":[16],"size":[513],"iconPack":[16],"t":[16],"create":[32],"polls":[32],"permissions":[32]}]]],["dyte-audio-tile",[[1,"dyte-audio-tile",{"meeting":[16],"config":[16],"size":[513],"states":[16],"iconPack":[16],"t":[16],"participant":[16],"audioEnabled":[32],"volume":[32]}]]],["dyte-camera-toggle",[[1,"dyte-camera-toggle",{"variant":[513],"meeting":[16],"size":[513],"iconPack":[16],"t":[16],"videoEnabled":[32],"canProduceVideo":[32],"cameraPermission":[32],"stageStatus":[32]}]]],["dyte-channel-creator",[[1,"dyte-channel-creator",{"meeting":[16],"t":[16],"iconPack":[16],"channelName":[32],"searchQuery":[32],"step":[32],"loading":[32],"selectedMemberIds":[32],"focusedMemberIndex":[32],"showAllMembersList":[32]}]]],["dyte-channel-selector-ui",[[1,"dyte-channel-selector-ui",{"channels":[16],"selectedChannelId":[1,"selected-channel-id"],"iconPack":[16],"t":[16],"showRecentMessage":[4,"show-recent-message"],"isHidden":[32],"searchQuery":[32]}]]],["dyte-mic-toggle",[[1,"dyte-mic-toggle",{"variant":[513],"meeting":[16],"size":[513],"iconPack":[16],"t":[16],"audioEnabled":[32],"canProduceAudio":[32],"micPermission":[32],"stageStatus":[32]}]]],["dyte-mute-all-button",[[1,"dyte-mute-all-button",{"variant":[513],"meeting":[16],"size":[513],"iconPack":[16],"t":[16],"canDisable":[32]}]]],["dyte-screen-share-toggle",[[1,"dyte-screen-share-toggle",{"states":[16],"variant":[513],"meeting":[16],"size":[513],"iconPack":[16],"t":[16],"maxScreenShareCount":[32],"screenShareCount":[32],"screenShareEnabled":[32],"canScreenShare":[32],"shareScreenPermission":[32],"screenShareState":[32],"stageStatus":[32]}]]],["dyte-stage-toggle",[[1,"dyte-stage-toggle",{"variant":[513],"meeting":[16],"size":[513],"iconPack":[16],"t":[16],"stageStatus":[32],"state":[32]}]]],["dyte-ai-toggle",[[1,"dyte-ai-toggle",{"variant":[513],"states":[16],"meeting":[16],"size":[513],"iconPack":[16],"t":[16],"aiActive":[32]}]]],["dyte-breakout-rooms-toggle",[[1,"dyte-breakout-rooms-toggle",{"variant":[513],"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"canToggle":[32]}]]],["dyte-caption-toggle",[[1,"dyte-caption-toggle",{"variant":[513],"meeting":[16],"states":[16],"config":[16],"iconPack":[16],"size":[513],"t":[16],"captionEnabled":[32]}]]],["dyte-chat-toggle",[[1,"dyte-chat-toggle",{"variant":[513],"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"unreadMessageCount":[32],"chatActive":[32],"canViewChat":[32],"hasNewMessages":[32]}]]],["dyte-debugger-toggle",[[1,"dyte-debugger-toggle",{"variant":[513],"meeting":[16],"states":[16],"t":[16],"iconPack":[16],"size":[513]}]]],["dyte-grid-pagination",[[1,"dyte-grid-pagination",{"meeting":[16],"states":[16],"size":[513],"variant":[513],"iconPack":[16],"t":[16],"page":[32],"pageCount":[32],"activeCount":[32],"activeComputedCount":[32],"showPagination":[32]}]]],["dyte-idle-screen",[[1,"dyte-idle-screen",{"meeting":[16],"config":[16],"iconPack":[16],"t":[16]}]]],["dyte-leave-button",[[1,"dyte-leave-button",{"variant":[513],"size":[513],"iconPack":[16],"t":[16]}]]],["dyte-livestream-toggle",[[1,"dyte-livestream-toggle",{"variant":[513],"meeting":[16],"size":[513],"iconPack":[16],"t":[16],"livestreamState":[32]}]]],["dyte-more-toggle",[[1,"dyte-more-toggle",{"states":[16],"size":[513],"iconPack":[16],"t":[16]}]]],["dyte-participants",[[1,"dyte-participants",{"meeting":[16],"states":[16],"config":[16],"size":[513],"iconPack":[16],"defaultParticipantsTabId":[1,"default-participants-tab-id"],"t":[16],"currentParticipantsTabId":[32],"tabs":[32],"hasRequests":[32],"search":[32]}]]],["dyte-participants-audio",[[1,"dyte-participants-audio",{"meeting":[16],"iconPack":[16],"t":[16],"preloadedAudioElem":[16],"showPlayDialog":[32]}]]],["dyte-participants-toggle",[[1,"dyte-participants-toggle",{"variant":[513],"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"participantsActive":[32],"waitlistedParticipants":[32],"stageRequestedParticipants":[32],"badgeCount":[32],"canViewParticipants":[32]}]]],["dyte-pip-toggle",[[1,"dyte-pip-toggle",{"variant":[513],"meeting":[16],"states":[16],"config":[16],"iconPack":[16],"size":[513],"t":[16],"pipSupported":[32]}]]],["dyte-plugins-toggle",[[1,"dyte-plugins-toggle",{"variant":[513],"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"pluginsActive":[32],"canViewPlugins":[32]}]]],["dyte-polls-toggle",[[1,"dyte-polls-toggle",{"variant":[513],"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"pollsActive":[32],"unreadPollsCount":[32],"canViewPolls":[32]}]]],["dyte-recording-toggle",[[1,"dyte-recording-toggle",{"variant":[513],"meeting":[16],"t":[16],"iconPack":[16],"size":[513],"disabled":[4],"recordingState":[32],"canRecord":[32]}]]],["dyte-screenshare-view",[[1,"dyte-screenshare-view",{"hideFullScreenButton":[4,"hide-full-screen-button"],"nameTagPosition":[513,"name-tag-position"],"participant":[16],"meeting":[16],"variant":[513],"size":[513],"iconPack":[16],"t":[16],"videoExpanded":[32],"screenShareEnabled":[32],"isFullScreen":[32],"remoteControlInfo":[32]}]]],["dyte-settings-toggle",[[1,"dyte-settings-toggle",{"variant":[513],"states":[16],"size":[513],"iconPack":[16],"t":[16]}]]],["dyte-button",[[1,"dyte-button",{"size":[513],"variant":[513],"kind":[513],"reverse":[516],"disabled":[516],"iconPack":[16],"t":[16],"type":[513]}]]],["dyte-sidebar",[[1,"dyte-sidebar",{"enabledSections":[1040],"defaultSection":[1,"default-section"],"meeting":[16],"states":[16],"config":[16],"iconPack":[16],"t":[16],"size":[513],"view":[513],"currentTab":[32],"isFloating":[32],"enablePinning":[32]}]]],["dyte-ai",[[1,"dyte-ai",{"defaultSection":[1,"default-section"],"meeting":[16],"states":[16],"config":[16],"iconPack":[16],"t":[16],"size":[513],"view":[513],"tab":[32],"newTranscriptionAvailable":[32],"newAiMessageAvailable":[32]}]]],["dyte-ai-home",[[1,"dyte-ai-home",{"meeting":[16],"initialMessages":[16],"prompt":[32],"messages":[32]}]]],["dyte-broadcast-message-modal",[[1,"dyte-broadcast-message-modal",{"meeting":[16],"states":[16],"iconPack":[16],"t":[16],"messagePayload":[32],"successMessage":[32]}]]],["dyte-ended-screen",[[1,"dyte-ended-screen",{"config":[16],"size":[513],"states":[16],"t":[16],"iconPack":[16],"meeting":[16],"icon":[32],"message":[32]}]]],["dyte-image-viewer",[[1,"dyte-image-viewer",{"image":[16],"size":[513],"t":[16],"iconPack":[16]}]]],["dyte-message-list-view",[[0,"dyte-message-list-view",{"messages":[16],"renderer":[16],"loadMore":[16],"visibleItemsCount":[2,"visible-items-count"],"estimateItemSize":[2,"estimate-item-size"],"iconPack":[16],"range":[32],"isFetching":[32],"autoScroll":[32],"totalHeight":[32]}]]],["dyte-permissions-message",[[1,"dyte-permissions-message",{"meeting":[16],"t":[16],"iconPack":[16],"states":[16],"device":[32],"currentStep":[32],"svgSteps":[32]}]]],["dyte-plugin-main",[[1,"dyte-plugin-main",{"meeting":[16],"plugin":[16],"iconPack":[16],"t":[16],"canClosePlugin":[32],"viewModeEnabled":[32]}]]],["dyte-plugins",[[1,"dyte-plugins",{"meeting":[16],"config":[16],"size":[513],"iconPack":[16],"t":[16],"plugins":[32],"canStartPlugins":[32],"canClosePlugins":[32],"activatedPluginsId":[32]}]]],["dyte-chat-selector-ui",[[1,"dyte-chat-selector-ui",{"selfUserId":[1,"self-user-id"],"selectedGroupId":[1,"selected-group-id"],"unreadCounts":[16],"groups":[16],"iconPack":[16],"t":[16],"showParticipantsPanel":[32],"query":[32]}]]],["dyte-clock",[[1,"dyte-clock",{"meeting":[16],"iconPack":[16],"t":[16],"startedTime":[32],"timeDiff":[32]}]]],["dyte-confirmation-modal",[[1,"dyte-confirmation-modal",{"meeting":[16],"states":[16],"iconPack":[16],"t":[16]}]]],["dyte-file-dropzone",[[1,"dyte-file-dropzone",{"hostEl":[16],"iconPack":[16],"t":[16],"dropzoneActivated":[32]}]]],["dyte-information-tooltip",[[1,"dyte-information-tooltip",{"iconPack":[16]}]]],["dyte-leave-meeting",[[1,"dyte-leave-meeting",{"meeting":[16],"states":[16],"iconPack":[16],"t":[16],"canEndMeeting":[32]}]]],["dyte-meeting-title",[[1,"dyte-meeting-title",{"meeting":[16],"iconPack":[16],"t":[16]}]]],["dyte-mute-all-confirmation",[[1,"dyte-mute-all-confirmation",{"meeting":[16],"states":[16],"iconPack":[16],"t":[16],"allowUnmute":[32]}]]],["dyte-network-indicator",[[1,"dyte-network-indicator",{"participant":[16],"meeting":[16],"iconPack":[16],"t":[16],"isScreenShare":[4,"is-screen-share"],"score":[32]}]]],["dyte-participant-count",[[1,"dyte-participant-count",{"meeting":[16],"iconPack":[16],"t":[16],"size":[513],"participantCount":[32],"isViewer":[32]}]]],["dyte-participants-stage-list",[[1,"dyte-participants-stage-list",{"meeting":[16],"config":[16],"size":[513],"hideHeader":[4,"hide-header"],"iconPack":[16],"view":[1],"t":[16],"search":[1],"participants":[32]}]]],["dyte-recording-indicator",[[1,"dyte-recording-indicator",{"meeting":[16],"size":[513],"t":[16],"iconPack":[16],"isRecording":[32]}]]],["dyte-transcripts",[[1,"dyte-transcripts",{"meeting":[16],"states":[16],"config":[16],"t":[16],"transcripts":[32],"listenerAttached":[32]}]]],["dyte-waiting-screen",[[1,"dyte-waiting-screen",{"meeting":[16],"config":[16],"iconPack":[16],"t":[16]}]]],["dyte-ai-chat",[[1,"dyte-ai-chat",{"t":[16]}]]],["dyte-ai-transcriptions",[[1,"dyte-ai-transcriptions",{"t":[16],"meeting":[16],"initialTranscriptions":[16],"participantQuery":[32],"isProcessing":[32],"captionViewEnabled":[32],"transcriptions":[32]}]]],["dyte-audio-grid",[[1,"dyte-audio-grid",{"meeting":[16],"config":[16],"states":[16],"iconPack":[16],"size":[513],"t":[16],"hideSelf":[4,"hide-self"],"activeParticipants":[32],"onStageParticipants":[32],"offStageParticipants":[32]}]]],["dyte-controlbar",[[1,"dyte-controlbar",{"variant":[513],"disableRender":[4,"disable-render"],"meeting":[16],"config":[16],"states":[16],"iconPack":[16],"t":[16],"size":[513]}]]],["dyte-header",[[1,"dyte-header",{"variant":[513],"disableRender":[4,"disable-render"],"meeting":[16],"config":[16],"states":[16],"iconPack":[16],"t":[16],"size":[513]}]]],["dyte-meeting",[[1,"dyte-meeting",{"loadConfigFromPreset":[4,"load-config-from-preset"],"applyDesignSystem":[4,"apply-design-system"],"mode":[513],"leaveOnUnmount":[4,"leave-on-unmount"],"meeting":[16],"showSetupScreen":[1028,"show-setup-screen"],"t":[16],"config":[1040],"iconPackUrl":[513,"icon-pack-url"],"size":[1537],"gridLayout":[1,"grid-layout"],"states":[32],"iconPack":[32]},[[0,"dyteStateUpdate","listenState"]]]]],["dyte-participant-setup",[[1,"dyte-participant-setup",{"nameTagPosition":[513,"name-tag-position"],"isPreview":[4,"is-preview"],"participant":[16],"states":[16],"config":[16],"variant":[513],"size":[513],"iconPack":[16],"t":[16],"videoState":[32],"isPinned":[32]}]]],["dyte-simple-grid",[[1,"dyte-simple-grid",{"participants":[16],"aspectRatio":[1,"aspect-ratio"],"gap":[2],"size":[513],"meeting":[16],"states":[16],"config":[16],"iconPack":[16],"t":[16],"dimensions":[32],"mediaConnection":[32]}]]],["dyte-spotlight-grid",[[1,"dyte-spotlight-grid",{"layout":[513],"participants":[16],"pinnedParticipants":[16],"aspectRatio":[1,"aspect-ratio"],"gap":[2],"size":[513],"meeting":[16],"states":[16],"config":[16],"iconPack":[16],"t":[16],"gridSize":[16]}]]],["dyte-stage",[[1,"dyte-stage",{"iconPack":[16],"t":[16]}]]],["dyte-text-field",[[1,"dyte-text-field",{"type":[1],"placeholder":[1],"disabled":[4],"iconPack":[16],"t":[16]}]]],["dyte-ui-provider",[[4,"dyte-ui-provider",{"meeting":[16],"size":[1537],"config":[1040],"t":[16],"iconPackUrl":[513,"icon-pack-url"],"loadConfigFromPreset":[4,"load-config-from-preset"],"applyDesignSystem":[4,"apply-design-system"],"joinRoom":[4,"join-room"],"isReady":[32],"iconPack":[32]}]]],["dyte-participant",[[1,"dyte-participant",{"meeting":[16],"view":[1],"participant":[16],"iconPack":[16],"t":[16],"config":[16],"audioEnabled":[32],"videoEnabled":[32],"isPinned":[32],"isHidden":[32],"isOnStage":[32],"canDisableParticipantAudio":[32],"canDisableParticipantVideo":[32],"canKickParticipant":[32],"canPinParticipant":[32],"canAllowParticipantOnStage":[32],"menuOpen":[32]}]]],["dyte-tab-bar",[[1,"dyte-tab-bar",{"size":[513],"meeting":[16],"states":[16],"config":[16],"layout":[513],"iconPack":[16],"t":[16],"activeTab":[16],"tabs":[16]}]]],["dyte-name-tag",[[1,"dyte-name-tag",{"participant":[16],"meeting":[16],"size":[513],"isScreenShare":[4,"is-screen-share"],"variant":[513],"iconPack":[16],"t":[16],"length":[32]}]]],["dyte-transcript",[[1,"dyte-transcript",{"transcript":[16],"t":[16],"timeout":[32]}]]],["dyte-settings-audio_2",[[1,"dyte-settings-audio",{"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16]}],[1,"dyte-settings-video",{"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"videoEnabled":[32]}]]],["dyte-poll_2",[[1,"dyte-poll-form",{"iconPack":[16],"t":[16],"options":[32],"anonymous":[32],"hideVotes":[32],"error":[32]}],[1,"dyte-poll",{"poll":[16],"self":[1],"permissions":[16],"iconPack":[16],"t":[16]}]]],["dyte-channel-details",[[1,"dyte-channel-details",{"channel":[16],"t":[16],"iconPack":[16],"members":[16]}]]],["dyte-fullscreen-toggle",[[1,"dyte-fullscreen-toggle",{"states":[16],"targetElement":[16],"variant":[513],"size":[513],"iconPack":[16],"t":[16],"fullScreenActive":[32],"isFullScreenSupported":[32]}]]],["dyte-notification",[[1,"dyte-notification",{"notification":[16],"size":[513],"iconPack":[16],"t":[16],"imageState":[32]}]]],["dyte-sidebar-ui",[[1,"dyte-sidebar-ui",{"view":[513],"tabs":[16],"hideHeader":[4,"hide-header"],"hideCloseAction":[4,"hide-close-action"],"currentTab":[1,"current-tab"],"iconPack":[16],"t":[16]}]]],["dyte-spotlight-indicator",[[1,"dyte-spotlight-indicator",{"meeting":[16],"iconPack":[16],"t":[16],"size":[513],"canSpotlight":[32],"isSpotlighted":[32]}]]],["dyte-virtualized-participant-list",[[0,"dyte-virtualized-participant-list",{"items":[16],"renderItem":[16],"itemHeight":[1026,"item-height"],"bufferedItemsCount":[2,"buffered-items-count"],"emptyListElement":[16],"visibleStart":[32],"visibleEnd":[32]}]]],["dyte-breakout-room-manager_3",[[1,"dyte-breakout-room-manager",{"meeting":[16],"assigningParticipants":[4,"assigning-participants"],"mode":[1],"states":[16],"allowDelete":[4,"allow-delete"],"iconPack":[16],"t":[16],"isDragMode":[4,"is-drag-mode"],"room":[16],"defaultExpanded":[4,"default-expanded"],"editingTitleRoomId":[32],"newTitle":[32],"showExpandedCard":[32],"glowingCard":[32]}],[1,"dyte-breakout-room-participants",{"meeting":[16],"participantIds":[16],"iconPack":[16],"t":[16],"selectedParticipantIds":[16],"search":[32],"participantsToShow":[32],"isDragging":[32]}],[1,"dyte-counter",{"size":[513],"value":[2],"minValue":[2,"min-value"],"iconPack":[16],"t":[16],"input":[32]}]]],["dyte-livestream-indicator_3",[[1,"dyte-livestream-player",{"meeting":[16],"size":[513],"t":[16],"iconPack":[16],"playbackUrl":[32],"isSupported":[32],"playerState":[32],"livestreamState":[32],"playerError":[32],"livestreamId":[32],"audioPlaybackError":[32],"qualityLevels":[32],"selectedQuality":[32],"currentTime":[32],"duration":[32],"hideControls":[32]}],[1,"dyte-livestream-indicator",{"meeting":[16],"size":[513],"t":[16],"iconPack":[16],"isLivestreaming":[32]}],[1,"dyte-viewer-count",{"meeting":[16],"variant":[513],"iconPack":[16],"t":[16],"viewerCount":[32]}]]],["dyte-join-stage_2",[[1,"dyte-join-stage",{"meeting":[16],"config":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"dataConfig":[16],"isLoading":[32]}],[1,"dyte-overlay-modal",{"meeting":[16],"states":[16],"iconPack":[16],"t":[16]}]]],["dyte-dialog",[[1,"dyte-dialog",{"hideCloseButton":[4,"hide-close-button"],"disableEscapeKey":[4,"disable-escape-key"],"meeting":[16],"config":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"open":[1540]}]]],["dyte-debugger-audio_4",[[1,"dyte-debugger-audio",{"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"isNetworkOpen":[32],"isDevicesOpen":[32],"audioProducerFormattedStats":[32],"audioProducerScoreStats":[32],"networkBasedMediaHealth":[32],"devicesHealth":[32]}],[1,"dyte-debugger-screenshare",{"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"isNetworkOpen":[32],"isDevicesOpen":[32],"videoProducerFormattedStats":[32],"videoProducerScoreStats":[32],"audioProducerFormattedStats":[32],"audioProducerScoreStats":[32],"networkBasedMediaHealth":[32]}],[1,"dyte-debugger-system",{"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"isBatterySectionOpen":[32],"batterySectionHealth":[32],"battery":[32],"batteryFormattedStats":[32]}],[1,"dyte-debugger-video",{"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"isNetworkOpen":[32],"isDevicesOpen":[32],"videoProducerFormattedStats":[32],"videoProducerScoreStats":[32],"networkBasedMediaHealth":[32],"devicesHealth":[32]}]]],["dyte-logo",[[1,"dyte-logo",{"logoUrl":[1025,"logo-url"],"config":[16],"meeting":[16],"t":[16]}]]],["dyte-camera-selector_2",[[1,"dyte-participant-tile",{"nameTagPosition":[513,"name-tag-position"],"isPreview":[4,"is-preview"],"participant":[16],"meeting":[16],"states":[16],"config":[16],"variant":[513],"size":[513],"iconPack":[16],"t":[16],"isPinned":[32],"mediaConnectionError":[32]}],[1,"dyte-camera-selector",{"meeting":[16],"size":[513],"iconPack":[16],"variant":[1],"t":[16],"videoDevices":[32],"currentDevice":[32],"canProduceVideo":[32]}]]],["dyte-markdown-view",[[1,"dyte-markdown-view",{"text":[1],"maxLength":[2,"max-length"]}]]],["dyte-spinner",[[1,"dyte-spinner",{"iconPack":[16],"size":[513],"t":[16]}]]],["dyte-draft-attachment-view_5",[[1,"dyte-draft-attachment-view",{"iconPack":[16],"t":[16],"attachment":[16],"filePreview":[32]}],[1,"dyte-emoji-picker-button",{"iconPack":[16],"t":[16],"isActive":[4,"is-active"]}],[1,"dyte-file-picker-button",{"filter":[1],"label":[1],"icon":[1],"iconPack":[16],"t":[16]}],[1,"dyte-text-composer-view",{"disabled":[4],"placeholder":[1],"value":[1],"maxLength":[2,"max-length"],"rateLimitBreached":[4,"rate-limit-breached"],"keyDownHandler":[16],"iconPack":[16],"t":[16],"maxLengthBreached":[32],"setText":[64]}],[1,"dyte-emoji-picker",{"iconPack":[16],"t":[16],"emojiList":[32],"filterVal":[32],"filteredEmojis":[32]}]]],["dyte-avatar",[[1,"dyte-avatar",{"participant":[16],"variant":[513],"size":[513],"iconPack":[16],"t":[16],"imageState":[32]}]]],["dyte-menu_3",[[1,"dyte-menu",{"size":[513],"placement":[1],"offset":[2],"iconPack":[16],"t":[16]}],[1,"dyte-menu-item",{"size":[513],"iconPack":[16],"t":[16]}],[1,"dyte-menu-list",{"iconPack":[16],"t":[16]}]]],["dyte-chat-message_5",[[1,"dyte-chat-message",{"message":[16],"isContinued":[4,"is-continued"],"child":[16],"isUnread":[4,"is-unread"],"size":[513],"iconPack":[16],"t":[16],"isSelf":[4,"is-self"],"canEdit":[4,"can-edit"],"canDelete":[4,"can-delete"],"canReply":[4,"can-reply"],"canPin":[4,"can-pin"],"disableControls":[4,"disable-controls"],"alignRight":[4,"align-right"],"senderDisplayPicture":[1,"sender-display-picture"],"hideAvatar":[4,"hide-avatar"],"leftAlign":[4,"left-align"],"now":[32]}],[0,"dyte-image-message",{"message":[16],"now":[16],"isContinued":[516,"is-continued"],"iconPack":[16],"t":[16],"showBubble":[4,"show-bubble"],"status":[32]}],[1,"dyte-paginated-list",{"pageSize":[2,"page-size"],"pagesAllowed":[2,"pages-allowed"],"fetchData":[16],"createNodes":[16],"selectedItemId":[1,"selected-item-id"],"autoScroll":[4,"auto-scroll"],"iconPack":[16],"t":[16],"emptyListLabel":[1,"empty-list-label"],"isLoading":[32],"rerenderBoolean":[32],"shouldRenderNewNodes":[32],"hasNewNodesToRender":[32],"showEmptyListLabel":[32],"onNewNode":[64],"onNodeDelete":[64],"onNodeUpdate":[64]}],[0,"dyte-file-message",{"message":[16],"now":[16],"isContinued":[516,"is-continued"],"iconPack":[16],"t":[16],"showBubble":[4,"show-bubble"]}],[0,"dyte-text-message",{"message":[16],"now":[16],"isContinued":[516,"is-continued"],"iconPack":[16],"t":[16],"showBubble":[4,"show-bubble"]}]]],["dyte-file-message-view_4",[[1,"dyte-message-view",{"actions":[16],"variant":[1],"viewType":[1,"view-type"],"avatarUrl":[1,"avatar-url"],"hideAvatar":[4,"hide-avatar"],"authorName":[1,"author-name"],"hideAuthorName":[4,"hide-author-name"],"hideMetadata":[4,"hide-metadata"],"time":[16],"iconPack":[16]}],[1,"dyte-image-message-view",{"url":[1],"iconPack":[16],"t":[16],"status":[32]}],[1,"dyte-file-message-view",{"name":[1],"size":[2],"url":[1],"iconPack":[16],"t":[16]}],[0,"dyte-text-message-view",{"text":[1],"isMarkdown":[4,"is-markdown"]}]]],["dyte-tooltip",[[1,"dyte-tooltip",{"label":[1],"variant":[513],"disabled":[516],"open":[516],"kind":[513],"size":[513],"placement":[1],"delay":[2],"iconPack":[16],"t":[16],"isInFocus":[32]}]]],["dyte-channel-header_8",[[1,"dyte-chat-messages-ui",{"selectedGroup":[1,"selected-group"],"messages":[16],"selfUserId":[1,"self-user-id"],"canPinMessages":[4,"can-pin-messages"],"size":[513],"iconPack":[16],"t":[16],"now":[32],"showLatestMessageButton":[32]}],[1,"dyte-chat-messages-ui-paginated",{"meeting":[16],"selectedChannel":[16],"selectedChannelId":[1,"selected-channel-id"],"size":[513],"iconPack":[16],"t":[16],"leftAlign":[4,"left-align"],"children":[32],"permissionsChanged":[32]}],[1,"dyte-chat-search-results",{"meeting":[16],"query":[1],"channelId":[1,"channel-id"],"iconPack":[16],"t":[16]}],[1,"dyte-chat-composer-view",{"canSendTextMessage":[4,"can-send-text-message"],"canSendFiles":[4,"can-send-files"],"message":[1],"quotedMessage":[1,"quoted-message"],"storageKey":[1,"storage-key"],"inputTextPlaceholder":[1,"input-text-placeholder"],"isEditing":[4,"is-editing"],"iconPack":[16],"t":[16],"maxLength":[2,"max-length"],"disableEmojiPicker":[4,"disable-emoji-picker"],"rateLimits":[16],"fileToUpload":[32],"isEmojiPickerOpen":[32],"disableSendButton":[32],"rateLimitsBreached":[32]}],[0,"dyte-channel-header",{"meeting":[16],"channel":[16],"iconPack":[16],"t":[16],"showBackButton":[4,"show-back-button"],"showChannelDetailsDialog":[32],"showSearchBar":[32],"members":[32]}],[1,"dyte-channel-selector-view",{"channels":[16],"selectedChannelId":[1,"selected-channel-id"],"disableSearch":[4,"disable-search"],"hideAvatar":[4,"hide-avatar"],"iconPack":[16],"t":[16],"viewAs":[1,"view-as"],"searchQuery":[32],"showDropdown":[32]}],[1,"dyte-dialog-manager",{"meeting":[16],"config":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16]}],[1,"dyte-notifications",{"meeting":[16],"states":[16],"config":[16],"t":[16],"size":[513],"iconPack":[16],"notifications":[32]},[[8,"dyteAPIError","apiErrorListener"],[8,"dyteSendNotification","sendNotificationListener"]]]]],["dyte-audio-visualizer_4",[[1,"dyte-audio-visualizer",{"variant":[513],"participant":[16],"size":[513],"iconPack":[16],"t":[16],"hideMuted":[4,"hide-muted"],"isScreenShare":[4,"is-screen-share"],"audioEnabled":[32],"volume":[32]}],[1,"dyte-speaker-selector",{"meeting":[16],"states":[16],"variant":[1],"size":[513],"iconPack":[16],"t":[16],"speakerDevices":[32],"currentDevices":[32]}],[1,"dyte-microphone-selector",{"meeting":[16],"size":[513],"iconPack":[16],"variant":[1],"t":[16],"audioinputDevices":[32],"canProduceAudio":[32],"currentDevices":[32]}],[1,"dyte-switch",{"checked":[1028],"readonly":[4],"disabled":[516],"iconPack":[16],"t":[16]}]]],["dyte-controlbar-button",[[1,"dyte-controlbar-button",{"variant":[513],"showWarning":[4,"show-warning"],"size":[513],"label":[1],"icon":[1],"isLoading":[4,"is-loading"],"disabled":[516],"iconPack":[16],"t":[16],"brandIcon":[516,"brand-icon"]}]]]]'),e))),$t={designTokens:{spacingBase:4,googleFont:"Inter"},styles:{"dyte-header":{display:"grid",height:"48px",gridTemplateColumns:"repeat(3, 1fr)",gridTemplateRows:"1fr",alignItems:"center"},"dyte-header.sm":{display:"grid",gridArea:"header",gridTemplateColumns:"repeat(2, 1fr)",gridTemplateRows:"1fr",alignItems:"center"},"div#header-left":{display:"flex",alignItems:"center",height:"48px",wordBreak:"break-all"},"dyte-logo":{height:"26px"},"div#header-center":{display:"flex",alignItems:"center",justifyContent:"center",wordBreak:"break-all"},"div#header-right":{display:"flex",alignItems:"center",justifyContent:"flex-end"},"dyte-stage":{display:"flex",flex:"1"},"dyte-grid":{flex:"1",height:"auto"},"dyte-controlbar":{display:"grid",gridTemplateColumns:"repeat(3,1fr)",gridTemplateRows:"1fr",alignItems:"center",padding:"8px"},"dyte-controlbar.sm":{display:"flex",position:"relative",backgroundColor:"rgb(var(--dyte-colors-background-1000, 0 0 0))"},"dyte-controlbar.md":{display:"flex",position:"relative",backgroundColor:"rgb(var(--dyte-colors-background-1000, 0 0 0))"},"div#controlbar-left":{display:"flex",alignItems:"center"},"div#controlbar-center":{display:"flex",alignItems:"center",position:"relative",overflow:"visible",justifyContent:"center"},"div#controlbar-mobile":{display:"flex",flex:"1",alignItems:"center",justifyContent:"center"},"div#controlbar-right":{display:"flex",alignItems:"center",justifyContent:"flex-end"},"dyte-settings":{width:"720px",height:"480px"},"dyte-debugger":{width:"720px",height:"480px"},"dyte-breakout-rooms-manager":{minHeight:"400px",minWidth:"500px",maxWidth:"80%",maxHeight:"480px"},"div#setupcontrols-media":{position:"absolute",bottom:"8px",right:"8px",display:"flex",gap:"4px"},"div#setupcontrols-settings":{position:"absolute",top:"8px",right:"8px",display:"flex",flexDirection:"column",gap:"6px"},"dyte-meeting-title.sm":{marginLeft:"0"},"dyte-clock":{marginRight:"0"}},root:{"dyte-meeting":{state:"meeting",states:["activeSidebar","activeAI"]},"dyte-meeting[meeting=waiting]":["dyte-waiting-screen"],"dyte-meeting[meeting=idle]":["dyte-idle-screen"],"dyte-meeting[meeting=setup]":["dyte-setup-screen","dyte-dialog-manager"],"dyte-meeting[meeting=joined]":["dyte-header","dyte-stage","dyte-controlbar","dyte-participants-audio","dyte-dialog-manager"],"dyte-meeting[meeting=joined].activeSidebar.sm":{add:[["dyte-sidebar",{view:"full-screen"}]]},"dyte-meeting[meeting=joined].activeSidebar.md":{add:[["dyte-sidebar",{view:"full-screen"}]]},"dyte-meeting[meeting=joined].activeAI.sm":{add:[["dyte-ai",{view:"full-screen"}]]},"dyte-meeting[meeting=joined].activeAI.md":{add:[["dyte-ai",{view:"full-screen"}]]},"dyte-meeting[meeting=ended]":["dyte-ended-screen"],"dyte-header":["div#header-left","div#header-center","div#header-right"],"dyte-header.sm":{remove:["div#header-center"]},"div#header-left":["dyte-logo","dyte-recording-indicator","dyte-livestream-indicator"],"div#header-center":["dyte-meeting-title"],"div#header-right":["dyte-grid-pagination","dyte-clock","dyte-participant-count","dyte-viewer-count"],"div#header-left.sm":["dyte-meeting-title","dyte-recording-indicator","dyte-livestream-indicator"],"dyte-stage":{states:["activeSidebar","activeAI"],children:["dyte-grid","dyte-notifications","dyte-transcripts"]},"dyte-stage.activeSidebar":{add:[["dyte-sidebar",{view:"sidebar"}]]},"dyte-stage.activeSidebar.sm":{remove:["dyte-sidebar"]},"dyte-stage.activeAI":{add:[["dyte-ai",{view:"sidebar"}]]},"dyte-stage.activeAI.sm":{remove:["dyte-ai"]},"dyte-grid":{states:["activeScreenShare","activePlugin","activeSpotlight"],children:["dyte-simple-grid"]},"dyte-grid.activeSpotlight":["dyte-spotlight-grid"],"dyte-grid.activeScreenShare":["dyte-mixed-grid"],"dyte-grid.activePlugin":["dyte-mixed-grid"],"dyte-grid.activeScreenShare.activeSpotlight":["dyte-mixed-grid"],"dyte-grid.activePlugin.activeSpotlight":["dyte-mixed-grid"],"dyte-grid.activePlugin.activeScreenShare.activeSpotlight":["dyte-mixed-grid"],"dyte-mixed-grid":{states:["activeSpotlight"],children:["dyte-simple-grid"]},"dyte-mixed-grid.activeSpotlight":["dyte-spotlight-grid"],"dyte-participant-tile":{state:"meeting",children:["dyte-name-tag","dyte-avatar","dyte-network-indicator"]},"dyte-participant-setup":["dyte-avatar","div#setupcontrols-media"],"dyte-participant-tile[meeting=setup]":["dyte-avatar","div#setupcontrols-settings","div#setupcontrols-media"],"div#setupcontrols-media":[["dyte-mic-toggle",{size:"sm"}],["dyte-camera-toggle",{size:"sm"}]],"div#setupcontrols-settings":[["dyte-settings-toggle",{size:"sm"}]],"dyte-screenshare-view":{children:["dyte-name-tag","dyte-network-indicator"]},"dyte-name-tag":[["dyte-audio-visualizer",{slot:"start"}]],"dyte-controlbar":{states:["activeMoreMenu"],props:{variant:"solid"},children:["div#controlbar-left","div#controlbar-center","div#controlbar-right"]},"dyte-more-toggle":{states:["activeMoreMenu"],children:[]},"dyte-controlbar.sm":["div#controlbar-mobile"],"dyte-controlbar.md":["div#controlbar-mobile"],"dyte-more-toggle.activeMoreMenu":[["dyte-fullscreen-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-pip-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-caption-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-mute-all-button",{variant:"horizontal",slot:"more-elements"}],["dyte-breakout-rooms-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-recording-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-debugger-toggle",{variant:"horizontal"}]],"dyte-more-toggle.activeMoreMenu.sm":[["dyte-chat-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-participants-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-polls-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-plugins-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-fullscreen-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-screen-share-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-pip-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-caption-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-mute-all-button",{variant:"horizontal",slot:"more-elements"}],["dyte-breakout-rooms-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-settings-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-ai-toggle",{variant:"horizontal"}],["dyte-debugger-toggle",{variant:"horizontal"}]],"dyte-more-toggle.activeMoreMenu.md":[["dyte-chat-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-participants-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-polls-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-plugins-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-fullscreen-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-screen-share-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-pip-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-caption-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-mute-all-button",{variant:"horizontal",slot:"more-elements"}],["dyte-breakout-rooms-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-settings-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-ai-toggle",{variant:"horizontal"}],["dyte-debugger-toggle",{variant:"horizontal"}]],"div#controlbar-mobile":["dyte-mic-toggle","dyte-camera-toggle","dyte-webinar-stage-toggle","dyte-stage-toggle","dyte-leave-button","dyte-more-toggle"],"div#controlbar-left":["dyte-settings-toggle","dyte-screen-share-toggle","dyte-livestream-toggle"],"div#controlbar-center":["dyte-mic-toggle","dyte-camera-toggle","dyte-webinar-stage-toggle","dyte-stage-toggle","dyte-more-toggle","dyte-leave-button"],"div#controlbar-right":["dyte-chat-toggle","dyte-polls-toggle","dyte-participants-toggle","dyte-plugins-toggle","dyte-ai-toggle"]},config:{notification_sounds:{participant_left:!1},participant_joined_sound_notification_limit:10,participant_chat_message_sound_notification_limit:10,videoFit:"cover"}};var Ut="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g,Ft="object"==typeof self&&self&&self.Object===Object&&self,zt=Ut||Ft||Function("return this")(),Nt=zt.Symbol,jt=Object.prototype,Bt=jt.hasOwnProperty,Ht=jt.toString,Vt=Nt?Nt.toStringTag:void 0;var Gt=Object.prototype.toString;var qt=Nt?Nt.toStringTag:void 0;function Zt(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":qt&&qt in Object(t)?function(t){var e=Bt.call(t,Vt),i=t[Vt];try{t[Vt]=void 0;var s=!0}catch(r){}var a=Ht.call(t);return s&&(e?t[Vt]=i:delete t[Vt]),a}(t):function(t){return Gt.call(t)}(t)}function Kt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Wt(t){return null!=t&&"object"==typeof t}function Yt(t,e){return t===e||t!=t&&e!=e}function Qt(t,e){for(var i=t.length;i--;)if(Yt(t[i][0],e))return i;return-1}var Jt=Array.prototype.splice;function Xt(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var s=t[e];this.set(s[0],s[1])}}Xt.prototype.clear=function(){this.__data__=[],this.size=0},Xt.prototype.delete=function(t){var e=this.__data__,i=Qt(e,t);return!(i<0)&&(i==e.length-1?e.pop():Jt.call(e,i,1),--this.size,!0)},Xt.prototype.get=function(t){var e=this.__data__,i=Qt(e,t);return i<0?void 0:e[i][1]},Xt.prototype.has=function(t){return Qt(this.__data__,t)>-1},Xt.prototype.set=function(t,e){var i=this.__data__,s=Qt(i,t);return s<0?(++this.size,i.push([t,e])):i[s][1]=e,this};function te(t){if(!Kt(t))return!1;var e=Zt(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}var ee,ie=zt["__core-js_shared__"],se=(ee=/[^.]+$/.exec(ie&&ie.keys&&ie.keys.IE_PROTO||""))?"Symbol(src)_1."+ee:"";var ae=Function.prototype.toString;function re(t){if(null!=t){try{return ae.call(t)}catch(e){}try{return t+""}catch(e){}}return""}var ne=/^\[object .+?Constructor\]$/,oe=Function.prototype,le=Object.prototype,de=oe.toString,ce=le.hasOwnProperty,he=RegExp("^"+de.call(ce).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function pe(t){return!(!Kt(t)||(e=t,se&&se in e))&&(te(t)?he:ne).test(re(t));var e}function ge(t,e){var i=function(t,e){return null==t?void 0:t[e]}(t,e);return pe(i)?i:void 0}var ue=ge(zt,"Map"),me=ge(Object,"create");var ve=Object.prototype.hasOwnProperty;var fe=Object.prototype.hasOwnProperty;function ye(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var s=t[e];this.set(s[0],s[1])}}function be(t,e){var i,s,a=t.__data__;return("string"==(s=typeof(i=e))||"number"==s||"symbol"==s||"boolean"==s?"__proto__"!==i:null===i)?a["string"==typeof e?"string":"hash"]:a.map}function we(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var s=t[e];this.set(s[0],s[1])}}ye.prototype.clear=function(){this.__data__=me?me(null):{},this.size=0},ye.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},ye.prototype.get=function(t){var e=this.__data__;if(me){var i=e[t];return"__lodash_hash_undefined__"===i?void 0:i}return ve.call(e,t)?e[t]:void 0},ye.prototype.has=function(t){var e=this.__data__;return me?void 0!==e[t]:fe.call(e,t)},ye.prototype.set=function(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=me&&void 0===e?"__lodash_hash_undefined__":e,this},we.prototype.clear=function(){this.size=0,this.__data__={hash:new ye,map:new(ue||Xt),string:new ye}},we.prototype.delete=function(t){var e=be(this,t).delete(t);return this.size-=e?1:0,e},we.prototype.get=function(t){return be(this,t).get(t)},we.prototype.has=function(t){return be(this,t).has(t)},we.prototype.set=function(t,e){var i=be(this,t),s=i.size;return i.set(t,e),this.size+=i.size==s?0:1,this};function xe(t){var e=this.__data__=new Xt(t);this.size=e.size}xe.prototype.clear=function(){this.__data__=new Xt,this.size=0},xe.prototype.delete=function(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i},xe.prototype.get=function(t){return this.__data__.get(t)},xe.prototype.has=function(t){return this.__data__.has(t)},xe.prototype.set=function(t,e){var i=this.__data__;if(i instanceof Xt){var s=i.__data__;if(!ue||s.length<199)return s.push([t,e]),this.size=++i.size,this;i=this.__data__=new we(s)}return i.set(t,e),this.size=i.size,this};var ke=function(){try{var t=ge(Object,"defineProperty");return t({},"",{}),t}catch(e){}}();function Se(t,e,i){"__proto__"==e&&ke?ke(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i}var _e="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ce=_e&&t&&!t.nodeType&&t,Pe=Ce&&Ce.exports===_e?zt.Buffer:void 0,Le=Pe?Pe.allocUnsafe:void 0;function Te(t,e){if(e)return t.slice();var i=t.length,s=Le?Le(i):new t.constructor(i);return t.copy(s),s}var Ee=zt.Uint8Array;function Ae(t){var e=new t.constructor(t.byteLength);return new Ee(e).set(new Ee(t)),e}function Me(t,e){var i=e?Ae(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}function Re(t,e){var i=-1,s=t.length;for(e||(e=Array(s));++i<s;)e[i]=t[i];return e}var De=Object.create,Ie=function(){function t(){}return function(e){if(!Kt(e))return{};if(De)return De(e);t.prototype=e;var i=new t;return t.prototype=void 0,i}}();function Oe(t,e){return function(i){return t(e(i))}}var $e=Oe(Object.getPrototypeOf,Object),Ue=Object.prototype;function Fe(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Ue)}function ze(t){return"function"!=typeof t.constructor||Fe(t)?{}:Ie($e(t))}function Ne(t){return Wt(t)&&"[object Arguments]"==Zt(t)}var je=Object.prototype,Be=je.hasOwnProperty,He=je.propertyIsEnumerable,Ve=Ne(function(){return arguments}())?Ne:function(t){return Wt(t)&&Be.call(t,"callee")&&!He.call(t,"callee")},Ge=Array.isArray;function qe(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function Ze(t){return null!=t&&qe(t.length)&&!te(t)}var Ke="object"==typeof exports&&exports&&!exports.nodeType&&exports,We=Ke&&t&&!t.nodeType&&t,Ye=We&&We.exports===Ke?zt.Buffer:void 0,Qe=(Ye?Ye.isBuffer:void 0)||function(){return!1},Je={};function Xe(t){return function(e){return t(e)}}Je["[object Float32Array]"]=Je["[object Float64Array]"]=Je["[object Int8Array]"]=Je["[object Int16Array]"]=Je["[object Int32Array]"]=Je["[object Uint8Array]"]=Je["[object Uint8ClampedArray]"]=Je["[object Uint16Array]"]=Je["[object Uint32Array]"]=!0,Je["[object Arguments]"]=Je["[object Array]"]=Je["[object ArrayBuffer]"]=Je["[object Boolean]"]=Je["[object DataView]"]=Je["[object Date]"]=Je["[object Error]"]=Je["[object Function]"]=Je["[object Map]"]=Je["[object Number]"]=Je["[object Object]"]=Je["[object RegExp]"]=Je["[object Set]"]=Je["[object String]"]=Je["[object WeakMap]"]=!1;var ti="object"==typeof exports&&exports&&!exports.nodeType&&exports,ei=ti&&t&&!t.nodeType&&t,ii=ei&&ei.exports===ti&&Ut.process,si=function(){try{var t=ei&&ei.require&&ei.require("util").types;return t||ii&&ii.binding&&ii.binding("util")}catch(e){}}(),ai=si&&si.isTypedArray,ri=ai?Xe(ai):function(t){return Wt(t)&&qe(t.length)&&!!Je[Zt(t)]},ni=Object.prototype.hasOwnProperty;function oi(t,e,i){var s=t[e];ni.call(t,e)&&Yt(s,i)&&(void 0!==i||e in t)||Se(t,e,i)}function li(t,e,i,s){var a=!i;i||(i={});for(var r=-1,n=e.length;++r<n;){var o=e[r],l=s?s(i[o],t[o],o,i,t):void 0;void 0===l&&(l=t[o]),a?Se(i,o,l):oi(i,o,l)}return i}var di=/^(?:0|[1-9]\d*)$/;function ci(t,e){var i=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==i||"symbol"!=i&&di.test(t))&&t>-1&&t%1==0&&t<e}var hi=Object.prototype.hasOwnProperty;function pi(t,e){var i=Ge(t),s=!i&&Ve(t),a=!i&&!s&&Qe(t),r=!i&&!s&&!a&&ri(t),n=i||s||a||r,o=n?function(t,e){for(var i=-1,s=Array(t);++i<t;)s[i]=e(i);return s}(t.length,String):[],l=o.length;for(var d in t)!e&&!hi.call(t,d)||n&&("length"==d||a&&("offset"==d||"parent"==d)||r&&("buffer"==d||"byteLength"==d||"byteOffset"==d)||ci(d,l))||o.push(d);return o}var gi=Object.prototype.hasOwnProperty;function ui(t){if(!Kt(t))return function(t){var e=[];if(null!=t)for(var i in Object(t))e.push(i);return e}(t);var e=Fe(t),i=[];for(var s in t)("constructor"!=s||!e&&gi.call(t,s))&&i.push(s);return i}function mi(t){return Ze(t)?pi(t,!0):ui(t)}const vi=t=>!!yi(t)&&("LIVESTREAM"===t.meta.viewType&&"ON_STAGE"!==t.stage.status),fi=t=>{var e;return!!yi(t)&&("LIVESTREAM"===t.meta.viewType&&(null===(e=null==t?void 0:t.self)||void 0===e?void 0:e.permissions.canLivestream))},yi=t=>null==t?void 0:t.livestream;var bi,wi;!function(t){t.BUFFERING="Buffering",t.ENDED="Ended",t.IDLE="Idle",t.PAUSED="Paused",t.PLAYING="Playing",t.READY="Ready"}(bi||(bi={})),function(t){t.INITIALIZED="PlayerInitialized",t.QUALITY_CHANGED="PlayerQualityChanged",t.DURATION_CHANGED="PlayerDurationChanged",t.VOLUME_CHANGED="PlayerVolumeChanged",t.MUTED_CHANGED="PlayerMutedChanged",t.PLAYBACK_RATE_CHANGED="PlayerPlaybackRateChanged",t.REBUFFERING="PlayerRebuffering",t.AUDIO_BLOCKED="PlayerAudioBlocked",t.PLAYBACK_BLOCKED="PlayerPlaybackBlocked",t.ERROR="PlayerError",t.RECOVERABLE_ERROR="PlayerRecoverableError",t.ANALYTICS_EVENT="PlayerAnalyticsEvent",t.TIME_UPDATE="PlayerTimeUpdate",t.BUFFER_UPDATE="PlayerBufferUpdate",t.SEEK_COMPLETED="PlayerSeekCompleted",t.SESSION_DATA="PlayerSessionData",t.STATE_CHANGED="PlayerStateChanged",t.WORKER_ERROR="PlayerWorkerError",t.METADATA="PlayerMetadata",t.TEXT_CUE="PlayerTextCue",t.TEXT_METADATA_CUE="PlayerTextMetadataCue",t.AD_CUE="PlayerAdCue",t.STREAM_SOURCE_CUE="PlayerStreamSourceCue",t.NETWORK_UNAVAILABLE="PlayerNetworkUnavailable",t.SEGMENT_DISCONTINUITY="PlayerSegmentDiscontinuity",t.SEGMENT_METADATA="PlayerSegmentMetadata",t.PLAYER_METADATA="PlayerMetadata"}(wi||(wi={}));const xi=[0,.5,1,1.5,2,3,4,5,6,7,8,9,10,12,14,16,20,24,28,32,36,40,44,48,52,56,60,64,72,80,96],ki={darkest:{background:{1e3:"#080808",900:"#1A1A1A",800:"#1E1E1E",700:"#2C2C2C",600:"#393939"},text:"#FFFFFF"},dark:{background:{1e3:"#252525",900:"#2F2F2F",800:"#323232",700:"#3E3E3E",600:"#4A4A4A"},text:"#F5F5F5","video-bg":"#1C1C1C"},light:{background:{1e3:"#FFFFFF",900:"#F5F5F5",800:"#EBEBEB",700:"#E0E0E0",600:"#D6D6D6"},text:"#111111","text-on-brand":"#ffffff","video-bg":"#DADADA"}},Si={none:{none:0,sm:0,md:0,lg:0},thin:{none:0,sm:1,md:2,lg:4},fat:{none:0,sm:2,md:4,lg:8}},_i={sharp:{none:0,sm:0,md:0,lg:0},rounded:{none:0,sm:4,md:8,lg:12},"extra-rounded":{none:0,sm:8,md:16,lg:24},circular:{none:9999,sm:9999,md:9999,lg:9999}};function Ci(t){let e="0",i="0",s="0";return 4==(t=t.trim()).length?(e="0x"+t[1]+t[1],i="0x"+t[2]+t[2],s="0x"+t[3]+t[3]):t.length>6&&(e="0x"+t[1]+t[2],i="0x"+t[3]+t[4],s="0x"+t[5]+t[6]),[+e,+i,+s]}const Pi=t=>"string"==typeof t&&7===t.length&&t.startsWith("#"),Li="--dyte-";function Ti(t,e=Li){return e+t}const Ei=(t,e,i=Li)=>{Object.keys(e).forEach((s=>{const a=e[s];if("string"==typeof a)if("text"===s||"text-on-brand"===s){const e=Ci(a).join(" ");t.style.setProperty(Ti(`colors-${s}-1000`,i),`${e}`),t.style.setProperty(Ti(`colors-${s}-900`,i),`${e} / 0.88`),t.style.setProperty(Ti(`colors-${s}-800`,i),`${e} / 0.76`),t.style.setProperty(Ti(`colors-${s}-700`,i),`${e} / 0.64`),t.style.setProperty(Ti(`colors-${s}-600`,i),`${e} / 0.52`)}else{const e=Ci(a).join(" ");t.style.setProperty(Ti(`colors-${s}`,i),e)}else"object"==typeof a&&Object.keys(a).forEach((e=>{const r=Ci(a[e]).join(" ");t.style.setProperty(Ti(`colors-${s}-${e}`,i),r)}))}))},Ai=(t,{spacingBase:e,borderRadius:i,borderWidth:s,colors:a,fontFamily:r,googleFont:n,theme:o,tokenPrefix:l=Li})=>{if("object"!=typeof t)throw new Error("[dyte-ui-kit] (provideDyteDesignSystem): Passed element is not a valid HTML Element");if("string"==typeof n&&((t=>{const e=[];if(null==document.querySelector("link[data-dyte-font]")){const t=document.createElement("link");t.rel="preconnect",t.setAttribute("data-dyte-font","true"),t.href="https://fonts.googleapis.com";const i=t.cloneNode(!0);i.href="https://fonts.gstatic.com",i.crossOrigin="",e.push(t,i)}const i=document.createElement("link");i.rel="stylesheet",i.setAttribute("data-dyte-font",t),i.href=encodeURI(`https://fonts.googleapis.com/css2?family=${t}:wght@${[400,500,700].join(";")}&display=swap`),e.push(i),document.head.append(...e)})(n),t.style.setProperty(Ti("font-family",l),n)),"string"==typeof r&&t.style.setProperty(Ti("font-family",l),r),"number"==typeof e&&((t,e,i=Li)=>{xi.forEach((s=>{t.style.setProperty(Ti(`space-${s}`,i),s*e+"px")}))})(t,e,l),"string"==typeof s&&((t,e,i=Li)=>{if(e in Si){const s=Si[e];Object.keys(s).forEach((e=>{t.style.setProperty(Ti(`border-width-${e}`,i),`${s[e]}px`)}))}})(t,s,l),"string"==typeof i&&((t,e,i=Li)=>{if(e in _i){const s=_i[e];Object.keys(s).forEach((e=>{t.style.setProperty(Ti(`border-radius-${e}`,i),`${s[e]}px`)}))}})(t,i,l),"string"==typeof o){const e=ki[o];null!=e&&Ei(t,e,l)}"object"==typeof a&&Ei(t,a,l)};function Mi(t,e,i){(void 0!==i&&!Yt(t[e],i)||void 0===i&&!(e in t))&&Se(t,e,i)}var Ri,Di=function(t,e,i){for(var s=-1,a=Object(t),r=i(t),n=r.length;n--;){var o=r[Ri?n:++s];if(!1===e(a[o],o,a))break}return t};var Ii=Function.prototype,Oi=Object.prototype,$i=Ii.toString,Ui=Oi.hasOwnProperty,Fi=$i.call(Object);function zi(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}function Ni(t,e,i,s,a,r,n){var o=zi(t,i),l=zi(e,i),d=n.get(l);if(d)Mi(t,i,d);else{var c,h=r?r(o,l,i+"",t,e,n):void 0,p=void 0===h;if(p){var g=Ge(l),u=!g&&Qe(l),m=!g&&!u&&ri(l);h=l,g||u||m?Ge(o)?h=o:Wt(c=o)&&Ze(c)?h=Re(o):u?(p=!1,h=Te(l,!0)):m?(p=!1,h=Me(l,!0)):h=[]:function(t){if(!Wt(t)||"[object Object]"!=Zt(t))return!1;var e=$e(t);if(null===e)return!0;var i=Ui.call(e,"constructor")&&e.constructor;return"function"==typeof i&&i instanceof i&&$i.call(i)==Fi}(l)||Ve(l)?(h=o,Ve(o)?h=function(t){return li(t,mi(t))}(o):Kt(o)&&!te(o)||(h=ze(l))):p=!1}p&&(n.set(l,h),a(h,l,s,r,n),n.delete(l)),Mi(t,i,h)}}function ji(t,e,i,s,a){t!==e&&Di(e,(function(r,n){if(a||(a=new xe),Kt(r))Ni(t,e,n,i,ji,s,a);else{var o=s?s(zi(t,n),r,n+"",t,e,a):void 0;void 0===o&&(o=r),Mi(t,n,o)}}),mi)}function Bi(t){return t}var Hi=Math.max;var Vi=ke?function(t,e){return ke(t,"toString",{configurable:!0,enumerable:!1,value:(i=e,function(){return i}),writable:!0});var i}:Bi,Gi=Date.now;var qi,Zi,Ki,Wi=(qi=Vi,Zi=0,Ki=0,function(){var t=Gi(),e=16-(t-Ki);if(Ki=t,e>0){if(++Zi>=800)return arguments[0]}else Zi=0;return qi.apply(void 0,arguments)});function Yi(t,e){return Wi(function(t,e,i){return e=Hi(void 0===e?t.length-1:e,0),function(){for(var s=arguments,a=-1,r=Hi(s.length-e,0),n=Array(r);++a<r;)n[a]=s[e+a];a=-1;for(var o=Array(e+1);++a<e;)o[a]=s[a];return o[e]=i(n),function(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}(t,this,o)}}(t,e,Bi),t+"")}var Qi,Ji=(Qi=function(t,e,i){ji(t,e,i)},Yi((function(t,e){var i=-1,s=e.length,a=s>1?e[s-1]:void 0,r=s>2?e[2]:void 0;for(a=Qi.length>3&&"function"==typeof a?(s--,a):void 0,r&&function(t,e,i){if(!Kt(i))return!1;var s=typeof e;return!!("number"==s?Ze(i)&&ci(e,i.length):"string"==s&&e in i)&&Yt(i[e],t)}(e[0],e[1],r)&&(a=s<3?void 0:a,s=1),t=Object(t);++i<s;){var n=e[i];n&&Qi(t,n,i,a)}return t})));const Xi=(t,e,i={},s={grid_pagination:!0,settings_toggle:!0})=>{var a,r,n,o,l,d,c,h,p,g,u,m,v,f,y,b,w,x;const k={showSetupScreen:!0};let S,_=["dyte-stage"],C={},P={};const L=!1!==(null==s?void 0:s.settings_toggle),T=!1!==(null==s?void 0:s.grid_pagination);if(null===(a=t.controlBar)||void 0===a?void 0:a.isEnabled){_.push("dyte-controlbar");const{elements:i}=t.controlBar,s=[...i.fullscreen?["dyte-fullscreen-toggle"]:[],...L?["dyte-settings-toggle"]:[]],a=[],h=[];(null===(r=e.participants.pip)||void 0===r?void 0:r.isSupported())&&(null===(o=null===(n=e.self)||void 0===n?void 0:n.config)||void 0===o?void 0:o.pipMode)&&"LIVESTREAM"!==(null===(l=e.self.config)||void 0===l?void 0:l.viewType)&&h.push("dyte-pip-toggle"),(null==e?void 0:e.self.permissions.canDisableParticipantAudio)&&h.push("dyte-mute-all-button"),h.push("dyte-breakout-rooms-toggle"),(null===(d=e.self)||void 0===d?void 0:d.permissions.canRecord)&&h.push("dyte-recording-toggle"),null!==(c=e.self.permissions.transcriptionEnabled)&&void 0!==c&&c&&h.push("dyte-caption-toggle"),"ReactNative"!==navigator.product&&h.push("dyte-debugger-toggle"),fi(e)&&s.push("dyte-livestream-toggle"),i.screenshare&&s.push("dyte-screen-share-toggle"),i.chat&&a.push("dyte-chat-toggle"),i.polls&&a.push("dyte-polls-toggle"),i.participants&&a.push("dyte-participants-toggle"),i.plugins&&a.push("dyte-plugins-toggle"),a.push("dyte-ai-toggle");const p=["dyte-mic-toggle","dyte-camera-toggle","dyte-stage-toggle","dyte-leave-button"];h.length>0&&p.push("dyte-more-toggle");const g=s.concat(a).concat(h);let u=!1;g.length>0&&(u=!0),P={"dyte-controlbar":{states:["activeMoreMenu"],children:["div#controlbar-left","div#controlbar-center","div#controlbar-right"]},"div#controlbar-left":s,"div#controlbar-center":p,"div#controlbar-right":a,"dyte-more-toggle":{states:["activeMoreMenu"],children:[]},"dyte-more-toggle.activeMoreMenu":h.map((t=>[t,{variant:"horizontal",slot:"more-elements"}])),"dyte-controlbar.sm":["div#controlbar-mobile"],"dyte-controlbar.md":["div#controlbar-mobile"],"dyte-more-toggle.activeMoreMenu.md":g.map((t=>[t,{variant:"horizontal",slot:"more-elements"}])),"dyte-more-toggle.activeMoreMenu.sm":g.map((t=>[t,{variant:"horizontal",slot:"more-elements"}])),"div#controlbar-mobile":["dyte-mic-toggle","dyte-camera-toggle","dyte-stage-toggle",u&&"dyte-more-toggle","dyte-leave-button"]}}if(null===(h=t.header)||void 0===h?void 0:h.isEnabled){_.unshift("dyte-header");const{elements:e}=t.header;let i=["dyte-recording-indicator","dyte-livestream-indicator"],s=[],a=[];T&&a.push("dyte-grid-pagination"),e.title&&s.push("dyte-meeting-title"),"string"==typeof e.logo&&e.logo.length>0&&(S=e.logo,i.unshift("dyte-logo")),e.participantCount&&a.push("dyte-participant-count","dyte-viewer-count"),e.timer&&a.push("dyte-clock"),C={"dyte-header":["div#header-left","div#header-center","div#header-right"],"dyte-header.sm":{remove:["div#header-center"]},"div#header-left":i,"div#header-center":s,"div#header-right":a,"div#header-left.sm":{remove:["dyte-logo"],prepend:["dyte-meeting-title"]}}}_.push("dyte-participants-audio","dyte-dialog-manager");let E={logo:S};E=t.designTokens,Pi(null===(g=null===(p=null==t?void 0:t.designTokens)||void 0===p?void 0:p.colors)||void 0===g?void 0:g.textOnBrand)&&(E.colors["text-on-brand"]=null===(m=null===(u=null==t?void 0:t.designTokens)||void 0===u?void 0:u.colors)||void 0===m?void 0:m.textOnBrand),Pi(null===(f=null===(v=null==t?void 0:t.designTokens)||void 0===v?void 0:v.colors)||void 0===f?void 0:f.videoBg)&&(E.colors["video-bg"]=null===(b=null===(y=null==t?void 0:t.designTokens)||void 0===y?void 0:y.colors)||void 0===b?void 0:b.videoBg);let A={designTokens:E,styles:{"dyte-header":{display:"grid",height:"48px",gridTemplateColumns:"repeat(3, 1fr)",gridTemplateRows:"1fr",alignItems:"center"},"dyte-header.sm":{display:"grid",gridArea:"header",gridTemplateColumns:"repeat(2, 1fr)",gridTemplateRows:"1fr",alignItems:"center"},"div#header-left":{display:"flex",alignItems:"center",height:"48px",wordBreak:"break-all"},"dyte-logo":{height:"26px"},"div#header-center":{display:"flex",alignItems:"center",justifyContent:"center",wordBreak:"break-all"},"div#header-right":{display:"flex",alignItems:"center",justifyContent:"flex-end"},"dyte-stage":{display:"flex",flex:"1"},"dyte-grid":{flex:"1",height:"auto"},"dyte-controlbar":{display:"grid",gridTemplateColumns:"repeat(3,1fr)",gridTemplateRows:"1fr",alignItems:"center",padding:"8px"},"dyte-controlbar.sm":{display:"flex",position:"relative",backgroundColor:"var(--dyte-colors-background-1000, #000)"},"dyte-controlbar.md":{display:"flex",position:"relative",backgroundColor:"var(--dyte-colors-background-1000, #000)"},"div#controlbar-left":{display:"flex",alignItems:"center"},"div#controlbar-center":{display:"flex",alignItems:"center",position:"relative",overflow:"visible",justifyContent:"center"},"div#controlbar-mobile":{display:"flex",flex:"1",alignItems:"center",justifyContent:"center",zIndex:"10000"},"div#controlbar-right":{display:"flex",alignItems:"center",justifyContent:"flex-end"},"dyte-settings":{width:"720px",height:"480px"},"dyte-debugger":{width:"720px",height:"480px"},"div#setupcontrols-indicator":{position:"absolute",bottom:"12px",left:"12px",display:"flex",gap:"6px",background:"rgb(var(--dyte-colors-background-800, 0 0 0))",borderRadius:"100%"},"div#setupcontrols-media":{position:"absolute",bottom:"8px",right:"8px",display:"flex",gap:"6px"},"div#setupcontrols-settings":{position:"absolute",top:"8px",right:"8px",display:"flex",flexDirection:"column",gap:"6px"},"dyte-meeting-title.sm":{marginLeft:"0"},"dyte-clock":{marginRight:"0"}},root:Object.assign(Object.assign(Object.assign({"dyte-meeting":{state:"meeting",states:["activeSidebar","activeAI"]},"dyte-meeting[meeting=idle]":["dyte-idle-screen"],"dyte-meeting[meeting=waiting]":["dyte-waiting-screen"],"dyte-meeting[meeting=setup]":["dyte-setup-screen","dyte-dialog-manager"],"dyte-meeting[meeting=joined]":_,"dyte-meeting[meeting=joined].activeSidebar.sm":{add:[["dyte-sidebar",{view:"full-screen"}]]},"dyte-meeting[meeting=joined].activeSidebar.md":{add:[["dyte-sidebar",{view:"full-screen"}]]},"dyte-meeting[meeting=joined].activeAI.sm":{add:[["dyte-ai",{view:"full-screen"}]]},"dyte-meeting[meeting=joined].activeAI.md":{add:[["dyte-ai",{view:"full-screen"}]]},"dyte-meeting[meeting=ended]":["dyte-ended-screen"]},C),P),{"dyte-stage":{states:["activeSidebar","activeAI"],children:["dyte-grid","dyte-notifications","dyte-transcripts"]},"dyte-stage.activeSidebar":{add:[["dyte-sidebar",{view:"sidebar"}]]},"dyte-stage.activeSidebar.sm":{remove:["dyte-sidebar"]},"dyte-stage.activeAI":{add:[["dyte-ai",{view:"sidebar"}]]},"dyte-stage.activeAI.sm":{remove:["dyte-ai"]},"dyte-grid":{states:["activeScreenShare","activePlugin","activeSpotlight"],state:"viewType",children:["dyte-simple-grid"]},"dyte-grid[viewType=AUDIO_ROOM]":["dyte-audio-grid"],"dyte-grid[viewType=AUDIO_ROOM].activePlugin":["dyte-mixed-grid"],"dyte-grid[viewType=AUDIO_ROOM].activeScreenshare":["dyte-mixed-grid"],"dyte-grid[viewType=AUDIO_ROOM].activeScreenShare.activeSpotlight":["dyte-mixed-grid"],"dyte-grid[viewType=AUDIO_ROOM].activePlugin.activeSpotlight":["dyte-mixed-grid"],"dyte-grid[viewType=AUDIO_ROOM].activePlugin.activeScreenShare.activeSpotlight":["dyte-mixed-grid"],"dyte-grid.activeSpotlight":["dyte-spotlight-grid"],"dyte-grid.activeScreenShare":["dyte-mixed-grid"],"dyte-grid.activePlugin":["dyte-mixed-grid"],"dyte-grid.activeScreenShare.activeSpotlight":["dyte-mixed-grid"],"dyte-grid.activePlugin.activeSpotlight":["dyte-mixed-grid"],"dyte-grid.activePlugin.activeScreenShare.activeSpotlight":["dyte-mixed-grid"],"dyte-mixed-grid":{states:["activeSpotlight"],state:"viewType",children:["dyte-simple-grid"]},"dyte-mixed-grid[viewType=AUDIO_ROOM]":["dyte-audio-grid"],"dyte-mixed-grid.activeSpotlight":["dyte-spotlight-grid"],"dyte-participant-tile":{state:"meeting",children:["dyte-name-tag","dyte-avatar","dyte-network-indicator"]},"dyte-participant-setup":["dyte-avatar","div#setupcontrols-media"],"dyte-participant-tile[meeting=setup]":["dyte-avatar","div#setupcontrols-indicator","div#setupcontrols-media",...L?["div#setupcontrols-settings"]:[]],"div#setupcontrols-indicator":[["dyte-audio-visualizer",{slot:"start",hideMuted:!0}]],"div#setupcontrols-media":[["dyte-mic-toggle",{size:"sm"}],["dyte-camera-toggle",{size:"sm"}]],"div#setupcontrols-settings":[["dyte-settings-toggle",{size:"sm"}]],"dyte-screenshare-view":["dyte-name-tag","dyte-network-indicator"],"dyte-name-tag":[["dyte-audio-visualizer",{slot:"start"}]]}),config:{notification_sounds:{participant_left:!1},participant_joined_sound_notification_limit:3,participant_chat_message_sound_notification_limit:10,videoFit:"cover"}};return A=((t,e=$t)=>{let i=Object.assign({},e);return Ji(i,t),i})(i,A),k.showSetupScreen=null===(x=null===(w=t.setupScreen)||void 0===w?void 0:w.isEnabled)||void 0===x||x,{config:A,data:k}},ts={people:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 13.999 13 14a2 2 0 0 1 1.995 1.85L15 16v1.5C14.999 21 11.284 22 8.5 22c-2.722 0-6.335-.956-6.495-4.27L2 17.5v-1.501c0-1.054.816-1.918 1.85-1.995L4 14ZM15.22 14H20c1.054 0 1.918.816 1.994 1.85L22 16v1c-.001 3.062-2.858 4-5 4a7.16 7.16 0 0 1-2.14-.322c.336-.386.607-.827.802-1.327A6.19 6.19 0 0 0 17 19.5l.267-.006c.985-.043 3.086-.363 3.226-2.289L20.5 17v-1a.501.501 0 0 0-.41-.492L20 15.5h-4.051a2.957 2.957 0 0 0-.595-1.34L15.22 14H20h-4.78ZM4 15.499l-.1.01a.51.51 0 0 0-.254.136.506.506 0 0 0-.136.253l-.01.101V17.5c0 1.009.45 1.722 1.417 2.242.826.445 2.003.714 3.266.753l.317.005.317-.005c1.263-.039 2.439-.308 3.266-.753.906-.488 1.359-1.145 1.412-2.057l.005-.186V16a.501.501 0 0 0-.41-.492L13 15.5l-9-.001ZM8.5 3a4.5 4.5 0 1 1 0 9 4.5 4.5 0 0 1 0-9Zm9 2a3.5 3.5 0 1 1 0 7 3.5 3.5 0 0 1 0-7Zm-9-.5c-1.654 0-3 1.346-3 3s1.346 3 3 3 3-1.346 3-3-1.346-3-3-3Zm9 2c-1.103 0-2 .897-2 2s.897 2 2 2 2-.897 2-2-.897-2-2-2Z" fill="currentColor"/></svg>',people_checked:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 29 29"><path fill="currentColor" d="M14.58 15.333H2.833a2.667 2.667 0 0 0-2.666 2.666v2l.006.307c.214 4.419 5.031 5.693 8.66 5.693 1.374 0 2.92-.182 4.32-.649a8.53 8.53 0 0 1-.717-1.87c-.93.298-2.027.478-3.18.513l-.423.006-.422-.006c-1.684-.052-3.254-.411-4.355-1.004-1.29-.694-1.89-1.644-1.89-2.99v-2.001l.014-.135a.675.675 0 0 1 .181-.337.68.68 0 0 1 .338-.181l.134-.014h10.31a8.71 8.71 0 0 1 1.436-1.998h.001Zm.253-8.667a6 6 0 1 0-12 0 6 6 0 0 0 12 0Zm-10 0c0-2.205 1.795-4 4-4 2.206 0 4 1.795 4 4s-1.794 4-4 4c-2.205 0-4-1.795-4-4ZM25.5 7.999a4.667 4.667 0 1 0-9.333 0A4.667 4.667 0 0 0 25.5 8Zm-7.333 0a2.67 2.67 0 0 1 2.666-2.666A2.67 2.67 0 0 1 23.5 7.999a2.67 2.67 0 0 1-2.667 2.667 2.67 2.67 0 0 1-2.666-2.667Zm10 13.334a7.333 7.333 0 1 1-14.667 0 7.333 7.333 0 0 1 14.667 0Zm-2.862-3.139a.666.666 0 0 0-.944 0l-4.86 4.863-2.196-2.196a.667.667 0 1 0-.944.944l2.667 2.666a.666.666 0 0 0 .944 0l5.333-5.333a.666.666 0 0 0 0-.944Z"/></svg>',chat:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10a9.96 9.96 0 0 1-4.587-1.112l-3.826 1.067a1.25 1.25 0 0 1-1.54-1.54l1.068-3.823A9.96 9.96 0 0 1 2 12C2 6.477 6.477 2 12 2Zm0 1.5A8.5 8.5 0 0 0 3.5 12c0 1.47.373 2.883 1.073 4.137l.15.27-1.112 3.984 3.987-1.112.27.15A8.5 8.5 0 1 0 12 3.5ZM8.75 13h4.498a.75.75 0 0 1 .102 1.493l-.102.007H8.75a.75.75 0 0 1-.102-1.493L8.75 13h4.498H8.75Zm0-3.5h6.505a.75.75 0 0 1 .101 1.493l-.101.007H8.75a.75.75 0 0 1-.102-1.493L8.75 9.5h6.505H8.75Z" fill="currentColor"/></svg>',poll:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.752 2a2.752 2.752 0 0 1 2.752 2.751V19.25a2.752 2.752 0 1 1-5.504 0V4.75A2.752 2.752 0 0 1 11.752 2Zm7 5a2.752 2.752 0 0 1 2.752 2.751v9.499a2.752 2.752 0 1 1-5.504 0V9.75A2.752 2.752 0 0 1 18.752 7Zm-14 5a2.752 2.752 0 0 1 2.752 2.751v4.499a2.752 2.752 0 0 1-5.504 0V14.75A2.752 2.752 0 0 1 4.752 12Zm7-8.5c-.692 0-1.252.56-1.252 1.251V19.25a1.252 1.252 0 0 0 2.504 0V4.75c0-.691-.56-1.251-1.252-1.251Zm7 5c-.691 0-1.252.56-1.252 1.251v9.499a1.252 1.252 0 0 0 2.504 0V9.75c0-.691-.56-1.251-1.252-1.251Zm-14 5c-.692 0-1.252.56-1.252 1.251v4.499a1.252 1.252 0 1 0 2.504 0V14.75c0-.691-.56-1.252-1.252-1.252Z" fill="currentColor"/></svg>',participants:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.754 10c.966 0 1.75.784 1.75 1.75v4.749a4.501 4.501 0 0 1-9.002 0V11.75c0-.966.783-1.75 1.75-1.75h5.502Zm0 1.5H9.252a.25.25 0 0 0-.25.25v4.749a3.001 3.001 0 0 0 6.002 0V11.75a.25.25 0 0 0-.25-.25ZM3.75 10h3.381a2.738 2.738 0 0 0-.618 1.5H3.75a.25.25 0 0 0-.25.25v3.249a2.501 2.501 0 0 0 3.082 2.433c.085.504.24.985.453 1.432A4.001 4.001 0 0 1 2 14.999V11.75c0-.966.784-1.75 1.75-1.75Zm13.125 0h3.375c.966 0 1.75.784 1.75 1.75V15a4 4 0 0 1-5.03 3.866c.214-.448.369-.929.455-1.433A2.5 2.5 0 0 0 20.5 15v-3.25a.25.25 0 0 0-.25-.25h-2.757a2.738 2.738 0 0 0-.618-1.5ZM12 3a3 3 0 1 1 0 6 3 3 0 0 1 0-6Zm6.5 1a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5Zm-13 0a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5Zm6.5.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3Zm6.5 1a1 1 0 1 0 0 2 1 1 0 0 0 0-2Zm-13 0a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z" fill="currentColor"/></svg>',rocket:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path d="M9.35 20.45 14.65 22.7Q15.55 20.9 16.575 19.15Q17.6 17.4 18.75 15.8L14.8 15Q14.8 15 14.8 15Q14.8 15 14.8 15ZM17.05 24.5 23.7 31.15Q26.55 29.85 29.05 28.2Q31.55 26.55 33.1 25Q37.15 20.95 39.05 16.7Q40.95 12.45 41.1 7.1Q35.75 7.25 31.5 9.15Q27.25 11.05 23.2 15.1Q21.65 16.65 20 19.15Q18.35 21.65 17.05 24.5ZM28.5 19.7Q27.5 18.7 27.5 17.225Q27.5 15.75 28.5 14.75Q29.5 13.75 30.975 13.75Q32.45 13.75 33.45 14.75Q34.45 15.75 34.45 17.225Q34.45 18.7 33.45 19.7Q32.45 20.7 30.975 20.7Q29.5 20.7 28.5 19.7ZM27.75 38.85 33.2 33.4Q33.2 33.4 33.2 33.4Q33.2 33.4 33.2 33.4L32.4 29.45Q30.8 30.6 29.05 31.625Q27.3 32.65 25.5 33.55ZM44.05 4.15Q44.5 10.95 42.35 16.55Q40.2 22.15 35.25 27.1Q35.2 27.15 35.15 27.2Q35.1 27.25 35.05 27.3L36.15 32.8Q36.3 33.55 36.075 34.25Q35.85 34.95 35.3 35.5L26.75 44.1L22.5 34.2L14 25.7L4.1 21.45L12.7 12.9Q13.25 12.35 13.95 12.125Q14.65 11.9 15.4 12.05L20.9 13.15Q20.95 13.1 21 13.075Q21.05 13.05 21.1 13Q26.05 8.05 31.65 5.875Q37.25 3.7 44.05 4.15ZM7.45 31.75Q9.2 30 11.725 29.975Q14.25 29.95 16 31.7Q17.75 33.45 17.725 35.975Q17.7 38.5 15.95 40.25Q14.65 41.55 11.925 42.4Q9.2 43.25 3.75 44Q4.5 38.55 5.325 35.8Q6.15 33.05 7.45 31.75ZM9.55 33.9Q8.85 34.65 8.3 36.25Q7.75 37.85 7.35 40.35Q9.85 39.95 11.45 39.4Q13.05 38.85 13.8 38.15Q14.75 37.3 14.775 36.025Q14.8 34.75 13.9 33.8Q12.95 32.9 11.675 32.925Q10.4 32.95 9.55 33.9Z" fill="currentColor" /></svg>',call_end:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m21.903 13.202-.191.816a2.75 2.75 0 0 1-2.955 2.107l-1.755-.178A2.75 2.75 0 0 1 14.6 13.83l-.389-1.686a.25.25 0 0 0-.113-.157c-.321-.197-1.034-.32-2.098-.32-.786 0-1.386.067-1.786.189-.14.043-.238.085-.301.116l-.09.048-.015.04-.409 1.77A2.75 2.75 0 0 1 7 15.948l-1.746.177A2.75 2.75 0 0 1 2.3 14.03l-.196-.817a3.75 3.75 0 0 1 1.13-3.651C5.134 7.839 8.064 7 12 7c3.943 0 6.875.842 8.776 2.57a3.75 3.75 0 0 1 1.172 3.41l-.045.222Zm-1.426-.514a2.25 2.25 0 0 0-.71-2.009C18.184 9.241 15.602 8.5 12 8.5c-3.598 0-6.177.739-7.76 2.172a2.25 2.25 0 0 0-.677 2.19l.196.818a1.25 1.25 0 0 0 1.342.953l1.746-.178a1.25 1.25 0 0 0 1.09-.962l.423-1.82.043-.136c.376-.998 1.591-1.37 3.597-1.37 1.318 0 2.265.164 2.88.54.401.245.687.642.793 1.1l.389 1.685c.12.522.56.909 1.092.963l1.754.178a1.25 1.25 0 0 0 1.343-.958l.192-.816.034-.171Z" fill="currentColor"/></svg>',share:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 2.498a3.502 3.502 0 1 1-2.597 5.851l-4.558 2.604a3.5 3.5 0 0 1 0 2.093l4.557 2.606a3.502 3.502 0 1 1-.745 1.302L9.1 14.347a3.502 3.502 0 1 1 0-4.698l4.557-2.604A3.502 3.502 0 0 1 17 2.498Zm0 13.5a2.002 2.002 0 1 0 0 4.004 2.002 2.002 0 0 0 0-4.004Zm-10.498-6a2.002 2.002 0 1 0 0 4.004 2.002 2.002 0 0 0 0-4.004Zm10.498-6a2.002 2.002 0 1 0 0 4.004 2.002 2.002 0 0 0 0-4.004Z" fill="currentColor"/></svg>',mic_on:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.25 11a.75.75 0 0 1 .743.648l.007.102v.5a6.75 6.75 0 0 1-6.249 6.732l-.001 2.268a.75.75 0 0 1-1.493.102l-.007-.102v-2.268a6.75 6.75 0 0 1-6.246-6.496L5 12.25v-.5a.75.75 0 0 1 1.493-.102l.007.102v.5a5.25 5.25 0 0 0 5.034 5.246l.216.004h.5a5.25 5.25 0 0 0 5.246-5.034l.004-.216v-.5a.75.75 0 0 1 .75-.75ZM12 2a4 4 0 0 1 4 4v6a4 4 0 0 1-8 0V6a4 4 0 0 1 4-4Zm0 1.5A2.5 2.5 0 0 0 9.5 6v6a2.5 2.5 0 0 0 5 0V6A2.5 2.5 0 0 0 12 3.5Z" fill="currentColor"/></svg>',mic_off:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.28 2.22a.75.75 0 1 0-1.06 1.06L8 9.06V12a4 4 0 0 0 6.248 3.309l1.146 1.146A5.227 5.227 0 0 1 12.25 17.5h-.5l-.216-.004A5.25 5.25 0 0 1 6.5 12.25v-.5l-.007-.102A.75.75 0 0 0 5 11.75v.5l.004.236a6.75 6.75 0 0 0 6.246 6.496v2.268l.007.102a.75.75 0 0 0 1.493-.102l.001-2.268a6.718 6.718 0 0 0 3.712-1.458l4.256 4.256a.75.75 0 0 0 1.061-1.06L3.28 2.22Zm9.876 11.997A2.5 2.5 0 0 1 9.5 12v-1.44l3.656 3.657ZM14.5 6v5.318l1.43 1.43c.046-.242.07-.492.07-.748V6a4 4 0 0 0-7.862-1.044L9.5 6.318V6a2.5 2.5 0 0 1 5 0ZM17.196 14.014l1.146 1.146A6.725 6.725 0 0 0 19 12.25v-.5l-.007-.102a.75.75 0 0 0-1.493.102v.5l-.004.216a5.233 5.233 0 0 1-.3 1.548Z" fill="currentColor"/></svg>',video_on:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13.75 4.5A3.25 3.25 0 0 1 17 7.75v.173l3.864-2.318A.75.75 0 0 1 22 6.248V17.75a.75.75 0 0 1-1.136.643L17 16.075v.175a3.25 3.25 0 0 1-3.25 3.25h-8.5A3.25 3.25 0 0 1 2 16.25v-8.5A3.25 3.25 0 0 1 5.25 4.5h8.5Zm0 1.5h-8.5A1.75 1.75 0 0 0 3.5 7.75v8.5c0 .966.784 1.75 1.75 1.75h8.5a1.75 1.75 0 0 0 1.75-1.75v-8.5A1.75 1.75 0 0 0 13.75 6Zm6.75 1.573L17 9.674v4.651l3.5 2.1V7.573Z" fill="currentColor"/></svg>',video_off:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.28 2.22a.75.75 0 1 0-1.06 1.06l1.567 1.567A3.25 3.25 0 0 0 2 7.75v8.5a3.25 3.25 0 0 0 3.25 3.25h8.5a3.25 3.25 0 0 0 2.903-1.786l4.066 4.067a.75.75 0 0 0 1.061-1.061L3.28 2.22Zm12.196 14.317A1.75 1.75 0 0 1 13.75 18h-8.5a1.75 1.75 0 0 1-1.75-1.75v-8.5c0-.869.633-1.59 1.463-1.727l10.514 10.514ZM15.5 12.318V7.75A1.75 1.75 0 0 0 13.75 6H9.182l-1.5-1.5h6.068A3.25 3.25 0 0 1 17 7.75v.173l3.864-2.318A.75.75 0 0 1 22 6.248V17.75c0 .301-.17.543-.403.665L20.5 17.318V7.573L17 9.674v4.144l-1.5-1.5Z" fill="currentColor"/></svg>',share_screen_start:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 6.25A2.25 2.25 0 0 1 4.25 4h15.5A2.25 2.25 0 0 1 22 6.25v11.5A2.25 2.25 0 0 1 19.75 20H4.25A2.25 2.25 0 0 1 2 17.75V6.25Zm2.25-.75a.75.75 0 0 0-.75.75v11.5c0 .414.336.75.75.75h15.5a.75.75 0 0 0 .75-.75V6.25a.75.75 0 0 0-.75-.75H4.25Z"/><path d="M12 7.245a.75.75 0 0 1 .53.22l3.255 3.255a.75.75 0 1 1-1.06 1.06L12.75 9.806v6.447a.75.75 0 0 1-1.5 0V9.808L9.28 11.78a.75.75 0 1 1-1.06-1.06l3.25-3.254a.75.75 0 0 1 .53-.22Z"/></svg>',share_screen_stop:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 6.25A2.25 2.25 0 0 1 4.25 4h15.5A2.25 2.25 0 0 1 22 6.25v11.5A2.25 2.25 0 0 1 19.75 20H4.25A2.25 2.25 0 0 1 2 17.75V6.25Zm2.25-.75a.75.75 0 0 0-.75.75v11.5c0 .414.336.75.75.75h15.5a.75.75 0 0 0 .75-.75V6.25a.75.75 0 0 0-.75-.75H4.25Z"/><path d="M8.22 8.215a.75.75 0 0 1 1.06 0l2.72 2.72 2.725-2.716a.75.75 0 0 1 1.06 1.062l-2.724 2.715 2.724 2.724a.75.75 0 1 1-1.06 1.06L12 13.057 9.28 15.78a.75.75 0 0 1-1.06-1.06l2.72-2.724-2.72-2.72a.75.75 0 0 1 0-1.06Z"/></svg>',share_screen_person:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2 7.25A3.25 3.25 0 0 1 5.25 4h13.5A3.25 3.25 0 0 1 22 7.25V13h-.258a3.74 3.74 0 0 0-1.242-2.545V7.25a1.75 1.75 0 0 0-1.75-1.75H5.25A1.75 1.75 0 0 0 3.5 7.25v9.5c0 .966.784 1.75 1.75 1.75H12v.5c0 .34.04.674.118 1H5.25A3.25 3.25 0 0 1 2 16.75v-9.5ZM21.5 17a1.5 1.5 0 0 1 1.5 1.5v.5c0 1.971-1.86 4-5 4-3.14 0-5-2.029-5-4v-.5a1.5 1.5 0 0 1 1.5-1.5h7ZM18 10.5a2.75 2.75 0 1 1 0 5.5 2.75 2.75 0 0 1 0-5.5Z" fill="currentColor"/></svg>',clock:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2c5.523 0 10 4.478 10 10s-4.477 10-10 10S2 17.522 2 12 6.477 2 12 2Zm0 1.667c-4.595 0-8.333 3.738-8.333 8.333 0 4.595 3.738 8.333 8.333 8.333 4.595 0 8.333-3.738 8.333-8.333 0-4.595-3.738-8.333-8.333-8.333ZM11.25 6a.75.75 0 0 1 .743.648L12 6.75V12h3.25a.75.75 0 0 1 .102 1.493l-.102.007h-4a.75.75 0 0 1-.743-.648l-.007-.102v-6a.75.75 0 0 1 .75-.75Z" fill="currentColor"/></svg>',dismiss:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m4.397 4.554.073-.084a.75.75 0 0 1 .976-.073l.084.073L12 10.939l6.47-6.47a.75.75 0 1 1 1.06 1.061L13.061 12l6.47 6.47a.75.75 0 0 1 .072.976l-.073.084a.75.75 0 0 1-.976.073l-.084-.073L12 13.061l-6.47 6.47a.75.75 0 0 1-1.06-1.061L10.939 12l-6.47-6.47a.75.75 0 0 1-.072-.976l.073-.084-.073.084Z" fill="currentColor"/></svg>',send:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5.694 12 2.299 3.272c-.236-.607.356-1.188.942-.982l.093.04 18 9a.75.75 0 0 1 .097 1.283l-.097.058-18 9a.75.75 0 0 1-1.065-.847l.03-.096L5.694 12 2.299 3.272 5.694 12ZM4.402 4.54l2.61 6.71h6.627a.75.75 0 0 1 .743.648l.007.102a.75.75 0 0 1-.649.743l-.101.007H7.01l-2.609 6.71L19.322 12 4.401 4.54Z" fill="currentColor"/></svg>',search:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 2.75a7.25 7.25 0 0 1 5.63 11.819l4.9 4.9a.75.75 0 0 1-.976 1.134l-.084-.073-4.901-4.9A7.25 7.25 0 1 1 10 2.75Zm0 1.5a5.75 5.75 0 1 0 0 11.5 5.75 5.75 0 0 0 0-11.5Z" fill="currentColor"/</svg>',more_vertical:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7.75a1.75 1.75 0 1 1 0-3.5 1.75 1.75 0 0 1 0 3.5ZM12 13.75a1.75 1.75 0 1 1 0-3.5 1.75 1.75 0 0 1 0 3.5ZM10.25 18a1.75 1.75 0 1 0 3.5 0 1.75 1.75 0 0 0-3.5 0Z" fill="currentColor"/></svg>',chevron_down:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4.22 8.47a.75.75 0 0 1 1.06 0L12 15.19l6.72-6.72a.75.75 0 1 1 1.06 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L4.22 9.53a.75.75 0 0 1 0-1.06Z" fill="currentColor"/></svg>',chevron_up:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4.22 15.53a.75.75 0 0 0 1.06 0L12 8.81l6.72 6.72a.75.75 0 1 0 1.06-1.06l-7.25-7.25a.75.75 0 0 0-1.06 0l-7.25 7.25a.75.75 0 0 0 0 1.06Z" fill="currentColor"/></svg>',chevron_left:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.53 4.22a.75.75 0 0 1 0 1.06L8.81 12l6.72 6.72a.75.75 0 1 1-1.06 1.06l-7.25-7.25a.75.75 0 0 1 0-1.06l7.25-7.25a.75.75 0 0 1 1.06 0Z" fill="currentColor"/></svg>',chevron_right:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.47 4.22a.75.75 0 0 0 0 1.06L15.19 12l-6.72 6.72a.75.75 0 1 0 1.06 1.06l7.25-7.25a.75.75 0 0 0 0-1.06L9.53 4.22a.75.75 0 0 0-1.06 0Z" fill="currentColor"/></svg>',settings:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12.012 2.25c.734.008 1.465.093 2.182.253a.75.75 0 0 1 .582.649l.17 1.527a1.384 1.384 0 0 0 1.927 1.116l1.401-.615a.75.75 0 0 1 .85.174 9.792 9.792 0 0 1 2.204 3.792.75.75 0 0 1-.271.825l-1.242.916a1.381 1.381 0 0 0 0 2.226l1.243.915a.75.75 0 0 1 .272.826 9.797 9.797 0 0 1-2.204 3.792.75.75 0 0 1-.848.175l-1.407-.617a1.38 1.38 0 0 0-1.926 1.114l-.169 1.526a.75.75 0 0 1-.572.647 9.518 9.518 0 0 1-4.406 0 .75.75 0 0 1-.572-.647l-.168-1.524a1.382 1.382 0 0 0-1.926-1.11l-1.406.616a.75.75 0 0 1-.849-.175 9.798 9.798 0 0 1-2.204-3.796.75.75 0 0 1 .272-.826l1.243-.916a1.38 1.38 0 0 0 0-2.226l-1.243-.914a.75.75 0 0 1-.271-.826 9.793 9.793 0 0 1 2.204-3.792.75.75 0 0 1 .85-.174l1.4.615a1.387 1.387 0 0 0 1.93-1.118l.17-1.526a.75.75 0 0 1 .583-.65c.717-.159 1.45-.243 2.201-.252Zm0 1.5a9.135 9.135 0 0 0-1.354.117l-.109.977A2.886 2.886 0 0 1 6.525 7.17l-.898-.394a8.293 8.293 0 0 0-1.348 2.317l.798.587a2.881 2.881 0 0 1 0 4.643l-.799.588c.32.842.776 1.626 1.348 2.322l.905-.397a2.882 2.882 0 0 1 4.017 2.318l.11.984c.889.15 1.798.15 2.687 0l.11-.984a2.881 2.881 0 0 1 4.018-2.322l.905.396a8.296 8.296 0 0 0 1.347-2.318l-.798-.588a2.881 2.881 0 0 1 0-4.643l.796-.587a8.293 8.293 0 0 0-1.348-2.317l-.896.393a2.884 2.884 0 0 1-4.023-2.324l-.11-.976a8.988 8.988 0 0 0-1.333-.117ZM12 8.25a3.75 3.75 0 1 1 0 7.5 3.75 3.75 0 0 1 0-7.5Zm0 1.5a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Z" fill="currentColor"/></svg>',wifi:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17.745 10.75a8.291 8.291 0 0 1 1.492 2.07.75.75 0 1 1-1.335.683 6.798 6.798 0 0 0-1.218-1.692 6.562 6.562 0 0 0-10.493 1.673.75.75 0 1 1-1.339-.677 8.062 8.062 0 0 1 12.893-2.057Zm-2.102 3.07c.448.447.816.997 1.072 1.582a.75.75 0 1 1-1.373.602 3.72 3.72 0 0 0-.76-1.124 3.592 3.592 0 0 0-5.08 0c-.31.31-.562.689-.746 1.11a.75.75 0 1 1-1.375-.6 5.11 5.11 0 0 1 1.061-1.57 5.092 5.092 0 0 1 7.201 0Zm4.805-5.541c.51.509.99 1.09 1.409 1.697a.75.75 0 0 1-1.235.852 10.822 10.822 0 0 0-1.234-1.489c-4.08-4.08-10.695-4.08-14.776 0-.421.422-.84.934-1.222 1.484a.75.75 0 0 1-1.232-.855c.43-.62.905-1.2 1.394-1.69 4.666-4.665 12.23-4.665 16.896 0Zm-7.387 8.16a1.5 1.5 0 1 1-2.122 2.122 1.5 1.5 0 0 1 2.122-2.122Z" fill="currentColor"/></svg>',speaker:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M15 4.25c0-1.079-1.274-1.65-2.08-.934L8.427 7.309a.75.75 0 0 1-.498.19H4.25A2.25 2.25 0 0 0 2 9.749v4.497a2.25 2.25 0 0 0 2.25 2.25h3.68a.75.75 0 0 1 .498.19l4.491 3.994c.806.716 2.081.144 2.081-.934V4.25ZM9.425 8.43 13.5 4.807v14.382l-4.075-3.624a2.25 2.25 0 0 0-1.495-.569H4.25a.75.75 0 0 1-.75-.75V9.75a.75.75 0 0 1 .75-.75h3.68a2.25 2.25 0 0 0 1.495-.569ZM18.992 5.897a.75.75 0 0 1 1.049.157A9.959 9.959 0 0 1 22 12a9.96 9.96 0 0 1-1.96 5.946.75.75 0 0 1-1.205-.892A8.459 8.459 0 0 0 20.5 12a8.459 8.459 0 0 0-1.665-5.054.75.75 0 0 1 .157-1.049Z" /><path d="M17.143 8.37a.75.75 0 0 1 1.017.302c.536.99.84 2.125.84 3.328a6.973 6.973 0 0 1-.84 3.328.75.75 0 0 1-1.32-.714c.42-.777.66-1.666.66-2.614s-.24-1.837-.66-2.614a.75.75 0 0 1 .303-1.017Z"/></svg>',speaker_off:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M3.28 2.22a.75.75 0 1 0-1.06 1.06L6.438 7.5H4.25A2.25 2.25 0 0 0 2 9.749v4.497a2.25 2.25 0 0 0 2.25 2.25h3.68a.75.75 0 0 1 .498.19l4.491 3.994c.806.716 2.081.144 2.081-.934V16.06l5.72 5.72a.75.75 0 0 0 1.06-1.061L3.28 2.22ZM13.5 14.56v4.629l-4.075-3.624a2.25 2.25 0 0 0-1.495-.569H4.25a.75.75 0 0 1-.75-.75V9.75a.75.75 0 0 1 .75-.75h3.688L13.5 14.56ZM13.5 4.807v5.511l1.5 1.5V4.25c0-1.079-1.274-1.65-2.08-.934l-3.4 3.022 1.063 1.063L13.5 4.807ZM17.141 13.96l1.138 1.137A6.974 6.974 0 0 0 19 12a6.973 6.973 0 0 0-.84-3.328.75.75 0 0 0-1.32.714c.42.777.66 1.666.66 2.614 0 .691-.127 1.351-.359 1.96ZM19.388 16.206l1.093 1.094A9.955 9.955 0 0 0 22 12a9.959 9.959 0 0 0-1.96-5.946.75.75 0 0 0-1.205.892A8.46 8.46 0 0 1 20.5 12a8.458 8.458 0 0 1-1.112 4.206Z"/></svg>',download:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.25 20.5a.75.75 0 1 1 0 1.5l-13 .004a.75.75 0 1 1 0-1.5l13-.004ZM11.648 2.012l.102-.007a.75.75 0 0 1 .743.648l.007.102-.001 13.685 3.722-3.72a.75.75 0 0 1 .976-.073l.085.073a.75.75 0 0 1 .072.976l-.073.084-4.997 4.997a.75.75 0 0 1-.976.073l-.085-.073-5.003-4.996a.75.75 0 0 1 .976-1.134l.084.072 3.719 3.714L11 2.755a.75.75 0 0 1 .648-.743l.102-.007-.102.007Z" fill="currentColor"/></svg>',full_screen_maximize:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4.5 5.75c0-.69.56-1.25 1.25-1.25h2a.75.75 0 0 0 0-1.5h-2A2.75 2.75 0 0 0 3 5.75v2a.75.75 0 0 0 1.5 0v-2ZM4.5 18.25c0 .69.56 1.25 1.25 1.25h2a.75.75 0 0 1 0 1.5h-2A2.75 2.75 0 0 1 3 18.25v-2a.75.75 0 0 1 1.5 0v2ZM18.25 4.5c.69 0 1.25.56 1.25 1.25v2a.75.75 0 0 0 1.5 0v-2A2.75 2.75 0 0 0 18.25 3h-2a.75.75 0 0 0 0 1.5h2ZM19.5 18.25c0 .69-.56 1.25-1.25 1.25h-2a.75.75 0 0 0 0 1.5h2A2.75 2.75 0 0 0 21 18.25v-2a.75.75 0 0 0-1.5 0v2Z" fill="currentColor"/></svg>',full_screen_minimize:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.5 3.75a.75.75 0 0 0-1.5 0v2.5a.75.75 0 0 1-.75.75h-2.5a.75.75 0 0 0 0 1.5h2.5A2.25 2.25 0 0 0 8.5 6.25v-2.5ZM8.5 20.25a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 0-.75-.75h-2.5a.75.75 0 0 1 0-1.5h2.5a2.25 2.25 0 0 1 2.25 2.25v2.5ZM16.25 3a.75.75 0 0 0-.75.75v2.5a2.25 2.25 0 0 0 2.25 2.25h2.5a.75.75 0 0 0 0-1.5h-2.5a.75.75 0 0 1-.75-.75v-2.5a.75.75 0 0 0-.75-.75ZM15.5 20.25a.75.75 0 0 0 1.5 0v-2.5a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 0 0-1.5h-2.5a2.25 2.25 0 0 0-2.25 2.25v2.5Z" fill="currentColor"/></svg>',copy:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5.503 4.627 5.5 6.75v10.504a3.25 3.25 0 0 0 3.25 3.25h8.616a2.251 2.251 0 0 1-2.122 1.5H8.75A4.75 4.75 0 0 1 4 17.254V6.75c0-.98.627-1.815 1.503-2.123ZM17.75 2A2.25 2.25 0 0 1 20 4.25v13a2.25 2.25 0 0 1-2.25 2.25h-9a2.25 2.25 0 0 1-2.25-2.25v-13A2.25 2.25 0 0 1 8.75 2h9Zm0 1.5h-9a.75.75 0 0 0-.75.75v13c0 .414.336.75.75.75h9a.75.75 0 0 0 .75-.75v-13a.75.75 0 0 0-.75-.75Z" fill="currentColor"/></svg>',attach:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.772 3.743a6 6 0 0 1 8.66 8.302l-.19.197-8.8 8.798-.036.03a3.723 3.723 0 0 1-5.489-4.973.764.764 0 0 1 .085-.13l.054-.06.086-.088.142-.148.002.003 7.436-7.454a.75.75 0 0 1 .977-.074l.084.073a.75.75 0 0 1 .074.976l-.073.084-7.594 7.613a2.23 2.23 0 0 0 3.174 3.106l8.832-8.83A4.502 4.502 0 0 0 13 4.644l-.168.16-.013.014-9.536 9.536a.75.75 0 0 1-1.133-.977l.072-.084 9.549-9.55h.002Z" fill="currentColor"/></svg>',image:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17.75 3A3.25 3.25 0 0 1 21 6.25v11.5A3.25 3.25 0 0 1 17.75 21H6.25A3.25 3.25 0 0 1 3 17.75V6.25A3.25 3.25 0 0 1 6.25 3h11.5Zm.58 16.401-5.805-5.686a.75.75 0 0 0-.966-.071l-.084.07-5.807 5.687c.182.064.378.099.582.099h11.5c.203 0 .399-.035.58-.099l-5.805-5.686L18.33 19.4ZM17.75 4.5H6.25A1.75 1.75 0 0 0 4.5 6.25v11.5c0 .208.036.408.103.594l5.823-5.701a2.25 2.25 0 0 1 3.02-.116l.128.116 5.822 5.702c.067-.186.104-.386.104-.595V6.25a1.75 1.75 0 0 0-1.75-1.75Zm-2.498 2a2.252 2.252 0 1 1 0 4.504 2.252 2.252 0 0 1 0-4.504Zm0 1.5a.752.752 0 1 0 0 1.504.752.752 0 0 0 0-1.504Z" fill="currentColor"/></svg>',emoji_multiple:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.5 2a6.503 6.503 0 0 1 6.312 4.943c-.515.01-1.02.068-1.506.171a5 5 0 1 0-6.191 6.191 8.053 8.053 0 0 0-.172 1.507A6.5 6.5 0 0 1 8.5 2Zm.16 8.006c.355-.451.759-.864 1.202-1.23a3.5 3.5 0 0 0-4.022.95.75.75 0 1 0 1.14.974 2 2 0 0 1 1.68-.694ZM7.5 6.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm4 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm1 8a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm5.458 2.042a.75.75 0 0 1 .082 1.058 4 4 0 0 1-6.075.005.75.75 0 0 1 1.138-.977 2.499 2.499 0 0 0 3.797-.003.75.75 0 0 1 1.058-.083ZM17.5 14.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2ZM15 22a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0-1.5a5.5 5.5 0 1 1 0-11 5.5 5.5 0 0 1 0 11Z" fill="currentColor"/></svg>',image_off:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.28 2.22a.75.75 0 1 0-1.06 1.06l1.263 1.264A3.235 3.235 0 0 0 3 6.25v11.5A3.25 3.25 0 0 0 6.25 21h11.5c.626 0 1.21-.177 1.706-.483l1.263 1.264a.75.75 0 0 0 1.061-1.061L3.28 2.22Zm8.788 10.909 6.206 6.206.056.066a1.746 1.746 0 0 1-.58.099H6.25c-.204 0-.4-.035-.582-.099l5.807-5.686.593-.586Zm-.95-.95a2.245 2.245 0 0 0-.692.464l-5.823 5.7a1.747 1.747 0 0 1-.103-.593V6.25c0-.206.036-.404.101-.588l6.518 6.518ZM19.5 16.318V6.25a1.75 1.75 0 0 0-1.75-1.75H7.682L6.182 3H17.75A3.25 3.25 0 0 1 21 6.25v11.568l-1.5-1.5Z" fill="currentColor"/><path d="M15.252 6.5a2.252 2.252 0 1 1 0 4.504 2.252 2.252 0 0 1 0-4.504Zm0 1.5a.752.752 0 1 0 0 1.504.752.752 0 0 0 0-1.504Z" fill="currentColor"/></svg>',disconnected:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.28 2.22a.75.75 0 0 0-1.06 1.06l3.364 3.365a11.99 11.99 0 0 0-2.033 1.634c-.49.489-.964 1.069-1.394 1.689a.75.75 0 1 0 1.233.855c.381-.55.8-1.062 1.222-1.484a10.468 10.468 0 0 1 2.063-1.604l1.591 1.592a8.062 8.062 0 0 0-1.923 1.424c-.61.61-1.109 1.3-1.491 2.056a.75.75 0 1 0 1.338.677 6.51 6.51 0 0 1 1.214-1.673 6.546 6.546 0 0 1 1.984-1.362l1.93 1.93a5.07 5.07 0 0 0-2.876 1.44 5.11 5.11 0 0 0-1.061 1.57.75.75 0 0 0 1.374.602c.185-.422.437-.8.747-1.111a3.59 3.59 0 0 1 3.36-.958l7.858 7.858a.75.75 0 0 0 1.06-1.06L3.28 2.22Zm8.304 6.182 1.584 1.584a6.532 6.532 0 0 1 3.516 1.825 6.798 6.798 0 0 1 1.217 1.692.75.75 0 1 0 1.336-.683 8.292 8.292 0 0 0-1.492-2.07 8.042 8.042 0 0 0-6.16-2.348ZM8.487 5.305 9.713 6.53a10.44 10.44 0 0 1 10.908 4.297.75.75 0 1 0 1.235-.852 11.946 11.946 0 0 0-13.369-4.67Zm4.573 11.134a1.5 1.5 0 1 1-2.121 2.122 1.5 1.5 0 0 1 2.121-2.122Z" fill="currentColor"/></svg>',wand:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m13.314 7.565-.136.126-10.48 10.488a2.27 2.27 0 0 0 3.211 3.208L16.388 10.9a2.251 2.251 0 0 0-.001-3.182l-.157-.146a2.25 2.25 0 0 0-2.916-.007Zm-.848 2.961 1.088 1.088-8.706 8.713a.77.77 0 1 1-1.089-1.088l8.707-8.713Zm4.386 4.48L16.75 15a.75.75 0 0 0-.743.648L16 15.75v.75h-.75a.75.75 0 0 0-.743.648l-.007.102c0 .38.282.694.648.743l.102.007H16v.75c0 .38.282.694.648.743l.102.007a.75.75 0 0 0 .743-.648l.007-.102V18h.75a.75.75 0 0 0 .743-.648L19 17.25a.75.75 0 0 0-.648-.743l-.102-.007h-.75v-.75a.75.75 0 0 0-.648-.743L16.75 15l.102.007Zm-1.553-6.254.027.027a.751.751 0 0 1 0 1.061l-.711.713-1.089-1.089.73-.73a.75.75 0 0 1 1.043.018ZM6.852 5.007 6.75 5a.75.75 0 0 0-.743.648L6 5.75v.75h-.75a.75.75 0 0 0-.743.648L4.5 7.25c0 .38.282.693.648.743L5.25 8H6v.75c0 .38.282.693.648.743l.102.007a.75.75 0 0 0 .743-.648L7.5 8.75V8h.75a.75.75 0 0 0 .743-.648L9 7.25a.75.75 0 0 0-.648-.743L8.25 6.5H7.5v-.75a.75.75 0 0 0-.648-.743L6.75 5l.102.007Zm12-2L18.75 3a.75.75 0 0 0-.743.648L18 3.75v.75h-.75a.75.75 0 0 0-.743.648l-.007.102c0 .38.282.693.648.743L17.25 6H18v.75c0 .38.282.693.648.743l.102.007a.75.75 0 0 0 .743-.648l.007-.102V6h.75a.75.75 0 0 0 .743-.648L21 5.25a.75.75 0 0 0-.648-.743L20.25 4.5h-.75v-.75a.75.75 0 0 0-.648-.743L18.75 3l.102.007Z" fill="currentColor"/></svg>',recording:'<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24"><path d="M12 18a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z"/><path d="M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2ZM3.5 12a8.5 8.5 0 1 1 17 0 8.5 8.5 0 0 1-17 0Z"/></svg>',subtract:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.755 12.5h16.492a.75.75 0 0 0 0-1.5H3.755a.75.75 0 0 0 0 1.5Z" fill="currentColor"/></svg>',stop_recording:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 3.5C9.74566 3.5 7.58365 4.39553 5.98959 5.98959C4.39553 7.58365 3.5 9.74566 3.5 12C3.5 14.2543 4.39553 16.4163 5.98959 18.0104C7.58365 19.6045 9.74566 20.5 12 20.5C14.2543 20.5 16.4163 19.6045 18.0104 18.0104C19.6045 16.4163 20.5 14.2543 20.5 12C20.5 9.74566 19.6045 7.58365 18.0104 5.98959C16.4163 4.39553 14.2543 3.5 12 3.5ZM2 12C2 6.477 6.477 2 12 2C17.523 2 22 6.477 22 12C22 17.523 17.523 22 12 22C6.477 22 2 17.523 2 12ZM8 9.5C8 9.10218 8.15804 8.72064 8.43934 8.43934C8.72064 8.15804 9.10218 8 9.5 8H14.5C14.8978 8 15.2794 8.15804 15.5607 8.43934C15.842 8.72064 16 9.10218 16 9.5V14.5C16 14.8978 15.842 15.2794 15.5607 15.5607C15.2794 15.842 14.8978 16 14.5 16H9.5C9.10218 16 8.72064 15.842 8.43934 15.5607C8.15804 15.2794 8 14.8978 8 14.5V9.5Z" fill="currentColor"/></svg>',warning:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10.91 2.782a2.25 2.25 0 0 1 2.975.74l.083.138 7.759 14.009a2.25 2.25 0 0 1-1.814 3.334l-.154.006H4.243a2.25 2.25 0 0 1-2.041-3.197l.072-.143L10.031 3.66a2.25 2.25 0 0 1 .878-.878Zm9.505 15.613-7.76-14.008a.75.75 0 0 0-1.254-.088l-.057.088-7.757 14.008a.75.75 0 0 0 .561 1.108l.095.006h15.516a.75.75 0 0 0 .696-1.028l-.04-.086-7.76-14.008 7.76 14.008ZM12 16.002a.999.999 0 1 1 0 1.997.999.999 0 0 1 0-1.997ZM11.995 8.5a.75.75 0 0 1 .744.647l.007.102.004 4.502a.75.75 0 0 1-1.494.103l-.006-.102-.004-4.502a.75.75 0 0 1 .75-.75Z" fill="currentColor"/></svg>',pin:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m16.242 2.932 4.826 4.826a2.75 2.75 0 0 1-.715 4.404l-4.87 2.435a.75.75 0 0 0-.374.426l-1.44 4.166a1.25 1.25 0 0 1-2.065.476L8.5 16.561 4.06 21H3v-1.06l4.44-4.44-3.105-3.104a1.25 1.25 0 0 1 .476-2.066l4.166-1.44a.75.75 0 0 0 .426-.373l2.435-4.87a2.75 2.75 0 0 1 4.405-.715Zm3.766 5.886-4.826-4.826a1.25 1.25 0 0 0-2.002.325l-2.435 4.871a2.25 2.25 0 0 1-1.278 1.12l-3.789 1.31 6.705 6.704 1.308-3.789a2.25 2.25 0 0 1 1.12-1.277l4.872-2.436a1.25 1.25 0 0 0 .325-2.002Z" fill="currentColor"/></svg>',pin_off:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.28 2.22a.75.75 0 0 0-1.06 1.06l5.905 5.905L4.81 10.33a1.25 1.25 0 0 0-.476 2.065L7.439 15.5 3 19.94V21h1.06l4.44-4.44 3.105 3.105a1.25 1.25 0 0 0 2.065-.476l1.145-3.313 5.905 5.904a.75.75 0 0 0 1.06-1.06L3.28 2.22Zm10.355 12.476-1.252 3.626-6.705-6.705 3.626-1.252 4.331 4.331Zm6.048-3.876-3.787 1.894 1.118 1.118 3.34-1.67a2.75 2.75 0 0 0 .714-4.404l-4.825-4.826a2.75 2.75 0 0 0-4.405.715l-1.67 3.34 1.118 1.117 1.894-3.787a1.25 1.25 0 0 1 2.002-.325l4.826 4.826a1.25 1.25 0 0 1-.325 2.002Z" fill="currentColor"/></svg>',spinner:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke-width="2" stroke="currentColor" stroke-opacity="0.2" vector-effect="non-scaling-stroke"/><path d="M22 12C22 10.6868 21.7413 9.38642 21.2388 8.17317C20.7362 6.95991 19.9997 5.85752 19.0711 4.92893C18.1425 4.00035 17.0401 3.26375 15.8268 2.7612C14.6136 2.25866 13.3132 2 12 2" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke"/></svg>',breakout_rooms:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10.5 3a2.25 2.25 0 0 1 2.25 2.25v6h6A2.25 2.25 0 0 1 21 13.5v5.25A2.25 2.25 0 0 1 18.75 21H5.25A2.25 2.25 0 0 1 3 18.75V5.25A2.25 2.25 0 0 1 5.25 3h5.25Zm.75 9.75H4.5v6c0 .414.336.75.75.75h5.999l.001-6.75Zm7.5 0h-6.001v6.75h6.001a.75.75 0 0 0 .75-.75V13.5a.75.75 0 0 0-.75-.75ZM10.5 4.5H5.25a.75.75 0 0 0-.75.75v6h6.75v-6a.75.75 0 0 0-.75-.75Zm7.398-2.493L18 2a.75.75 0 0 1 .743.648l.007.102v2.5h2.5a.75.75 0 0 1 .743.648L22 6a.75.75 0 0 1-.648.743l-.102.007h-2.5v2.5a.75.75 0 0 1-.648.743L18 10a.75.75 0 0 1-.743-.648l-.007-.102v-2.5h-2.5a.75.75 0 0 1-.743-.648L14 6a.75.75 0 0 1 .648-.743l.102-.007h2.5v-2.5a.75.75 0 0 1 .648-.743Z" fill="currentColor"/></svg>',add:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M11.75 3a.75.75 0 0 1 .743.648l.007.102.001 7.25h7.253a.75.75 0 0 1 .102 1.493l-.102.007h-7.253l.002 7.25a.75.75 0 0 1-1.493.101l-.007-.102-.002-7.249H3.752a.75.75 0 0 1-.102-1.493L3.752 11h7.25L11 3.75a.75.75 0 0 1 .75-.75Z" fill="currentColor"/></svg>',shuffle:'<svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M14.0058 8.11111H18.7947L16.9613 9.94444C16.9095 9.99587 16.8684 10.057 16.8402 10.1243C16.812 10.1917 16.7974 10.2639 16.7971 10.3369C16.7966 10.4843 16.8547 10.6259 16.9586 10.7306C17.01 10.7823 17.0711 10.8235 17.1385 10.8517C17.2058 10.8799 17.278 10.8945 17.351 10.8947C17.4985 10.8953 17.64 10.8372 17.7447 10.7333L20.8891 7.59999L20.4947 7.20555L17.7447 4.46111C17.64 4.35723 17.4985 4.29917 17.351 4.29969C17.2036 4.30021 17.0624 4.35927 16.9586 4.46388C16.8547 4.5685 16.7966 4.71009 16.7971 4.85751C16.7977 5.00494 16.8567 5.14612 16.9613 5.24999L18.728 6.99999H13.6669C13.5699 7.00058 13.4748 7.02653 13.391 7.07526C13.3072 7.12399 13.2376 7.19381 13.1891 7.27777L11.7224 9.82777L12.3669 10.9389L14.0058 8.11111Z" fill="currentColor"/><path d="M8.15022 15.9278H3.66688C3.51954 15.9278 3.37823 15.9863 3.27405 16.0905C3.16986 16.1947 3.11133 16.336 3.11133 16.4833C3.11133 16.6307 3.16986 16.772 3.27405 16.8762C3.37823 16.9804 3.51954 17.0389 3.66688 17.0389H8.47244C8.56939 17.0383 8.6645 17.0124 8.74832 16.9636C8.83214 16.9149 8.90174 16.8451 8.95022 16.7611L10.4335 14.2222L9.77799 13.1111L8.15022 15.9278Z"/><path d="M17.7447 13.2056C17.64 13.1017 17.4985 13.0436 17.351 13.0441C17.2036 13.0447 17.0624 13.1037 16.9586 13.2083C16.8547 13.3129 16.7966 13.4545 16.7971 13.602C16.7977 13.7494 16.8567 13.8906 16.9613 13.9944L18.9058 15.9389H14.0058L8.95022 7.29444C8.90174 7.21047 8.83214 7.14066 8.74832 7.09193C8.6645 7.04319 8.56939 7.01725 8.47244 7.01666H3.66688C3.51954 7.01666 3.37823 7.07519 3.27405 7.17938C3.16986 7.28357 3.11133 7.42487 3.11133 7.57222C3.11133 7.71956 3.16986 7.86087 3.27405 7.96505C3.37823 8.06924 3.51954 8.12777 3.66688 8.12777H8.15022L13.2058 16.7667C13.2542 16.8506 13.3239 16.9204 13.4077 16.9692C13.4915 17.0179 13.5866 17.0439 13.6836 17.0444H18.6113L16.9447 18.7111C16.8929 18.7625 16.8517 18.8237 16.8235 18.891C16.7954 18.9584 16.7807 19.0306 16.7805 19.1036C16.7802 19.1766 16.7943 19.2489 16.822 19.3165C16.8497 19.384 16.8905 19.4454 16.9419 19.4972C16.9933 19.549 17.0545 19.5902 17.1218 19.6184C17.1891 19.6465 17.2614 19.6612 17.3344 19.6614C17.4074 19.6617 17.4797 19.6476 17.5472 19.6199C17.6148 19.5922 17.6762 19.5514 17.728 19.5L20.478 16.7556L20.8724 16.3611L17.7447 13.2056Z"/></svg>',edit:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M21.03 2.97a3.578 3.578 0 0 1 0 5.06L9.062 20a2.25 2.25 0 0 1-.999.58l-5.116 1.395a.75.75 0 0 1-.92-.921l1.395-5.116a2.25 2.25 0 0 1 .58-.999L15.97 2.97a3.578 3.578 0 0 1 5.06 0ZM15 6.06 5.062 16a.75.75 0 0 0-.193.333l-1.05 3.85 3.85-1.05A.75.75 0 0 0 8 18.938L17.94 9 15 6.06Zm2.03-2.03-.97.97L19 7.94l.97-.97a2.079 2.079 0 0 0-2.94-2.94Z" fill="currentColor"/></svg>',delete:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 1.75a3.25 3.25 0 0 1 3.245 3.066L15.25 5h5.25a.75.75 0 0 1 .102 1.493L20.5 6.5h-.796l-1.28 13.02a2.75 2.75 0 0 1-2.561 2.474l-.176.006H8.313a2.75 2.75 0 0 1-2.714-2.307l-.023-.174L4.295 6.5H3.5a.75.75 0 0 1-.743-.648L2.75 5.75a.75.75 0 0 1 .648-.743L3.5 5h5.25A3.25 3.25 0 0 1 12 1.75Zm6.197 4.75H5.802l1.267 12.872a1.25 1.25 0 0 0 1.117 1.122l.127.006h7.374c.6 0 1.109-.425 1.225-1.002l.02-.126L18.196 6.5ZM13.75 9.25a.75.75 0 0 1 .743.648L14.5 10v7a.75.75 0 0 1-1.493.102L13 17v-7a.75.75 0 0 1 .75-.75Zm-3.5 0a.75.75 0 0 1 .743.648L11 10v7a.75.75 0 0 1-1.493.102L9.5 17v-7a.75.75 0 0 1 .75-.75Zm1.75-6a1.75 1.75 0 0 0-1.744 1.606L10.25 5h3.5A1.75 1.75 0 0 0 12 3.25Z" fill="currentColor"/></svg>',back:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4.75 2a.75.75 0 0 1 .743.648l.007.102v5.69l4.574-4.56a6.41 6.41 0 0 1 8.879-.179l.186.18a6.41 6.41 0 0 1 0 9.063l-8.846 8.84a.75.75 0 0 1-1.06-1.062l8.845-8.838a4.91 4.91 0 0 0-6.766-7.112l-.178.17L6.562 9.5h5.688a.75.75 0 0 1 .743.648l.007.102a.75.75 0 0 1-.648.743L12.25 11h-7.5a.75.75 0 0 1-.743-.648L4 10.25v-7.5A.75.75 0 0 1 4.75 2Z" fill="currentColor"/></svg>',save:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 5.75A2.75 2.75 0 0 1 5.75 3h9.964a3.25 3.25 0 0 1 2.299.952l2.035 2.035c.61.61.952 1.437.952 2.299v9.964A2.75 2.75 0 0 1 18.25 21H5.75A2.75 2.75 0 0 1 3 18.25V5.75ZM5.75 4.5c-.69 0-1.25.56-1.25 1.25v12.5c0 .69.56 1.25 1.25 1.25H6v-5.25A2.25 2.25 0 0 1 8.25 12h7.5A2.25 2.25 0 0 1 18 14.25v5.25h.25c.69 0 1.25-.56 1.25-1.25V8.286c0-.465-.184-.91-.513-1.238l-2.035-2.035a1.75 1.75 0 0 0-.952-.49V7.25a2.25 2.25 0 0 1-2.25 2.25h-4.5A2.25 2.25 0 0 1 7 7.25V4.5H5.75Zm10.75 15v-5.25a.75.75 0 0 0-.75-.75h-7.5a.75.75 0 0 0-.75.75v5.25h9Zm-8-15v2.75c0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75V4.5h-6Z" fill="currentColor"/></svg>',web:'<svg fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 1.999c5.524 0 10.002 4.478 10.002 10.002 0 5.523-4.478 10.001-10.002 10.001-5.524 0-10.002-4.478-10.002-10.001C1.998 6.477 6.476 1.999 12 1.999ZM14.939 16.5H9.06c.652 2.414 1.786 4.002 2.939 4.002s2.287-1.588 2.939-4.002Zm-7.43 0H4.785a8.532 8.532 0 0 0 4.094 3.411c-.522-.82-.953-1.846-1.27-3.015l-.102-.395Zm11.705 0h-2.722c-.324 1.335-.792 2.5-1.373 3.411a8.528 8.528 0 0 0 3.91-3.127l.185-.283ZM7.094 10H3.735l-.005.017a8.525 8.525 0 0 0-.233 1.984c0 1.056.193 2.067.545 3h3.173a20.847 20.847 0 0 1-.123-5Zm8.303 0H8.603a18.966 18.966 0 0 0 .135 5h6.524a18.974 18.974 0 0 0 .135-5Zm4.868 0h-3.358c.062.647.095 1.317.095 2a20.3 20.3 0 0 1-.218 3h3.173a8.482 8.482 0 0 0 .544-3c0-.689-.082-1.36-.236-2ZM8.88 4.09l-.023.008A8.531 8.531 0 0 0 4.25 8.5h3.048c.314-1.752.86-3.278 1.583-4.41ZM12 3.499l-.116.005C10.62 3.62 9.396 5.622 8.83 8.5h6.342c-.566-2.87-1.783-4.869-3.045-4.995L12 3.5Zm3.12.59.107.175c.669 1.112 1.177 2.572 1.475 4.237h3.048a8.533 8.533 0 0 0-4.339-4.29l-.291-.121Z" fill="currentColor"/></svg>',checkmark:'<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="m18 6.7-8.48 8.48-3.54-3.54a.996.996 0 1 0-1.41 1.41l4.24 4.24c.39.39 1.02.39 1.41 0l9.18-9.18a.999.999 0 0 0-.01-1.42c-.37-.38-1-.38-1.39.01z"/></svg>',spotlight:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M19.745 4C20.3417 4 20.914 4.23705 21.336 4.65901C21.7579 5.08097 21.995 5.65326 21.995 6.25V12.805C21.5485 12.3774 21.0434 12.0154 20.495 11.73V6.25C20.495 6.05109 20.416 5.86032 20.2753 5.71967C20.1347 5.57902 19.9439 5.5 19.745 5.5H4.25C4.05109 5.5 3.86032 5.57902 3.71967 5.71967C3.57902 5.86032 3.5 6.05109 3.5 6.25V17.755C3.5 18.169 3.836 18.505 4.25 18.505L6.999 18.504L7 15.75C7.00002 15.3108 7.16517 14.8877 7.46268 14.5646C7.76019 14.2415 8.1683 14.0421 8.606 14.006L8.75 14H12.022C11.7223 14.4675 11.484 14.9716 11.313 15.5H8.75C8.69368 15.5001 8.63904 15.5192 8.59493 15.5542C8.55083 15.5893 8.51984 15.6382 8.507 15.693L8.5 15.75L8.499 18.504H11.077C11.1569 19.0193 11.2989 19.5229 11.5 20.004H4.25C3.65344 20.004 3.08129 19.7671 2.65936 19.3453C2.23744 18.9236 2.00027 18.3516 2 17.755V6.25C2 5.65326 2.23705 5.08097 2.65901 4.65901C3.08097 4.23705 3.65326 4 4.25 4H19.745Z"/><path d="M12 7C12.7956 7 13.5587 7.31607 14.1213 7.87868C14.6839 8.44129 15 9.20435 15 10C15 10.7956 14.6839 11.5587 14.1213 12.1213C13.5587 12.6839 12.7956 13 12 13C11.2044 13 10.4413 12.6839 9.87868 12.1213C9.31607 11.5587 9 10.7956 9 10C9 9.20435 9.31607 8.44129 9.87868 7.87868C10.4413 7.31607 11.2044 7 12 7ZM12 8.5C11.6022 8.5 11.2206 8.65804 10.9393 8.93934C10.658 9.22064 10.5 9.60218 10.5 10C10.5 10.3978 10.658 10.7794 10.9393 11.0607C11.2206 11.342 11.6022 11.5 12 11.5C12.3978 11.5 12.7794 11.342 13.0607 11.0607C13.342 10.7794 13.5 10.3978 13.5 10C13.5 9.60218 13.342 9.22064 13.0607 8.93934C12.7794 8.65804 12.3978 8.5 12 8.5Z"/><path d="M23 17.5C23 18.9587 22.4205 20.3576 21.3891 21.3891C20.3576 22.4205 18.9587 23 17.5 23C16.0413 23 14.6424 22.4205 13.6109 21.3891C12.5795 20.3576 12 18.9587 12 17.5C12 16.0413 12.5795 14.6424 13.6109 13.6109C14.6424 12.5795 16.0413 12 17.5 12C18.9587 12 20.3576 12.5795 21.3891 13.6109C22.4205 14.6424 23 16.0413 23 17.5ZM18.055 14.42C18.0207 14.2993 17.9479 14.193 17.8478 14.1174C17.7476 14.0417 17.6255 14.0008 17.5 14.0008C17.3745 14.0008 17.2524 14.0417 17.1522 14.1174C17.0521 14.193 16.9793 14.2993 16.945 14.42L16.388 16.208H14.585C14.019 16.208 13.785 16.962 14.242 17.308L15.7 18.413L15.143 20.2C14.968 20.761 15.584 21.228 16.042 20.881L17.5 19.777L18.958 20.881C19.416 21.228 20.032 20.761 19.857 20.201L19.3 18.413L20.758 17.309C21.216 16.962 20.981 16.208 20.415 16.208H18.612L18.055 14.421V14.42Z"/></svg>',join_stage:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M17.5 22C14.4618 22 12 19.5376 12 16.5C12 13.4623 14.4618 11 17.5 11C20.5371 11 23 13.4624 23 16.5C23 19.5376 20.5371 22 17.5 22ZM17.0704 18.992L17.1167 19.0322C17.1868 19.0841 17.2716 19.1125 17.3588 19.1132C17.4461 19.1139 17.5314 19.0869 17.6023 19.036L17.654 18.992L17.6936 18.9458C17.7455 18.8757 17.7739 18.7909 17.7746 18.7037C17.7753 18.6164 17.7483 18.5311 17.6975 18.4602L17.6535 18.4085L16.158 16.9125H19.8375L19.8936 16.9092C19.9829 16.8969 20.0657 16.8558 20.1293 16.792C20.193 16.7282 20.234 16.6454 20.2462 16.5561L20.25 16.5005L20.2462 16.4444C20.2339 16.3553 20.1928 16.2725 20.1292 16.2089C20.0655 16.1452 19.9828 16.1041 19.8936 16.0919L19.8375 16.088H16.158L17.654 14.592L17.6941 14.5453C17.7537 14.4659 17.7827 14.3676 17.7756 14.2686C17.7686 14.1695 17.726 14.0763 17.6558 14.0061C17.5856 13.9359 17.4924 13.8934 17.3934 13.8863C17.2943 13.8793 17.1961 13.9082 17.1167 13.9678L17.071 14.0079L14.8699 16.2079L14.8303 16.2547C14.7784 16.3247 14.75 16.4094 14.7493 16.4965C14.7485 16.5837 14.7753 16.6688 14.8259 16.7398L14.8699 16.7915L17.0704 18.992Z"/><path d="M2.80546 3.80546C2.28973 4.32118 2 5.02065 2 5.75V16.25C2 16.6111 2.07113 16.9687 2.20933 17.3024C2.34753 17.636 2.5501 17.9392 2.80546 18.1945C3.06082 18.4499 3.36398 18.6525 3.69762 18.7907C4.03127 18.9289 4.38886 19 4.75 19H11.498C11.3 18.526 11.157 18.023 11.076 17.5H9.002V14.75C9.002 14.6837 9.02834 14.6201 9.07522 14.5732C9.12211 14.5263 9.1857 14.5 9.252 14.5H11.3135C11.4858 13.9665 11.7253 13.4632 12.0218 13H9.252C8.285 13 7.502 13.784 7.502 14.75V16H7.5V17.5H4.75C4.06 17.5 3.5 16.94 3.5 16.25V5.75C3.5 5.06 4.06 4.5 4.75 4.5H19.25C19.94 4.5 20.5 5.06 20.5 5.75V10.732C20.6457 10.808 20.7884 10.8895 20.9277 10.9762C20.9687 11.0017 21.0093 11.0276 21.0497 11.054C21.3899 11.2762 21.708 11.5294 22 11.8096V5.75C22 5.02065 21.7103 4.32118 21.1945 3.80546C20.6788 3.28973 19.9793 3 19.25 3H4.75C4.02065 3 3.32118 3.28973 2.80546 3.80546Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M14.4181 10.7757C14.7938 10.264 15 9.64262 15 9C15 8.20435 14.6839 7.44129 14.1213 6.87868C13.5587 6.31607 12.7956 6 12 6C11.2044 6 10.4413 6.31607 9.87868 6.87868C9.31607 7.44129 9 8.20435 9 9C9 9.79565 9.31607 10.5587 9.87868 11.1213C10.4413 11.6839 11.2044 12 12 12C12.333 12 12.6602 11.9446 12.9695 11.839C13.3992 11.4213 13.8864 11.0625 14.4181 10.7757ZM10.9393 7.93934C11.2206 7.65804 11.6022 7.5 12 7.5C12.3978 7.5 12.7794 7.65804 13.0607 7.93934C13.342 8.22064 13.5 8.60218 13.5 9C13.5 9.39782 13.342 9.77936 13.0607 10.0607C12.7794 10.342 12.3978 10.5 12 10.5C11.6022 10.5 11.2206 10.342 10.9393 10.0607C10.658 9.77936 10.5 9.39782 10.5 9C10.5 8.60218 10.658 8.22064 10.9393 7.93934Z"></svg>',leave_stage:'<svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M2.80546 3.80546C2.28973 4.32118 2 5.02065 2 5.75V16.25C2 16.6111 2.07113 16.9687 2.20933 17.3024C2.34753 17.636 2.5501 17.9392 2.80546 18.1945C3.06082 18.4499 3.36398 18.6525 3.69762 18.7907C4.03127 18.9289 4.38886 19 4.75 19H11.498C11.3 18.526 11.157 18.023 11.076 17.5H9.002V14.75C9.002 14.6837 9.02834 14.6201 9.07522 14.5732C9.12211 14.5263 9.1857 14.5 9.252 14.5H11.3135C11.4858 13.9665 11.7253 13.4632 12.0218 13H9.252C8.285 13 7.502 13.784 7.502 14.75V16H7.5V17.5H4.75C4.06 17.5 3.5 16.94 3.5 16.25V5.75C3.5 5.06 4.06 4.5 4.75 4.5H19.25C19.94 4.5 20.5 5.06 20.5 5.75V10.732C20.6457 10.808 20.7884 10.8895 20.9277 10.9762C20.9687 11.0017 21.0093 11.0276 21.0497 11.054C21.3899 11.2762 21.708 11.5294 22 11.8096V5.75C22 5.02065 21.7103 4.32118 21.1945 3.80546C20.6788 3.28973 19.9793 3 19.25 3H4.75C4.02065 3 3.32118 3.28973 2.80546 3.80546Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M14.4181 10.7757C14.7938 10.264 15 9.64262 15 9C15 8.20435 14.6839 7.44129 14.1213 6.87868C13.5587 6.31607 12.7956 6 12 6C11.2044 6 10.4413 6.31607 9.87868 6.87868C9.31607 7.44129 9 8.20435 9 9C9 9.79565 9.31607 10.5587 9.87868 11.1213C10.4413 11.6839 11.2044 12 12 12C12.333 12 12.6602 11.9446 12.9695 11.839C13.3992 11.4213 13.8864 11.0625 14.4181 10.7757ZM10.9393 7.93934C11.2206 7.65804 11.6022 7.5 12 7.5C12.3978 7.5 12.7794 7.65804 13.0607 7.93934C13.342 8.22064 13.5 8.60218 13.5 9C13.5 9.39782 13.342 9.77936 13.0607 10.0607C12.7794 10.342 12.3978 10.5 12 10.5C11.6022 10.5 11.2206 10.342 10.9393 10.0607C10.658 9.77936 10.5 9.39782 10.5 9C10.5 8.60218 10.658 8.22064 10.9393 7.93934Z"/><path d="M17.5 11C20.5382 11 23 13.4624 23 16.5C23 19.5377 20.5382 22 17.5 22C14.4629 22 12 19.5377 12 16.5C12 13.4624 14.4629 11 17.5 11V11ZM17.9296 14.0079L17.8833 13.9678C17.8132 13.9159 17.7284 13.8875 17.6412 13.8868C17.5539 13.8861 17.4686 13.9131 17.3977 13.964L17.346 14.0079L17.3064 14.0542C17.2545 14.1243 17.2261 14.2091 17.2254 14.2963C17.2247 14.3836 17.2517 14.4689 17.3026 14.5398L17.3465 14.5915L18.842 16.0875H15.1625L15.1064 16.0908C15.0171 16.1031 14.9343 16.1442 14.8707 16.208C14.807 16.2718 14.766 16.3546 14.7539 16.4439L14.75 16.4995L14.7539 16.5556C14.7661 16.6447 14.8072 16.7275 14.8708 16.7911C14.9345 16.8548 15.0172 16.8959 15.1064 16.9081L15.1625 16.912H18.842L17.346 18.408L17.3059 18.4547C17.2463 18.5341 17.2173 18.6324 17.2244 18.7314C17.2314 18.8305 17.274 18.9237 17.3442 18.9939C17.4144 19.0641 17.5076 19.1066 17.6066 19.1137C17.7057 19.1207 17.8039 19.0918 17.8833 19.0322L17.929 18.9921L20.1301 16.7921L20.1697 16.7453C20.2216 16.6753 20.25 16.5906 20.2507 16.5035C20.2515 16.4163 20.2247 16.3312 20.1741 16.2602L20.1301 16.2085L17.9301 14.0079L17.8833 13.9678L17.9296 14.0079V14.0079Z"/></svg>',pip_off:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.8666 12.3058C11.0731 12.3058 11.2404 12.1385 11.2404 11.932V8.56753C11.2404 8.36107 11.0731 8.1937 10.8666 8.1937C10.6601 8.1937 10.4928 8.36107 10.4928 8.56753V11.0295L6.45393 6.99066C6.30794 6.84467 6.07124 6.84467 5.92525 6.99066C5.77926 7.13665 5.77926 7.37335 5.92525 7.51934L9.9641 11.5582L7.50212 11.5582C7.29566 11.5582 7.12829 11.7256 7.12829 11.932C7.12829 12.1385 7.29566 12.3058 7.50212 12.3058L10.8666 12.3058ZM5.73832 19.8879C3.6737 19.8879 2 18.2141 2 16.1495V7.73832C2 5.6737 3.6737 4 5.73832 4H18.2617C20.3263 4 22 5.6737 22 7.73832L22 13.0269C22 12.2687 21.6002 11.6038 21 11.2316C20.8468 11.1366 20.6806 11.0607 20.5047 11.0071V7.73832C20.5047 6.49955 19.5005 5.49533 18.2617 5.49533H5.73832C4.49955 5.49533 3.49533 6.49955 3.49533 7.73832V16.1495C3.49533 17.3883 4.49955 18.3925 5.73832 18.3925H10.7971C10.8506 18.5685 10.9266 18.7347 11.0216 18.8879C11.3938 19.4881 12.0587 19.8879 12.8169 19.8879H5.73832Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19.7265 12.5H13.3911C12.899 12.5 12.5 12.899 12.5 13.3911V17.6462C12.5 18.1384 12.899 18.5374 13.3911 18.5374H19.7265C20.2187 18.5374 20.6176 18.1384 20.6176 17.6462V13.3911C20.6176 12.899 20.2187 12.5 19.7265 12.5ZM13.3911 11.5C12.3467 11.5 11.5 12.3467 11.5 13.3911V17.6462C11.5 18.6907 12.3467 19.5374 13.3911 19.5374H19.7265C20.771 19.5374 21.6176 18.6907 21.6176 17.6462V13.3911C21.6176 12.3467 20.771 11.5 19.7265 11.5H13.3911Z"/></svg>',pip_on:'<svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M5.73832 19.8879C3.6737 19.8879 2 18.2141 2 16.1495V7.73832C2 5.6737 3.6737 4 5.73832 4H18.2617C20.3263 4 22 5.6737 22 7.73832L22 13.0269C22 12.2687 21.6002 11.6038 21 11.2316C20.8468 11.1366 20.6806 11.0607 20.5047 11.0071V7.73832C20.5047 6.49955 19.5005 5.49533 18.2617 5.49533H5.73832C4.49955 5.49533 3.49533 6.49955 3.49533 7.73832V16.1495C3.49533 17.3883 4.49955 18.3925 5.73832 18.3925H10.7971C10.8506 18.5685 10.9266 18.7347 11.0216 18.8879C11.3938 19.4881 12.0587 19.8879 12.8169 19.8879H5.73832Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19.7265 12.5H13.3911C12.899 12.5 12.5 12.899 12.5 13.3911V17.6462C12.5 18.1384 12.899 18.5374 13.3911 18.5374H19.7265C20.2187 18.5374 20.6176 18.1384 20.6176 17.6462V13.3911C20.6176 12.899 20.2187 12.5 19.7265 12.5ZM13.3911 11.5C12.3467 11.5 11.5 12.3467 11.5 13.3911V17.6462C11.5 18.6907 12.3467 19.5374 13.3911 19.5374H19.7265C20.771 19.5374 21.6176 18.6907 21.6176 17.6462V13.3911C21.6176 12.3467 20.771 11.5 19.7265 11.5H13.3911Z"/><path d="M6.18951 6.88123C5.98304 6.88123 5.81567 7.0486 5.81567 7.25506V10.6195C5.81567 10.826 5.98304 10.9934 6.18951 10.9934C6.39597 10.9934 6.56334 10.826 6.56334 10.6195V8.15757L10.6022 12.1964C10.7482 12.3424 10.9849 12.3424 11.1309 12.1964C11.2769 12.0504 11.2769 11.8137 11.1309 11.6677L7.09202 7.62889L9.55399 7.62889C9.76045 7.62889 9.92782 7.46152 9.92782 7.25506C9.92782 7.0486 9.76045 6.88123 9.55399 6.88123L6.18951 6.88123Z"/></svg>',signal_1:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 16h2v5H3z"></path></svg>',signal_2:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 16h2v5H3zm4-3h2v8H7z"></path></svg>',signal_3:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 16h2v5H3zm4-3h2v8H7zm4-3h2v11h-2z"></path></svg>',signal_4:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 16h2v5H3zm4-3h2v8H7zm4-3h2v11h-2zm4-3h2v14h-2z"></path></svg>',signal_5:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 16h2v5H3zm4-3h2v8H7zm4-3h2v11h-2zm4-3h2v14h-2zm4-3h2v17h-2z"></path></svg>',start_livestream:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="currentColor" d="M6.343 4.938a1 1 0 0 1 0 1.415a8.003 8.003 0 0 0 0 11.317a1 1 0 1 1-1.415 1.414c-3.906-3.906-3.906-10.24 0-14.146a1 1 0 0 1 1.415 0Zm12.731 0c3.906 3.907 3.906 10.24 0 14.146a1 1 0 0 1-1.414-1.414a8.003 8.003 0 0 0 0-11.317a1 1 0 0 1 1.414-1.415ZM9.31 7.812a1 1 0 0 1 0 1.414a3.92 3.92 0 0 0 0 5.544a1 1 0 1 1-1.414 1.414a5.92 5.92 0 0 1 0-8.372a1 1 0 0 1 1.414 0Zm6.959 0a5.92 5.92 0 0 1 0 8.372a1 1 0 0 1-1.415-1.414a3.92 3.92 0 0 0 0-5.544a1 1 0 0 1 1.415-1.414Zm-4.187 2.77a1.5 1.5 0 1 1 0 3a1.5 1.5 0 0 1 0-3Z"/></svg>',stop_livestream:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path fill="currentColor" d="M2.854 2.146a.5.5 0 1 0-.708.708l1.811 1.81A8.218 8.218 0 0 0 2 10a8.228 8.228 0 0 0 2.604 6.015a.725.725 0 0 0 1.01-.025c.316-.316.277-.819-.027-1.11A6.73 6.73 0 0 1 3.5 10c0-1.62.57-3.107 1.522-4.27l.712.71A5.726 5.726 0 0 0 4.5 10c0 1.691.73 3.213 1.893 4.264a.713.713 0 0 0 .983-.037c.328-.328.267-.844-.041-1.134A4.238 4.238 0 0 1 6 10c0-.93.298-1.789.804-2.489l1.842 1.842a1.5 1.5 0 0 0 2 2l6.5 6.5a.5.5 0 0 0 .708-.707l-1.811-1.81l-1.065-1.066l-.712-.71l-1.07-1.072l-1.842-1.841l-2-2L7.4 6.693l-.942-.942l-.82-.82l-.944-.944l-1.841-1.842Zm13.794 12.38A8.212 8.212 0 0 0 18 10c0-2.283-.928-4.35-2.426-5.843a.726.726 0 0 0-1.027.01c-.31.31-.28.8.01 1.095A6.727 6.727 0 0 1 16.5 10a6.718 6.718 0 0 1-.94 3.438l1.088 1.089Zm-1.822-1.822A5.73 5.73 0 0 0 15.5 10a5.733 5.733 0 0 0-1.706-4.087a.714.714 0 0 0-1.008.016c-.319.318-.272.816.014 1.111A4.235 4.235 0 0 1 14 10c0 .557-.107 1.09-.302 1.577l1.128 1.127Z"/></svg>',viewers:'<svg fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 9.005a4 4 0 1 1 0 8 4 4 0 0 1 0-8Zm0 1.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5ZM12 5.5c4.613 0 8.596 3.15 9.701 7.564a.75.75 0 1 1-1.455.365 8.503 8.503 0 0 0-16.493.004.75.75 0 0 1-1.455-.363A10.003 10.003 0 0 1 12 5.5Z" fill="currentColor"/></svg>',debug:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m10.05 15.42 6.256-8.476a.694.694 0 0 1 1.235.57l-.03.098-3.87 9.8a2.07 2.07 0 1 1-3.737-1.766l.069-.115.076-.11 6.257-8.477-6.257 8.476Zm2.05-4.549-1.226 1.66a3.32 3.32 0 0 0-2.29 3.024.75.75 0 0 1-1.5-.063A4.819 4.819 0 0 1 9.14 11.74c.9-.631 1.942-.911 2.961-.87Zm4.167 2.752c.28.586.436 1.22.463 1.866a.75.75 0 0 1-1.376.444l.913-2.31Zm-2.233-5.37-.969 1.311a6.22 6.22 0 0 0-4.736 1.02 6.208 6.208 0 0 0-2.419 3.39.75.75 0 0 1-1.442-.412 7.708 7.708 0 0 1 3-4.207 7.724 7.724 0 0 1 6.566-1.102Zm3.51 2.138c.25.267.486.556.702.865a7.727 7.727 0 0 1 1.097 2.288.75.75 0 0 1-1.44.417 6.23 6.23 0 0 0-.885-1.845l-.102-.138.627-1.587ZM15.98 5.852l-.088.054c-.123.082-.236.18-.337.295l-.096.12-.54.732a9.138 9.138 0 0 0-8.261 1.146A9.103 9.103 0 0 0 3.38 12.37a.75.75 0 1 1-1.398-.543A10.603 10.603 0 0 1 5.799 6.97 10.642 10.642 0 0 1 15.98 5.852Zm2.629 1.562a10.646 10.646 0 0 1 2.022 2.171c.49.702.892 1.451 1.199 2.235a.75.75 0 1 1-1.397.547 9.188 9.188 0 0 0-2.327-3.405l.381-.964c.076-.19.115-.388.122-.584Z" fill="currentColor"/></svg>',info:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 1.999c5.524 0 10.002 4.478 10.002 10.002 0 5.523-4.478 10.001-10.002 10.001-5.524 0-10.002-4.478-10.002-10.001C1.998 6.477 6.476 1.999 12 1.999Zm0 1.5a8.502 8.502 0 1 0 0 17.003A8.502 8.502 0 0 0 12 3.5Zm-.004 7a.75.75 0 0 1 .744.648l.007.102.003 5.502a.75.75 0 0 1-1.493.102l-.007-.101-.003-5.502a.75.75 0 0 1 .75-.75ZM12 7.003a.999.999 0 1 1 0 1.997.999.999 0 0 1 0-1.997Z" fill="currentColor"/></svg>',devices:'<svg fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18.5a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm5.5-8.5V9a5.5 5.5 0 1 0-11 0v1H9a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1H6.5v.25a2.25 2.25 0 0 0 2.096 2.245l.154.005h1.128a2.251 2.251 0 1 1 0 1.5H8.75a3.75 3.75 0 0 1-3.745-3.55L5 16.25V9a7 7 0 0 1 14 0v5a2 2 0 0 1-1.85 1.995L17 16h-2a1 1 0 0 1-.993-.883L14 15v-4a1 1 0 0 1 .883-.993L15 10h2.5Zm-9 1.5h-2v3h2v-3Zm9 0h-2v3H17a.5.5 0 0 0 .492-.41L17.5 14v-2.5Z" fill="currentColor"/></svg>',horizontal_dots:'<svg fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8 12a2 2 0 1 1-4 0 2 2 0 0 1 4 0ZM14 12a2 2 0 1 1-4 0 2 2 0 0 1 4 0ZM18 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill="currentColor"/></svg>',ai_sparkle:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 49 48" fill="none"><path fill="#F13E1B" d="m30.023 15.96.07.016a1.362 1.362 0 0 1 .657 2.068c-.163.23-.392.403-.658.497l-3.444 1.118a7.095 7.095 0 0 0-4.495 4.492l-1.12 3.442a1.357 1.357 0 0 1-1.267.907h-.016a1.361 1.361 0 0 1-1.283-.907l-1.12-3.442a7.091 7.091 0 0 0-4.495-4.509l-3.444-1.119a1.36 1.36 0 0 1 0-2.564l3.444-1.118a7.097 7.097 0 0 0 4.427-4.492l1.119-3.442a1.36 1.36 0 0 1 2.566 0l1.12 3.442a7.09 7.09 0 0 0 4.495 4.492l3.444 1.118Zm9.195 16.007-2.755-.894a5.678 5.678 0 0 1-3.596-3.594l-.896-2.753a1.087 1.087 0 0 0-2.053 0l-.895 2.753a5.672 5.672 0 0 1-3.541 3.594l-2.756.894a1.088 1.088 0 0 0 0 2.052l2.756.895a5.675 5.675 0 0 1 3.596 3.607l.896 2.753a1.088 1.088 0 0 0 2.052 0l.896-2.753a5.672 5.672 0 0 1 3.596-3.594l2.756-.894a1.088 1.088 0 0 0 0-2.052l-.056-.014Z"/><path fill="#2160FD" d="m39.218 31.967-2.755-.894a5.677 5.677 0 0 1-3.596-3.594l-.896-2.753a1.087 1.087 0 0 0-2.053 0l-.895 2.753a5.672 5.672 0 0 1-3.541 3.594l-2.756.894a1.088 1.088 0 0 0 0 2.052l2.756.895a5.675 5.675 0 0 1 3.596 3.607l.896 2.753a1.088 1.088 0 0 0 2.052 0l.896-2.753a5.672 5.672 0 0 1 3.596-3.594l2.756-.894a1.088 1.088 0 0 0 0-2.052l-.056-.014Z"/></svg>',meeting_ai:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" fill="none"><path fill="#F13E1B" d="M9.111 12.888a4.98 4.98 0 0 0-1.075-.8l-.04.048a4.651 4.651 0 0 0-.903-.424l-2.446-.8a.963.963 0 0 1-.467-.356.953.953 0 0 1 0-1.116.955.955 0 0 1 .467-.352l2.446-.8A5.088 5.088 0 0 0 9.04 7.06a5.048 5.048 0 0 0 1.2-1.904l.02-.064.799-2.444A.97.97 0 0 1 11.969 2a.97.97 0 0 1 .91.648l.8 2.444a5.147 5.147 0 0 0 1.219 1.976 5.042 5.042 0 0 0 1.974 1.2l2.45.8h.048c.188.067.351.19.468.352.115.164.176.36.175.56.001.2-.06.396-.175.56a1 1 0 0 1-.468.352l-2.446.8a5.067 5.067 0 0 0-1.978 1.2 5.096 5.096 0 0 0-1.199 1.976l-.8 2.448-.023.06a1.02 1.02 0 0 1-.184.284.967.967 0 0 1-.703.3 1 1 0 0 1-.927-.644l-.8-2.448a5.11 5.11 0 0 0-.799-1.508 5.16 5.16 0 0 0-.4-.472Zm10.434 5.396a.492.492 0 0 1 .176-.236.473.473 0 0 1 .1-.048.466.466 0 0 1 .168-.04c.1 0 .197.031.28.088l.091.072a.456.456 0 0 1 .096.164l.4 1.224c.124.372.332.71.607.988.278.276.616.484.987.608l1.223.4h.028l.084.04a.536.536 0 0 1 .148.136c.056.082.087.18.088.28a.484.484 0 0 1-.32.456l-1.227.4a2.528 2.528 0 0 0-1.595 1.6l-.399 1.224a.46.46 0 0 1-.176.232.464.464 0 0 1-.28.088.475.475 0 0 1-.455-.32l-.4-1.224a2.507 2.507 0 0 0-.611-.992 2.487 2.487 0 0 0-.987-.612l-1.223-.4a.48.48 0 0 1 0-.908l1.223-.4c.367-.128.7-.337.975-.612.137-.142.257-.3.36-.468.1-.162.18-.335.24-.516l.399-1.224Z"/><path fill="currentColor" d="M19.545 18.284a.492.492 0 0 1 .176-.236.469.469 0 0 1 .1-.048.466.466 0 0 1 .168-.04c.1 0 .197.031.28.088l.091.072a.456.456 0 0 1 .096.164l.4 1.224c.124.372.332.71.607.988.279.276.616.484.988.608l1.222.4h.028l.084.04a.534.534 0 0 1 .148.136c.057.082.087.18.088.28a.484.484 0 0 1-.32.456l-1.227.4a2.528 2.528 0 0 0-1.595 1.6l-.399 1.224a.46.46 0 0 1-.175.232.464.464 0 0 1-.28.088.475.475 0 0 1-.456-.32l-.4-1.224a2.509 2.509 0 0 0-.61-.992 2.487 2.487 0 0 0-.988-.612l-1.223-.4a.48.48 0 0 1 0-.908l1.223-.4c.367-.128.7-.337.975-.612a2.7 2.7 0 0 0 .36-.468c.1-.162.18-.335.24-.516l.4-1.224Z"/></svg>',create_channel:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"><path fill="currentColor" d="M2 14.75A3.25 3.25 0 0 0 5.25 18H6v2.75a1.25 1.25 0 0 0 1.999 1l2.125-1.59.396-1.583c.071-.286.177-.56.312-.82L7.5 20.252 7.499 16.5H5.25a1.75 1.75 0 0 1-1.75-1.75v-8.5c0-.966.784-1.75 1.75-1.75h13.5c.966 0 1.75.784 1.75 1.75v3.845a3.27 3.27 0 0 1 1.5.83V6.25A3.25 3.25 0 0 0 18.75 3H5.25A3.25 3.25 0 0 0 2 6.25v8.5Z"/><path fill="currentColor" d="m18.098 11.67-5.902 5.902a2.684 2.684 0 0 0-.707 1.247l-.458 1.831a1.087 1.087 0 0 0 1.319 1.318l1.83-.457a2.685 2.685 0 0 0 1.248-.707l5.902-5.902a2.285 2.285 0 1 0-3.232-3.232Z"/></svg>',create_channel_illustration:'<svg width="503" height="362" viewBox="0 0 503 362" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M93.3477 192.893C93.3477 190.684 95.1385 188.893 97.3477 188.893H476C478.209 188.893 480 190.684 480 192.893V311.824C480 314.033 478.209 315.824 476 315.824H469.354C467.145 315.824 465.354 317.615 465.354 319.824V339.364C465.354 342.928 461.045 344.712 458.525 342.193L433.328 316.996C432.578 316.245 431.561 315.824 430.5 315.824H97.3477C95.1385 315.824 93.3477 314.033 93.3477 311.824V192.893Z" fill="#282828"/> <path d="M306.606 230.9H136.121C134.648 230.9 133.453 232.095 133.453 233.568C133.453 235.041 134.648 236.236 136.121 236.236H306.606C308.079 236.236 309.274 235.041 309.274 233.568C309.274 232.095 308.079 230.9 306.606 230.9Z" fill="#2160FD"/> <path d="M437.226 249.358H136.121C134.648 249.358 133.453 250.553 133.453 252.026C133.453 253.499 134.648 254.694 136.121 254.694H437.226C438.7 254.694 439.894 253.499 439.894 252.026C439.894 250.553 438.7 249.358 437.226 249.358Z" fill="#5C5C5C"/> <path d="M436.926 267.816H136.121C134.648 267.816 133.453 269.011 133.453 270.484C133.453 271.957 134.648 273.152 136.121 273.152H436.926C438.4 273.152 439.594 271.957 439.594 270.484C439.594 269.011 438.399 267.816 436.926 267.816Z" fill="#5C5C5C"/> <path d="M411.652 23C411.652 20.7909 409.861 19 407.652 19H29C26.7909 19 25 20.7909 25 23V141.931C25 144.14 26.7909 145.931 29 145.931H35.646C37.8551 145.931 39.646 147.722 39.646 149.931V169.472C39.646 173.036 43.9546 174.82 46.4745 172.3L71.6714 147.103C72.4216 146.352 73.439 145.931 74.4999 145.931H407.652C409.861 145.931 411.652 144.14 411.652 141.931V23Z" fill="#282828"/> <path d="M241.188 61.9839H70.703C69.2296 61.9839 68.0352 63.1783 68.0352 64.6517C68.0352 66.1252 69.2296 67.3196 70.703 67.3196H241.188C242.662 67.3196 243.856 66.1252 243.856 64.6517C243.856 63.1783 242.662 61.9839 241.188 61.9839Z" fill="#2160FD"/> <path d="M371.808 80.4419H70.703C69.2296 80.4419 68.0352 81.6363 68.0352 83.1098C68.0352 84.5832 69.2296 85.7776 70.703 85.7776H371.808C373.282 85.7776 374.476 84.5832 374.476 83.1098C374.476 81.6363 373.282 80.4419 371.808 80.4419Z" fill="#5C5C5C"/> <path d="M371.508 98.8999H70.703C69.2296 98.8999 68.0352 100.094 68.0352 101.568C68.0352 103.041 69.2296 104.236 70.703 104.236H371.508C372.982 104.236 374.176 103.041 374.176 101.568C374.176 100.094 372.982 98.8999 371.508 98.8999Z" fill="#5C5C5C"/> </svg>',captionsOn:'<svg width="24" height="24" fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M18.75 4A3.25 3.25 0 0 1 22 7.25v9.505a3.25 3.25 0 0 1-3.25 3.25H5.25A3.25 3.25 0 0 1 2 16.755V7.25a3.25 3.25 0 0 1 3.066-3.245L5.25 4h13.5Zm0 1.5H5.25l-.144.006A1.75 1.75 0 0 0 3.5 7.25v9.505c0 .966.784 1.75 1.75 1.75h13.5a1.75 1.75 0 0 0 1.75-1.75V7.25a1.75 1.75 0 0 0-1.75-1.75ZM5.5 12c0-3.146 2.713-4.775 5.122-3.401A.75.75 0 0 1 9.878 9.9C8.481 9.104 7 9.994 7 12c0 2.005 1.484 2.896 2.88 2.103a.75.75 0 0 1 .74 1.304C8.216 16.775 5.5 15.143 5.5 12Zm7.5 0c0-3.146 2.713-4.775 5.122-3.401a.75.75 0 0 1-.744 1.302C15.981 9.104 14.5 9.994 14.5 12c0 2.005 1.484 2.896 2.88 2.103a.75.75 0 0 1 .74 1.304C15.716 16.775 13 15.143 13 12Z" fill="currentColor"/></svg>',captionsOff:'<svg width="24" height="24" fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3.28 2.22a.75.75 0 0 0-1.06 1.06l1.25 1.25A3.247 3.247 0 0 0 2 7.25v9.505a3.25 3.25 0 0 0 3.25 3.25h13.5c.063 0 .126-.002.188-.006l1.781 1.781a.75.75 0 0 0 1.061-1.06L3.28 2.22Zm14.164 16.284H5.25a1.75 1.75 0 0 1-1.75-1.75V7.25c0-.727.443-1.35 1.074-1.615l2.828 2.828C6.292 9.043 5.5 10.3 5.5 12c0 3.143 2.715 4.775 5.12 3.406a.75.75 0 0 0-.74-1.303C8.483 14.896 7 14.005 7 12c0-1.37.69-2.22 1.573-2.366l8.87 8.87Zm2.986-1.256c.045-.157.07-.322.07-.494V7.25a1.75 1.75 0 0 0-1.75-1.75H8.682L7.182 4H18.75A3.25 3.25 0 0 1 22 7.25v9.505c0 .593-.159 1.148-.436 1.627l-1.134-1.134Zm-5.877-5.877-1.197-1.197c.813-1.888 2.882-2.65 4.766-1.575a.75.75 0 0 1-.744 1.302c-1.241-.708-2.549-.085-2.825 1.47Z" fill="currentColor"/></svg>',play:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M8 5v14l11-7z" /></svg>',pause:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M6 4 H9 V20 H6 Z" /><path d="M15 4 H18 V20 H15 Z" /></svg>',fastForward:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 24" fill="currentColor"><path d="M4 5v14l11-7-11-7zm13 0v14l11-7-11-7z"/></svg>',minimize:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M21.778 2.223a.75.75 0 0 1 .072.976l-.072.084-6.223 6.224h5.693a.75.75 0 0 1 .743.65l.007.1a.75.75 0 0 1-.649.744l-.101.007-7.55-.002-.016-.002a.727.727 0 0 1-.195-.042l-.098-.046a.747.747 0 0 1-.386-.553l-.007-.105V2.754a.75.75 0 0 1 1.493-.102l.007.102v5.69l6.222-6.221a.749.749 0 0 1 1.06 0ZM11.003 13.755v7.504a.75.75 0 0 1-1.494.102l-.007-.102v-5.695L3.28 21.78a.75.75 0 0 1-1.133-.977l.073-.084 6.22-6.214H2.751a.75.75 0 0 1-.743-.648L2 13.755a.75.75 0 0 1 .75-.75l7.554.002.074.009.097.023.053.019.086.04.089.058a.761.761 0 0 1 .148.148l.066.106.041.094.022.07.01.055.007.058v-.008l.005.076Z" fill="currentColor"/></svg>',maximize:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12.748 3.001h7.554l.1.014.099.028.061.026a.72.72 0 0 1 .218.15l.04.044.061.082.037.065.039.09.02.064.013.064.009.093v7.534a.75.75 0 0 1-1.493.102l-.006-.102-.001-5.696-13.94 13.945h5.69a.75.75 0 0 1 .744.65l.007.1a.75.75 0 0 1-.649.744l-.101.007H3.714L3.684 21a.705.705 0 0 1-.187-.04l-.09-.038-.018-.01a.746.746 0 0 1-.384-.553l-.007-.105V12.75a.75.75 0 0 1 1.493-.102l.007.102v5.692L18.438 4.5l-5.69.001a.75.75 0 0 1-.743-.648l-.007-.102a.75.75 0 0 1 .648-.743L12.748 3Z" fill="currentColor"/></svg>'},es=async t=>{if(null==t)return ts;try{const e=await fetch(t);return e.ok?Object.assign({},ts,await e.json()):ts}catch(e){return ts}},is=768,ss=1080,as=t=>t>=ss?"lg":t>=is?"md":"sm",rs={about_call:"About Call",screen:"Screen",camera:"Camera",leave:"Leave",dismiss:"Dismiss",logo:"Logo",page:"Page",more:"More","page.prev":"Previous Page","page.next":"Next Page",layout:"Layout","layout.auto":"Auto Layout",settings:"Settings",file:"File",image:"Image",connection:"Connection",leave_confirmation:"Are you sure you want to leave the call?",cancel:"Cancel",yes:"Yes","(you)":"(you)",you:"You",everyone:"Everyone",to:"To",mute:"Mute",kick:"Kick",pin:"Pin",pinned:"Pinned",accept:"Accept",unpin:"Unpin",pip_on:"Show PiP",pip_off:"Hide PiP",viewers:"Viewers",join:"Join",joined:"Joined",create:"Create",close:"Close",ask:"Ask",type:"Type",activate:"Activate",requests:"Requests",mic_off:"Mic Off",disable_mic:"Disable Mic",mic_on:"Mic On",enable_mic:"Enable Mic",audio:"Audio",test:"Test",minimize:"Hide Tile",maximize:"Show Tile",mute_all:"Mute all","mute_all.description":"Everyone in the meeting will be muted.","mute_all.header":"Are you sure?","mute_all.allow_unmute":"Allow others to unmute",video_off:"Video Off",disable_video:"Disable Video",video_on:"Video On",enable_video:"Enable Video",video:"Video",offline:"You're offline","offline.description":"Please ensure that you are connected to the internet.",disconnected:"You haven't joined the meeting.",failed:"You've been disconnected","failed.description":"We could not connect you back to the meeting room. Please try rejoining the meeting.","disconnected.description":"Please join the meeting in order to see and interact with other participants.",participants:"Participants","participants.errors.empty_results":"Couldn't find a participant with the specified name or ID.","participants.empty_list":"It looks like nobody is here.","participants.no_pending_requests":"There are no pending requests.","participants.turn_off_video":"Turn off video",polls:"Polls","polls.by":"Poll by","polls.question":"Poll Question","polls.question.placeholder":"What is your poll for?","polls.answers":"Answers","polls.option":"Add an option.","polls.option.placeholder":"Enter an option","polls.results.anon":"Anonymous","polls.results.hide":"Hide results before voting","polls.create":"Create Poll","polls.cancel":"Cancel Poll Creation","polls.empty":"No polls available","polls.errors.question_required":"Question is required.","polls.errors.empty_option":"Empty options not allowed.",screenshare:"Screen Share","screenshare.min_preview":"Minimize Preview","screenshare.max_preview":"Expand Preview","screenshare.shared":"Your screen is being shared.","screenshare.start":"Share Screen","screenshare.stop":"Stop Sharing","screenshare.error.unknown":"An error occured while starting screenshare.","screenshare.error.max_count":"Maximum screen share limit reached.",plugins:"Plugins",perm_denied:"Permission denied by browser.","perm_denied.audio":"Mic Permission denied by browser","perm_denied.video":"Camera Permission denied by browser","perm_denied.screenshare":"Screenshare Permission denied by browser","perm_denied.audio.chrome.message":"In the top navigation bar, click on the icon left to the URL and ensure  'Microphone' permission is checked","perm_denied.video.chrome.message":"In the top navigation bar, click on the icon left to the URL and ensure  'Camera' permission is checked","perm_denied.screenshare.chrome.message":"Under Chrome settings, navigate to 'Privacy and Security > Site Settings > Permissions'. Select 'Screenshare', provide permission and reload this application.","perm_denied.audio.safari.message":"Under Safari settings, navigate to 'Websites > Microphone', provide permission and reload this application.","perm_denied.video.safari.message":"Under Safari settings, navigate to 'Websites > Camera', provide permission and reload this application.","perm_denied.screenshare.safari.message":"Under Safari settings, navigate to 'Websites > Screenshare', provide permission and reload this application.","perm_denied.audio.edge.message":"Under Edge settings, navigate to 'Site Permissions > Microphone', provide permission and reload this application.","perm_denied.video.edge.message":"Under Edge settings, navigate to 'Site Permissions > Camera', provide permission and reload this application.","perm_denied.screenshare.edge.message":"Under Edge settings, navigate to 'Site Permissions > Screenshare', provide permission and reload this application.","perm_denied.audio.microsoft edge.message":"Under Edge settings, navigate to 'Site Permissions > Microphone', provide permission and reload this application.","perm_denied.video.microsoft edge.message":"Under Edge settings, navigate to 'Site Permissions > Camera', provide permission and reload this application.","perm_denied.screenshare.microsoft edge.message":"Under Edge settings, navigate to 'Site Permissions > Screenshare', provide permission and reload this application.","perm_denied.audio.firefox.message":"Under Firefox settings, navigate to 'Privacy and Security > Permissions > Microphone', provide permission and reload this application.","perm_denied.video.firefox.message":"Under Firefox settings, navigate to 'Privacy and Security > Permissions > Camera', provide permission and reload this application.","perm_denied.screenshare.firefox.message":"Under Firefox settings, navigate to 'Privacy and Security > Permissions > Screenshare', provide permission and reload this application.","perm_denied.audio.others.message":"From your browser settings, enable 'Microphone' permissions and reload this application.","perm_denied.video.others.message":"From your browser settings, enable 'Camera' permissions and reload this application.","perm_denied.screenshare.others.message":"From your browser settings, enable 'Screenshare' permissions and reload this application.",perm_sys_denied:"Permission denied by system","perm_sys_denied.audio":"Mic permission denied by system","perm_sys_denied.video":"Camera permission denied by system","perm_sys_denied.screenshare":"Screenshare permission denied by system","perm_sys_denied.audio.macos.message":"Open Apple Menu, Navigate to 'System Settings > Privacy & Security > Microphone'. Allow access to your browser and reload this application.","perm_sys_denied.video.macos.message":"Open Apple Menu, Navigate to 'System Settings > Privacy & Security > Camera'. Allow access to your browser and reload this application.","perm_sys_denied.screenshare.macos.message":"Open Apple Menu, Navigate to 'System Settings > Privacy & Security > Screenshare'. Allow access to your browser and reload this application.","perm_sys_denied.audio.ios.message":"On your iPhone, navigate to 'Settings > Privacy > Microphone', allow access to your browser and reload this application.","perm_sys_denied.video.ios.message":"On your iPhone, navigate to 'Settings > Privacy > Camera', allow access to your browser and reload this application.","perm_sys_denied.screenshare.ios.message":"On your iPhone, navigate to 'Settings > Privacy > Screenshare', allow access to your browser and reload this application.","perm_sys_denied.audio.windows.message":"Go to windows settings, select 'Settings > Privacy > Microphone'. Allow permissions to your browser and reload this application.","perm_sys_denied.video.windows.message":"Go to windows settings, select 'Settings > Privacy > Camera'. Allow permissions to your browser and reload this application.","perm_sys_denied.screenshare.windows.message":"Go to windows settings, select 'Settings > Privacy > Screenshare'. Allow permissions to your browser and reload this application.","perm_sys_denied.audio.android.message":"On you device, navigate to 'Settings > Apps'. Select your browser, allow Microphone permissions and reload this application.","perm_sys_denied.video.android.message":"On you device, navigate to 'Settings > Apps'. Select your browser, allow Camera permissions and reload this application.","perm_sys_denied.screenshare.android.message":"On you device, navigate to 'Settings > Apps'. Select your browser, allow Screenshare permissions and reload this application.","perm_sys_denied.audio.others.message":"Navigate to your system settings. Allow 'Microphone' permissions for your browser and reload this application.","perm_sys_denied.video.others.message":"Navigate to your system settings. Allow 'Camera' permissions for your browser and reload this application.","perm_sys_denied.screenshare.others.message":"Navigate to your system settings. Allow 'Screenshare' permissions for your browser and reload this application.",perm_could_not_start:"Could not capture device.","perm_could_not_start.audio":"Unable to start your Microphone","perm_could_not_start.video":"Unable to start your Camera","perm_could_not_start.screenshare":"Unable to start your Screenshare","perm_could_not_start.audio.message":"Looks like the system could not capture your microphone. Please restart your device or upgrade your browser to fix this.","perm_could_not_start.video.message":"Looks like the system could not capture your camera. Please restart your device or upgrade your browser to fix this.","perm_could_not_start.screenshare.message":"Looks like the system could not capture your screenshare. Please restart your device or upgrade your browser to fix this.",full_screen:"Full Screen","full_screen.exit":"Exit Full Screen","waitlist.header_title":"Waiting","waitlist.body_text":"You are in the waiting room, the host will let you in soon.","waitlist.deny_request":"Deny request","waitlist.accept_request":"Accept request","waitlist.accept_all":"Accept all","stage_request.header_title":"Join Stage Requests","stage_request.deny_request":"Deny request","stage_request.accept_request":"Accept request","stage_request.accept_all":"Accept all","stage_request.deny_all":"Deny all","stage_request.approval_pending":"Pending","stage_request.denied":"Denied","stage_request.request":"Join stage","stage_request.requested":"Requested","stage_request.cancel_request":"Cancel request","stage_request.leave_stage":"Leave stage","stage_request.request_tip":"Request to join the discussion","stage_request.leave_tip":"Leave the stage","stage_request.pending_tip":"Request pending","stage_request.denied_tip":"Rejected request","stage.empty_host":"The stage is empty","stage.empty_host_summary":"You are off stage. You can manage stage request from the participants tab.","stage.empty_viewer":"There is no one on stage","stage.remove_from_stage":"Remove from stage","stage.invited_notification":"has been invited to join stage.","stage.add_to_stage":"Invite to stage","stage.join_title":"Join Stage","stage.join_summary":"You are about to join the stage, your video & audio as shown above will be visible to all participants.","stage.join_cancel":"Cancel","stage.join_confirm":"Join","setup_screen.join_in_as":"Join in as","setup_screen.joining_as":"Joining as","setup_screen.your_name":"Your name","stage.reconnecting":"Reconnecting...","recording.label":"REC","recording.indicator":"This meeting is being recorded.","recording.started":"This meeting is being recorded.","recording.stopped":"Recording for this meeting has been stopped.","recording.paused":"Recording for this meeting has been paused.","recording.error.start":"Error while starting recording.","recording.error.stop":"Error while stopping recording","recording.error.resume":"Error while resuming recording","recording.start":"Start Recording","recording.stop":"Stop Recording","recording.resume":"Resume Recording","recording.starting":"Starting","recording.stopping":"Stopping","recording.loading":"Loading","recording.idle":"Record",audio_playback:"Play Audio","audio_playback.title":"Allow Audio Playback","audio_playback.description":"In order to play audio properly on your device, click the button below.",breakout_rooms:"Breakout Rooms","breakout_rooms.room_config_header":"Create Breakout","breakout_rooms.join_breakout_header":"Join Breakout","breakout_rooms.empty":"Nobody here yet.","breakout_rooms.delete":"Delete Room","breakout_rooms.switch":"Switch","breakout_rooms.main_room":"Main Room","breakout_rooms.shuffle_participants":"Shuffle Participants","breakout_rooms.deselect":"Deselect","breakout_rooms.selected":"selected","breakout_rooms.num_of_rooms":"No. of Rooms","breakout_rooms.approx":"Approx.","breakout_rooms.participants_per_room":"participants/room","breakout_rooms.division_text":"when equally divided.","breakout_rooms.start_breakout":"Start Breakout","breakout_rooms.close_breakout":"Close Breakout","breakout_rooms.update_breakout":"Update Breakout","breakout_rooms.discard_changes":"Discard Changes","breakout_rooms.room":"Room","breakout_rooms.rooms":"Rooms","breakout_rooms.room_name":"Room Name","breakout_rooms.edit_room_name":"Edit Room Name","breakout_rooms.save_room_name":"Save Room Name","breakout_rooms.add_room":"Add","breakout_rooms.add_room_brief":"Add Room","breakout_rooms.select_all":"Select all","breakout_rooms.unassign_all":"Unassign all","breakout_rooms.assign":"Assign","breakout_rooms.assign_participants":"Assign Participants","breakout_rooms.none_assigned":"No participants assigned yet","breakout_rooms.drag_drop_participants":"Drag and drop participants","breakout_rooms.click_drop_participants":"Click here to assign","breakout_rooms.status.assign_multiple":"Assign multiple participants at once by clicking and selecting them","breakout_rooms.status.select_room":"Select a room to assign","breakout_rooms.ephemeral_status.participants_assigned":"Participants assigned","breakout_rooms.ephemeral_status.participants_assigned_randomly":"Participants assigned randomly","breakout_rooms.ephemeral_status.changes_discarded":"Changes discarded","breakout_rooms.confirm_modal.start_breakout.header":"Start breakout rooms?","breakout_rooms.confirm_modal.start_breakout.content":"Once started, all participants will be moved to their assigned rooms.","breakout_rooms.confirm_modal.start_breakout.cancelText":"No, go back","breakout_rooms.confirm_modal.start_breakout.ctaText":"Yes, start","breakout_rooms.confirm_modal.close_breakout.header":"Close breakout rooms?","breakout_rooms.confirm_modal.close_breakout.content":"All breakout rooms will be closed & participants will be moved back to the main room.","breakout_rooms.confirm_modal.close_breakout.ctaText":"Yes, close breakout","breakout_rooms.move_reason.started_msg":"Starting breakout rooms...","breakout_rooms.move_reason.started_desc":"You are being moved to your assigned room","breakout_rooms.move_reason.closed_msg":"Closing Breakout rooms...","breakout_rooms.move_reason.closed_desc":"You are being moved back to the main room","breakout_rooms.move_reason.switch_room":"Joining Breakout Room...","breakout_rooms.move_reason.switch_main_room":"Joining Main Room...","breakout_rooms.all_assigned":"All participants have been assigned","breakout_rooms.empty_main_room":"No more participants in the main room.","breakout_rooms.leave_confirmation":"Are you sure you want to leave the call? You are in a breakout room, you can join the main room too.","breakout_rooms.leave_confirmation.main_room_btn":"Go back to main room",ai:"AI","ai.meeting_ai":"MeetingAI","ai.home":"Home","ai.transcriptions":"Transcriptions","ai.personal":"Personal","ai.caption_view":"Caption View","ai.chat.tooltip":"This conversation will just be visible to you and not to others in the call.","ai.chat.summerise":"Hey AI, summarise this call","ai.chat.agenda":"Hey AI, what is today's agenda?",search:"Search","search.could_not_find":"Couldn't find a participant with the specified name or ID.","search.empty":"It looks like nobody is here.",end:"End Meeting","end.all":"End meeting for all",ended:"The meeting ended.","ended.rejected":"Your request to join the meeting was denied.","ended.left":"You left the meeting.","ended.kicked":"You were removed from the meeting.","ended.disconnected":"The call ended because the connection was lost.","ended.network":"Please check your internet connection and try again.",network:"Network","network.reconnecting":"Connection lost. Trying to reconnect.","network.delay_extended":"Taking too long to reconnect. Please check your network connection.","network.disconnected":"Could not reconnect. Please leave the meeting and try refreshing the window.","network.leaving":"Automatically leaving the meeting in 10 seconds.","network.restored":"Connection restored","network.delay":"Taking too long to reconnect.","network.lost":"Connection lost","network.lost_extended":"Connection lost. Please check your network connection.",livestream:"Livestream","livestream.indicator":"This meeting is being livestreamed.","livestream.skip":"Skip to Live","livestream.idle":"Waiting to go live.","livestream.starting":"Livestream is starting...","livestream.stopping":"Livestream is stopping...","livestream.waiting_on_manual_ingestion":"Please ingest livestream media.","livestream.error.not_supported":"Player not supported.","livestream.error.not_found":"Playback URL not found.","livestream.error.unknown":"An unknown error occured.","livestream.error.sync":"Could not sync livestream please try again later.","livestream.error.start":"Error while starting livestream.","livestream.error.stop":"Error while stopping livestream.","livestream.go_live":"Go Live","livestream.end_live":"End Live","livestream.error":"Error","cta.help":"Need help on how to do this?","cta.continue":"Ignore","cta.reload":"Reload","cta.confirmation":"Are you sure?","cta.system_settings":"Open Settings","remote_access.empty":"There are no remote requests, yet.","remote_access.requests":"The following people have requested remote control to your screen share.","remote_access.allow":"Please select whom you want to give access to.","remote_access.grant":"Grant acess","remote_access.indicator":"Any plugin or screenshare you switch to will sync the change across the meeting",chat:"Chat","chat.new":"New","chat.max_limit_warning":"Max Character Limit","chat.rate_limit_error":"Please wait before you can send another message","chat.new_channel":"Create new channel","chat.channel_name":"Enter channel name","chat.member_name":"Enter member name","chat.add_members":"Add members","chat.delete_msg":"Delete","chat.edit_msg":"Edit","chat.send_msg":"Send message","chat.send_attachment":"Drop files/images to send","chat.send_img":"Send an image","chat.send_file":"Send a file","chat.send_emoji":"Send an emoji","chat.update_msg":"Update message","chat.channel_members":"Channel Members","chat.img.loading":"Loading image","chat.error.img_not_found":"Image not found","chat.error.empty_results":"Couldn't find a member with the specified name.","chat.img.shared_by":"Shared by","chat.reply":"Reply","chat.message_placeholder":"Message..","chat.click_to_send":"Click to send as message","chat.search_msgs":"Search messages","chat.search_conversations":"Search conversations","chat.start_conversation":"Start a conversation..","chat.empty_search":"No messages found","chat.empty_channel":"Send a message to get started","chat.cancel_upload":"Cancel upload","chat.view_chats":"View chats","chat.everyone":"everyone","chat.pinned_msgs":"Pinned messages","chat.toggle_pinned_msgs":"Toggle pinned messages","date.today":"Today","date.yesteday":"Yesterday","date.sunday":"Sunday","date.monday":"Monday","date.tuesday":"Tuesday","date.wednesday":"Wednesday","date.thursday":"Thursday","date.friday":"Friday","date.saturday":"Saturday","list.empty":"No items found","grid.listening":"Listening","transcript.off":"Turn off Transcripts","transcript.on":"Turn on Transcripts","settings.notification_sound":"Notification sound","settings.microphone_input":"Microphone","settings.speaker_output":"Speaker","settings.mirror_video":"Mirror my Video","settings.camera_off":"Camera is off","dialog.close":"Close dialog","notifications.joined":"just joined","notifications.left":"left","notifications.requesting_to_join_meeting":"is requesting to join the meeting","notifications.requested_to_join_stage":"has requested to join stage","notifications.joined_stage":"has joined stage","notifications.request_to_join_accepted":"Request to join accepted","notifications.request_to_join_rejected":"Request to join rejected","notifications.accept":"Accept","notifications.new_poll_created_by":"New poll created by","notifications.connected_to":"Connected to","notifications.plugin_switched_to":"Plugin switched to","notifications.remote_control_requested":"has requested for remote control","notifications.remote_control_request_sent":"Sent remote control request to","notifications.remote_control_request_accepted":"has granted remote control","notifications.remote_control_granted":"Granted remote control to","notifications.remote_control_terminated":"Existing remote control has been terminated","debugger.troubleshooting.label":"Troubleshooting","debugger.quality.good":"Good","debugger.quality.average":"Average","debugger.quality.poor":"Poor","debugger.stats.bitrate.label":"Bitrate","debugger.stats.bitrate.description":"Data transmitted per second, affects quality and file size.","debugger.stats.packet_loss.label":"Packet Loss","debugger.stats.packet_loss.description":"Amount of data lost during transfer","debugger.stats.jitter.label":"Jitter","debugger.stats.jitter.description":"Variance or fluctuation in latency","debugger.stats.cpu_limitations.label":"CPU Limitations","debugger.stats.cpu_limitations.description":"CPU limitations can impact WebRTC call quality and performance.","debugger.stats.bandwidth_limitations.label":"Bandwidth Limitations","debugger.stats.bandwidth_limitations.description":"Slow internet speeds can degrade video quality.","debugger.audio.label":"Audio","debugger.audio.troubleshooting.label":"Audio Troubleshooting","debugger.audio.messages.generating_report":"Generating report. Please wait for a few seconds.","debugger.audio.messages.enable_media":"Please enable mic to see the report.","debugger.audio.sections.network_media":"Network & Media","debugger.video.label":"Video","debugger.video.troubleshooting.label":"Video Troubleshooting","debugger.video.messages.generating_report":"Generating report. Please wait for a few seconds.","debugger.video.messages.enable_media":"Please enable camera to see the report.","debugger.video.sections.network_media":"Network & Media","debugger.screenshare.label":"Screenshare","debugger.screenshare.troubleshooting.label":"Screenshare Troubleshooting","debugger.screenshare.sections.network_media":"Network & Media","debugger.screenshare.messages.generating_report":"Generating report. Please wait for a few seconds.","debugger.screenshare.messages.enable_media":"Please share screen to see the report.","debugger.system.label":"System","debugger.system.troubleshooting.label":"System Troubleshooting","debugger.system.sections.battery":"Battery","debugger.system.battery.level.label":"Battery Level","debugger.system.battery.level.description":"A low battery charge may result in reduced performance.","debugger.system.battery.charging.label":"Battery Charging Status","debugger.system.battery.charging.description":"A device running on power performs optimally.","debugger.system.battery.charging.is_charging":"Charging","debugger.system.battery.charging.is_not_charging":"Not charging"},ns=(t=rs)=>{const e=Object.assign({},rs,t);return t=>{var i;return null!==(i=e[t])&&void 0!==i?i:t}},os=({element:t,size:e,states:i={},config:s={}})=>{let a=[];const r=null==s?void 0:s.root[t],n=t=>{a.push(t),"string"==typeof e&&a.push(`${t}.${e}`)};if(n(t),"object"==typeof r&&!Array.isArray(r)&&null!==r){const{state:e,states:s}=r;let a=t,o=[];if(Array.isArray(s)){o=s.filter((t=>i[t])),o.sort();for(const t of o)n(`${a}.${t}`);if(o.length>1){n([a,...o].join("."))}}if("string"==typeof e){const s=`${t}[${e}=${i[e]}]`;n(s);for(const t of o)n(`${s}.${t}`);if(o.length>1){n([s,...o].join("."))}}}return a},ls=({selectors:t,root:e})=>{if(!e||!Array.isArray(t))return[];let i=[];for(const s of t){const t=e[s];if(Array.isArray(t))i=[...t];else if(t){if(t.children&&(i=[...t.children]),Array.isArray(t.remove))for(const e of t.remove)i=i.filter((t=>"string"==typeof t?t!==e:!Array.isArray(t)||t[0]!==e));if(t.addBefore)for(const[e,s]of Object.entries(t.addBefore)){const t=i.findIndex((t=>"string"==typeof t?t===e:!!Array.isArray(t)&&t[0]===e));t>=0&&i.splice(t,0,...s)}Array.isArray(t.add)&&(i=i.concat(t.add)),Array.isArray(t.prepend)&&(i=t.prepend.concat(i))}}return i},ds=({elements:t,defaults:e,props:i={},deepProps:s=!1,elementProps:a={}})=>Array.isArray(t)&&0!==t.length?t.map((t=>m(cs,{element:t,defaults:e,props:i,childProps:s&&i,elementProps:a}))):null,cs=({element:t,defaults:e,childProps:i={},props:s={},onlyChildren:a=!1,asHost:r=!1,deepProps:n=!1,elementProps:o={}},l)=>{var d;const{config:c,size:h,states:p}=e;let g,u={},v=[];Array.isArray(t)?[g,u,...v]=t:g=t;const y=null===(d=null==c?void 0:c.root)||void 0===d?void 0:d[g];null!=y&&"props"in y&&(s=Object.assign(Object.assign({},y.props),s)),s=Object.assign(Object.assign({},s),u),g in o&&(s=Object.assign(Object.assign({},s),o[g]));const b=os({element:g,size:h,states:p,config:c}),w=ls({selectors:b,root:c.root});if(a)return m(ds,{elements:w,defaults:e,props:i,deepProps:n,elementProps:o});const x=(({selectors:t,styles:e})=>{if(!Array.isArray(t)||null==e)return{};const i={};for(const s of t){const t=e[s];null!=t&&Object.assign(i,t)}return i})({selectors:b,styles:c.styles});if(r)return m(f,Object.assign({},e,{style:x},s),m(ds,{elements:w,defaults:e,props:i,deepProps:n,elementProps:o}),l,v.map((t=>{if(Array.isArray(t)){const[i,s]=t;return m(i,Object.assign({},e,s))}return t})));if(["dyte-header","dyte-controlbar"].includes(g)&&(s.disableRender=!0),g.startsWith("dyte-"))return m(g,Object.assign({},e,{style:x},s),m(ds,{elements:w,defaults:e,props:i,deepProps:n,elementProps:o}),l,v.map((t=>{if(Array.isArray(t)){const[i,s]=t;return m(i,Object.assign({},e,s))}return t})));{const[t,a]=g.split("#");return m(t,Object.assign({id:a,style:x},s),m(ds,{elements:w,defaults:e,props:i,deepProps:n,elementProps:o}),l,v.map((t=>{if(Array.isArray(t)){const[i,s]=t;return m(i,Object.assign({},e,s))}return t})))}},hs={get:(t,e,i)=>(...s)=>{try{return Reflect.get(t,e,i).apply(t,s)}catch(a){return null}}};let ps;try{ps=new Proxy(localStorage,hs)}catch(Rw){ps=new Proxy({},hs)}const gs=ps,us="dyte-prefs",ms=(t,e)=>{const i=JSON.parse(gs.getItem(us)||"{}");i[t]=JSON.stringify(e),gs.setItem("dyte-prefs",JSON.stringify(i))},vs=t=>JSON.parse(gs.getItem(us)||"{}")[t],fs=()=>{const t=JSON.parse(gs.getItem(us)||"{}");return{mirrorVideo:!t["mirror-video"]||"true"===t["mirror-video"],muteNotificationSounds:!!t["mute-notification-sounds"]&&"true"===t["mute-notification-sounds"]}},ys={},bs=t=>!("isConnected"in t)||t.isConnected,ws=((t,e)=>{let i;return(...s)=>{i&&clearTimeout(i),i=setTimeout((()=>{i=0,t(...s)}),e)}})((t=>{for(let e of t.keys())t.set(e,t.get(e).filter(bs))}),2e3),xs=t=>"function"==typeof t?t():t,ks=(t,e)=>{const i=t.indexOf(e);i>=0&&(t[i]=t[t.length-1],t.length--)},{state:Ss,onChange:_s}=((t,e)=>{const i=((t,e=(t,e)=>t!==e)=>{const i=xs(t);let s=new Map(Object.entries(null!=i?i:{}));const a={dispose:[],get:[],set:[],reset:[]},r=()=>{var e;s=new Map(Object.entries(null!==(e=xs(t))&&void 0!==e?e:{})),a.reset.forEach((t=>t()))},n=t=>(a.get.forEach((e=>e(t))),s.get(t)),o=(t,i)=>{const r=s.get(t);e(i,r,t)&&(s.set(t,i),a.set.forEach((e=>e(t,i,r))))},l="undefined"==typeof Proxy?{}:new Proxy(i,{get:(t,e)=>n(e),ownKeys:t=>Array.from(s.keys()),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),has:(t,e)=>s.has(e),set:(t,e,i)=>(o(e,i),!0)}),d=(t,e)=>(a[t].push(e),()=>{ks(a[t],e)});return{state:l,get:n,set:o,on:d,onChange:(e,i)=>{const s=d("set",((t,s)=>{t===e&&i(s)})),a=d("reset",(()=>i(xs(t)[e])));return()=>{s(),a()}},use:(...t)=>{const e=t.reduce(((t,e)=>(e.set&&t.push(d("set",e.set)),e.get&&t.push(d("get",e.get)),e.reset&&t.push(d("reset",e.reset)),e.dispose&&t.push(d("dispose",e.dispose)),t)),[]);return()=>e.forEach((t=>t()))},dispose:()=>{a.dispose.forEach((t=>t())),r()},reset:r,forceUpdate:t=>{const e=s.get(t);a.set.forEach((i=>i(t,e,e)))}}})(t,e);return i.use((()=>{const t=new Map;return{dispose:()=>t.clear(),get:e=>{const i=Y();i&&((t,e,i)=>{const s=t.get(e);s?s.includes(i)||s.push(i):t.set(e,[i])})(t,e,i)},set:e=>{const i=t.get(e);i&&t.set(e,i.filter(J)),ws(t)},reset:()=>{t.forEach((t=>t.forEach(J))),ws(t)}}})()),i})({prefs:fs()}),Cs="play_participant_tile_video_on_pause",Ps="disable_emoji_picker",Ls="disable_kicking",Ts="admin_cantremove_admin",Es="cantinvite_viewer",As="pinned_msgs",Ms=t=>{var e;return"CHAT"===(null==t?void 0:t.meta.viewType)||yi(t)||(null===(e=null==t?void 0:t.__internals__)||void 0===e?void 0:e.features.hasFeature("feat_paginated_chat"))},Rs=t=>{var e,i;return(null===(e=null==t?void 0:t.__internals__)||void 0===e?void 0:e.browserSpecs.isFirefox())&&(null===(i=null==t?void 0:t.__internals__)||void 0===i?void 0:i.features.hasFeature("disable_firefox_setting_sink_id"))};let Ds=0;const Is="temp-";function Os(t){return t.includes(Is)}function $s(t){var e;return null!==(e=t.customParticipantId)&&void 0!==e?e:t.clientSpecificId}function Us(t){const e=new Map;return[t.self,...t.participants.joined.toArray()].map((t=>{e.set($s(t),t.picture)})),[t.connectedMeetings.parentMeeting,...t.connectedMeetings.meetings].flatMap((t=>t.participants)).map((t=>({id:t.id,customParticipantId:$s(t),displayName:t.displayName,displayPictureUrl:""!==t.displayPictureUrl?t.displayPictureUrl:e.get($s(t))})))}const Fs=t=>{if(!(t=>t.connectedMeetings.supportsConnectedMeetings)(t))return!1;const e=t.self.permissions.connectedMeetings;return!!e.canAlterConnectedMeetings||!(!e.canSwitchConnectedMeetings&&!e.canSwitchToParentMeeting)&&t.connectedMeetings.isActive};var zs,Ns,js,Bs,Hs,Vs,Gs,qs,Zs,Ks,Ws,Ys,Qs,Js,Xs,ta=function(t,e,i,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!a:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(t,i):a?a.value=i:e.set(t,i),i},ea=function(t,e,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(t):s?s.value:e.get(t)};class ia{constructor(){zs.add(this),Ns.set(this,!1),js.set(this,void 0),Bs.set(this,void 0),Hs.set(this,void 0),Vs.set(this,void 0),Gs.set(this,void 0),qs.set(this,void 0),Zs.set(this,void 0),Ks.set(this,void 0)}get hasLocalChanges(){return ea(this,Ns,"f")}get currentState(){let t,e=[];return Array.from(ea(this,Vs,"f").keys()).forEach((i=>{const s=ea(this,qs,"f").get(i);s.isParent?t=Object.assign(Object.assign({},s),{participants:ea(this,zs,"m",Xs).call(this,i)}):e.push(Object.assign(Object.assign({},s),{participants:ea(this,zs,"m",Xs).call(this,i)}))})),{parentMeeting:t,meetings:e}}get allConnectedMeetings(){return this.currentState.meetings.sort(((t,e)=>t.title.localeCompare(e.title)))}get allParticipants(){return Array.from(ea(this,Gs,"f").values())}get unassignedParticipants(){return ea(this,zs,"m",Xs).call(this,ea(this,js,"f").parentMeeting.id)}getParticipantsForMeeting(t){return ea(this,zs,"m",Xs).call(this,t)}addNewMeeting(){ta(this,Ns,!0,"f");const t=function(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(i[s[a]]=t[s[a]])}return i}({id:`${Is}${Math.random().toString(36)}`,title:"Room "+ ++Ds,participants:[]},["participants"]);return ea(this,zs,"m",Ys).call(this,Object.assign(Object.assign({},t),{isParent:!1})),t}addNewMeetings(t){return Array.from({length:t}).map((()=>this.addNewMeeting()))}updateMeetingTitle(t,e){ea(this,qs,"f").get(t).title=e,Os(t)||ea(this,Zs,"f").add(t)}deleteMeeting(t){ta(this,Ns,!0,"f");const e=ea(this,qs,"f").get(t),i=ea(this,zs,"m",Xs).call(this,e.id).map($s);this.assignParticipantsToMeeting(i,ea(this,js,"f").parentMeeting.id),ea(this,qs,"f").delete(e.id),ea(this,Vs,"f").delete(e.id),Os(e.id)||ea(this,Ks,"f").add(e.id)}assignParticipantsToMeeting(t,e){return ta(this,Ns,!0,"f"),t.forEach((t=>{const i=ea(this,Bs,"f").get(t);ea(this,Vs,"f").get(i).delete(t),ea(this,Vs,"f").get(e).add(t),ea(this,Bs,"f").set(t,e)})),this.currentState}assignParticipantsRandomly(){const t=function(t,e){const i=t.length,s=Math.ceil(i/e),a=new Array(e);let r=0;for(let n=0;n<e;n++)a[n]=t.slice(r,r+s),r+=s;return a.filter((t=>t.length))}(this.unassignedParticipants,this.allConnectedMeetings.length);return this.allConnectedMeetings.forEach(((e,i)=>{const s=t[i];s&&0!==s.length&&this.assignParticipantsToMeeting(s.map((t=>t.customParticipantId)),e.id)})),this.currentState}unassignParticipants(t){const e=ea(this,js,"f").parentMeeting.id;return this.assignParticipantsToMeeting(t,e)}unassignAllParticipants(){const t=ea(this,js,"f").parentMeeting.id,e=this.allParticipants.map($s);return this.assignParticipantsToMeeting(e,t)}updateCurrentState(t){ea(this,Ns,"f")||ea(this,zs,"m",Ws).call(this,t),[t.parentMeeting,...t.meetings].forEach(((t,e)=>{const i=Object.assign(Object.assign({},t),{isParent:0===e});ea(this,zs,"m",Ys).call(this,i),t.participants.forEach((t=>{ea(this,zs,"m",Qs).call(this,t,i)}))}))}get meetingsToCreate(){return this.allConnectedMeetings.filter((t=>Os(t.id))).map((({id:t,title:e})=>({id:t,title:e})))}get meetingsToUpdate(){return this.allConnectedMeetings.filter((t=>ea(this,Zs,"f").has(t.id))).map((({id:t,title:e})=>({id:t,title:e})))}get meetingsToDelete(){return Array.from(ea(this,Ks,"f"))}get participantsToMove(){const t=new Map;return Array.from(ea(this,Bs,"f").keys()).forEach((e=>{const i=ea(this,Hs,"f").get(e),s=ea(this,Bs,"f").get(e);if(i===s)return;const a=`${i}__${s}`;t.has(a)||t.set(a,[]);const r=ea(this,Gs,"f").get(e);t.get(a).push(r.id)})),Array.from(t.keys()).map((e=>{const[i,s]=e.split("__");return{sourceMeetingId:i,destinationMeetingId:s,participantIds:t.get(e)}}))}async applyChanges(t){const e=0!==this.meetingsToCreate.length?t.connectedMeetings.createMeetings(this.meetingsToCreate):Promise.resolve([]),i=0!==this.meetingsToUpdate.length?t.connectedMeetings.updateMeetings(this.meetingsToUpdate):Promise.resolve(),[s]=await Promise.all([e,i]);s&&s.forEach((t=>{this.meetingsToCreate.forEach((e=>{e.title===t.title&&ea(this,zs,"m",Js).call(this,ea(this,qs,"f").get(e.id),t.id)}))})),0!==this.participantsToMove.length&&this.participantsToMove.forEach((({sourceMeetingId:e,destinationMeetingId:i,participantIds:s})=>{t.connectedMeetings.moveParticipants(e,i,s)})),0!==this.meetingsToDelete.length&&t.connectedMeetings.deleteMeetings(this.meetingsToDelete)}discardChanges(){return ta(this,Ns,!1,"f"),this.updateCurrentState(ea(this,js,"f")),this.currentState}}Ns=new WeakMap,js=new WeakMap,Bs=new WeakMap,Hs=new WeakMap,Vs=new WeakMap,Gs=new WeakMap,qs=new WeakMap,Zs=new WeakMap,Ks=new WeakMap,zs=new WeakSet,Ws=function(t){ta(this,js,t,"f"),ta(this,qs,new Map,"f"),ta(this,Gs,new Map,"f"),ta(this,Zs,new Set,"f"),ta(this,Ks,new Set,"f"),ta(this,Vs,new Map,"f"),ta(this,Bs,new Map,"f"),ta(this,Hs,new Map,"f"),ta(this,Hs,new Map,"f"),ea(this,js,"f").parentMeeting.participants.forEach((t=>{ea(this,Hs,"f").set($s(t),ea(this,js,"f").parentMeeting.id)})),ea(this,js,"f").meetings.forEach((t=>{t.participants.forEach((e=>{ea(this,Hs,"f").set($s(e),t.id)}))}))},Ys=function(t){ea(this,qs,"f").has(t.id)||(ea(this,qs,"f").set(t.id,t),ea(this,Vs,"f").set(t.id,new Set))},Qs=function(t,e){ea(this,Gs,"f").has($s(t))||(ea(this,Gs,"f").set($s(t),t),ea(this,Bs,"f").set($s(t),e.id),ea(this,Vs,"f").get(e.id).add($s(t)))},Js=function(t,e){const i=t.id;ea(this,zs,"m",Ys).call(this,Object.assign(Object.assign({},t),{id:e})),ea(this,qs,"f").delete(i);const s=ea(this,Vs,"f").get(i);ea(this,Vs,"f").set(e,s),ea(this,Vs,"f").delete(i),Array.from(ea(this,Bs,"f").keys()).forEach((t=>{ea(this,Bs,"f").get(t)===i&&ea(this,Bs,"f").set(t,e)}))},Xs=function(t){return Array.from(ea(this,Vs,"f").get(t)).map((t=>ea(this,Gs,"f").get(t)))};var sa=function(){if("undefined"!=typeof Map)return Map;function t(t,e){var i=-1;return t.some((function(t,s){return t[0]===e&&(i=s,!0)})),i}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var i=t(this.__entries__,e),s=this.__entries__[i];return s&&s[1]},e.prototype.set=function(e,i){var s=t(this.__entries__,e);~s?this.__entries__[s][1]=i:this.__entries__.push([e,i])},e.prototype.delete=function(e){var i=this.__entries__,s=t(i,e);~s&&i.splice(s,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var i=0,s=this.__entries__;i<s.length;i++){var a=s[i];t.call(e,a[1],a[0])}},e}()}(),aa="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,ra=void 0!==i.g&&i.g.Math===Math?i.g:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),na="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(ra):function(t){return setTimeout((function(){return t(Date.now())}),1e3/60)};var oa=["top","right","bottom","left","width","height","size","weight"],la="undefined"!=typeof MutationObserver,da=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t,e){var i=!1,s=!1,a=0;function r(){i&&(i=!1,t()),s&&o()}function n(){na(r)}function o(){var t=Date.now();if(i){if(t-a<2)return;s=!0}else i=!0,s=!1,setTimeout(n,e);a=t}return o}(this.refresh.bind(this),20)}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,i=e.indexOf(t);~i&&e.splice(i,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter((function(t){return t.gatherActive(),t.hasActive()}));return t.forEach((function(t){return t.broadcastActive()})),t.length>0},t.prototype.connect_=function(){aa&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),la?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){aa&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,i=void 0===e?"":e;oa.some((function(t){return!!~i.indexOf(t)}))&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),ca=function(t,e){for(var i=0,s=Object.keys(e);i<s.length;i++){var a=s[i];Object.defineProperty(t,a,{value:e[a],enumerable:!1,writable:!1,configurable:!0})}return t},ha=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||ra},pa=ya(0,0,0,0);function ga(t){return parseFloat(t)||0}function ua(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return e.reduce((function(e,i){return e+ga(t["border-"+i+"-width"])}),0)}function ma(t){var e=t.clientWidth,i=t.clientHeight;if(!e&&!i)return pa;var s=ha(t).getComputedStyle(t),a=function(t){for(var e={},i=0,s=["top","right","bottom","left"];i<s.length;i++){var a=s[i],r=t["padding-"+a];e[a]=ga(r)}return e}(s),r=a.left+a.right,n=a.top+a.bottom,o=ga(s.width),l=ga(s.height);if("border-box"===s.boxSizing&&(Math.round(o+r)!==e&&(o-=ua(s,"left","right")+r),Math.round(l+n)!==i&&(l-=ua(s,"top","bottom")+n)),!function(t){return t===ha(t).document.documentElement}(t)){var d=Math.round(o+r)-e,c=Math.round(l+n)-i;1!==Math.abs(d)&&(o-=d),1!==Math.abs(c)&&(l-=c)}return ya(a.left,a.top,o,l)}var va="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof ha(t).SVGGraphicsElement}:function(t){return t instanceof ha(t).SVGElement&&"function"==typeof t.getBBox};function fa(t){return aa?va(t)?function(t){var e=t.getBBox();return ya(0,0,e.width,e.height)}(t):ma(t):pa}function ya(t,e,i,s){return{x:t,y:e,width:i,height:s}}var ba=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=ya(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=fa(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),wa=function(t,e){var i,s,a,r,n,o,l,d=(s=(i=e).x,a=i.y,r=i.width,n=i.height,o="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,l=Object.create(o.prototype),ca(l,{x:s,y:a,width:r,height:n,top:a,right:s+r,bottom:n+a,left:s}),l);ca(this,{target:t,contentRect:d})},xa=function(){function t(t,e,i){if(this.activeObservations_=[],this.observations_=new sa,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=i}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof ha(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new ba(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof ha(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach((function(e){e.isActive()&&t.activeObservations_.push(e)}))},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map((function(t){return new wa(t.target,t.broadcastRect())}));this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),ka="undefined"!=typeof WeakMap?new WeakMap:new sa,Sa=function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var i=da.getInstance(),s=new xa(e,i,this);ka.set(this,s)};["observe","unobserve","disconnect"].forEach((function(t){Sa.prototype[t]=function(){var e;return(e=ka.get(this))[t].apply(e,arguments)}}));var _a=void 0!==ra.ResizeObserver?ra.ResizeObserver:Sa;const Ca=class{constructor(t){vt(this,t),this.stateUpdate=k(this,"dyteStateUpdate",7),this.roomJoinedListener=()=>{this.setStates({meeting:"joined"}),Ss.meeting="joined"},this.waitlistedListener=()=>{this.setStates({meeting:"waiting"}),Ss.meeting="waiting"},this.roomLeftListener=({state:t})=>{"disconnected"!==t&&"failed"!==t&&(this.setStates({meeting:"ended",roomLeftState:t}),Ss.meeting="ended",Ss.roomLeftState=t)},this.mediaPermissionUpdateListener=({kind:t,message:e})=>{if(["audio","video"].includes(t)&&(console.log(e,Ss.activeDebugger),("DENIED"===e||"SYSTEM_DENIED"===e)&&!0!==Ss.activeDebugger)){const e={enabled:!0,kind:t};this.setStates({activePermissionsMessage:e}),Ss.activePermissionsMessage=e}},this.socketConnectionUpdateListener=({state:t})=>{"failed"===t&&setTimeout((()=>{this.meeting.leave("disconnected")}),this.leaveRoomTimer)},this.loadConfigFromPreset=!1,this.applyDesignSystem=!1,this.mode="fixed",this.leaveOnUnmount=!1,this.meeting=void 0,this.showSetupScreen=void 0,this.t=ns(),this.config=$t,this.iconPackUrl=void 0,this.size=void 0,this.gridLayout="row",this.states={meeting:"idle",prefs:fs()},this.iconPack=ts}connectedCallback(){var t;this.leaveRoomTimer=1e4,this.loadConfigFromPreset=!0,this.applyDesignSystem=!0,this.resizeObserver=new _a((()=>this.handleResize())),this.resizeObserver.observe(this.host),this.applyDesignSystem&&null!=(null===(t=this.config)||void 0===t?void 0:t.designTokens)&&"undefined"!=typeof document&&Ai(document.documentElement,this.config.designTokens),this.meetingChanged(this.meeting),this.iconPackUrlChanged(this.iconPackUrl)}clearListeners(t){null!=t&&(t.self.removeListener("roomLeft",this.roomLeftListener),t.self.removeListener("roomJoined",this.roomJoinedListener),t.self.removeListener("waitlisted",this.waitlistedListener),t.self.removeListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),t.meta.removeListener("socketConnectionUpdate",this.socketConnectionUpdateListener))}disconnectedCallback(){var t;this.leaveOnUnmount&&(null===(t=this.meeting)||void 0===t||t.leaveRoom()),this.resizeObserver.disconnect(),this.clearListeners(this.meeting)}meetingChanged(t){var e,i;if(null!=t){if(this.setStates({viewType:t.meta.viewType}),this.loadConfigFromPreset&&null!=t.self.config){const i=t.self.config,{config:s,data:a}=Xi(i,t);this.config===$t&&(this.config=s),null==this.showSetupScreen&&(this.showSetupScreen=a.showSetupScreen),t.connectedMeetings.supportsConnectedMeetings&&(null===(e=Ss.activeBreakoutRoomsManager)||void 0===e?void 0:e.destinationMeetingId)&&(this.showSetupScreen=!1)}this.applyDesignSystem&&null!=(null===(i=this.config)||void 0===i?void 0:i.designTokens)&&"undefined"!=typeof document&&Ai(document.documentElement,this.config.designTokens),t.self.addListener("roomJoined",this.roomJoinedListener),t.self.addListener("waitlisted",this.waitlistedListener),t.self.addListener("roomLeft",this.roomLeftListener),t.self.addListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),t.meta.addListener("socketConnectionUpdate",this.socketConnectionUpdateListener),t.connectedMeetings.supportsConnectedMeetings&&t.connectedMeetings.once("changingMeeting",this.handleChangingMeeting),t.self.roomJoined?(this.states=Object.assign(Object.assign({},this.states),{meeting:"joined"}),Ss.meeting="joined"):this.showSetupScreen?(this.states=Object.assign(Object.assign({},this.states),{meeting:"setup"}),Ss.meeting="setup"):t.joinRoom()}}async iconPackUrlChanged(t){this.iconPack=await es(t)}listenState(t){t.stopPropagation(),this.setStates(t.detail)}handleChangingMeeting(t){Ss.activeBreakoutRoomsManager=Object.assign(Object.assign({},Ss.activeBreakoutRoomsManager),{destinationMeetingId:t})}handleResize(){this.size=as(this.host.clientWidth)}setStates(t){const e=Object.assign({},this.states);Ji(e,t),this.states=e}render(){var t,e;const i={meeting:this.meeting,size:this.size,states:this.states||Ss,config:this.config,iconPack:this.iconPack,t:this.t},s={"dyte-grid":{layout:this.gridLayout}};return"CHAT"===(null===(e=null===(t=this.meeting)||void 0===t?void 0:t.meta)||void 0===e?void 0:e.viewType)?m(cs,{element:"dyte-chat",defaults:i}):m(cs,{element:"dyte-meeting",defaults:i,asHost:!0,elementProps:s})}get host(){return x(this)}static get watchers(){return{meeting:["meetingChanged"],iconPackUrl:["iconPackUrlChanged"]}}};Ca.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{box-sizing:border-box;display:flex;flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));overflow:hidden;position:fixed;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);height:100%;width:100%}:host([mode='fill']){position:relative}";var Pa=Object.freeze({__proto__:null,dyte_meeting:Ca});const La=class{constructor(t){vt(this,t),this.stateUpdate=k(this,"dyteStateUpdate",7),this.close=()=>{this.stateUpdate.emit({activeAI:!1}),Ss.activeAI=!1},this.transcriptionHandler=()=>{"transcriptions"!==this.tab&&(this.newTranscriptionAvailable=!0)},this.defaultSection="home",this.meeting=void 0,this.states=void 0,this.config=$t,this.iconPack=ts,this.t=ns(),this.size=void 0,this.view="sidebar",this.tab=this.defaultSection,this.newTranscriptionAvailable=!1,this.newAiMessageAvailable=!1}connectedCallback(){var t,e;this.viewChanged(this.view),null===(e=null===(t=this.meeting)||void 0===t?void 0:t.meta)||void 0===e||e.on("transcript",this.transcriptionHandler)}disconnectedCallback(){var t,e;this.keydownListener&&document.removeEventListener("keydown",this.keydownListener),null===(e=null===(t=this.meeting)||void 0===t?void 0:t.meta)||void 0===e||e.off("transcript",this.transcriptionHandler)}viewChanged(t){"full-screen"===t&&(this.keydownListener=t=>{"Escape"===t.key&&this.close()},document.addEventListener("keydown",this.keydownListener))}tabChanged(t){"transcriptions"===t&&this.newTranscriptionAvailable&&(this.newTranscriptionAvailable=!1),"home"===t&&this.newAiMessageAvailable&&(this.newAiMessageAvailable=!1)}viewSection(t){this.tab=t,Ss.activeSidebar=!0}render(){var t,e,i;if(!(null===(e=null===(t=this.meeting)||void 0===t?void 0:t.self)||void 0===e?void 0:e.permissions).transcriptionEnabled||!(null===(i=this.states)||void 0===i?void 0:i.activeAI))return null;const s={meeting:this.meeting,config:this.config,states:this.states||Ss,size:this.size,t:this.t,iconPack:this.iconPack};return m(f,null,m("h3",{class:"title"},this.t("ai")),m("div",{id:"mobile-header"},m("dyte-button",{variant:"ghost",class:{active:"home"===this.tab},onClick:()=>this.viewSection("home"),iconPack:this.iconPack,t:this.t},this.t("ai.home"),this.newAiMessageAvailable&&m("span",{class:"dot"},".")),m("dyte-button",{variant:"ghost",class:{active:"transcriptions"===this.tab},onClick:()=>this.viewSection("transcriptions"),iconPack:this.iconPack,t:this.t},this.t("ai.transcriptions"),this.newTranscriptionAvailable&&m("span",{class:"dot"},"."))),m("dyte-button",{variant:"ghost",kind:"icon",class:"close",onClick:this.close,"aria-label":this.t("close"),iconPack:this.iconPack,t:this.t},m("dyte-icon",{icon:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t})),"home"===this.tab&&m(cs,{element:"dyte-ai-home",defaults:s,props:{meeting:this.meeting}}),"transcriptions"===this.tab&&m(cs,{element:"dyte-ai-transcriptions",defaults:s}),"personal"===this.tab&&m(cs,{element:"dyte-ai-chat",defaults:s}))}static get watchers(){return{view:["viewChanged"],tab:["tabChanged"]}}};La.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;box-sizing:border-box;display:flex;width:100%;max-width:var(--dyte-space-80, 320px);flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden}.close{position:absolute;top:var(--dyte-space-3, 12px);left:var(--dyte-space-3, 12px)}.title{margin-left:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0, 0px);margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-2, 8px);-webkit-user-select:none;-moz-user-select:none;user-select:none;padding:var(--dyte-space-0, 0px);text-align:center;font-size:16px;font-weight:400}#mobile-header{margin-top:var(--dyte-space-2, 8px);display:flex;align-items:center;justify-content:space-evenly;border-bottom:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60))}#mobile-header dyte-button{border-bottom:var(--dyte-border-width-md, 2px) solid transparent;position:relative;border-radius:var(--dyte-border-radius-none, 0)}#mobile-header dyte-button:hover{background-color:transparent}#mobile-header dyte-button.active{border-color:rgb(var(--dyte-colors-brand-400, 53 110 253))}#mobile-header dyte-button .dot{font-size:48px;position:absolute;top:-26px;right:calc(var(--dyte-space-1, 4px) * -1);--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}dyte-ai-home,dyte-ai-transcriptions,dyte-ai-chat{flex:1}:host([view='sidebar']){margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-lg, 12px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}:host([view='full-screen']){position:absolute;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);z-index:50;max-width:100%;border:none}";var Ta=Object.freeze({__proto__:null,dyte_ai:La});const Ea=class{constructor(t){vt(this,t),this.t=ns()}render(){return m(f,null,m("p",{class:"private-message"},this.t("ai.chat.tooltip")),m("div",{class:"hint-message"},m("p",null,this.t("ask")," ",m("i",null,'"',this.t("ai.chat.summerise"),'"'),m("br",null)," or ",m("br",null),this.t("type")," ",m("i",null,'"',this.t("ai.chat.agenda"),'"'))))}};Ea.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:100%;width:100%;flex-direction:column}.private-message{text-align:center;font-size:12px;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52));margin-top:var(--dyte-space-8, 32px);margin-bottom:var(--dyte-space-8, 32px);margin-left:var(--dyte-space-10, 40px);margin-right:var(--dyte-space-10, 40px)}.hint-message{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;flex:1 1 0%;font-size:14px;line-height:1.5;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}i{font-weight:500;font-style:italic;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}";var Aa=Object.freeze({__proto__:null,dyte_ai_chat:Ea});const Ma=(t,e)=>{const i=e.getTime()-t.getTime();return Math.round(Math.abs(i/1e3/60))},Ra=(t,e)=>{const i=Ma(t,e);if(i<2)return"just now";if(i<60)return`${i}m ago`;const s=Math.round(i/60);if(i<90)return`about ${s}h ago`;if(s<24)return`${s}h ago`;const a=Math.round(s/24);if(a<7)return`${a}d ago`;return`${Math.round(a/7)}w ago`},Da=t=>t.toDateString()+" "+t.toLocaleTimeString(),Ia=(t,e=20)=>null==t?"":t.length>e?`${t.substring(0,e)}...`:t,Oa=t=>/^\p{Emoji}+$/u.test(t)&&!/^\d+$/.test(t),$a=t=>(null==t?void 0:t.trim().toLowerCase().startsWith("javascript:"))?"https://dyte.io":t,Ua=t=>""===(t=null==t?void 0:t.trim())?"Participant":t,Fa=new RegExp(/[^\u00BF-\u1FFF\u2C00-\uD7FF\w\s]/,"g"),za=new RegExp(/\s+/);function Na(t,e=2){return t.replace(Fa,"").trim().split(za).slice(0,e).map((t=>t.charAt(0))).join("").toUpperCase()}const ja=({name:t,time:e,now:i})=>m("div",{class:"head"},m("div",{class:"name"},Ia(Ua(t),20)),m("div",{class:"time",title:Da(e)},Ra(e,i))),Ba=(t,e=!0)=>{null!=t&&t.scrollTo({top:t.scrollHeight,behavior:e?"smooth":"auto"})},Ha=class{constructor(t){vt(this,t),this.handleSubmit=t=>{t.preventDefault(),t.stopPropagation(),this.messages=[...this.messages,{action:"Prompt",participantName:this.meeting.self.name,createdAt:new Date,prompt:this.prompt,loading:!0}],this.prompt=""},this.handleSummarise=()=>{},this.handleAgenda=()=>{},this.handleMoM=()=>{},this.prompt="",this.messages=[],this.meeting=void 0,this.initialMessages=void 0}connectedCallback(){this.initialMessages&&(this.messages=this.initialMessages.map((t=>Object.assign(Object.assign({},t),{action:this.mapMessageAction(t.action)}))))}disconnectedCallback(){}messagesUpdated(){setTimeout((()=>{Ba(this.contentContainer,!1)}),100)}mapMessageAction(t){switch(t){case"default":return"Prompt";case"summarization":return"Summary";case"agenda generation":return"Agenda";case"action items generation":return"Action items"}}render(){return m(f,null,m("div",{class:"content scrollbar",ref:t=>this.contentContainer=t},m("p",{class:"public-message"},"This conversation will be visible to everyone on the call."),!this.messages.length&&m("div",{class:"hint-message"},m("p",null,"Ask ",m("i",null,'"Hey AI, summarise this call"'),m("br",null)," or ",m("br",null),"Type ",m("i",null,'"Hey AI, what is today\'s agenda?"'))),this.messages.length>0&&m("div",{class:""},this.messages.map((t=>m("div",{class:"message"},m(ja,{name:t.action,time:new Date(t.createdAt),now:new Date}),m("p",{class:"subtitle"},"Triggered by ",t.participantName),t.prompt&&m("div",{class:"prompt-text"},t.prompt),t.loading?m("div",{class:"loader"},m("dyte-spinner",{size:"sm"}),"\xa0\xa0Generating..."):m("div",{class:"body"},t.response)))))),m("div",{class:"actions"},m("span",null,"Quick actions:"),m("div",null,m("button",{onClick:this.handleSummarise},"Summarise"),m("button",{onClick:this.handleAgenda},"Agenda"),m("button",{onClick:this.handleMoM},"MoM"))),m("form",{class:"prompt",onSubmit:this.handleSubmit},m("input",{value:this.prompt,onInput:t=>{this.prompt=t.target.value},placeholder:"Type your prompt..."})))}static get watchers(){return{messages:["messagesUpdated"]}}};Ha.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.head{display:flex;align-items:center}.head .name{margin-right:var(--dyte-space-4, 16px);font-size:12px;font-weight:700}.head .time{font-size:12px;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))\n    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}*{box-sizing:border-box;border-width:0;border-style:solid}:host{display:flex;flex-direction:column}.public-message{text-align:center;font-size:12px;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52));margin-top:var(--dyte-space-8, 32px);margin-bottom:var(--dyte-space-8, 32px);margin-left:var(--dyte-space-10, 40px);margin-right:var(--dyte-space-10, 40px)}.content{box-sizing:border-box;display:flex;flex-direction:column;padding:var(--dyte-space-3, 12px);flex:1 0 0px;overflow-y:scroll;}.subtitle{margin-top:var(--dyte-space-1, 4px);font-size:12px;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.hint-message{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;flex:1 1 0%;font-size:14px;line-height:1.5;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}i{font-weight:500;font-style:italic;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.actions{padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-3, 12px);display:flex;align-items:center;justify-content:space-between;font-size:12px}.actions div{display:flex;align-items:center;gap:var(--dyte-space-2, 8px)}.actions button{display:inline-flex;cursor:pointer;border-radius:var(--dyte-border-radius-md, 8px);padding-top:var(--dyte-space-1, 4px);padding-bottom:var(--dyte-space-1, 4px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.5);color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.prompt{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.prompt input{height:var(--dyte-space-12, 48px);width:100%;resize:none;background-color:transparent;padding:var(--dyte-space-4, 16px);font-family:var(--dyte-font-family, sans-serif);color:rgb(var(--dyte-colors-text-1000, 255 255 255));outline:2px solid transparent;outline-offset:2px}.message .body{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);white-space:pre-wrap;font-size:14px}.message .loader{display:flex;padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px);font-size:12px}.message{margin-bottom:var(--dyte-space-3, 12px)}.message:last-child{margin-bottom:var(--dyte-space-0, 0px)}.prompt-text{margin-top:var(--dyte-space-2, 8px);margin-left:var(--dyte-space-1, 4px);border-left-width:var(--dyte-border-width-sm, 1px);border-left-color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);font-size:12px;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}";var Va=Object.freeze({__proto__:null,dyte_ai_home:Ha});const Ga=class{constructor(t){vt(this,t),this.stateUpdate=k(this,"dyteStateUpdate",7),this.variant="button",this.states=void 0,this.meeting=void 0,this.size=void 0,this.iconPack=ts,this.t=ns(),this.aiActive=!1}statesChanged(t){const e=t||Ss;this.aiActive=e.activeAI}toggleAI(){const t=this.states||Ss;this.aiActive=!(null==t?void 0:t.activeAI),this.stateUpdate.emit({activeAI:this.aiActive,activeMoreMenu:!1,activeSidebar:!1}),Ss.activeAI=this.aiActive,Ss.activeMoreMenu=!1,Ss.activeSidebar=!1}render(){var t,e;const i=this.t("ai.meeting_ai");return(null===(e=null===(t=this.meeting)||void 0===t?void 0:t.self)||void 0===e?void 0:e.permissions).transcriptionEnabled?m(f,{title:i},m("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,class:{active:this.aiActive},onClick:()=>this.toggleAI(),icon:this.iconPack.meeting_ai,label:i,variant:this.variant,brandIcon:!0})):null}static get watchers(){return{states:["statesChanged"]}}};Ga.style=":host{display:block}";var qa=Object.freeze({__proto__:null,dyte_ai_toggle:Ga}),Za=ge(zt,"WeakMap");var Ka=Oe(Object.keys,Object),Wa=Object.prototype.hasOwnProperty;function Ya(t){return Ze(t)?pi(t):function(t){if(!Fe(t))return Ka(t);var e=[];for(var i in Object(t))Wa.call(t,i)&&"constructor"!=i&&e.push(i);return e}(t)}function Qa(t,e){for(var i=-1,s=e.length,a=t.length;++i<s;)t[a+i]=e[i];return t}function Ja(){return[]}var Xa=Object.prototype.propertyIsEnumerable,tr=Object.getOwnPropertySymbols,er=tr?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var i=-1,s=null==t?0:t.length,a=0,r=[];++i<s;){var n=t[i];e(n,i,t)&&(r[a++]=n)}return r}(tr(t),(function(e){return Xa.call(t,e)})))}:Ja;var ir=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Qa(e,er(t)),t=$e(t);return e}:Ja;function sr(t,e,i){var s=e(t);return Ge(t)?s:Qa(s,i(t))}function ar(t){return sr(t,Ya,er)}function rr(t){return sr(t,mi,ir)}var nr=ge(zt,"DataView"),or=ge(zt,"Promise"),lr=ge(zt,"Set"),dr="[object Map]",cr="[object Promise]",hr="[object Set]",pr="[object WeakMap]",gr="[object DataView]",ur=re(nr),mr=re(ue),vr=re(or),fr=re(lr),yr=re(Za),br=Zt;(nr&&br(new nr(new ArrayBuffer(1)))!=gr||ue&&br(new ue)!=dr||or&&br(or.resolve())!=cr||lr&&br(new lr)!=hr||Za&&br(new Za)!=pr)&&(br=function(t){var e=Zt(t),i="[object Object]"==e?t.constructor:void 0,s=i?re(i):"";if(s)switch(s){case ur:return gr;case mr:return dr;case vr:return cr;case fr:return hr;case yr:return pr}return e});const wr=br;var xr=Object.prototype.hasOwnProperty;var kr=/\w*$/;var Sr=Nt?Nt.prototype:void 0,_r=Sr?Sr.valueOf:void 0;function Cr(t,e,i){var s,a,r,n=t.constructor;switch(e){case"[object ArrayBuffer]":return Ae(t);case"[object Boolean]":case"[object Date]":return new n(+t);case"[object DataView]":return function(t,e){var i=e?Ae(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}(t,i);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Me(t,i);case"[object Map]":case"[object Set]":return new n;case"[object Number]":case"[object String]":return new n(t);case"[object RegExp]":return(r=new(a=t).constructor(a.source,kr.exec(a))).lastIndex=a.lastIndex,r;case"[object Symbol]":return s=t,_r?Object(_r.call(s)):{}}}var Pr=si&&si.isMap,Lr=Pr?Xe(Pr):function(t){return Wt(t)&&"[object Map]"==wr(t)};var Tr=si&&si.isSet,Er=Tr?Xe(Tr):function(t){return Wt(t)&&"[object Set]"==wr(t)},Ar="[object Arguments]",Mr="[object Function]",Rr="[object Object]",Dr={};function Ir(t,e,i,s,a,r){var n,o=1&e,l=2&e,d=4&e;if(i&&(n=a?i(t,s,a,r):i(t)),void 0!==n)return n;if(!Kt(t))return t;var c=Ge(t);if(c){if(n=function(t){var e=t.length,i=new t.constructor(e);return e&&"string"==typeof t[0]&&xr.call(t,"index")&&(i.index=t.index,i.input=t.input),i}(t),!o)return Re(t,n)}else{var h=wr(t),p=h==Mr||"[object GeneratorFunction]"==h;if(Qe(t))return Te(t,o);if(h==Rr||h==Ar||p&&!a){if(n=l||p?{}:ze(t),!o)return l?function(t,e){return li(t,ir(t),e)}(t,function(t,e){return t&&li(e,mi(e),t)}(n,t)):function(t,e){return li(t,er(t),e)}(t,function(t,e){return t&&li(e,Ya(e),t)}(n,t))}else{if(!Dr[h])return a?t:{};n=Cr(t,h,o)}}r||(r=new xe);var g=r.get(t);if(g)return g;r.set(t,n),Er(t)?t.forEach((function(s){n.add(Ir(s,e,i,s,t,r))})):Lr(t)&&t.forEach((function(s,a){n.set(a,Ir(s,e,i,a,t,r))}));var u=c?void 0:(d?l?rr:ar:l?mi:Ya)(t);return function(t,e){for(var i=-1,s=null==t?0:t.length;++i<s&&!1!==e(t[i],i,t););}(u||t,(function(s,a){u&&(s=t[a=s]),oi(n,a,Ir(s,e,i,a,t,r))})),n}Dr[Ar]=Dr["[object Array]"]=Dr["[object ArrayBuffer]"]=Dr["[object DataView]"]=Dr["[object Boolean]"]=Dr["[object Date]"]=Dr["[object Float32Array]"]=Dr["[object Float64Array]"]=Dr["[object Int8Array]"]=Dr["[object Int16Array]"]=Dr["[object Int32Array]"]=Dr["[object Map]"]=Dr["[object Number]"]=Dr[Rr]=Dr["[object RegExp]"]=Dr["[object Set]"]=Dr["[object String]"]=Dr["[object Symbol]"]=Dr["[object Uint8Array]"]=Dr["[object Uint8ClampedArray]"]=Dr["[object Uint16Array]"]=Dr["[object Uint32Array]"]=!0,Dr["[object Error]"]=Dr[Mr]=Dr["[object WeakMap]"]=!1;function Or(t){return structuredClone?structuredClone(t):Ir(t,5)}const $r=class{constructor(t){vt(this,t),this.autoScrollEnabled=!0,this.onScroll=t=>{const{scrollTop:e,clientHeight:i,scrollHeight:s}=t.target,a=e+i;this.autoScrollEnabled=a+10>=s},this.onTranscriptHandler=t=>{this.transcriptions=this.transcriptionsReducer(this.transcriptions,t)},this.participantQuery="",this.isProcessing=!1,this.captionViewEnabled=!1,this.t=ns(),this.meeting=void 0,this.transcriptions=[],this.initialTranscriptions=void 0}transcriptionsReducer(t,e){if(!t.length||t[t.length-1].peerId!==e.peerId)return t.concat(e);const i=t[t.length-1];return i.id===e.id?(i.transcript=e.transcript,t.pop(),t.concat(i)):t.concat(e)}connectedCallback(){this.meeting&&this.meetingChanged(this.meeting)}componentDidLoad(){var t;null===(t=this.contentContainer)||void 0===t||t.addEventListener("scroll",this.onScroll)}disconnectedCallback(){var t,e,i;null===(e=null===(t=this.meeting)||void 0===t?void 0:t.ai)||void 0===e||e.off("transcript",this.onTranscriptHandler),null===(i=this.contentContainer)||void 0===i||i.removeEventListener("scroll",this.onScroll)}meetingChanged(t){var e,i;this.transcriptions=Or(null===(e=null==t?void 0:t.ai)||void 0===e?void 0:e.transcripts),this.transcriptions=this.transcriptions.reduce(this.transcriptionsReducer,[]),null===(i=null==t?void 0:t.ai)||void 0===i||i.on("transcript",this.onTranscriptHandler)}transcriptionsChanged(){this.autoScrollEnabled&&setTimeout((()=>{Ba(this.contentContainer,!1)}),100)}renderTranscripts(){const t=this.transcriptions.filter((t=>!this.participantQuery||t.name.toLowerCase().includes(this.participantQuery.toLowerCase()))),e=[];return t.forEach((t=>{const i={name:t.name,date:t.date,peerId:t.peerId,transcript:t.transcript};if(!e.length)return void e.push(i);const s=e[e.length-1];t.peerId===s.peerId?s.transcript+=" "+t.transcript:e.push(i)})),e.map((t=>m("div",{class:"message"},m(ja,{name:t.name,time:new Date(t.date),now:new Date}),m("div",{class:"body"},t.transcript))))}render(){return m(f,null,m("div",{class:"search-bar"},m("input",{type:"text",placeholder:"Search Participant",value:this.participantQuery,onInput:t=>this.participantQuery=t.target.value})),this.isProcessing&&m("div",{class:"processing"},m("p",null,"Processing audio....")),!this.isProcessing&&m("div",{class:"content scrollbar",ref:t=>this.contentContainer=t},m("div",{class:"started-message"},"Transcription started"),this.renderTranscripts()),this.captionViewEnabled&&m("dyte-ai-caption",null))}static get watchers(){return{meeting:["meetingChanged"],transcriptions:["transcriptionsChanged"]}}};$r.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.head{display:flex;align-items:center}.head .name{margin-right:var(--dyte-space-4, 16px);font-size:12px;font-weight:700}.head .time{font-size:12px;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))\n    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}*{box-sizing:border-box;border-width:0;border-style:solid}:host{width:100%;display:flex;flex-direction:column}.processing{display:flex;flex:1 1 0%;flex-direction:column;align-items:center;justify-content:center}.content{box-sizing:border-box;display:flex;flex-direction:column;padding:var(--dyte-space-3, 12px);flex:1 0 0px;overflow-y:scroll}.started-message{margin-top:var(--dyte-space-5, 20px);margin-bottom:var(--dyte-space-5, 20px);text-align:center;font-size:12px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.search-bar{height:var(--dyte-space-14, 56px);width:100%;border-bottom-width:var(--dyte-border-width-sm, 1px);--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-border-opacity));padding:var(--dyte-space-3, 12px)}input{height:100%;width:100%;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);font-size:14px;border-radius:var(--dyte-border-radius-sm, 4px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.caption-view{height:var(--dyte-space-12, 48px);width:100%;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-3, 12px);border-bottom-width:var(--dyte-border-width-sm, 1px);border-style:solid;--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-border-opacity));display:flex;align-items:center;justify-content:space-between;font-size:14px}.message .body{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);font-size:14px;word-break:break-word}.message{margin-bottom:var(--dyte-space-3, 12px)}.message:last-child{margin-bottom:var(--dyte-space-0, 0px)}";var Ur=Object.freeze({__proto__:null,dyte_ai_transcriptions:$r});const Fr=class{constructor(t){vt(this,t),this.onParticipantListUpdate=()=>{if(!this.meeting)return;let t=this.meeting.participants.active.toArray();this.hideSelf||(t=[...t,this.meeting.self]);let e=this.meeting.participants.joined.toArray().filter((e=>!t.some((t=>t.id===e.id))));this.activeParticipants=t,this.onStageParticipants=e},this.meeting=void 0,this.config=void 0,this.states=void 0,this.iconPack=ts,this.size=void 0,this.t=ns(),this.hideSelf=!1,this.activeParticipants=[],this.onStageParticipants=[],this.offStageParticipants=[]}connectedCallback(){this.meetingChanged(this.meeting)}meetingChanged(t){t&&"AUDIO_ROOM"===t.self.config.viewType&&(this.onParticipantListUpdate(),t.participants.active.addListener("participantJoined",this.onParticipantListUpdate),t.participants.active.addListener("participantLeft",this.onParticipantListUpdate),t.participants.joined.addListener("participantJoined",this.onParticipantListUpdate),t.participants.joined.addListener("participantLeft",this.onParticipantListUpdate))}disconnectedCallback(){this.resizeObserver.disconnect(),this.resizeObserver=void 0,this.meeting.participants.active.removeListener("participantJoined",this.onParticipantListUpdate),this.meeting.participants.active.removeListener("participantLeft",this.onParticipantListUpdate),this.meeting.participants.joined.removeListener("participantJoined",this.onParticipantListUpdate),this.meeting.participants.joined.removeListener("participantLeft",this.onParticipantListUpdate)}renderGrid(t=[]){const e={meeting:this.meeting,size:this.size,config:this.config,t:this.t,iconPack:this.iconPack,states:this.states};return t.map((t=>m(cs,{element:"dyte-audio-tile",defaults:e,props:{key:t.id,participant:t},childProps:{participant:t},deepProps:!0})))}render(){const t=this.activeParticipants.concat(this.onStageParticipants);return m(f,null,m("div",{class:"content scrollbar"},m("div",{class:"stage grid"},this.renderGrid(t)),this.offStageParticipants.length>0&&m("div",{class:"waitlist-area"},m("div",{class:"listening-title"},this.offStageParticipants.length," ",this.t("grid.listening")),m("div",{class:"waitlist-grid grid"},this.renderGrid(this.offStageParticipants)))),m("slot",null))}get host(){return x(this)}static get watchers(){return{meeting:["meetingChanged"]}}};Fr.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))\n    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{position:relative;height:100%;width:100%;box-sizing:border-box}.content{position:relative;display:flex;height:100%;width:100%;flex-direction:column;overflow-y:auto}.waitlist-area{display:flex;flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.listening-title{text-align:center;margin-top:var(--dyte-space-5, 20px);margin-bottom:var(--dyte-space-4, 16px)}.waitlist-grid{flex:1 1 0%}.grid{box-sizing:border-box;flex:1 1 0%;gap:var(--dyte-space-6, 24px);display:flex;align-content:center;justify-content:center;flex-wrap:wrap}:host([size='md']) .grid{gap:var(--dyte-space-4, 16px)}:host([size='sm']) .grid{gap:var(--dyte-space-3, 12px)}dyte-audio-tile{aspect-ratio:1 / 1;flex:none;width:calc(20%);max-width:var(--dyte-space-48, 192px);transition:all 0.3s}dyte-audio-tile[size='md']{width:100%;max-width:var(--dyte-space-36, 144px)}dyte-audio-tile[size='sm']{width:100%;max-width:var(--dyte-space-24, 96px)}";var zr,Nr=Object.freeze({__proto__:null,dyte_audio_grid:Fr}),jr=Br;function Br(){}Br.mixin=function(t){var e=t.prototype||t;e.isWildEmitter=!0,e.on=function(t,e,i){this.callbacks=this.callbacks||{};var s=3===arguments.length,a=s?arguments[1]:void 0,r=s?arguments[2]:arguments[1];return r._groupName=a,(this.callbacks[t]=this.callbacks[t]||[]).push(r),this},e.once=function(t,e,i){var s=this,a=3===arguments.length,r=a?arguments[1]:void 0,n=a?arguments[2]:arguments[1];return this.on(t,r,(function e(){s.off(t,e),n.apply(this,arguments)})),this},e.releaseGroup=function(t){var e,i,s,a;for(e in this.callbacks=this.callbacks||{},this.callbacks)for(i=0,s=(a=this.callbacks[e]).length;i<s;i++)a[i]._groupName===t&&(a.splice(i,1),i--,s--);return this},e.off=function(t,e){this.callbacks=this.callbacks||{};var i,s=this.callbacks[t];return s?1===arguments.length?(delete this.callbacks[t],this):(-1!==(i=s.indexOf(e))&&(s.splice(i,1),0===s.length&&delete this.callbacks[t]),this):this},e.emit=function(t){this.callbacks=this.callbacks||{};var e,i,s,a=[].slice.call(arguments,1),r=this.callbacks[t],n=this.getWildcardCallbacks(t);if(r)for(e=0,i=(s=r.slice()).length;e<i&&s[e];++e)s[e].apply(this,a);if(n)for(i=n.length,e=0,i=(s=n.slice()).length;e<i&&s[e];++e)s[e].apply(this,[t].concat(a));return this},e.getWildcardCallbacks=function(t){this.callbacks=this.callbacks||{};var e,i,s=[];for(e in this.callbacks)i=e.split("*"),("*"===e||2===i.length&&t.slice(0,i[0].length)===i[0])&&(s=s.concat(this.callbacks[e]));return s}},Br.mixin(Br),"undefined"!=typeof window&&(zr=window.AudioContext||window.webkitAudioContext);var Hr=null,Vr=function(t,e){var i=new jr;if(!zr)return i;var s,a,r,n=(e=e||{}).smoothing||.1,o=e.interval||50,l=e.threshold,d=e.play,c=e.history||10,h=!0;Hr=e.audioContext||Hr||new zr,(r=Hr.createAnalyser()).fftSize=512,r.smoothingTimeConstant=n,a=new Float32Array(r.frequencyBinCount),t.jquery&&(t=t[0]),t instanceof HTMLAudioElement||t instanceof HTMLVideoElement?(s=Hr.createMediaElementSource(t),void 0===d&&(d=!0),l=l||-50):(s=Hr.createMediaStreamSource(t),l=l||-50),s.connect(r),d&&r.connect(Hr.destination),i.speaking=!1,i.suspend=function(){return Hr.suspend()},i.resume=function(){return Hr.resume()},Object.defineProperty(i,"state",{get:function(){return Hr.state}}),Hr.onstatechange=function(){i.emit("state_change",Hr.state)},i.setThreshold=function(t){l=t},i.setInterval=function(t){o=t},i.stop=function(){h=!1,i.emit("volume_change",-100,l),i.speaking&&(i.speaking=!1,i.emit("stopped_speaking")),r.disconnect(),s.disconnect()},i.speakingHistory=[];for(var p=0;p<c;p++)i.speakingHistory.push(0);var g=function(){setTimeout((function(){if(h){var t=function(t,e){var i=-1/0;t.getFloatFrequencyData(e);for(var s=4,a=e.length;s<a;s++)e[s]>i&&e[s]<0&&(i=e[s]);return i}(r,a);i.emit("volume_change",t,l);var e=0;if(t>l&&!i.speaking){for(var s=i.speakingHistory.length-3;s<i.speakingHistory.length;s++)e+=i.speakingHistory[s];e>=2&&(i.speaking=!0,i.emit("speaking"))}else if(t<l&&i.speaking){for(s=0;s<i.speakingHistory.length;s++)e+=i.speakingHistory[s];0==e&&(i.speaking=!1,i.emit("stopped_speaking"))}i.speakingHistory.shift(),i.speakingHistory.push(0+(t>l)),g()}}),o)};return g(),i};const Gr=class{constructor(t){vt(this,t),this.onAudioUpdate=({audioEnabled:t,audioTrack:e})=>{if(this.participant)if(t&&e){const t=new MediaStream;t.addTrack(e),this.calcVolume(t),this.audioEnabled=!0}else this.volume=0,this.audioEnabled=!1},this.meeting=void 0,this.config=void 0,this.size=void 0,this.states=void 0,this.iconPack=ts,this.t=ns(),this.participant=void 0,this.audioEnabled=!1,this.volume=0}connectedCallback(){this.participantChanged(this.participant)}disconnectedCallback(){var t,e;null===(t=this.hark)||void 0===t||t.stop(),null===(e=this.participant)||void 0===e||e.removeListener("audioUpdate",this.onAudioUpdate)}participantChanged(t){t&&(this.audioEnabled=t.audioEnabled,t.addListener("audioUpdate",this.onAudioUpdate))}calcVolume(t){this.hark=Vr(t,{play:!1,interval:100}),this.hark.on("volume_change",(t=>{const e=this.volume;let i=Math.round(10**(t/115)*10);i<3&&(i=0);let s=Math.round((2*e+i)/3);e!==s&&(this.volume=s)}))}render(){const t={meeting:this.meeting,size:this.size,config:this.config,states:this.states,iconPack:this.iconPack,t:this.t};let e="bar-0";return e=this.volume>5?"bar-5":this.volume<0?"bar-0":"bar-"+this.volume,m(f,null,m("div",{class:{"avatar-ctr":!0,speaking:this.audioEnabled,[e]:!0}},m("dyte-avatar",{participant:this.participant,size:this.size},!this.audioEnabled&&m("div",{class:"mic-icon"},m("dyte-icon",{icon:ts.mic_off})))),m("dyte-name-tag",Object.assign({variant:"text",participant:this.participant},t)),m("slot",null))}static get watchers(){return{participant:["participantChanged"]}}};Gr.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{box-sizing:border-box;display:flex;flex-direction:column}.avatar-ctr{box-sizing:border-box;width:100%;flex:1 1 0%;padding:var(--dyte-space-1\\.5, 6px);border:2px solid transparent;border-radius:calc(var(--dyte-border-radius-xl, 40px) + var(--dyte-space-1\\.5, 6px))}.avatar-ctr.speaking{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-border-opacity));transition-property:box-shadow;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.bar-0{box-shadow:none}.bar-1{box-shadow:0 0 4px rgb(var(--dyte-colors-brand-500, 33 96 253))}.bar-2{box-shadow:0 0 8px rgb(var(--dyte-colors-brand-500, 33 96 253))}.bar-3{box-shadow:0 0 16px 1px rgb(var(--dyte-colors-brand-500, 33 96 253))}.bar-4{box-shadow:0 0 20px 3px rgb(var(--dyte-colors-brand-500, 33 96 253))}.bar-5{box-shadow:0 0 24px 6px rgb(var(--dyte-colors-brand-500, 33 96 253))}dyte-avatar{aspect-ratio:1 / 1;height:100%;width:100%;position:relative;border-radius:var(--dyte-border-radius-xl, 40px)}dyte-name-tag{display:block;height:var(--dyte-space-10, 40px);width:100%;text-align:center;line-height:2.5rem}:host([size='sm']) .avatar-ctr{border-radius:calc(var(--dyte-border-radius-lg, 12px) + var(--dyte-space-1\\.5, 6px))}:host([size='sm']) dyte-name-tag{height:var(--dyte-space-7, 28px);line-height:1.75rem}:host([size='sm']) dyte-avatar{border-radius:var(--dyte-border-radius-lg, 12px)}.mic-icon{position:absolute;bottom:calc(var(--dyte-space-1, 4px) * -1);right:calc(var(--dyte-space-1, 4px) * -1);border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));padding:var(--dyte-space-2, 8px);color:rgb(var(--dyte-colors-text-1000, 255 255 255));--tw-shadow:0 1px 2px 0 rgb(0 0 0 / 0.05);--tw-shadow-colored:0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.mic-icon dyte-icon{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px)}:host([size='sm']) .mic-icon dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}:host([size='md']) .mic-icon dyte-icon{height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}";var qr=Object.freeze({__proto__:null,dyte_audio_tile:Gr});const Zr=class{constructor(t){vt(this,t),this.stateUpdate=k(this,"dyteStateUpdate",7),this.permissionsUpdateListener=()=>{this.permissions=this.meeting.self.permissions.connectedMeetings},this.updateLocalState=t=>{this.stateManager.updateCurrentState(t),this.draftState=this.stateManager.currentState,this.meeting.connectedMeetings.isActive&&(this.roomConfig=Object.assign(Object.assign({},this.roomConfig),{mode:"edit"})),"create"!==this.roomConfig.mode||this.meeting.connectedMeetings.isActive||(Ds=0),["edit","view"].includes(this.roomConfig.mode)&&(this.roomConfig=Object.assign(Object.assign({},this.roomConfig),{rooms:t.meetings.length,step:"participants-config"}),this.selectedParticipants=[])},this.onAddNewRoom=()=>{this.stateManager.addNewMeeting(),this.draftState=this.stateManager.currentState,this.selectorRef.scrollTo({top:this.selectorRef.scrollHeight,behavior:"smooth"})},this.onRoomUpdate=t=>{const{detail:e}=t;this.stateManager.updateMeetingTitle(e.id,e.title),this.draftState=this.stateManager.currentState},this.onRoomDelete=t=>{this.stateManager.allConnectedMeetings.find((e=>e.id===t))&&(this.stateManager.deleteMeeting(t),this.draftState=this.stateManager.currentState)},this.unassignParticipant=t=>{this.stateManager.unassignParticipants([t]),this.draftState=this.stateManager.currentState},this.onUnassignAll=()=>{this.stateManager.unassignAllParticipants(),this.draftState=this.stateManager.currentState},this.assignParticipantsToRoom=t=>{0!==this.selectedParticipants.length&&0!=this.assigningParticipants&&(this.stateManager.assignParticipantsToMeeting(this.selectedParticipants,t),this.draftState=this.stateManager.currentState,this.selectedParticipants=[],this.assigningParticipants=!1,this.setEphemeralStatus(this.t("breakout_rooms.ephemeral_status.participants_assigned")))},this.handleClose=(t,e)=>{t.emit({activeBreakoutRoomsManager:{active:!0}}),e.activeBreakoutRoomsManager={active:!0}},this.enableConfirmationModal=(t="start-breakout")=>{let e={active:!0,header:"breakout_rooms.confirm_modal.start_breakout.header",content:"breakout_rooms.confirm_modal.start_breakout.content",variant:"primary",cancelText:"breakout_rooms.confirm_modal.start_breakout.cancelText",ctaText:"breakout_rooms.confirm_modal.start_breakout.ctaText",onClick:()=>this.applyChanges(),onClose:this.handleClose};"close-breakout"===t&&(e={active:!0,header:"breakout_rooms.confirm_modal.close_breakout.header",content:"breakout_rooms.confirm_modal.close_breakout.content",variant:"danger",cancelText:"cancel",ctaText:"breakout_rooms.confirm_modal.close_breakout.ctaText",onClick:()=>this.closeBreakout(),onClose:this.handleClose}),this.stateUpdate.emit({activeBreakoutRoomsManager:{active:!1},activeConfirmationModal:e}),Ss.activeBreakoutRoomsManager={active:!1},Ss.activeConfirmationModal=e},this.close=()=>{var t;this.stateManager.discardChanges(),null===(t=this.stateUpdate)||void 0===t||t.emit({activeBreakoutRoomsManager:{active:!1}}),Ss.activeBreakoutRoomsManager={active:!1}},this.applyChanges=async()=>{this.roomConfig=Object.assign(Object.assign({},this.roomConfig),{applyingChanges:!0}),await this.stateManager.applyChanges(this.meeting),this.close(),this.roomConfig=Object.assign(Object.assign({},this.roomConfig),{applyingChanges:!1})},this.loading=!1,this.roomConfig={rooms:2,step:"room-config",mode:"create",applyingChanges:!1},this.draftState=void 0,this.assigningParticipants=!1,this.selectedParticipants=[],this.ephemeralStatusText="",this.isDragMode=!1,this.meeting=void 0,this.states=void 0,this.iconPack=ts,this.t=ns()}onSelectedParticipantsChanged(t){t.length>0?this.assigningParticipants=!0:this.assigningParticipants=!1}connectedCallback(){this.permissionsUpdateListener(),this.meeting.connectedMeetings.on("stateUpdate",this.updateLocalState),this.meeting.connectedMeetings.on("changingMeeting",this.close),this.meeting.self.permissions.on("permissionsUpdate",this.permissionsUpdateListener),this.stateManager=new ia,this.fetchRoomState()}disconnectedCallback(){this.meeting.connectedMeetings.off("stateUpdate",this.updateLocalState),this.meeting.connectedMeetings.off("changingMeeting",this.close),this.meeting.self.permissions.off("permissionsUpdate",this.permissionsUpdateListener)}async fetchRoomState(){this.loading=!0,await this.meeting.connectedMeetings.getConnectedMeetings(),this.loading=!1}setEphemeralStatus(t){this.ephemeralStatusText=t,setTimeout((()=>{this.ephemeralStatusText=""}),3e3)}onCreateRooms(){this.selectedParticipants=[],this.stateManager.addNewMeetings(this.roomConfig.rooms),this.draftState=this.stateManager.currentState,this.roomConfig=Object.assign(Object.assign({},this.roomConfig),{step:"participants-config"})}onParticipantDelete(t){const{detail:e}=t,i=$s(e);null!=i&&this.unassignParticipant(i)}toggleDragMode(t){this.isDragMode=t.detail}assignParticipantsRandomly(){0!==this.stateManager.unassignedParticipants.length&&(this.stateManager.assignParticipantsRandomly(),this.draftState=this.stateManager.currentState,this.setEphemeralStatus(this.t("breakout_rooms.ephemeral_status.participants_assigned_randomly")))}async joinRoom(t){const e=$s(this.meeting.self);this.stateManager.assignParticipantsToMeeting([e],t),await this.applyChanges()}async closeBreakout(){this.stateManager.allConnectedMeetings.forEach((t=>this.stateManager.deleteMeeting(t.id))),await this.applyChanges()}updateSelectedParticipants(t){this.selectedParticipants=t.detail}updateAllParticipants(t){this.selectedParticipants=t.detail}getStatusText(){if(""!==this.ephemeralStatusText)return this.ephemeralStatusText;let t="";return"create"===this.roomConfig.mode&&(t=this.t("breakout_rooms.status.assign_multiple"),0!==this.selectedParticipants.length&&(t=this.t("breakout_rooms.status.select_room"))),t}getApproxDistribution(){const t=this.stateManager.unassignedParticipants.length/(this.roomConfig.rooms||1);return Math.max(1,Math.round(t))}deselectAll(){this.selectedParticipants=[]}async discardChanges(){this.stateManager.discardChanges(),await this.fetchRoomState(),this.setEphemeralStatus(this.t("breakout_rooms.ephemeral_status.changes_discarded"))}shouldShowOnlyRoomSwitcher(){return!1===this.permissions.canAlterConnectedMeetings}getPermittedRooms(){return this.permissions.canAlterConnectedMeetings||this.permissions.canSwitchConnectedMeetings?this.stateManager.allConnectedMeetings:this.stateManager.allConnectedMeetings.filter((t=>t.id===this.meeting.meta.meetingId))}renderMainRoomMaybe(){return this.meeting.connectedMeetings.isActive&&this.permissions.canSwitchToParentMeeting?m("dyte-breakout-room-manager",{key:this.stateManager.currentState.parentMeeting.id,assigningParticipants:this.assigningParticipants,isDragMode:this.isDragMode,meeting:this.meeting,mode:this.roomConfig.mode,onParticipantsAdd:()=>this.assignParticipantsToRoom(this.stateManager.currentState.parentMeeting.id),onRoomJoin:()=>this.joinRoom(this.stateManager.currentState.parentMeeting.id),onUpdate:this.onRoomUpdate,states:this.states,room:Object.assign({},this.stateManager.currentState.parentMeeting),iconPack:this.iconPack,t:this.t}):null}renderRoomSwitcher(){return m(f,null,m("div",{class:"room-switcher-container"},m("header",null,m("dyte-icon",{icon:this.iconPack.breakout_rooms}),m("span",null,this.t("breakout_rooms.join_breakout_header"))),m("div",{class:"rooms",ref:t=>this.selectorRef=t},this.renderMainRoomMaybe(),this.getPermittedRooms().map(((t,e)=>m("dyte-breakout-room-manager",{key:t.id,assigningParticipants:this.assigningParticipants,isDragMode:this.isDragMode,defaultExpanded:0===e,meeting:this.meeting,mode:this.roomConfig.mode,onDelete:()=>this.onRoomDelete(t.id),onParticipantsAdd:()=>this.assignParticipantsToRoom(t.id),onRoomJoin:()=>this.joinRoom(t.id),states:this.states,room:Object.assign({},t),iconPack:this.iconPack,t:this.t,allowDelete:!1}))))))}renderLoading(){return m(f,null,m("div",{class:"loading-content"},m("dyte-spinner",{size:"xl"})))}renderRoomConfig(){return m(f,null,m("div",{class:"room-config"},m("header",null,m("dyte-icon",{icon:this.iconPack.breakout_rooms}),m("span",null,this.t("breakout_rooms.room_config_header"))),m("div",{class:"create-room"},m("p",null,this.t("breakout_rooms.num_of_rooms")),m("dyte-counter",{value:this.roomConfig.rooms,minValue:1,iconPack:this.iconPack,t:this.t,onValueChange:t=>{this.roomConfig=Object.assign(Object.assign({},this.roomConfig),{rooms:Math.max(+t.detail,1)})}})),m("span",{class:"distribution-hint"},`${this.t("breakout_rooms.approx")} `," ",m("em",null,this.getApproxDistribution()," ",this.t("breakout_rooms.participants_per_room"))," ",this.t("breakout_rooms.division_text")),m("footer",null,m("dyte-button",{kind:"button",iconPack:this.iconPack,t:this.t,size:"lg",title:this.t("create"),disabled:0===this.roomConfig.rooms,onClick:()=>this.onCreateRooms()},this.t("create")))))}render(){return this.loading?this.renderLoading():this.shouldShowOnlyRoomSwitcher()?this.renderRoomSwitcher():"room-config"===this.roomConfig.step?this.renderRoomConfig():m(f,null,m("div",{class:"participant-config-wrapper"},m("div",{class:"participant-config"},m("aside",{part:"menu"},m("header",null,this.t("breakout_rooms.assign_participants")),m("dyte-breakout-room-participants",{meeting:this.meeting,iconPack:this.iconPack,t:this.t,participantIds:this.stateManager.unassignedParticipants.map($s),selectedParticipantIds:this.selectedParticipants},m("dyte-tooltip",{label:this.t("breakout_rooms.shuffle_participants"),iconPack:this.iconPack,t:this.t,slot:"shuffle-button"},m("dyte-button",{disabled:"edit"===this.roomConfig.mode||0===this.stateManager.unassignedParticipants.length,iconPack:this.iconPack,t:this.t,kind:"button",variant:"secondary",size:"md",onClick:()=>this.assignParticipantsRandomly(),class:"shuffle-button br-primary-btn"},m("dyte-icon",{icon:this.iconPack.shuffle,iconPack:this.iconPack,t:this.t})))),0!==this.selectedParticipants.length&&m("div",{class:"participants-assign-actions"},m("span",null,`${this.selectedParticipants.length} ${this.t("breakout_rooms.selected")}`),m("dyte-button",{disabled:"edit"===this.roomConfig.mode,iconPack:this.iconPack,t:this.t,kind:"button",variant:"ghost",size:"md",onClick:()=>this.deselectAll(),class:"deselect-button color-danger"},this.t("breakout_rooms.deselect")))),m("div",{class:"assign-rooms"},m("div",{class:"row"},m("p",{class:"row-header"},this.t("breakout_rooms.rooms")," (",this.stateManager.allConnectedMeetings.length,")"),!this.assigningParticipants&&m("div",{class:"cta-buttons"},m("dyte-button",{kind:"button",variant:"secondary",iconPack:this.iconPack,t:this.t,class:"br-primary-btn"},m("div",{onClick:this.onAddNewRoom},m("dyte-icon",{icon:this.iconPack.add,iconPack:this.iconPack,t:this.t}),this.t("breakout_rooms.add_room"))),0!==this.stateManager.allConnectedMeetings.flatMap((t=>t.participants)).length&&m("dyte-button",{kind:"button",variant:"ghost",onClick:this.onUnassignAll,iconPack:this.iconPack,t:this.t},this.t("breakout_rooms.unassign_all")))),m("div",{class:"rooms",ref:t=>this.selectorRef=t},this.renderMainRoomMaybe(),this.getPermittedRooms().map(((t,e)=>m("dyte-breakout-room-manager",{key:t.id,assigningParticipants:this.assigningParticipants,isDragMode:this.isDragMode,defaultExpanded:0===e,meeting:this.meeting,mode:this.roomConfig.mode,onDelete:()=>this.onRoomDelete(t.id),onParticipantsAdd:()=>this.assignParticipantsToRoom(t.id),onRoomJoin:()=>this.joinRoom(t.id),onUpdate:this.onRoomUpdate,states:this.states,room:Object.assign({},t),iconPack:this.iconPack,t:this.t,allowDelete:this.stateManager.allConnectedMeetings.length>1}))),m("dyte-button",{kind:"button",variant:"secondary",iconPack:this.iconPack,t:this.t,onClick:this.onAddNewRoom,class:"add-room-jumbo-btn br-secondary-btn"},m("div",null,m("dyte-icon",{icon:this.iconPack.add,iconPack:this.iconPack,t:this.t}),m("span",null,this.t("breakout_rooms.add_room_brief"))))))),m("div",{class:"participant-config-actions"},m("div",{class:{"status-bar":!0,"ephemeral-status":""!==this.ephemeralStatusText}},""!==this.ephemeralStatusText&&m("dyte-icon",{icon:this.iconPack.checkmark,iconPack:this.iconPack,t:this.t}),this.getStatusText()),m("div",{class:"breakout-actions"},"create"===this.roomConfig.mode&&this.permissions.canAlterConnectedMeetings&&m("dyte-button",{size:"md",iconPack:this.iconPack,t:this.t,class:"start-breakout-button",onClick:()=>this.enableConfirmationModal("start-breakout")},this.t("breakout_rooms.start_breakout")),"edit"===this.roomConfig.mode&&this.stateManager.hasLocalChanges&&this.permissions.canAlterConnectedMeetings&&m("dyte-button",{size:"md",iconPack:this.iconPack,t:this.t,class:"color-danger",variant:"ghost",onClick:()=>this.discardChanges()},this.t("breakout_rooms.discard_changes")),"edit"===this.roomConfig.mode&&this.stateManager.hasLocalChanges&&this.permissions.canAlterConnectedMeetings&&m("dyte-button",{size:"md",iconPack:this.iconPack,t:this.t,class:"update-breakout-button",onClick:this.applyChanges},this.t("breakout_rooms.update_breakout")),"edit"===this.roomConfig.mode&&!this.stateManager.hasLocalChanges&&this.permissions.canAlterConnectedMeetings&&m("dyte-button",{size:"md",iconPack:this.iconPack,t:this.t,class:"close-breakout-button",onClick:()=>this.enableConfirmationModal("close-breakout")},this.t("breakout_rooms.close_breakout"))))))}static get watchers(){return{selectedParticipants:["onSelectedParticipantsChanged"]}}};Zr.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.color-brand{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity))}.color-danger{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}.loading-content{height:var(--dyte-space-60, 240px);width:var(--dyte-space-96, 384px);padding:var(--dyte-space-9, 36px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));display:flex;align-items:center;justify-content:center}.room-config{overflow:hidden;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));display:flex;flex-direction:column;width:var(--dyte-space-96, 384px);padding-left:var(--dyte-space-9, 36px);padding-right:var(--dyte-space-9, 36px);padding-top:var(--dyte-space-10, 40px);padding-bottom:var(--dyte-space-10, 40px)}header{margin-bottom:var(--dyte-space-8, 32px);display:flex;align-items:center;gap:var(--dyte-space-2, 8px);font-size:24px;font-weight:600}header dyte-icon{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px)}.create-room{margin-bottom:var(--dyte-space-4, 16px);display:flex;align-items:center;gap:var(--dyte-space-3, 12px);width:100%}.create-room p{margin:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-1, 4px);font-size:16px}.distribution-hint{margin-bottom:var(--dyte-space-8, 32px);font-size:14px;font-weight:400;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.distribution-hint em{font-style:normal;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}footer{display:flex;flex-direction:row;vertical-align:middle;justify-content:center}footer dyte-button{width:100%;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}label{margin-bottom:var(--dyte-space-3, 12px);font-weight:400;color:rgb(var(--dyte-colors-text-1000, 255 255 255));opacity:0.4}.participant-config-wrapper{width:850px;height:595px;max-width:100%;max-height:100%;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));display:flex;flex-direction:column}.participant-config-actions{display:flex;justify-content:space-between;padding-left:var(--dyte-space-8, 32px);padding-right:var(--dyte-space-8, 32px);padding-top:var(--dyte-space-5, 20px);padding-bottom:var(--dyte-space-5, 20px);border-bottom-right-radius:var(--dyte-border-radius-md, 8px);border-bottom-left-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity))}.participant-config{display:flex;flex-grow:1;flex-direction:row;overflow:hidden}aside{box-sizing:border-box;display:flex;width:var(--dyte-space-96, 384px);flex-grow:1;flex-direction:column;padding-left:var(--dyte-space-8, 32px);padding-right:var(--dyte-space-4, 16px);border-right-width:var(--dyte-border-width-sm, 1px);border-top-width:var(--dyte-border-width-none, 0);border-bottom-width:var(--dyte-border-width-none, 0);border-left-width:var(--dyte-border-width-none, 0);border-style:solid;--tw-border-opacity:1;border-right-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-border-opacity))}aside header{margin-bottom:var(--dyte-space-4, 16px);width:100%;padding-left:var(--dyte-space-0, 0px);padding-right:var(--dyte-space-0, 0px);padding-top:var(--dyte-space-8, 32px);font-size:20px;font-weight:500;line-height:2rem}.shuffle-button{display:flex;flex-direction:row;align-items:center}.shuffle-button dyte-icon{height:var(--dyte-space-8, 32px)}.participants-assign-actions{display:flex;flex-direction:row;align-items:center;justify-content:space-between;font-size:14px;padding-left:var(--dyte-space-8, 32px);padding-right:var(--dyte-space-2, 8px);margin-left:calc(var(--dyte-space-8, 32px) * -1);margin-right:calc(var(--dyte-space-4, 16px) * -1);padding-top:var(--dyte-space-0\\.5, 2px);padding-bottom:var(--dyte-space-0\\.5, 2px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}.participants-assign-actions .deselect-button{height:var(--dyte-space-6, 24px)}.participants-assign-actions .deselect-button:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}.assign-rooms{padding:var(--dyte-space-8, 32px);display:flex;width:100%;flex-direction:column}.assign-rooms .disabled{opacity:0.2}.assign-rooms .back{display:flex;cursor:pointer;flex-direction:row;align-items:center;justify-content:flex-start;padding:var(--dyte-space-4, 16px);padding-bottom:var(--dyte-space-0, 0px);font-size:14px;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.assign-rooms .back dyte-icon{height:var(--dyte-space-5, 20px)}.assign-rooms .row{display:flex;flex-direction:row;align-items:center;justify-content:flex-start;gap:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-4, 16px);font-size:14px}.assign-rooms .row-header{margin:var(--dyte-space-0, 0px);font-size:16px;line-height:2rem}.assign-rooms .cta-buttons{display:flex;align-items:center;justify-content:flex-start;gap:var(--dyte-space-2, 8px)}.assign-rooms .cta-buttons dyte-button div{display:flex;flex-direction:row;align-items:center}.assign-rooms .cta-buttons dyte-button div dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}.rooms{margin-bottom:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-1, 4px);display:flex;flex-grow:1;flex-direction:column;gap:var(--dyte-space-2, 8px);overflow-y:auto;max-height:500px}.rooms::-webkit-scrollbar{width:var(--dyte-space-1\\.5, 6px);border-radius:var(--dyte-border-radius-sm, 4px)}.rooms::-webkit-scrollbar-thumb{border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.rooms::-webkit-scrollbar-track{border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.breakout-actions{display:flex;flex-direction:row;align-items:center;justify-content:flex-end;gap:var(--dyte-space-2, 8px)}.breakout-actions .start-breakout-button{color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.breakout-actions .close-breakout-button{color:rgb(var(--dyte-colors-text-1000, 255 255 255));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-bg-opacity))}.breakout-actions .update-breakout-button{background-color:transparent;--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity));border-width:var(--dyte-border-width-sm, 1px);border-style:solid;--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-border-opacity))}.status-bar{display:flex;align-items:center;font-size:14px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));width:var(--dyte-space-80, 320px)}.ephemeral-status{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}.ephemeral-status dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}.room-switcher-container{border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));width:468px;padding:var(--dyte-space-8, 32px)}.add-room-jumbo-btn div{display:flex;align-items:center;gap:var(--dyte-space-1, 4px);font-size:14px;--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity))}.add-room-jumbo-btn div dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}.br-primary-btn:not([disabled]){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.br-primary-btn:not([disabled]):hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-600, 13 81 253) / var(--tw-bg-opacity))}.br-secondary-btn:not([disabled]){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.br-secondary-btn:not([disabled]):hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}";var Kr=Object.freeze({__proto__:null,dyte_breakout_rooms_manager:Zr});const Wr=class{constructor(t){vt(this,t),this.stateUpdate=k(this,"dyteStateUpdate",7),this.permissionsUpdateListener=()=>{this.canToggle=Fs(this.meeting)},this.breakoutRoomToggle=()=>{var t,e,i;const s=this.meeting.connectedMeetings.isActive?"view":"create";this.stateUpdate.emit({activeBreakoutRoomsManager:{active:!(null===(e=null===(t=this.states)||void 0===t?void 0:t.activeBreakoutRoomsManager)||void 0===e?void 0:e.active),mode:s}}),Ss.activeBreakoutRoomsManager={active:!(null===(i=Ss.activeBreakoutRoomsManager)||void 0===i?void 0:i.active),mode:s}},this.variant="button",this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=ts,this.t=ns(),this.canToggle=!1}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var t,e,i;null===(i=null===(e=null===(t=this.meeting)||void 0===t?void 0:t.self)||void 0===e?void 0:e.permissions)||void 0===i||i.off("permissionsUpdate",this.permissionsUpdateListener)}meetingChanged(t){t&&(this.canToggle=Fs(t),t.self.permissions.on("permissionsUpdate",this.permissionsUpdateListener))}render(){if(this.canToggle)return m(f,{title:this.t("breakout_rooms")},m("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,onClick:this.breakoutRoomToggle,icon:this.iconPack.breakout_rooms,label:this.t("breakout_rooms"),variant:this.variant}))}static get watchers(){return{meeting:["meetingChanged"]}}};Wr.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}";var Yr=Object.freeze({__proto__:null,dyte_breakout_rooms_toggle:Wr});const Qr=class{constructor(t){vt(this,t),this.stateUpdate=k(this,"dyteStateUpdate",7),this.meeting=void 0,this.states=void 0,this.iconPack=ts,this.t=ns(),this.messagePayload={to:"Everyone",message:""},this.successMessage=!1}close(){var t;null===(t=this.stateUpdate)||void 0===t||t.emit({activeBroadcastMessageModal:!1}),Ss.activeBroadcastMessageModal=!1}sendMessage(){this.successMessage=!0,setTimeout((()=>{this.close()}),2e3)}render(){return m(f,null,m("div",{class:"content-col"},m("h2",null,"Broadcast message to"),m("select",{onChange:t=>{this.messagePayload=Object.assign(Object.assign({},this.messagePayload),{to:t.target.value})}},m("option",null,"Everyone"),m("option",null,"List of rooms")),m("textarea",{placeholder:"Type message here...",onInput:t=>{this.messagePayload=Object.assign(Object.assign({},this.messagePayload),{message:t.target.value})}}),this.successMessage?m("p",null,"Message sent to ",this.messagePayload.to,m("dyte-icon",{icon:this.iconPack.checkmark,iconPack:this.iconPack,t:this.t})):m("div",{class:"content-row"},m("dyte-button",{onClick:()=>this.close(),variant:"secondary",iconPack:this.iconPack,t:this.t},"Cancel"),"\u2002",m("dyte-button",{variant:"primary",onClick:()=>this.sendMessage(),iconPack:this.iconPack,t:this.t},"Send"))))}};Qr.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:flex;flex-direction:column;overflow:hidden;border-radius:var(--dyte-border-radius-md, 8px);padding:var(--dyte-space-4, 16px);width:100%;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));width:400px;max-width:80%}.content-col{display:flex;width:100%;flex-direction:column}h2{margin:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-2, 8px)}.content-row{display:flex;width:100%;flex-direction:row}.content-row dyte-button{margin-top:var(--dyte-space-4, 16px);width:100%}textarea{margin-top:var(--dyte-space-3, 12px);resize:none;border-radius:var(--dyte-border-radius-sm, 4px);border-width:var(--dyte-border-width-none, 0);border-style:none;font-family:var(--dyte-font-family, sans-serif);outline:2px solid transparent;outline-offset:2px;height:var(--dyte-space-16, 64px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));padding:var(--dyte-space-2, 8px);color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}textarea::-moz-placeholder{color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}textarea::placeholder{color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}select{border-radius:var(--dyte-border-radius-sm, 4px);border-width:var(--dyte-border-width-none, 0);border-style:none;padding-top:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-3, 12px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);outline:2px solid transparent;outline-offset:2px;border-right-width:var(--dyte-border-width-md, 2px);border-style:solid;border-color:transparent;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}p{margin:var(--dyte-space-0, 0px);margin-top:var(--dyte-space-2, 8px);width:100%;text-align:center;font-size:14px;--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity));display:flex;flex-direction:row;align-items:center;justify-content:center}p dyte-icon{margin-left:var(--dyte-space-1, 4px);height:var(--dyte-space-5, 20px)}";var Jr=Object.freeze({__proto__:null,dyte_broadcast_message_modal:Qr});const Xr=class{constructor(t){vt(this,t),this.stateUpdate=k(this,"dyteStateUpdate",7),this.videoUpdateListener=({videoEnabled:t})=>{this.videoEnabled=t},this.stageStatusListener=()=>{this.stageStatus=this.meeting.stage.status,this.canProduceVideo="ALLOWED"===this.meeting.self.permissions.canProduceVideo},this.mediaPermissionUpdateListener=({kind:t,message:e})=>{"video"===t&&(this.cameraPermission=e)},this.meetingPermissionsUpdateListener=t=>{var e;(null===(e=null==t?void 0:t.media)||void 0===e?void 0:e.video)&&(this.canProduceVideo="ALLOWED"===this.meeting.self.permissions.canProduceVideo)},this.toggleCamera=()=>{var t,e,i,s,a,r,n,o,l,d,c;if(null===(t=this.meeting)||void 0===t||t.__internals__.logger.info("dyteCameraToggle::toggleCamera",{media:{video:{enabled:Boolean(null===(i=null===(e=this.meeting)||void 0===e?void 0:e.self)||void 0===i?void 0:i.videoEnabled),permission:this.cameraPermission,canProduce:null===(r=null===(a=null===(s=this.meeting)||void 0===s?void 0:s.self)||void 0===a?void 0:a.permissions)||void 0===r?void 0:r.canProduceVideo}},webinar:{stageStatus:null===(n=this.meeting)||void 0===n?void 0:n.stage.status},livestream:{stageStatus:null===(l=null===(o=this.meeting)||void 0===o?void 0:o.stage)||void 0===l?void 0:l.status},moduleExists:{self:Boolean(null===(d=this.meeting)||void 0===d?void 0:d.self)}}),this.hasPermissionError()){const t={enabled:!0,kind:"video"};return this.stateUpdate.emit({activePermissionsMessage:t}),Ss.activePermissionsMessage=t,!1}const h=null===(c=this.meeting)||void 0===c?void 0:c.self;null!=h&&this.canProduceVideo&&(h.videoEnabled?h.disableVideo():h.enableVideo())},this.variant="button",this.meeting=void 0,this.size=void 0,this.iconPack=ts,this.t=ns(),this.videoEnabled=!1,this.canProduceVideo=!1,this.cameraPermission="NOT_REQUESTED",this.stageStatus="OFF_STAGE"}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var t,e,i,s,a,r,n;null===(t=this.meeting)||void 0===t||t.self.removeListener("videoUpdate",this.videoUpdateListener),null===(e=this.meeting)||void 0===e||e.self.removeListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),null===(s=null===(i=this.meeting)||void 0===i?void 0:i.stage)||void 0===s||s.removeListener("stageStatusUpdate",this.stageStatusListener),null===(n=null===(r=null===(a=this.meeting)||void 0===a?void 0:a.self)||void 0===r?void 0:r.permissions)||void 0===n||n.removeListener("permissionsUpdate",this.meetingPermissionsUpdateListener)}meetingChanged(t){var e,i;if(null!=t){const{self:s,stage:a}=t;this.canProduceVideo="ALLOWED"===this.meeting.self.permissions.canProduceVideo,this.cameraPermission=s.mediaPermissions.video||"NOT_REQUESTED",this.videoEnabled=s.videoEnabled,this.stageStatus=t.stage.status,s.addListener("videoUpdate",this.videoUpdateListener),s.addListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),null==a||a.addListener("stageStatusUpdate",this.stageStatusListener),null===(i=null===(e=null==t?void 0:t.self)||void 0===e?void 0:e.permissions)||void 0===i||i.addListener("permissionsUpdate",this.meetingPermissionsUpdateListener)}}hasPermissionError(){return"DENIED"===this.cameraPermission||"SYSTEM_DENIED"===this.cameraPermission}getState(){let t="",e="",i="",s={},a=this.hasPermissionError(),r="COULD_NOT_START"===this.cameraPermission;return this.videoEnabled&&!a?(e=this.t("video_on"),i=this.iconPack.video_on):(e=this.t("video_off"),i=this.iconPack.video_off,s["red-icon"]=!0),t=r?this.t("perm_could_not_start.video"):"SYSTEM_DENIED"===this.cameraPermission?this.t("perm_sys_denied.video"):"DENIED"===this.cameraPermission?this.t("perm_denied.video"):this.videoEnabled?this.t("disable_video"):this.t("enable_video"),{tooltipLabel:t,label:e,icon:i,classList:s,showWarning:a||r,disable:a}}render(){var t;if(!this.canProduceVideo||"AUDIO_ROOM"===(null===(t=this.meeting)||void 0===t?void 0:t.meta.viewType)||["OFF_STAGE","REQUESTED_TO_JOIN_STAGE"].includes(this.stageStatus))return null;const{tooltipLabel:e,label:i,icon:s,classList:a,showWarning:r,disable:n}=this.getState();return m(f,{title:i},m("dyte-tooltip",{kind:"block",label:e,part:"tooltip",iconPack:this.iconPack,t:this.t},m("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,class:a,variant:this.variant,label:i,icon:s,onClick:this.toggleCamera,showWarning:r,disabled:n})))}static get watchers(){return{meeting:["meetingChanged"]}}};Xr.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}";var tn=Object.freeze({__proto__:null,dyte_camera_toggle:Xr});const en=class{constructor(t){vt(this,t),this.stateUpdate=k(this,"dyteStateUpdate",7),this.permissionsUpdateListener=()=>{var t;this.captionEnabled=null!==(t=this.meeting.self.permissions.transcriptionEnabled)&&void 0!==t&&t},this.variant="button",this.meeting=void 0,this.states=void 0,this.config=$t,this.iconPack=ts,this.size=void 0,this.t=ns(),this.captionEnabled=!1}connectedCallback(){this.meetingChanged(this.meeting)}meetingChanged(t){null!==t&&(this.permissionsUpdateListener(),this.meeting.self.permissions.addListener("permissionsUpdate",this.permissionsUpdateListener))}disconnectedCallback(){var t;null===(t=this.meeting)||void 0===t||t.self.permissions.removeListener("permissionsUpdate",this.permissionsUpdateListener)}toggleCaptions(){this.stateUpdate.emit({activeCaptions:!Ss.activeCaptions}),Ss.activeCaptions=!Ss.activeCaptions,this.stateUpdate.emit({activeMoreMenu:!1}),Ss.activeMoreMenu=!1}render(){if(!this.captionEnabled)return null;const t=this.states.activeCaptions;return m(f,{tabIndex:0,role:"log","aria-label":"Picture-in-Picture mode"},m("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,onClick:()=>this.toggleCaptions(),icon:t?this.iconPack.captionsOff:this.iconPack.captionsOn,label:t?this.t("transcript.off"):this.t("transcript.on"),variant:this.variant}))}static get watchers(){return{meeting:["meetingChanged"]}}};en.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}";var sn=Object.freeze({__proto__:null,dyte_caption_toggle:en});const an=class{constructor(t){vt(this,t),this.stateUpdate=k(this,"dyteStateUpdate",7),this.switchChannel=k(this,"switchChannel",7),this.allMembers=new Map,this.inputTextRef=null,this.searchInputTextRef=null,this.focusOnSearch=(t=!1)=>{this.focusedMemberIndex=-1,It((()=>{var e,i;null===(e=this.searchInputTextRef)||void 0===e||e.focus(),t&&(null===(i=this.searchInputTextRef)||void 0===i||i.select())}))},this.onClickHandler=async()=>{if(0!==this.channelName.length){if(1===this.step){const t=this.meeting.participants.all.toArray(),e=this.meeting.self.userId;return t.filter((t=>t.userId!==e)).forEach((t=>this.allMembers.set(t.userId,t))),this.step=2,void this.focusOnSearch()}await this.createChannel()}},this.createChannel=async()=>{const t=Array.from(this.selectedMemberIds),e=await this.meeting.chat.createChannel(this.channelName,t,{displayPictureUrl:"",visibility:"public",isDirectMessage:!1});this.switchChannel.emit(e.id),this.stateUpdate.emit({activeChannelCreator:!1}),Ss.activeChannelCreator=!1},this.onMemberAdd=t=>{this.showAllMembersList=!1,this.selectedMemberIds.add(t),this.searchQuery="",this.focusOnSearch()},this.keyDownHandler=(t,e)=>{if("ArrowDown"===t.key)this.focusedMemberIndex=Math.min(this.focusedMemberIndex+1,e.length-1);else if("ArrowUp"===t.key){if(-1===this.focusedMemberIndex)return;if(0===this.focusedMemberIndex)return void this.focusOnSearch(!0);this.focusedMemberIndex=Math.max(this.focusedMemberIndex-1,0)}else if("Enter"===t.key)this.onMemberAdd(e[this.focusedMemberIndex].userId);else if("Backspace"===t.key){if(0!==this.searchQuery.length)return;if(0===this.selectedMemberIds.size)return;const t=Array.from(this.selectedMemberIds.values()).at(-1);this.selectedMemberIds.delete(t),J(this.$el)}},this.renderMemberSelector=()=>{const t=Array.from(this.allMembers.values()).filter((t=>!this.selectedMemberIds.has(t.userId)&&t.name.toLowerCase().includes(this.searchQuery.toLowerCase()))),e=Array.from(this.selectedMemberIds.values()).map((t=>this.allMembers.get(t))),i=this.selectedMemberIds.size===this.allMembers.size;return m("div",{class:"input-container"},m("ul",{class:"members scrollbar",onClick:()=>{var t;null===(t=this.searchInputTextRef)||void 0===t||t.focus()}},e.map((t=>m("li",{class:"pill"},m("dyte-avatar",{participant:{name:t.name,picture:t.picture},size:"sm"}),m("span",null,t.name),m("dyte-icon",{icon:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t,onClick:()=>{this.selectedMemberIds.delete(t.userId),J(this.$el),this.focusOnSearch()}})))),!i&&m("input",{type:"text",ref:t=>this.searchInputTextRef=t,value:this.searchQuery,placeholder:0===this.selectedMemberIds.size?this.t("chat.member_name"):"",class:{"wide-input":0===this.selectedMemberIds.size},onInput:t=>{this.searchQuery=t.target.value.trim()},onClick:()=>{this.showAllMembersList=!this.showAllMembersList},onKeyDown:e=>this.keyDownHandler(e,t)})),(0!==this.searchQuery.length||this.showAllMembersList)&&m("ul",{class:"search-results"},t.map(((t,e)=>m("li",{class:{member:!0,selected:e===this.focusedMemberIndex},onClick:()=>this.onMemberAdd(t.userId),ref:t=>{e===this.focusedMemberIndex&&It((()=>{t&&t.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})}))}},m("dyte-avatar",{participant:{name:t.name,picture:t.picture},size:"sm"}),m("span",null,t.name)))),0===t.length&&m("li",{class:"member"},m("span",null,this.t("chat.error.empty_results")))))},this.meeting=void 0,this.t=ns(),this.iconPack=ts,this.channelName="",this.searchQuery="",this.step=1,this.loading=!1,this.selectedMemberIds=new Set,this.focusedMemberIndex=-1,this.showAllMembersList=!1}componentDidLoad(){var t;null===(t=this.inputTextRef)||void 0===t||t.focus()}render(){return m(f,null,m("header",null,1===this.step?this.t("chat.new_channel"):this.t("chat.add_members")),1===this.step&&m("input",{class:"channel-name-input",type:"text",placeholder:this.t("chat.channel_name"),ref:t=>this.inputTextRef=t,onInput:t=>{this.channelName=t.target.value.trim()}}),2===this.step&&this.renderMemberSelector(),m("footer",null,m("dyte-button",{kind:"button",iconPack:this.iconPack,t:this.t,size:"lg",disabled:0===this.channelName.length,onClick:this.onClickHandler},1===this.step?this.t("chat.add_members"):this.t("create"))))}get $el(){return x(this)}};an.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))\n    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));display:flex;flex-direction:column;width:var(--dyte-space-96, 384px);padding-left:var(--dyte-space-9, 36px);padding-right:var(--dyte-space-9, 36px);padding-top:var(--dyte-space-10, 40px);padding-bottom:var(--dyte-space-10, 40px)}header{margin-bottom:var(--dyte-space-8, 32px);display:flex;align-items:center;gap:var(--dyte-space-2, 8px);font-size:24px;font-weight:600}.channel-name-input{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));border-radius:var(--dyte-border-radius-sm, 4px);border-width:var(--dyte-border-width-none, 0);border-style:none;padding:var(--dyte-space-3, 12px);font-size:16px;-webkit-appearance:none;-moz-appearance:none;appearance:none;line-height:1.25;outline:2px solid transparent;outline-offset:2px}.channel-name-input:focus{outline-width:2px;outline-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / 0.5)}footer{margin-top:var(--dyte-space-5, 20px);display:flex;justify-content:flex-end}.member{display:flex;align-items:center;gap:var(--dyte-space-1, 4px);padding:var(--dyte-space-2, 8px)}.member dyte-avatar{height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);font-size:14px;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.input-container{position:relative;-webkit-appearance:none;-moz-appearance:none;appearance:none;line-height:1.25;outline:2px solid transparent;outline-offset:2px;outline-width:2px;outline-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / 0.5);border-radius:var(--dyte-border-radius-sm, 4px)}.input-container .members{margin:var(--dyte-space-0, 0px);max-height:var(--dyte-space-28, 112px);border-radius:var(--dyte-border-radius-sm, 4px);padding:var(--dyte-space-2, 8px);list-style-type:none;display:flex;flex-wrap:wrap;gap:var(--dyte-space-1, 4px);cursor:text;font-size:16px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));overflow-y:auto;min-height:var(--dyte-space-7, 28px)}.input-container .pill{display:flex;align-items:center;gap:var(--dyte-space-1, 4px);border-radius:var(--dyte-border-radius-sm, 4px);padding:var(--dyte-space-2, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.input-container .pill dyte-avatar{height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);font-size:14px;color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.input-container .pill span{max-width:var(--dyte-space-32, 128px);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.input-container .pill dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);cursor:pointer}.input-container input{width:var(--dyte-space-24, 96px);border-radius:var(--dyte-border-radius-sm, 4px);border-width:var(--dyte-border-width-none, 0);border-style:none;padding:var(--dyte-space-1, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));outline:2px solid transparent;outline-offset:2px;font-size:16px;line-height:1.25rem}.input-container input.wide-input{width:100%}.search-results{margin:var(--dyte-space-0, 0px);margin-top:var(--dyte-space-1, 4px);max-height:var(--dyte-space-28, 112px);width:100%;padding:var(--dyte-space-0, 0px);position:absolute;list-style-type:none;overflow-y:auto;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));border-radius:var(--dyte-border-radius-md, 8px);--tw-border-spacing-x:var(--dyte-space-2, 8px);--tw-border-spacing-y:var(--dyte-space-2, 8px);border-spacing:var(--tw-border-spacing-x) var(--tw-border-spacing-y);border-style:solid;border-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / 0.5)}.search-results .member{cursor:pointer}.search-results .member dyte-avatar{color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.search-results .member:hover,.search-results .member.selected{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-700, 2 70 253) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}";var rn=Object.freeze({__proto__:null,dyte_channel_creator:an});const nn=t=>{let e=null;try{const i=JSON.parse(t.message),{target:s,message:a}=i;e=void 0===s||void 0===a?t:Object.assign(Object.assign({},t),{targetUserIds:s,message:a})}catch(i){e=t}return e};function on(t,e){return t.localeCompare(e)}function ln(t){return t.sort(((t,e)=>t.localeCompare(e))).join("_")}function dn(t,e){if(null==t)return!0;for(const i of t)if("file"===i.kind){const t=i.getAsFile();i.type.startsWith("image/")?e("image",t):e("file",t)}}const cn="dm__";function hn(t){return t.isDirectMessage}function pn(t){return[...new Set(t)].sort(on).join("<>")}function gn(t){return t.split("").reverse().join("")}const un=/^\*([^*\s]+)\*/,mn=/^_([^_\s]+)_/,vn=/^~([^~\s]+)~/,fn=/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.,~#?&//=]*)/,yn=/<blockquote>[.\s\S]*<\/blockquote>\n\n/m;function bn(t,e=!1){if(!yn.test(t))return"";let i=0,s=13;return e&&(i=12,s=0),t.substring(t.indexOf("<blockquote>")+i,t.indexOf("</blockquote>")+s)}function wn(t){return t.replace(yn,"")}const xn=2e3,kn=["<a>","<b>","<i>","<q>","<s>"];function Sn(t){t=(t=t.split(" ").map((t=>{if(fn.test(t)){const e=fn.exec(t);t=t.replace(e[0],`<a>${e[0]}</a>`)}else{if(un.test(t)){const e=un.exec(t);t=t.replace(e[0],`<b>${e[1]}</b>`)}if(mn.test(t)){const e=mn.exec(t);t=t.replace(e[0],`<i>${e[1]}</i>`)}if(vn.test(t)){const e=vn.exec(t);t=t.replace(e[0],`<s>${e[1]}</s>`)}}return t})).join(" ")).split(" ").map(((t,e)=>">"!==t||0!==e&&">"!==t[e-1]?t:"<q></q>")).join(" ");const[e]=_n(t);return e}function _n(t,e=""){const i=[];if(0===t.length)return[i,0];let s=0;for(;s<t.length;){if(e.length&&e===t.substring(s,s+e.length))return[i,s+e.length];if(kn.includes(t.substring(s,s+3))){const[e,a]=_n(t.substring(s+3),`</${t[s+1]}>`);i.push({type:t[s+1],content:1===e.length&&"plain_text"===e[0].type?e[0].content:e}),s+=a+3}else{let e=i[i.length-1];e&&"plain_text"===e.type||(i.push({type:"plain_text",content:""}),e=i[i.length-1]),e.content+=t[s],s++}}return[i,s]}const Cn=t=>t.map((t=>{switch(t.type){case"a":if("string"==typeof t.content)return e=t.content,m("a",{class:"link",href:e,target:"_blank",rel:"noopener noreferrer"},e);case"b":return(t=>m("b",null,"string"==typeof t?t:Cn(t)))(t.content);case"i":return(t=>m("i",null,"string"==typeof t?t:Cn(t)))(t.content);case"s":return(t=>"string"==typeof t?m("s",null,t):m("b",null,Cn(t)))(t.content);case"q":return m("span",{class:"block-quote"});default:return(t=>"string"==typeof t?t:m("p",null,Cn(t)))(t.content)}var e})),Pn=({message:t})=>{const e=t.slice(0,xn),i=bn(e,!0),s=wn(e);return m("p",null,0!==i.length&&m("blockquote",null,i.split("\n").map((t=>{const e=Sn(t);return m("p",null,Cn(e))}))),s.split("\n").map((t=>{const e=Sn(t);return m("p",null,Cn(e))})))},Ln=class{constructor(t){vt(this,t),this.channelChanged=k(this,"channelChanged",7),this.handleResize=t=>{this.isHidden=!t.matches},this.channelSelected=t=>{this.channelChanged.emit(t),this.onRevealClicked()},this.onSearchInput=t=>{this.searchQuery=t.target.value},this.onRevealClicked=()=>{this.matchMedia.matches||(this.isHidden=!this.isHidden)},this.renderChannelDisplayPic=t=>{const e=t.displayPictureUrl&&0!==t.displayPictureUrl.length;return t.isDirectMessage||e?m("div",{class:"channel-display"},m("dyte-avatar",{participant:{name:t.displayName,picture:t.displayPictureUrl}})):m("div",{class:"channel-display"},m("dyte-icon",{icon:this.iconPack.people,slot:"start"}))},this.renderRecentMessage=t=>{if(!t.latestMessage)return m("p",{class:"latest-msg new"},this.t("chat.start_conversation"));let e=t.isDirectMessage?"":`${t.latestMessage.displayName}: `;if("text"===t.latestMessage.type)return m("p",{class:"latest-msg"},e,m(Pn,{message:t.latestMessage.message}));let i="";return"image"===t.latestMessage.type?i=this.t("image"):"file"===t.latestMessage.type&&(i=this.t("file")),m("p",{class:"latest-msg"},`${e}${i}`)},this.channels=void 0,this.selectedChannelId=void 0,this.iconPack=ts,this.t=ns(),this.showRecentMessage=!1,this.isHidden=!1,this.searchQuery=""}connectedCallback(){this.matchMedia=window.matchMedia("(orientation: landscape) and (min-width: 400px)"),this.matchMedia.addEventListener("change",this.handleResize),this.isHidden=!this.matchMedia.matches}disconnectedCallback(){this.matchMedia.removeEventListener("change",this.handleResize)}componentDidRender(){this.$el.style.transform=this.isHidden?"translateX(-380px)":"translateX(0)"}getTimeLabel(t){const e=t.time,i=new Date,s=new Date(i);s.setDate(i.getDate()-1);const a=new Date(i);if(a.setDate(i.getDate()-i.getDay()-1),e.toDateString()===i.toDateString())return e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});if(e.toDateString()===s.toDateString())return this.t("date.yesteday");if(e>a){const t=["date.sunday","date.monday","date.tuesday","date.wednesday","date.thursday","date.friday","date.saturday"];return this.t(t[e.getDay()])}return Intl.DateTimeFormat([],{day:"2-digit",month:"2-digit",year:"2-digit"}).format(e)}render(){return m(f,null,m("div",{class:"container",ref:t=>this.$el=t},this.isHidden&&m("dyte-button",{iconPack:this.iconPack,t:this.t,kind:"icon",variant:"ghost",size:"md",onClick:this.onRevealClicked,class:"sidebar-btn"},m("dyte-icon",{icon:this.isHidden?this.iconPack.chevron_left:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t})),m("slot",{name:"header"}),m("div",{class:"search-wrapper"},m("div",{class:"search"},m("input",{type:"search",autocomplete:"off",placeholder:this.t("chat.search_conversations"),onInput:this.onSearchInput}),m("dyte-icon",{icon:this.iconPack.search,iconPack:this.iconPack,t:this.t,class:"search-icon"}))),m("div",{class:"channel-container scrollbar",role:"list"},this.channels.filter((t=>""===this.searchQuery||t.displayName.includes(this.searchQuery))).map((t=>m("div",{class:{channel:!0,selected:t.id===this.selectedChannelId,highlight:!!t.unreadCount},role:"listitem",onClick:()=>{this.channelSelected(t.id)}},this.renderChannelDisplayPic(t),m("div",{class:"channel-card","is-direct-message":t.isDirectMessage},m("div",{class:"recent-message-row"},m("span",{class:"channel-name"},t.displayName),t.latestMessage&&m("span",{class:"latest-msg-time"},this.getTimeLabel(t.latestMessage))),m("div",{class:"recent-message-row"},this.renderRecentMessage(t),t.unreadCount>0&&t.id!==this.selectedChannelId?m("span",{class:"new-msgs-count"},t.unreadCount<99?t.unreadCount:"99+"):null))))))),!this.isHidden&&m("div",{class:"overlay-container"},m("dyte-button",{iconPack:this.iconPack,t:this.t,kind:"icon",variant:"ghost",size:"md",onClick:this.onRevealClicked,class:"sidebar-btn"},m("dyte-icon",{icon:this.isHidden?this.iconPack.chevron_left:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t}))))}};Ln.style=".scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))\n    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{display:flex}.container{display:flex;height:100%;width:var(--dyte-space-96, 384px);flex-direction:column;position:absolute;--tw-translate-x:calc(var(--dyte-space-96, 384px) * -1);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));border-top-width:var(--dyte-border-width-none, 0);border-bottom-width:var(--dyte-border-width-none, 0);border-right-width:var(--dyte-border-width-sm, 1px);border-left-width:var(--dyte-border-width-none, 0);border-style:solid;--tw-border-opacity:1;border-right-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-border-opacity));transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}@keyframes fade{0%{opacity:0}100%{opacity:1}}.overlay-container{width:100vw;--tw-translate-x:var(--dyte-space-96, 384px);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms;animation:fade 0.8s}.overlay-container .sidebar-btn{position:static;padding:var(--dyte-space-4, 16px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.sidebar-btn{position:absolute;right:calc(var(--dyte-space-9, 36px) * -1);top:var(--dyte-space-4, 16px);height:var(--dyte-space-8, 32px);width:var(--dyte-space-7, 28px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));border-radius:var(--dyte-border-radius-sm, 4px)}@media (orientation: landscape) and (min-width: 400px){.container{position:static;--tw-translate-x:var(--dyte-space-0, 0px);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.sidebar-btn,.overlay-container{display:none}}.search-wrapper{display:flex;align-items:center;gap:var(--dyte-space-2, 8px);padding:var(--dyte-space-2, 8px);border-left-width:var(--dyte-border-width-none, 0);border-right-width:var(--dyte-border-width-none, 0);border-bottom-width:var(--dyte-border-width-sm, 1px);border-top-width:var(--dyte-border-width-none, 0);border-style:solid;--tw-border-opacity:1;border-bottom-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-border-opacity))}.search{position:sticky;box-sizing:border-box;display:flex;align-items:center;border-radius:var(--dyte-border-radius-sm, 4px);margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-0, 0px);height:var(--dyte-space-8, 32px);width:100%}.search .search-icon{height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);padding:var(--dyte-space-2, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52));border-top-right-radius:var(--dyte-border-radius-sm, 4px);border-bottom-right-radius:var(--dyte-border-radius-sm, 4px)}.search input{box-sizing:border-box;width:100%;padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px);padding-left:var(--dyte-space-2, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));border-width:var(--dyte-border-width-none, 0);border-style:none;outline:2px solid transparent;outline-offset:2px;font-size:14px;line-height:1.25rem}.search input::-moz-placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.search input::placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.search input{border-top-left-radius:var(--dyte-border-radius-sm, 4px);border-bottom-left-radius:var(--dyte-border-radius-sm, 4px)}.channel-container{box-sizing:border-box;display:flex;flex-direction:column;padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px);overflow-y:scroll}.channel-container .channel{display:flex;align-items:center;justify-content:space-between;gap:var(--dyte-space-2, 8px);padding:var(--dyte-space-0, 0px);border-left-width:var(--dyte-border-width-none, 0);border-right-width:var(--dyte-border-width-none, 0);border-bottom-width:var(--dyte-border-width-sm, 1px);border-top-width:var(--dyte-border-width-none, 0);border-style:solid;--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-border-opacity))}.channel-container .channel:hover{cursor:pointer;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-on-brand-900, var(--dyte-colors-text-900, 255 255 255 / 0.88)))}.channel-container .channel:hover .latest-msg-time,.channel-container .channel:hover .latest-msg,.channel-container .channel:hover .latest-msg.new{color:rgb(var(--dyte-colors-text-on-brand-700, var(--dyte-colors-text-700, 255 255 255 / 0.64)))}.channel-container .channel-display{display:flex;gap:var(--dyte-space-2, 8px);align-self:center;padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-0, 0px)}.channel-container .channel-display dyte-avatar{height:var(--dyte-space-9, 36px);width:var(--dyte-space-9, 36px);flex-shrink:0;font-size:12px}.channel-container .channel-display dyte-icon{height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);flex-shrink:0;padding:var(--dyte-space-2, 8px);border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.channel-container .channel-card{width:100%;padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);padding-left:var(--dyte-space-1, 4px)}.channel-container .channel-card .channel-name{max-width:var(--dyte-space-60, 240px);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:14px;font-weight:500}.channel-container .channel-card .latest-msg{margin:var(--dyte-space-0, 0px);max-width:var(--dyte-space-56, 224px);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:14px}.channel-container .channel-card .latest-msg.new{font-weight:200;font-style:italic;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.channel-container .channel-card .latest-msg-time{font-size:12px;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.channel-container .channel-meta{width:var(--dyte-space-12, 48px);display:flex;flex-direction:column;align-items:flex-end;justify-content:space-between;gap:var(--dyte-space-1\\.5, 6px);font-size:12px;font-weight:600}.channel-container .new-msgs-count{height:var(--dyte-space-4, 16px);min-width:var(--dyte-space-4, 16px);padding-top:1px;padding-bottom:1px;padding-left:2px;padding-right:2px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)));border-radius:var(--dyte-border-radius-sm, 4px);text-align:center;font-size:12px}.channel-container .selected{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-on-brand-900, var(--dyte-colors-text-900, 255 255 255 / 0.88)))}.channel-container .selected .latest-msg-time,.channel-container .selected .latest-msg,.channel-container .selected .latest-msg.new{color:rgb(var(--dyte-colors-text-on-brand-700, var(--dyte-colors-text-700, 255 255 255 / 0.64)))}.channel-container .highlight .channel-title span{font-weight:700}.latest-msg p{margin:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-1, 4px);display:inline-block}.latest-msg blockquote{display:none}.recent-message-row{margin-bottom:var(--dyte-space-2, 8px);display:flex;width:100%;flex-direction:row;justify-content:space-between}";var Tn=Object.freeze({__proto__:null,dyte_channel_selector_ui:Ln});const En=class{constructor(t){vt(this,t),this.stateUpdate=k(this,"dyteStateUpdate",7),this.chatUpdateListener=({message:t})=>{t.channelId||this.displayFilter&&!this.displayFilter(t)||(this.addToChatGroup(t),this.chatGroups=Object.assign({},this.chatGroups))},this.chatPermissionUpdateListener=()=>{this.canSend=this.meeting.self.permissions.chatPublic.canSend,this.canSendTextMessage=this.meeting.self.permissions.chatPublic.text,this.canSendFiles=this.meeting.self.permissions.chatPublic.files},this.channelMap=new Map,this.onDragOver=t=>{t.preventDefault(),this.dropzoneActivated=!0},this.onDragLeave=()=>{this.dropzoneActivated=!1},this.onDrop=t=>{t.preventDefault(),this.dropzoneActivated=!1,dn(t.dataTransfer.items,((t,e)=>{var i,s,a,r;switch(t){case"image":this.isFileMessagingAllowed()&&(null===(s=null===(i=this.meeting)||void 0===i?void 0:i.chat)||void 0===s||s.sendImageMessage(e,this.getRecipientPeerIds()));break;case"file":this.isFileMessagingAllowed()&&(null===(r=null===(a=this.meeting)||void 0===a?void 0:a.chat)||void 0===r||r.sendFileMessage(e,this.getRecipientPeerIds()))}}))},this.disconnectMeeting=t=>{var e,i,s,a,r,n;this.isPrivateChatSupported()&&(null==t||t.participants.joined.removeListener("participantJoined",this.onParticipantUpdate),null==t||t.participants.joined.removeListener("participantLeft",this.onParticipantUpdate)),null===(e=null==t?void 0:t.chat)||void 0===e||e.removeListener("chatUpdate",this.chatUpdateListener),null===(i=null==t?void 0:t.chat)||void 0===i||i.removeListener("channelCreate",this.onChannelCreateOrUpdate),null===(s=null==t?void 0:t.chat)||void 0===s||s.removeListener("channelUpdate",this.onChannelCreateOrUpdate),null===(a=null==t?void 0:t.chat)||void 0===a||a.removeListener("channelMessageUpdate",this.onChannelCreateOrUpdate),null===(n=null===(r=null==t?void 0:t.participants)||void 0===r?void 0:r.all)||void 0===n||n.removeListener("participantsUpdate",this.onChannelCreateOrUpdate),t.self.permissions.removeListener("*",this.chatPermissionUpdateListener)},this.getFilteredParticipants=()=>0===this.privatePresetFilter.length?this.participants:this.participants.filter((t=>this.privatePresetFilter.includes(t.presetName))),this.onParticipantUpdate=()=>{this.participants=this.meeting.participants.joined.toArray().filter((t=>0===this.privatePresetFilter.length||this.privatePresetFilter.includes(t.presetName))),this.selectedParticipant&&!this.participants.includes(this.selectedParticipant)&&(this.selectedParticipant=null,this.chatRecipientId=this.selectedGroup="everyone")},this.usePaginatedChat=()=>(!this.isGroupCall||!this.showPinnedMessages)&&("everyone"===this.selectedGroup&&Ms(this.meeting)),this.updateUnreadCountGroups=t=>{this.unreadCountGroups=Object.assign(Object.assign({},this.unreadCountGroups),t)},this.isPrivateChatSupported=()=>this.canPrivateMessage&&!this.disablePrivateChat,this.updateRecipients=t=>{const{id:e}=t.detail;if(this.chatRecipientId=e,this.selectedParticipant=this.participants.find((t=>t.userId===e)),"everyone"!==this.chatRecipientId){const t=ln([this.chatRecipientId,this.meeting.self.userId]);this.selectedGroup=t}else this.selectedGroup="everyone";this.updateUnreadCountGroups({[this.selectedGroup]:0})},this.isTextMessagingAllowed=()=>"everyone"===this.chatRecipientId?this.canSend&&this.canSendTextMessage:this.canPrivateMessage&&this.canSendPrivateTexts,this.isFileMessagingAllowed=()=>"everyone"===this.chatRecipientId?this.canSend&&this.canSendFiles:this.canPrivateMessage&&this.canSendPrivateFiles,this.onChannelChanged=t=>{const e=t.detail;e.id.includes(cn)?this.createDMChannel(e.id.replace(cn,"")):this.selectedChannelId=e.id,this.cleanup(),"desktop"!==this.selectorState&&(this.selectorState="hide")},this.createDMChannel=async t=>{this.creatingChannel=!0;const e=await this.meeting.chat.createChannel("Direct Message",[t],{visibility:"private",isDirectMessage:!0});this.creatingChannel=!1,this.selectedChannelId=e.id},this.cleanup=()=>{this.editingMessage=null,this.replyMessage=null,this.searchQuery=""},this.onQuotedMessageDismiss=()=>{this.replyMessage=null},this.onChannelCreateOrUpdate=t=>{t?this.channelMap.set(t.id,t):this.meeting.chat.channels.forEach((t=>this.channelMap.set(t.id,t)));const e=Array.from(this.channelMap.values()),i=e.filter((t=>!hn(t))).sort(((t,e)=>on(t.displayName,e.displayName))),s=e.filter(hn).map((t=>Object.assign(Object.assign({},t),{displayName:this.getMemberDisplayName(t)}))),a=this.meeting.participants.all.toArray().filter((t=>{if(t.userId===this.meeting.self.userId)return!1;const e=pn([this.meeting.self.userId,t.userId]);return s.every((t=>pn(t.memberIds)!==e))})).map((t=>({id:`${cn}${t.userId}`,displayName:t.name,displayPictureUrl:t.picture,isDirectMessage:!0,unreadCount:0}))),r=[...s,...a].sort(((t,e)=>on(t.displayName,e.displayName)));this.channels=[...i,...r];const n=[...i,...s];this.selectedChannelId||0===n.length||(this.selectedChannelId=n[0].id)},this.getMemberDisplayName=t=>{var e;let i;i=1===t.memberIds.length?t.memberIds[0]:t.memberIds[0]===this.meeting.self.userId?t.memberIds[1]:t.memberIds[0];const s=this.meeting.participants.all.toArray().find((t=>t.userId===i));return null!==(e=null==s?void 0:s.name)&&void 0!==e?e:i},this.onNewMessageHandler=async t=>{const e=t.detail;this.isChatViewType?(await this.meeting.chat.sendMessageToChannel(e,this.selectedChannelId,this.replyMessage?{replyTo:this.replyMessage}:{}),this.replyMessage=null):this.meeting.chat.sendMessage(e,this.getRecipientPeerIds())},this.onEditMessageHandler=async t=>{var e,i;await(null===(i=null===(e=this.meeting)||void 0===e?void 0:e.chat)||void 0===i?void 0:i.editTextMessage(this.editingMessage.id,t.detail,this.editingMessage.channelId)),this.editingMessage=null},this.onEditCancel=()=>{this.editingMessage=null},this.onSearchHandler=async t=>{this.searchQuery=t.detail},this.onSearchDismissed=()=>{this.searchQuery=""},this.onChannelCreateClicked=()=>{this.stateUpdate.emit({activeChannelCreator:!0}),Ss.activeChannelCreator=!0},this.onPinMessage=t=>{const e=t.detail;e.pinned?this.meeting.chat.unpin(e.id):this.meeting.chat.pin(e.id)},this.onDeleteMessage=t=>{const e=t.detail;this.meeting.chat.deleteMessage(e.id)},this.getChannelItems=()=>this.channels.map((t=>{const e={id:t.id,name:t.displayName,avatarUrl:t.displayPictureUrl};return t.latestMessage&&(e.latestMessage="text"===t.latestMessage.type?wn(t.latestMessage.message):"",e.latestMessageTime=t.latestMessage.time),e})),this.getPrivateChatRecipients=()=>{const t=this.getFilteredParticipants().map((t=>{const e=ln([t.userId,this.meeting.self.userId]);return{id:t.userId,name:t.name,avatarUrl:t.picture,unreadCount:this.unreadCountGroups[e]}}));return[{id:"everyone",name:this.t("chat.everyone"),icon:"participants",unreadCount:this.unreadCountGroups.everyone},...t]},this.onTogglePinnedMessages=()=>{this.showPinnedMessages=!this.showPinnedMessages},this.renderPinnedMessagesHeader=()=>0===this.meeting.chat.pinned.length?null:m("dyte-tooltip",{label:this.t("chat.toggle_pinned_msgs"),iconPack:this.iconPack,t:this.t},m("div",{class:{"pinned-messages-header":!0,active:this.showPinnedMessages},onClick:this.onTogglePinnedMessages},m("dyte-icon",{icon:this.iconPack.pin,iconPack:this.iconPack,t:this.t}),this.t("chat.pinned_msgs"),` (${this.meeting.chat.pinned.length})`)),this.meeting=void 0,this.config=$t,this.size=void 0,this.iconPack=ts,this.t=ns(),this.disablePrivateChat=!1,this.canPinMessages=!1,this.privatePresetFilter=[],this.displayFilter=void 0,this.unreadCountGroups={},this.chatGroups={everyone:[]},this.selectedGroup="everyone",this.now=new Date,this.dropzoneActivated=!1,this.showLatestMessageButton=!1,this.canSend=!1,this.canSendTextMessage=!1,this.canSendFiles=!1,this.canPrivateMessage=!1,this.canSendPrivateTexts=!1,this.canSendPrivateFiles=!1,this.emojiPickerEnabled=!1,this.chatRecipientId="everyone",this.participants=[],this.selectedParticipant=void 0,this.channels=[],this.selectedChannelId=void 0,this.editingMessage=null,this.replyMessage=null,this.searchQuery="",this.selectorState="hide",this.creatingChannel=!1,this.showPinnedMessages=!1}connectedCallback(){this.meeting&&(this.meetingChanged(this.meeting),this.meeting&&!this.meeting.chat||this.isFileMessagingAllowed()&&(this.host.addEventListener("dragover",this.onDragOver),this.host.addEventListener("dragleave",this.onDragLeave),this.host.addEventListener("drop",this.onDrop)))}onEditMessageInit(t){t.detail.flags.isReply?this.replyMessage=t.detail.payload:t.detail.flags.isEdit&&(this.editingMessage=t.detail.payload)}disconnectedCallback(){var t;null===(t=this.resizeObserver)||void 0===t||t.disconnect(),this.disconnectMeeting(this.meeting),this.host.removeEventListener("dragover",this.onDragOver),this.host.removeEventListener("dragleave",this.onDragLeave),this.host.removeEventListener("drop",this.onDrop)}meetingChanged(t,e){var i,s,a,r,n,o;if(null!=e&&this.disconnectMeeting(e),(!t||t.chat)&&null!=t){if(this.canSend=t.self.permissions.chatPublic.canSend,this.canSendTextMessage=t.self.permissions.chatPublic.text,this.canSendFiles=t.self.permissions.chatPublic.files,this.canPrivateMessage=!(!(null===(i=t.self.permissions.chatPrivate)||void 0===i?void 0:i.canSend)&&!(null===(s=t.self.permissions.chatPrivate)||void 0===s?void 0:s.canReceive)),this.canSendPrivateTexts=!!(null===(a=t.self.permissions.chatPrivate)||void 0===a?void 0:a.text),this.canSendPrivateFiles=!!(null===(r=t.self.permissions.chatPrivate)||void 0===r?void 0:r.files),this.canPinMessages=(null===(n=null==t?void 0:t.__internals__)||void 0===n?void 0:n.features.hasFeature(As))&&t.self.permissions.pinParticipant,this.isGroupCall="GROUP_CALL"===t.meta.viewType,this.isChatViewType="CHAT"===t.meta.viewType,this.isChatViewType){this.onChannelCreateOrUpdate();this.channels.filter((t=>!t.id.includes(cn))).length&&(this.selectedChannelId=this.channels[0].id),this.resizeObserver&&this.resizeObserver.disconnect(),this.resizeObserver=new ResizeObserver((t=>{for(const e of t)e.contentBoxSize[0].inlineSize<758?this.selectorState="hide":this.selectorState="desktop"})),this.isChatViewType&&this.resizeObserver.observe(this.host)}this.initializeChatGroups(),this.chatGroups=Object.assign({},this.chatGroups),t.self.permissions.on("*",this.chatPermissionUpdateListener),this.onParticipantUpdate(),null===(o=t.chat)||void 0===o||o.addListener("chatUpdate",this.chatUpdateListener),this.isPrivateChatSupported()&&(t.participants.joined.addListener("participantJoined",this.onParticipantUpdate),t.participants.joined.addListener("participantLeft",this.onParticipantUpdate)),this.isChatViewType&&(t.chat.addListener("channelCreate",this.onChannelCreateOrUpdate),t.chat.addListener("channelUpdate",this.onChannelCreateOrUpdate),t.chat.addListener("channelMessageUpdate",this.onChannelCreateOrUpdate),t.participants.all.addListener("participantsUpdate",this.onChannelCreateOrUpdate))}}chatGroupsChanged(t){var e,i;if(!this.isPrivateChatSupported())return;const s={};for(const a in t){const r=null!==(e=ys[a])&&void 0!==e?e:0;s[a]=t[a].filter((t=>"chat"==t.type&&t.message.time>r&&t.message.userId!==this.meeting.self.userId)).length,(a===ln([this.meeting.self.userId,null===(i=this.selectedParticipant)||void 0===i?void 0:i.userId])||"everyone"===a&&null===this.selectedParticipant)&&(s[a]=0,ys[a]=new Date)}this.updateUnreadCountGroups(s)}initializeChatGroups(){var t;null===(t=this.meeting.chat)||void 0===t||t.messages.forEach((t=>{this.displayFilter&&!this.displayFilter(t)||this.addToChatGroup(t)}))}onDisplayFilterChanged(t,e){t!==e&&(this.chatGroups={},this.initializeChatGroups())}addToChatGroup(t){var e;const i=nn(t);let s="everyone";if((null===(e=i.targetUserIds)||void 0===e?void 0:e.length)>0){const t=new Set([i.userId,...i.targetUserIds]);s=ln(Array.from(t))}void 0===this.chatGroups[s]&&(this.chatGroups[s]=[]);let a=!1,r=[];this.chatGroups[s].forEach((e=>{"chat"===e.type&&e.message.id===t.id?(a=!0,r.push({type:"chat",message:i})):r.push(e)})),a||r.push({type:"chat",message:i}),this.chatGroups[s]=r}getRecipientPeerIds(){let t=[];return"everyone"!==this.chatRecipientId&&(t=[this.selectedParticipant.id]),t}channelSwitchListener(t){this.onChannelChanged(t)}renderHeadlessComponents(){return m(dt,null,m("dyte-dialog-manager",{meeting:this.meeting}),m("dyte-notifications",{meeting:this.meeting}))}renderComposerUI(){var t,e,i;if(this.isChatViewType&&0===this.channels.length)return null;if(this.isChatViewType&&""!==this.searchQuery)return null;if(this.isChatViewType&&!this.selectedChannelId)return null;if("everyone"===this.chatRecipientId){if(!this.canSendTextMessage&&!this.canSendFiles)return null}else if(!this.canSendPrivateTexts&&!this.canSendPrivateFiles)return null;const s={iconPack:this.iconPack,t:this.t,size:this.size},a=this.editingMessage?this.editingMessage.message:"",r=this.replyMessage?this.replyMessage.message:"";return m("dyte-chat-composer-view",Object.assign({message:a,storageKey:null!==(t=this.selectedChannelId)&&void 0!==t?t:`draft-${this.selectedChannelId}`,quotedMessage:r,isEditing:!!this.editingMessage,canSendTextMessage:this.isTextMessagingAllowed(),canSendFiles:this.isFileMessagingAllowed(),disableEmojiPicker:!!(null===(i=null===(e=this.meeting)||void 0===e?void 0:e.__internals__)||void 0===i?void 0:i.features.hasFeature(Ps)),maxLength:this.meeting.chat.maxTextLimit,rateLimits:this.meeting.chat.rateLimits,inputTextPlaceholder:this.t("chat.message_placeholder"),onNewMessage:this.onNewMessageHandler,onEditMessage:this.onEditMessageHandler,onEditCancel:this.onEditCancel,onQuotedMessageDismiss:this.onQuotedMessageDismiss},s),m("slot",{name:"chat-addon",slot:"chat-addon"}))}renderFullChat(){if(this.creatingChannel)return m("div",{class:"banner"},m("dyte-spinner",{size:"lg"}));if(0===this.channels.length||!this.selectedChannelId)return m("div",{class:"banner"},m("dyte-icon",{icon:this.iconPack.create_channel_illustration,iconPack:this.iconPack,t:this.t,slot:"start",class:"create-channel-illustration"}),m("dyte-button",{iconPack:this.iconPack,t:this.t,kind:"wide",variant:"primary",size:"md",onClick:this.onChannelCreateClicked,class:"welcome-new-channel"},m("dyte-icon",{icon:this.iconPack.add,iconPack:this.iconPack,t:this.t,slot:"start"}),m("span",null,this.t("chat.new_channel"))),("mobile"===this.selectorState||"hide"===this.selectorState)&&m("dyte-button",{kind:"button",variant:"secondary",size:"md",class:"view-chats-btn",onClick:()=>{this.selectorState="mobile"}},m("dyte-icon",{icon:this.iconPack.chat,slot:"start"}),m("span",null,this.t("chat.view_chats"))));const t=this.channels.find((t=>t.id===this.selectedChannelId));return m("div",{class:"chat"},m("dyte-channel-header",{slot:"header",meeting:this.meeting,channel:t,onSearch:this.onSearchHandler,onSearchDismissed:this.onSearchDismissed,showBackButton:"mobile"===this.selectorState||"hide"===this.selectorState,onBack:()=>{this.selectorState="mobile"}}),""!==this.searchQuery&&m("dyte-chat-search-results",{meeting:this.meeting,query:this.searchQuery,channelId:this.selectedChannelId}),""===this.searchQuery&&m("dyte-chat-messages-ui-paginated",{meeting:this.meeting,size:this.size,iconPack:this.iconPack,t:this.t,selectedChannelId:this.selectedChannelId,selectedChannel:t}))}render(){var t,e;if(!this.meeting)return null;const i={iconPack:this.iconPack,t:this.t,size:this.size},s=null===(t=this.meeting)||void 0===t?void 0:t.self.userId;let a=this.chatGroups[this.selectedGroup]||[];return this.showPinnedMessages&&0!==this.meeting.chat.pinned.length&&(a=a.filter((t=>"chat"===t.type&&t.message.pinned))),m(f,null,this.isChatViewType&&this.renderHeadlessComponents(),m("div",{class:"chat-container"},this.isChatViewType&&m("div",{class:{"selector-container":!0,[this.selectorState]:!0}},m("dyte-channel-selector-view",{channels:this.getChannelItems(),selectedChannelId:this.selectedChannelId,onChannelChange:this.onChannelChanged,t:this.t},m("div",{class:"channel-selector-header",slot:"header"},m("dyte-logo",{meeting:this.meeting,config:this.config,t:this.t}),m("dyte-tooltip",{label:this.t("chat.new_channel"),iconPack:this.iconPack,t:this.t},m("dyte-button",{iconPack:this.iconPack,t:this.t,kind:"button",variant:"ghost",size:"md",onClick:this.onChannelCreateClicked,class:"channel-create-btn"},m("dyte-icon",{icon:this.iconPack.add,iconPack:this.iconPack,t:this.t}))))),m("dyte-button",{kind:"icon",variant:"ghost",class:"mobile-close-btn",onClick:()=>this.selectorState="hide"},m("dyte-icon",{icon:this.iconPack.dismiss}))),m("div",{class:"chat"},this.isFileMessagingAllowed()&&m("div",{id:"dropzone",class:{active:this.dropzoneActivated},part:"dropzone"},m("dyte-icon",{icon:this.iconPack.attach,iconPack:this.iconPack,t:this.t}),m("p",null,this.t("chat.send_attachment"))),this.renderPinnedMessagesHeader(),this.isPrivateChatSupported()&&m("dyte-channel-selector-view",{channels:this.getPrivateChatRecipients(),selectedChannelId:(null===(e=this.selectedParticipant)||void 0===e?void 0:e.userId)||"everyone",onChannelChange:this.updateRecipients,t:this.t,viewAs:"dropdown"}),this.isChatViewType?this.renderFullChat():this.usePaginatedChat()?m("dyte-chat-messages-ui-paginated",{meeting:this.meeting,onPinMessage:this.onPinMessage,onDeleteMessage:this.onDeleteMessage,size:this.size,iconPack:this.iconPack,t:this.t}):m("dyte-chat-messages-ui",Object.assign({messages:a,selfUserId:s,selectedGroup:this.selectedGroup,onPinMessage:this.onPinMessage,canPinMessages:this.canPinMessages},i)),this.renderComposerUI())))}get host(){return x(this)}static get watchers(){return{meeting:["meetingChanged"],chatGroups:["chatGroupsChanged"],displayFilter:["onDisplayFilterChanged"]}}};En.style=":host {\n  line-height: initial;\n  font-family: var(--dyte-font-family, sans-serif);\n\n  font-feature-settings: normal;\n  font-variation-settings: normal;\n}\n\np {\n  margin: var(--dyte-space-0, 0px);\n  padding: var(--dyte-space-0, 0px);\n}\n\n.scrollbar {\n  /* For Firefox */\n  scrollbar-width: thin;\n  scrollbar-color: var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))\n    var(--dyte-scrollbar-background, transparent);\n}\n\n/* For WebKit */\n.scrollbar::-webkit-scrollbar {\n  height: var(--dyte-space-1\\.5, 6px);\n  width: var(--dyte-space-1\\.5, 6px);\n  border-radius: 9999px;\n  background-color: var(--dyte-scrollbar-background, transparent);\n}\n\n.scrollbar::-webkit-scrollbar-thumb {\n  border-radius: 9999px;\n  background-color: var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)));\n}\n\n\n:host {\n  display: flex;\n  height: 100%;\n  width: 100%;\n  flex-direction: column;\n  font-size: 14px;\n  position: relative;\n  color: rgb(var(--dyte-colors-text-1000, 255 255 255));\n}\n\nh3 {\n  margin: var(--dyte-space-0, 0px);\n  display: flex;\n  height: var(--dyte-space-12, 48px);\n  align-items: center;\n  justify-content: center;\n  font-size: 16px;\n  font-weight: 400;\n  color: rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));\n  text-align: center;\n}\n\n#dropzone {\n  position: absolute;\n  top: var(--dyte-space-0, 0px);\n  right: var(--dyte-space-0, 0px);\n  bottom: var(--dyte-space-0, 0px);\n  left: var(--dyte-space-0, 0px);\n  z-index: 10;\n  display: none;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  --tw-bg-opacity: 1;\n  background-color: rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));\n  color: rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));\n}\n\n#dropzone.active {\n  display: flex;\n  animation: 0.2s slide-up ease-in;\n}\n\ndyte-chat-messages-ui,\ndyte-chat-messages-ui-paginated {\n  flex: 1 0 0;\n}\n\ndyte-chat-composer-view {\n  margin: var(--dyte-space-2, 8px);\n}\n\n.chat-container {\n  display: flex;\n  height: 100%;\n  width: 100%;\n  flex-direction: row;\n  container-type: size;\n  container-name: chatcontainer;\n}\n\n@container chatcontainer (height < 360px) {\n  dyte-channel-selector-view {\n    height: var(--dyte-space-8, 32px);\n    min-height: 24px;\n  }\n}\n\n.chat {\n  display: flex;\n  flex: 1 1 0%;\n  flex-direction: column;\n}\n\n.banner {\n  height: 100%;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n}\n\n.banner .welcome-new-channel {\n  width: var(--dyte-space-48, 192px);\n}\n\n.banner .create-channel-illustration {\n  height: var(--dyte-space-40, 160px);\n  width: var(--dyte-space-40, 160px);\n}\n\n.channel-selector-header {\n  box-sizing: border-box;\n  height: var(--dyte-space-16, 64px);\n  padding: var(--dyte-space-4, 16px);\n  display: flex;\n  justify-content: space-between;\n  border-bottom: var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-700, 44 44 44));\n}\n\n.channel-selector-header .channel-create-btn {\n  width: var(--dyte-space-8, 32px);\n  justify-content: center;\n}\n\n.channel-selector-header .channel-create-btn:hover {\n  --tw-text-opacity: 1;\n  color: rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity));\n}\n\n.view-chats-btn {\n  margin-top: var(--dyte-space-4, 16px);\n}\n\n.selector-container {\n  z-index: 50;\n  width: 100%;\n  max-width: var(--dyte-space-80, 320px);\n  border-right: var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60));\n}\n\n.selector-container.hide {\n  display: none;\n}\n\n.mobile-close-btn {\n  display: none;\n}\n\n.selector-container.mobile {\n  height: 100%;\n  width: 100%;\n  max-width: 100%;\n  position: absolute;\n  top: var(--dyte-space-0, 0px);\n  right: var(--dyte-space-0, 0px);\n  bottom: var(--dyte-space-0, 0px);\n  left: var(--dyte-space-0, 0px);\n  background-color: rgba(var(--dyte-colors-background-1000, 8 8 8) / 0.6);\n  display: flex;\n}\n\n.selector-container.mobile dyte-channel-selector-view {\n  max-width: var(--dyte-space-96, 384px);\n    animation: 0.3s swipe-in;\n}\n\n.selector-container.mobile .mobile-close-btn {\n  margin-top: var(--dyte-space-4, 16px);\n  margin-bottom: var(--dyte-space-4, 16px);\n  margin-left: var(--dyte-space-6, 24px);\n  margin-right: var(--dyte-space-6, 24px);\n  display: block;\n}\n\n.pinned-messages-header {\n  display: flex;\n  align-items: center;\n  gap: var(--dyte-space-2, 8px);\n  padding: var(--dyte-space-2, 8px);\n  --tw-bg-opacity: 1;\n  background-color: rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));\n  font-size: 12px;\n  cursor: pointer;\n}\n\n.pinned-messages-header dyte-icon {\n  height: var(--dyte-space-3, 12px);\n  width: var(--dyte-space-3, 12px);\n}\n\n.pinned-messages-header:hover {\n  --tw-bg-opacity: 1;\n  background-color: rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));\n}\n\n.pinned-messages-header.active {\n  --tw-bg-opacity: 1;\n  background-color: rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));\n}\n\n@keyframes swipe-in {\n  from {\n    transform: translateX(-100%);\n  }\n  to {\n    transform: translateX(0);\n  }\n}\n";var An=Object.freeze({__proto__:null,dyte_chat:En});const Mn="@",Rn=class{constructor(t){vt(this,t),this.onNewMessage=k(this,"dyteNewMessage",7),this.onEditMessage=k(this,"dyteEditMessage",7),this.onEditCancelled=k(this,"dyteEditCancelled",7),this.fileReader=new FileReader,this.fileToUpload=null,this.handleKeyDown=t=>{if(t.key===Mn&&[void 0," "].includes(this.$textArea.value.at(-1))&&(this.mentionQuery=Mn),"ArrowDown"===t.key&&(this.focusedMemberIndex=Math.min(this.focusedMemberIndex+1,this.getFilteredMembers().length-1)),"ArrowUp"===t.key&&(this.focusedMemberIndex=Math.max(0,this.focusedMemberIndex-1)),("Escape"===t.key||"Backspace"===t.key&&this.mentionQuery===Mn)&&(this.mentionQuery=""),["Enter","Tab"," "].includes(t.key)&&""!==this.mentionQuery){const e=this.getFilteredMembers()[this.focusedMemberIndex];return this.onMemberSelect(e),void t.preventDefault()}if("Enter"===t.key&&t.shiftKey){this.$textArea.clientHeight<200&&(this.$textArea.style.height=this.$textArea.clientHeight+20+"px")}else"Enter"===t.key?(t.preventDefault(),this.prefill.editMessage?this.handleEditMessage():this.handleSendMessage()):"Backspace"===t.key&&(this.$textArea.value.endsWith("\n")?this.$textArea.style.height=this.$textArea.clientHeight-20+"px":""===this.$textArea.value&&(this.$textArea.style.height="auto"))},this.handleKeyUp=t=>{if(""!==this.mentionQuery){const t=gn(this.$textArea.value.trim()),e=t.substring(0,t.indexOf(Mn));this.mentionQuery=`${Mn}${gn(e)}`}},this.onPaste=t=>{const e=t.clipboardData||t.originalEvent.clipboardData;It((()=>{e&&e.items&&e.items.length>0&&(dn(e.items,this.generateFilePreview),this.$textArea.value="")}))},this.generateFilePreview=(t,e)=>{this.fileToUpload={type:t,image:e,file:e},"image"===t?this.fileReader.readAsDataURL(e):"file"===t&&(this.filePreview=e.name)},this.sendFile=()=>{this.canSendFiles&&("image"===this.fileToUpload.type?this.onNewMessage.emit({type:"image",file:this.fileToUpload.image,image:this.fileToUpload.image}):this.onNewMessage.emit({type:"file",file:this.fileToUpload.file}),this.cleanUpFileUpload())},this.handleSendMessage=()=>{if(!this.canSendTextMessage)return;if(null!==this.fileToUpload)return void this.sendFile();const t=this.$textArea.value.trim();t.length>0&&(this.prefill.replyMessage?this.onNewMessage.emit({type:"text",message:t,replyTo:this.prefill.replyMessage}):this.onNewMessage.emit({type:"text",message:t}),this.cleanup())},this.cleanup=()=>{this.mentionQuery="",this.focusedMemberIndex=0,this.$textArea.value="",this.$textArea.style.height="auto",gs.setItem(this.storageKey,"")},this.handleEditMessage=()=>{var t;let e=this.$textArea.value.trim();if((null===(t=this.prefill.editMessage)||void 0===t?void 0:t.message)&&yn.test(this.prefill.editMessage.message)){e=`${bn(this.prefill.editMessage.message)}\n\n${e}`}this.onEditMessage.emit({id:this.prefill.editMessage.id,message:e,channelId:this.prefill.editMessage.channelId}),this.cleanup()},this.handleEditCancel=()=>{this.onEditCancelled.emit(),this.cleanup()},this.initializeTextField=t=>{this.$textArea=t;const e=gs.getItem(this.storageKey)||"";this.$textArea.value=e},this.onMemberSelect=t=>{const e=gn(this.mentionQuery),i=gn(this.$textArea.value.trim()).replace(e,"");this.$textArea.value=gn(i)+`${Mn}${t.name} `,this.mentionQuery="",this.focusedMemberIndex=0,It((()=>this.$textArea.focus()))},this.getFilteredMembers=()=>{const t=this.mentionQuery.replace(Mn,"");return this.members.filter((e=>e.name.toLowerCase().includes(t.toLowerCase())))},this.cleanUpFileUpload=()=>{this.filePreview=null,this.fileToUpload=null},this.renderSuggestedReplies=()=>{if(this.prefill.suggestedReplies&&0!==this.prefill.suggestedReplies.length)return m("ul",{class:"suggested-replies scrollbar"},this.prefill.suggestedReplies.map((t=>m("dyte-tooltip",{label:this.t("chat.click_to_send")},m("li",{onClick:()=>this.onNewMessage.emit({type:"text",message:t})},t)))))},this.renderMenu=()=>{if(0===this.mentionQuery.length)return;const t=this.getFilteredMembers();return 0!==t.length?m("ul",{class:"member-list scrollbar"},t.map(((t,e)=>m("li",{class:{member:!0,selected:e===this.focusedMemberIndex},onClick:()=>this.onMemberSelect(t),ref:t=>{e===this.focusedMemberIndex&&It((()=>{t&&t.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})}))}},m("dyte-avatar",{participant:{name:t.name,picture:t.picture},size:"sm"}),m("span",null,t.name))))):void 0},this.canSendTextMessage=!1,this.canSendFiles=!1,this.size=void 0,this.iconPack=ts,this.t=ns(),this.disableEmojiPicker=!1,this.prefill={},this.members=[],this.channelId=void 0,this.emojiPickerActive=!1,this.mentionQuery="",this.focusedMemberIndex=0,this.filePreview=null}connectedCallback(){this.fileReader.onload=t=>{"string"==typeof t.target.result&&(this.filePreview=t.target.result)}}onChannelChanged(){this.mentionQuery="",this.focusedMemberIndex=0;const t=gs.getItem(this.storageKey)||"";this.$textArea.value=t,this.emojiPickerActive=!1}componentDidRender(){(this.prefill.editMessage||this.prefill.replyMessage)&&It((()=>this.$textArea.focus()))}get storageKey(){return this.channelId?`dyte-text-message-${this.channelId}`:"dyte-text-message"}uploadFile(t){const e=document.createElement("input");e.type="file","image"===t&&(e.accept="image/*"),e.onchange=e=>{const{validity:i,files:[s]}=e.target;i.valid&&this.generateFilePreview(t,s)},e.click()}renderFilePreview(){if("string"==typeof this.filePreview)return m("div",{class:"preview-overlay"},m("div",{class:"file-preview"},m("dyte-tooltip",{label:this.t("chat.cancel_upload")},m("dyte-button",{variant:"secondary",kind:"icon",onClick:this.cleanUpFileUpload},m("dyte-icon",{icon:this.iconPack.dismiss}))),"image"===this.fileToUpload.type?m("img",{class:"preview-image",src:this.filePreview}):m("div",{class:"preview-file"},m("span",null,this.filePreview))))}render(){var t;const e={iconPack:this.iconPack,t:this.t,size:this.size};let i="";return(null===(t=this.prefill.editMessage)||void 0===t?void 0:t.message)&&(i=wn(this.prefill.editMessage.message)),m(f,null,this.canSendTextMessage&&this.emojiPickerActive&&m("dyte-emoji-picker",{part:"emoji-picker",onPickerClose:()=>{this.emojiPickerActive=!1},onDyteEmojiClicked:t=>{this.$textArea.value+=t.detail,this.$textArea.focus()},t:this.t}),this.renderSuggestedReplies(),m("slot",{name:"chat-addon"}),m("slot",{name:"quote-block"}),m("div",{class:"chat-input",part:"chat-input"},this.renderMenu(),this.canSendTextMessage&&m("textarea",{class:"scrollbar",part:"textarea",ref:this.initializeTextField,autoFocus:!0,placeholder:this.fileToUpload?"":this.t("chat.message_placeholder"),value:i,onPaste:this.onPaste,maxLength:xn,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,onInput:t=>{gs.setItem(this.storageKey,t.target.value)},disabled:!!this.filePreview}),m("div",{class:"chat-buttons",part:"chat-buttons"},m("div",{class:"left",part:"chat-buttons-left"},!this.prefill.editMessage&&this.canSendFiles&&[m("dyte-tooltip",Object.assign({label:this.t("chat.send_file")},e),m("dyte-button",{variant:"ghost",kind:"icon",onClick:()=>this.uploadFile("file"),title:this.t("chat.send_file"),iconPack:this.iconPack,t:this.t},m("dyte-icon",{icon:this.iconPack.attach}))),m("dyte-tooltip",Object.assign({label:this.t("chat.send_img")},e),m("dyte-button",{variant:"ghost",kind:"icon",onClick:()=>this.uploadFile("image"),title:this.t("chat.send_img"),iconPack:this.iconPack,t:this.t},m("dyte-icon",{icon:this.iconPack.image})))],!this.prefill.editMessage&&this.canSendTextMessage&&!this.disableEmojiPicker&&m("dyte-tooltip",Object.assign({label:this.t("chat.send_emoji")},e),m("dyte-button",{variant:"ghost",kind:"icon",class:{active:this.emojiPickerActive},title:this.t("chat.send_emoji"),iconPack:this.iconPack,t:this.t,onClick:()=>{this.emojiPickerActive=!this.emojiPickerActive}},m("dyte-icon",{icon:this.iconPack.emoji_multiple})))),!!this.filePreview&&this.renderFilePreview(),this.canSendTextMessage&&m("div",{class:"right",part:"chat-buttons-right"},!this.prefill.editMessage&&m("dyte-tooltip",Object.assign({variant:"primary",label:this.t("chat.send_msg"),delay:2e3},e),m("dyte-button",{kind:"icon",onClick:()=>this.handleSendMessage(),title:this.t("chat.send_msg"),iconPack:this.iconPack,t:this.t},m("dyte-icon",{icon:this.iconPack.send}))),this.prefill.editMessage&&m("div",{class:"edit-buttons"},m("dyte-tooltip",Object.assign({variant:"secondary",label:this.t("cancel"),delay:2e3},e),m("dyte-button",{kind:"icon",variant:"secondary",onClick:()=>this.handleEditCancel(),title:this.t("cancel"),iconPack:this.iconPack,t:this.t},m("dyte-icon",{icon:this.iconPack.dismiss}))),m("dyte-tooltip",Object.assign({variant:"primary",label:this.t("chat.update_msg"),delay:2e3},e),m("dyte-button",{kind:"icon",onClick:()=>this.handleEditMessage(),title:this.t("chat.send_msg"),iconPack:this.iconPack,t:this.t},m("dyte-icon",{icon:this.iconPack.checkmark}))))))))}static get watchers(){return{channelId:["onChannelChanged"]}}};Rn.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))\n    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{display:flex;flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity))}.chat-input{position:relative;margin:var(--dyte-space-2, 8px);z-index:10;box-sizing:border-box;display:flex;flex-direction:column;border-radius:var(--dyte-border-radius-md, 8px);border:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60))}textarea{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));box-sizing:border-box;padding:var(--dyte-space-3, 12px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}textarea::-moz-placeholder{color:rgb(var(--dyte-colors-text-1000, 255 255 255))}textarea::placeholder{color:rgb(var(--dyte-colors-text-1000, 255 255 255))}textarea{border-top-left-radius:var(--dyte-border-radius-md, 8px);border-top-right-radius:var(--dyte-border-radius-md, 8px);font-family:var(--dyte-font-family, sans-serif);outline:2px solid transparent;outline-offset:2px;resize:none;overflow-y:auto;border-width:var(--dyte-border-width-none, 0);border-style:none;min-height:60px;font-size:14px}.chat-buttons{border-bottom-right-radius:var(--dyte-border-radius-md, 8px);border-bottom-left-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));display:flex;height:var(--dyte-space-8, 32px);align-items:center;justify-content:space-between;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px)}.chat-buttons .left dyte-button{margin-right:var(--dyte-space-1, 4px)}.chat-buttons .left dyte-button dyte-icon{height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}.chat-buttons .right{z-index:10}.chat-buttons .right .edit-buttons{display:flex;gap:var(--dyte-space-2, 8px)}.chat-buttons>div{display:flex;align-items:center}dyte-emoji-picker{z-index:0;position:absolute;bottom:var(--dyte-space-32, 128px);border-top:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60));animation:0.3s slide-up ease}@keyframes slide-up{from{transform:translateY(100%)}to{transform:translateY(0%)}}.member-list{margin:var(--dyte-space-0, 0px);margin-top:var(--dyte-space-1, 4px);max-height:var(--dyte-space-28, 112px);min-width:var(--dyte-space-40, 160px);max-width:var(--dyte-space-64, 256px);padding:var(--dyte-space-0, 0px);position:absolute;bottom:var(--dyte-space-28, 112px);list-style-type:none;overflow-y:auto;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));border-radius:var(--dyte-border-radius-sm, 4px);--tw-border-spacing-x:var(--dyte-space-2, 8px);--tw-border-spacing-y:var(--dyte-space-2, 8px);border-spacing:var(--tw-border-spacing-x) var(--tw-border-spacing-y);border-style:solid;border-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / 0.5)}.member-list .member{display:flex;align-items:center;gap:var(--dyte-space-1, 4px);padding:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-4, 16px);cursor:pointer}.member-list .member dyte-avatar{flex-shrink:0;height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);font-size:14px;color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.member-list .member span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.member-list .member:hover,.member-list .member.selected{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-700, 2 70 253) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.suggested-replies{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-3, 12px);display:flex;flex-wrap:nowrap;gap:var(--dyte-space-2, 8px);list-style-type:none;overflow-x:auto}.suggested-replies dyte-tooltip{flex-shrink:0}.suggested-replies li{padding:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-md, 8px);background-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / 0.75);color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)));cursor:pointer}.suggested-replies li:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-bg-opacity))}.preview-overlay{position:absolute;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));border-radius:var(--dyte-border-radius-md, 8px)}.file-preview{position:absolute;top:var(--dyte-space-4, 16px);left:var(--dyte-space-4, 16px);max-width:-moz-fit-content;max-width:fit-content;max-height:var(--dyte-space-20, 80px)}.file-preview:hover dyte-tooltip{display:block}.file-preview dyte-tooltip{position:absolute;top:calc(var(--dyte-space-1, 4px) * -1);left:calc(var(--dyte-space-1, 4px) * -1);display:none;margin-left:calc(var(--dyte-space-1, 4px) * -1);margin-top:calc(var(--dyte-space-1, 4px) * -1)}.file-preview dyte-button{display:flex;height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);align-items:center;justify-content:center;border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));border:1px solid rgb(var(--dyte-colors-text-1000, 255 255 255))}.file-preview dyte-icon{height:var(--dyte-space-3, 12px);width:var(--dyte-space-3, 12px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.preview-image{height:var(--dyte-space-16, 64px);width:var(--dyte-space-16, 64px);-o-object-fit:cover;object-fit:cover;max-height:100%;max-width:100%;overflow:clip;border-radius:var(--dyte-border-radius-md, 8px)}.preview-file{padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));overflow:hidden;text-overflow:ellipsis;white-space:nowrap;border-radius:var(--dyte-border-radius-md, 8px);max-width:200px}@keyframes scroll-text{0%{transform:translateX(0%)}70%{transform:translateX(-100%)}80%{transform:translateX(0%)}100%{transform:translateX(0%)}}";var Dn=Object.freeze({__proto__:null,dyte_chat_composer_ui:Rn});const In=class{constructor(t){vt(this,t),this.groupChanged=k(this,"dyteChatGroupChanged",7),this.onScopeClick=t=>{this.showParticipantsPanel=!1,this.groupChanged.emit(t)},this.selfUserId=void 0,this.selectedGroupId=void 0,this.unreadCounts={},this.groups=[],this.iconPack=ts,this.t=ns(),this.showParticipantsPanel=!1,this.query=""}toggleParticipants(){this.showParticipantsPanel=!this.showParticipantsPanel}getGroups(){return this.groups.filter((t=>t.name.toLowerCase().includes(this.query.toLowerCase())))}getName(){if(!this.selectedGroupId||"everyone"===this.selectedGroupId)return this.t("everyone");const t=this.groups.find((t=>t.userId===this.selectedGroupId));return t?t.name:this.t("everyone")}render(){const t=Object.keys(this.unreadCounts).reduce(((t,e)=>t+this.unreadCounts[e]),0);return m(f,null,m("div",{class:"chat-scope-selector"},this.showParticipantsPanel&&m("div",{class:"participants-container"},m("div",{class:"search",part:"search"},m("dyte-icon",{icon:this.iconPack.search,part:"search-icon"}),m("input",{type:"search",autocomplete:"off",placeholder:this.t("search"),value:this.query,onInput:t=>{this.query=t.target.value},part:"search-input"})),m("ul",{class:"scope-list scrollbar"},""===this.query&&m("li",{class:"scope scope-special",onClick:()=>this.onScopeClick("everyone")},m("div",{class:"everyone-icon"},m("dyte-icon",{icon:this.iconPack.participants})),this.t("everyone"),this.unreadCounts.everyone>0&&m("div",{class:"unread-count",part:"unread-count"},m("span",null,this.unreadCounts.everyone))),this.getGroups().map((t=>{const e=this.unreadCounts[ln([this.selfUserId,t.userId])];return m("li",{class:"scope",onClick:()=>this.onScopeClick(t),key:t.userId},t.name,e>0&&m("div",{class:"unread-count",part:"unread-count"},m("span",null,e)))})))),m("button",{onClick:()=>this.toggleParticipants()},m("span",null,`${this.t("to")} ${this.getName()}`,"  ",t>0&&m("div",{class:"unread-count selector"},m("span",null,t))),m("dyte-icon",{icon:this.showParticipantsPanel?this.iconPack.chevron_up:this.iconPack.chevron_down}))))}};In.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))\n    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{display:flex;flex-direction:column}.chat-scope-selector{position:relative;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));z-index:10}.chat-scope-selector button{width:100%;border-width:var(--dyte-border-width-none, 0);border-style:none;padding:var(--dyte-space-4, 16px);display:flex;align-items:center;justify-content:space-between;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));font-size:14px;cursor:pointer;height:var(--dyte-space-12, 48px)}.chat-scope-selector button span{display:flex;align-items:center;justify-content:flex-start}.chat-scope-selector button dyte-icon{height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}.chat-scope-selector .search{position:sticky;box-sizing:border-box;display:flex;align-items:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));margin-left:var(--dyte-space-3, 12px);margin-right:var(--dyte-space-3, 12px);margin-top:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-0, 0px)}.chat-scope-selector .search dyte-icon{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.chat-scope-selector .search input{box-sizing:border-box;height:var(--dyte-space-9, 36px);width:100%;padding-right:var(--dyte-space-2, 8px);border-width:var(--dyte-border-width-none, 0);border-style:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));outline:2px solid transparent;outline-offset:2px;border-radius:var(--dyte-border-radius-sm, 4px);font-size:14px}.chat-scope-selector .search input::-moz-placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.chat-scope-selector .search input::placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.chat-scope-selector .participants-container{position:absolute;width:100%;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));top:var(--dyte-space-12, 48px);animation:0.3s slide-down ease}@keyframes slide-down{from{transform:translateY(-50px)}to{transform:translateY(0%)}}.chat-scope-selector .scope-list{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-0, 0px);list-style-type:none;padding-left:var(--dyte-space-0, 0px);padding-right:var(--dyte-space-0, 0px);overflow:auto;max-height:375px}.chat-scope-selector .scope-list .scope{position:relative;display:flex;flex-direction:row;align-items:center;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-4, 16px);padding-bottom:var(--dyte-space-4, 16px)}.chat-scope-selector .scope-list .scope:hover{cursor:pointer;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}.chat-scope-selector .scope-list .scope-special{margin-top:var(--dyte-space-4, 16px);--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}.chat-scope-selector .scope-list .everyone-icon>dyte-icon{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px);color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.chat-scope-selector .scope-list .everyone-icon{display:flex;height:100%;width:100%;align-items:center;justify-content:center;margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));font-size:12px}.unread-count.selector{position:unset;margin-left:var(--dyte-space-2, 8px)}.unread-count{position:absolute;right:var(--dyte-space-3, 12px);box-sizing:border-box;padding:var(--dyte-space-0\\.5, 2px);-webkit-user-select:none;-moz-user-select:none;user-select:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));font-size:12px;color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)));display:flex;height:var(--dyte-space-5, 20px);min-width:var(--dyte-space-5, 20px);align-items:center;justify-content:center;border-radius:9999px;z-index:1}dyte-avatar{height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px)}";var On=Object.freeze({__proto__:null,dyte_chat_selector_ui:In});const $n=t=>{if(t&&!t.chat)return!1;const e=null==t?void 0:t.self.config;if(e&&!e.controlBar.elements.chat)return!1;const{chatPublic:i,chatPrivate:s}=t.self.permissions;return i.canSend||i.canReceive||i.text||i.files||s.canSend||s.canReceive||s.files||s.text},Un=t=>{if(t&&!t.polls)return!1;const e=null==t?void 0:t.self.config;if(e&&!e.controlBar.elements.polls)return!1;const{polls:i}=t.self.permissions;return i.canCreate||i.canView||i.canVote},Fn=t=>{var e;if(!(null===(e=t.self.permissions)||void 0===e?void 0:e.showParticipantList))return!1;if(t&&!t.participants)return!1;const i=null==t?void 0:t.self.config;return!(i&&!i.controlBar.elements.participants)},zn=t=>{if(vi(t))return!1;if(t&&!t.plugins)return!1;if("LIVESTREAM"===t.meta.viewType)return"ON_STAGE"===t.stage.status;const e=null==t?void 0:t.self.config;if(e&&!e.controlBar.elements.plugins)return!1;const{plugins:i}=t.self.permissions;return i.canClose||i.canStart},Nn=class{constructor(t){vt(this,t),this.stateUpdate=k(this,"dyteStateUpdate",7),this.onChatUpdate=({action:t,message:e})=>{var i;this.chatActive||"add"===t&&e.userId!==(null===(i=this.meeting)||void 0===i?void 0:i.self.userId)&&(this.hasNewMessages=!0,this.unreadMessageCount+=1)},this.toggleChat=()=>{const t=this.states||Ss;this.chatActive=!((null==t?void 0:t.activeSidebar)&&"chat"===(null==t?void 0:t.sidebar)),this.chatActive&&(this.unreadMessageCount=0,this.hasNewMessages=!1),Ss.activeSidebar=this.chatActive,Ss.activeMoreMenu=!1,Ss.sidebar=this.chatActive?"chat":void 0,Ss.activeAI=!1,this.stateUpdate.emit({activeSidebar:this.chatActive,sidebar:this.chatActive?"chat":void 0,activeMoreMenu:!1,activeAI:!1})},this.updateCanView=()=>{this.canViewChat=$n(this.meeting)},this.unreadMessageCount=0,this.variant="button",this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=ts,this.t=ns(),this.chatActive=!1,this.canViewChat=!1,this.hasNewMessages=!1}connectedCallback(){this.meetingChanged(this.meeting),this.statesChanged(this.states),this.removeStateChangeListener=_s("sidebar",(()=>this.statesChanged()))}disconnectedCallback(){var t,e,i,s,a,r;this.removeStateChangeListener&&this.removeStateChangeListener(),null===(e=null===(t=this.meeting)||void 0===t?void 0:t.chat)||void 0===e||e.removeListener("chatUpdate",this.onChatUpdate),null===(s=null===(i=this.meeting)||void 0===i?void 0:i.stage)||void 0===s||s.removeListener("stageStatusUpdate",this.updateCanView),null===(r=null===(a=this.meeting)||void 0===a?void 0:a.self)||void 0===r||r.permissions.removeListener("chatUpdate",this.updateCanView)}meetingChanged(t){var e,i,s,a,r,n,o;if(null==t)return;Ms(t)&&(null===(e=t.chat)||void 0===e||e.getMessages((new Date).getTime(),1,!0).then((t=>{var e;(null===(e=null==t?void 0:t.messages)||void 0===e?void 0:e.length)&&(this.hasNewMessages=!0)})));const l=null!==(s=null===(i=t.meta)||void 0===i?void 0:i.meetingStartedTimestamp.getTime())&&void 0!==s?s:0,d=null===(a=t.chat)||void 0===a?void 0:a.messages.filter((t=>t.timeMs>l));this.unreadMessageCount=d.length||0,null===(r=t.chat)||void 0===r||r.addListener("chatUpdate",this.onChatUpdate),this.canViewChat=$n(t),null===(n=null==t?void 0:t.stage)||void 0===n||n.on("stageStatusUpdate",this.updateCanView),null===(o=null==t?void 0:t.self)||void 0===o||o.permissions.on("chatUpdate",this.updateCanView)}statesChanged(t){const e=t||Ss;null!=e&&(this.chatActive=!0===e.activeSidebar&&"chat"===e.sidebar)}render(){if(this.canViewChat)return m(f,{title:this.t("chat")},Ms(this.meeting)?this.hasNewMessages&&m("div",{class:"unread-count-dot",part:"unread-count-dot"}):0!==this.unreadMessageCount&&!this.chatActive&&m("div",{class:"unread-count",part:"unread-count"},m("span",null,this.unreadMessageCount<=100?this.unreadMessageCount:"99+")),m("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,class:{active:this.chatActive},onClick:this.toggleChat,icon:this.iconPack.chat,label:this.t("chat"),variant:this.variant}))}static get watchers(){return{meeting:["meetingChanged"],states:["statesChanged"]}}};Nn.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:block}.unread-count{position:absolute;right:var(--dyte-space-3, 12px);box-sizing:border-box;padding:var(--dyte-space-0\\.5, 2px);-webkit-user-select:none;-moz-user-select:none;user-select:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));font-size:12px;color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)));display:flex;height:var(--dyte-space-5, 20px);min-width:var(--dyte-space-5, 20px);align-items:center;justify-content:center;border-radius:9999px;z-index:1}.unread-count-dot{position:absolute;right:var(--dyte-space-3, 12px);z-index:10;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));border-radius:50%;display:flex;height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);align-items:center;justify-content:center}:host([variant='horizontal']){display:flex;flex-direction:row-reverse;align-items:center}:host([variant='horizontal']) .unread-count{right:var(--dyte-space-4, 16px);top:auto}";var jn=Object.freeze({__proto__:null,dyte_chat_toggle:Nn});const Bn=t=>Math.trunc(t).toString().padStart(2,"0"),Hn=class{constructor(t){vt(this,t),this.disconnectMeeting=()=>{var t,e;this.timeout&&clearTimeout(this.timeout),"number"==typeof this.request&&cancelAnimationFrame(this.request),null===(e=null===(t=this.meeting)||void 0===t?void 0:t.meta)||void 0===e||e.removeListener("meetingStartTimeUpdate",this.startedTimeUpdateListener)},this.startedTimeUpdateListener=()=>{var t,e,i;this.startedTime=null===(i=null===(e=null===(t=this.meeting)||void 0===t?void 0:t.meta)||void 0===e?void 0:e.meetingStartedTimestamp)||void 0===i?void 0:i.toISOString()},this.meeting=void 0,this.iconPack=ts,this.t=ns(),this.startedTime=void 0,this.timeDiff=void 0}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){this.disconnectMeeting()}meetingChanged(t){var e,i,s;this.disconnectMeeting(),null!=t&&(this.startedTime=null===(i=null===(e=t.meta)||void 0===e?void 0:e.meetingStartedTimestamp)||void 0===i?void 0:i.toISOString(),null===(s=t.meta)||void 0===s||s.addListener("meetingStartTimeUpdate",this.startedTimeUpdateListener))}startedTimeChanged(t){if(void 0!==t){const t=()=>{this.timeDiff=(Date.now()-new Date(this.startedTime).getTime())/1e3,this.timeout=setTimeout((()=>{null!=this.request&&(this.request=requestAnimationFrame(t))}),500)};this.request=requestAnimationFrame(t)}}getFormattedTime(){if(null==this.timeDiff)return null;const t=this.timeDiff;let e="";return t>=3600&&(e=`${Bn(t/3600)}:`),e+=`${Bn(t%3600/60)}:${Bn(t%60)}`,e}render(){return m(f,{tabIndex:0,role:"timer","aria-live":"off"},void 0!==this.startedTime&&[m("dyte-icon",{icon:this.iconPack.clock,"aria-hidden":!0,tabIndex:-1,part:"icon",iconPack:this.iconPack,t:this.t}),m("span",{part:"text"},this.getFormattedTime())])}static get watchers(){return{meeting:["meetingChanged"],startedTime:["startedTimeChanged"]}}};Hn.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);display:inline-flex;align-items:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;font-size:14px;color:rgb(var(--dyte-colors-text-1000, 255 255 255));font-variant-numeric:tabular-nums}:host([size='sm']){margin-left:var(--dyte-space-1, 4px);margin-right:var(--dyte-space-1, 4px);font-size:12px}dyte-icon{margin-right:var(--dyte-space-1, 4px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}:host([size='sm']) dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}";var Vn=Object.freeze({__proto__:null,dyte_clock:Hn});const Gn=class{constructor(t){vt(this,t),this.stateUpdate=k(this,"dyteStateUpdate",7),this.keyPressListener=t=>{"Escape"===t.key&&this.close()},this.close=()=>{this.states.activeConfirmationModal.onClose(this.stateUpdate,Ss,this.meeting),this.stateUpdate.emit({activeConfirmationModal:{active:!1}}),Ss.activeConfirmationModal={active:!1}},this.onConfirmation=async()=>{this.states.activeConfirmationModal.onClick(this.stateUpdate,Ss,this.meeting),this.stateUpdate.emit({activeConfirmationModal:{active:!1}}),Ss.activeConfirmationModal={active:!1}},this.meeting=void 0,this.states=void 0,this.iconPack=ts,this.t=ns()}connectedCallback(){document.addEventListener("keydown",this.keyPressListener)}componentDidLoad(){}disconnectedCallback(){document.removeEventListener("keydown",this.keyPressListener)}render(){var t,e;const i=this.states.activeConfirmationModal;return m(f,null,m("div",{class:"leave-modal"},m("div",{class:"header"},m("h2",{class:"title"},i.header?this.t(i.header):this.t("cta.confirmation"))),m("p",{class:"message"},i.content?this.t(i.content):""),m("div",{class:"content"},m("div",{class:"leave-meeting"},m("dyte-button",{variant:"secondary",title:i.cancelText?this.t(i.cancelText):this.t("cancel"),onClick:this.close,iconPack:this.iconPack,t:this.t,class:"br-secondary-btn"},i.cancelText?this.t(i.cancelText):this.t("cancel")),m("dyte-button",{onClick:()=>this.onConfirmation(),variant:null!==(e=null===(t=this.states.activeConfirmationModal)||void 0===t?void 0:t.variant)&&void 0!==e?e:"danger",title:i.ctaText?this.t(i.ctaText):this.t("yes"),iconPack:this.iconPack,t:this.t},i.ctaText?this.t(i.ctaText):this.t("yes"))))))}};Gn.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:flex;flex-direction:column;overflow:hidden;border-radius:var(--dyte-border-radius-md, 8px);padding:var(--dyte-space-8, 32px);width:100%;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));width:400px;max-width:80%}.leave-modal{width:100%;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.leave-modal .header h2{margin:var(--dyte-space-0, 0px)}.leave-modal .content{font-size:14px}.leave-message p{margin-top:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-3, 12px)}.leave-meeting{display:flex;flex-direction:row;justify-content:space-between;gap:var(--dyte-space-4, 16px)}.leave-meeting dyte-button{color:rgb(var(--dyte-colors-text-1000, 255 255 255));flex:1 1 0%}.end-meeting{margin-top:var(--dyte-space-2, 8px)}.br-secondary-btn{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.br-secondary-btn:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}";var qn=Object.freeze({__proto__:null,dyte_confirmation_modal:Gn});const Zn=class{constructor(t){vt(this,t),this.variant="solid",this.disableRender=!1,this.meeting=void 0,this.config=$t,this.states=void 0,this.iconPack=ts,this.t=ns(),this.size=void 0}render(){const t={meeting:this.meeting,config:this.config,states:this.states,t:this.t,iconPack:this.iconPack,size:this.size};return m(f,null,!this.disableRender&&m(cs,{element:"dyte-controlbar",defaults:t,onlyChildren:!0}),m("slot",null))}};Zn.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{box-sizing:border-box;display:flex;align-items:center;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px);position:relative;z-index:10}@media only screen and (max-device-height: 480px) and (orientation: landscape){:host{padding-top:var(--dyte-space-0, 0px) !important}}";var Kn=Object.freeze({__proto__:null,dyte_controlbar:Zn});const Wn=class{constructor(t){vt(this,t),this.stateUpdate=k(this,"dyteStateUpdate",7),this.keyPressListener=t=>{"Escape"===t.key&&this.close()},this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=ts,this.t=ns(),this.activeTab="audio",this.isMobileMainVisible=!1,this.progress=0}connectedCallback(){document.addEventListener("keydown",this.keyPressListener)}disconnectedCallback(){this.keyPressListener&&document.removeEventListener("keydown",this.keyPressListener)}progressUpdate(t){this.progress=t.detail}changeTab(t){this.activeTab=t,"sm"===this.size&&(this.isMobileMainVisible||(this.isMobileMainVisible=!0))}close(){this.stateUpdate.emit({activeDebugger:!1}),Ss.activeDebugger=!1}getActiveTab(){switch(this.activeTab){case"audio":return this.t("debugger.audio.troubleshooting.label");case"screenshare":return this.t("debugger.screenshare.troubleshooting.label");case"video":return this.t("debugger.video.troubleshooting.label");case"system":return this.t("debugger.system.troubleshooting.label");default:return this.t("debugger.troubleshooting.label")}}render(){if(null==this.meeting)return null;const t={meeting:this.meeting,states:this.states||Ss,iconPack:this.iconPack,t:this.t,size:this.size},e=this.getActiveTab(),i=void 0!==navigator.getBattery;return m(f,null,m("aside",{class:{hide:this.isMobileMainVisible},part:"menu"},m("header",null,m("h3",null,this.t("debugger.troubleshooting.label"))),m("button",{type:"button",class:{active:"audio"===this.activeTab},onClick:()=>this.changeTab("audio")},this.t("debugger.audio.label"),m("div",{class:"right"},m("dyte-icon",{icon:this.iconPack.mic_on,iconPack:this.iconPack,t:this.t}),"sm"===this.size&&m("dyte-icon",{icon:this.iconPack.chevron_right,iconPack:this.iconPack,t:this.t}))),m("button",{type:"button",class:{active:"video"===this.activeTab},onClick:()=>this.changeTab("video")},this.t("debugger.video.label"),m("div",{class:"right"},m("dyte-icon",{icon:this.iconPack.video_on,iconPack:this.iconPack,t:this.t}),"sm"===this.size&&m("dyte-icon",{icon:this.iconPack.chevron_right,iconPack:this.iconPack,t:this.t}))),m("button",{type:"button",class:{active:"screenshare"===this.activeTab},onClick:()=>this.changeTab("screenshare")},this.t("debugger.screenshare.label"),m("div",{class:"right"},m("dyte-icon",{icon:this.iconPack.share_screen_start,iconPack:this.iconPack,t:this.t}),"sm"===this.size&&m("dyte-icon",{icon:this.iconPack.chevron_right,iconPack:this.iconPack,t:this.t}))),m("button",{type:"button",class:{active:"system"===this.activeTab,hidden:!i},onClick:()=>this.changeTab("system")},this.t("debugger.system.label"),m("div",{class:"right"},m("dyte-icon",{icon:this.iconPack.settings,iconPack:this.iconPack,t:this.t}),"sm"===this.size&&m("dyte-icon",{icon:this.iconPack.chevron_right,iconPack:this.iconPack,t:this.t})))),m("main",{class:{active:this.isMobileMainVisible},part:"main-content"},"sm"===this.size&&m("header",null,m("dyte-button",{kind:"icon",class:"back-btn",onClick:()=>this.isMobileMainVisible=!1,iconPack:this.iconPack,t:this.t},m("dyte-icon",{icon:this.iconPack.chevron_left,iconPack:this.iconPack,t:this.t})),m("h4",null,e)),"audio"===this.activeTab&&m("dyte-debugger-audio",Object.assign({},t)),"video"===this.activeTab&&m("dyte-debugger-video",Object.assign({},t)),"screenshare"===this.activeTab&&m("dyte-debugger-screenshare",Object.assign({},t)),"system"===this.activeTab&&i&&m("dyte-debugger-system",Object.assign({},t))))}};Wn.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))\n    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{position:relative;display:flex;overflow:hidden;border-radius:var(--dyte-border-radius-md, 8px);width:100%;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}header{margin-right:var(--dyte-space-2, 8px);display:flex;align-items:center;justify-content:space-between;padding-top:var(--dyte-space-0, 0px);padding-bottom:var(--dyte-space-0, 0px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px)}header h3{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-4, 16px)}.back-btn{border-radius:var(--dyte-border-radius-sm, 4px);background-color:transparent;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.back-btn:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}aside{box-sizing:border-box;display:flex;max-width:var(--dyte-space-56, 224px) !important;flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));padding-left:var(--dyte-space-2, 8px)}aside button{margin-top:var(--dyte-space-4, 16px);box-sizing:border-box;display:flex;width:100%;align-items:center;justify-content:space-between;border-top-left-radius:var(--dyte-border-radius-sm, 4px);border-bottom-left-radius:var(--dyte-border-radius-sm, 4px);padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px);padding-top:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-3, 12px);background-color:transparent;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));cursor:default;font-size:14px;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);border-width:var(--dyte-border-width-none, 0);border-style:none;outline:2px solid transparent;outline-offset:2px}aside button .right{display:flex;align-items:center}aside button .right dyte-icon{height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}aside button .right dyte-icon:last-child{margin-left:var(--dyte-space-4, 16px)}aside button[type='button']{cursor:pointer;transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}aside button[type='button']:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}aside button[type='button']{border-right:var(--dyte-border-width-md, 2px) solid transparent}aside button.active{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-border-opacity));background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.2)}aside button.active:hover{background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.2)}aside button.hidden{display:none}main{position:relative;box-sizing:border-box;display:flex;height:100%;width:100%;flex-direction:column}:host([size='sm']) aside{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));width:100% !important;max-width:100% !important;padding-left:var(--dyte-space-0, 0px)}:host([size='sm']) aside button{border-radius:var(--dyte-border-radius-none, 0)}:host([size='sm']) aside button.active{border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent}:host([size='sm']) aside button.active:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}:host([size='sm']) aside button.hidden{display:none}:host([size='sm']) aside.hide{display:none}aside button:host([size='sm']) aside.hide{display:none}:host([size='sm']) aside button:host([size='sm']) aside.hide{display:none}:host([size='sm']) main{display:none;height:100%;width:100%;padding:var(--dyte-space-0, 0px)}aside button:host([size='sm']) main{display:none}:host([size='sm']) aside button:host([size='sm']) main{display:none}:host([size='sm']) main.active{display:block}:host([size='sm']) header{margin:var(--dyte-space-0, 0px);justify-content:center}:host([size='sm']) header dyte-button{position:absolute;left:var(--dyte-space-4, 16px)}::-webkit-scrollbar{width:8px}::-webkit-scrollbar-track{border-radius:var(--dyte-border-radius-lg, 12px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}::-webkit-scrollbar-thumb{border-radius:var(--dyte-border-radius-lg, 12px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity))}::-webkit-scrollbar-thumb:hover{border-radius:var(--dyte-border-radius-lg, 12px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity))}.progress-bar{height:var(--dyte-space-1, 4px);width:100%;overflow:hidden;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.progress-indicator{height:100%;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity))}";var Yn=Object.freeze({__proto__:null,dyte_debugger:Wn});const Qn=class{constructor(t){vt(this,t),this.stateUpdate=k(this,"dyteStateUpdate",7),this.variant="button",this.meeting=void 0,this.states=void 0,this.t=ns(),this.iconPack=ts,this.size=void 0}toggleDebugger(){var t;this.stateUpdate.emit({activeDebugger:!(null===(t=this.states)||void 0===t?void 0:t.activeDebugger),activeMoreMenu:!1}),Ss.activeDebugger=!Ss.activeDebugger,Ss.activeMoreMenu=!1}render(){return m(f,{title:this.t("Troubleshooting")},m("dyte-controlbar-button",{size:this.size,iconPack:this.iconPack,t:this.t,onClick:()=>this.toggleDebugger(),icon:this.iconPack.debug,label:this.t("Troubleshooting"),variant:this.variant}))}};Qn.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}";var Jn=Object.freeze({__proto__:null,dyte_debugger_toggle:Qn});const Xn=class{constructor(t){vt(this,t),this.config=$t,this.size=void 0,this.icon=ts,this.states=void 0,this.t=ns(),this.iconPack=ts,this.message="",this.meeting=void 0}connectedCallback(){this.statesChanged(this.states),this.removeStateChangeListener=_s("roomLeftState",(()=>this.statesChanged()))}disconnectedCallback(){this.removeStateChangeListener&&this.removeStateChangeListener()}getBreakoutRoomsMessage(t){var e;let i;return"connected-meeting"===(null==t?void 0:t.roomLeftState)&&(i=(null===(e=Ss.activeBreakoutRoomsManager)||void 0===e?void 0:e.destinationMeetingId)===this.meeting.connectedMeetings.parentMeeting.id?"breakout_rooms.move_reason.switch_main_room":"breakout_rooms.move_reason.switch_room"),i}statesChanged(t){const e=t||Ss;if(null!=e)switch(null==e?void 0:e.roomLeftState){case"left":this.message="ended.left";break;case"kicked":this.message="ended.kicked";break;case"disconnected":this.message="ended.disconnected";break;case"rejected":this.message="ended.rejected";break;case"connected-meeting":this.message=this.getBreakoutRoomsMessage(e);break;default:this.message="ended"}}renderBreakoutRoomScreen(){return m(f,null,m("div",{class:"ctr",part:"container"},m("dyte-icon",{icon:this.iconPack.breakout_rooms}),m("p",{part:"message",class:"breakout"},this.t(this.message))))}render(){const t=this.states||Ss;return"connected-meeting"===t.roomLeftState?this.renderBreakoutRoomScreen():m(f,null,m("div",{class:"ctr",part:"container"},m("dyte-logo",{meeting:this.meeting,config:this.config,part:"logo",t:this.t}),m("p",{part:"message"},this.t(this.message)),"disconnected"===(null==t?void 0:t.roomLeftState)&&m("span",{part:"description"},this.t("ended.network"))))}static get watchers(){return{states:["statesChanged"]}}};Xn.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{height:100%;width:100%;-webkit-user-select:none;-moz-user-select:none;user-select:none;display:flex;flex-direction:column;align-items:center;justify-content:center}.ctr{display:flex;flex-direction:column;align-items:center;gap:var(--dyte-space-8, 32px)}dyte-logo.loaded{height:var(--dyte-space-12, 48px)}.rejoin-button{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-4, 16px);padding-top:var(--dyte-space-6, 24px);padding-bottom:var(--dyte-space-6, 24px);padding-left:var(--dyte-space-16, 64px);padding-right:var(--dyte-space-16, 64px)}.rejoin-icon{margin-right:var(--dyte-space-2, 8px)}p{font-size:16px;border-radius:var(--dyte-border-radius-lg, 12px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));padding-left:var(--dyte-space-8, 32px);padding-right:var(--dyte-space-8, 32px);padding-top:var(--dyte-space-4, 16px);padding-bottom:var(--dyte-space-4, 16px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}p.breakout{font-size:20px;display:flex;flex-direction:column;align-items:center}p.breakout span{margin-top:var(--dyte-space-1, 4px);margin-bottom:var(--dyte-space-0, 0px);color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}span{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-4, 16px);font-size:14px}";var to=Object.freeze({__proto__:null,dyte_ended_screen:Xn});const eo=class{constructor(t){vt(this,t),this.onDropCallback=k(this,"dropCallback",7),this.hostEl=void 0,this.iconPack=ts,this.t=ns(),this.dropzoneActivated=!1}connectedCallback(){if(!this.hostEl)throw new Error("hostEl prop is required");this.hostEl.addEventListener("dragover",(t=>{t.preventDefault(),this.dropzoneActivated=!0})),this.hostEl.addEventListener("dragleave",(()=>{this.dropzoneActivated=!1})),this.hostEl.addEventListener("drop",(t=>{t.preventDefault(),this.dropzoneActivated=!1,this.onDropCallback.emit(t)}))}render(){return m(f,null,m("div",{id:"dropzone",class:{active:this.dropzoneActivated},part:"dropzone"},m("dyte-icon",{icon:this.iconPack.attach,iconPack:this.iconPack,t:this.t}),m("p",null,this.t("chat.send_attachment"))))}};eo.style="#dropzone{position:absolute;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);z-index:10;display:none;flex-direction:column;align-items:center;justify-content:center;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}#dropzone.active{display:flex;animation:0.2s slide-up ease-in}";var io=Object.freeze({__proto__:null,dyte_file_dropzone:eo});var so=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},ao="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:{},ro="object"==typeof ao&&ao&&ao.Object===Object&&ao,no="object"==typeof self&&self&&self.Object===Object&&self,oo=ro||no||Function("return this")(),lo=function(){return oo.Date.now()},co=/\s/;var ho=function(t){for(var e=t.length;e--&&co.test(t.charAt(e)););return e},po=/^\s+/;var go=function(t){return t?t.slice(0,ho(t)+1).replace(po,""):t},uo=oo.Symbol,mo=Object.prototype,vo=mo.hasOwnProperty,fo=mo.toString,yo=uo?uo.toStringTag:void 0;var bo=function(t){var e=vo.call(t,yo),i=t[yo];try{t[yo]=void 0;var s=!0}catch(r){}var a=fo.call(t);return s&&(e?t[yo]=i:delete t[yo]),a},wo=Object.prototype.toString;var xo=function(t){return wo.call(t)},ko=uo?uo.toStringTag:void 0;var So=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":ko&&ko in Object(t)?bo(t):xo(t)};var _o=function(t){return null!=t&&"object"==typeof t};var Co=function(t){return"symbol"==typeof t||_o(t)&&"[object Symbol]"==So(t)},Po=/^[-+]0x[0-9a-f]+$/i,Lo=/^0b[01]+$/i,To=/^0o[0-7]+$/i,Eo=parseInt;var Ao=function(t){if("number"==typeof t)return t;if(Co(t))return NaN;if(so(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=so(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=go(t);var i=Lo.test(t);return i||To.test(t)?Eo(t.slice(2),i?2:8):Po.test(t)?NaN:+t},Mo=Math.max,Ro=Math.min;var Do=function(t,e,i){var s,a,r,n,o,l,d=0,c=!1,h=!1,p=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function g(e){var i=s,r=a;return s=a=void 0,d=e,n=t.apply(r,i)}function u(t){var i=t-l;return void 0===l||i>=e||i<0||h&&t-d>=r}function m(){var t=lo();if(u(t))return v(t);o=setTimeout(m,function(t){var i=e-(t-l);return h?Ro(i,r-(t-d)):i}(t))}function v(t){return o=void 0,p&&s?g(t):(s=a=void 0,n)}function f(){var t=lo(),i=u(t);if(s=arguments,a=this,l=t,i){if(void 0===o)return function(t){return d=t,o=setTimeout(m,e),c?g(t):n}(l);if(h)return clearTimeout(o),o=setTimeout(m,e),g(l)}return void 0===o&&(o=setTimeout(m,e)),n}return e=Ao(e)||0,so(i)&&(c=!!i.leading,r=(h="maxWait"in i)?Mo(Ao(i.maxWait)||0,e):r,p="trailing"in i?!!i.trailing:p),f.cancel=function(){void 0!==o&&clearTimeout(o),d=0,s=l=a=o=void 0},f.flush=function(){return void 0===o?n:v(lo())},f};function Io(t,e){const i=Math.pow(10,e);return Math.floor(t*i)/i}function Oo({dimensions:t,count:e,aspectRatio:i,gap:s}){const{width:a,height:r,rows:n,cols:o}=function({count:t,dimensions:e,aspectRatio:i,gap:s}){let{width:a,height:r}=e;if(0===a||0===r)return{width:0,height:0,rows:1,cols:1};a-=2*s,r-=2*s;const n=s,o=t,l=$o(i);let d=0,c=0,h=1,p=1;const g=[];for(let u=1;u<=o;u++)g.push((a-n*(u-1))/u),g.push((r-n*(u-1))/(u*l));g.sort(((t,e)=>e-t));for(const u of g)if(d=Io(u,4),c=Io(d*l,4),h=Math.floor((a+n)/(d+n)),p=Math.floor((r+n)/(c+n)),h*p>=o){p=Math.ceil(o/h);break}return{width:d,height:c,rows:p,cols:h}}({dimensions:t,count:e,aspectRatio:i,gap:s}),l=function({parentDimensions:t,dimensions:e,rows:i,cols:s,count:a,gap:r}){const{width:n,height:o}=t,{width:l,height:d}=e,c=(o-(d*i+(i-1)*r))/2;let h=(n-(l*s+(s-1)*r))/2;const p=d+r,g=l+r;let u=0,m=0;const v=a%s;function f(t){const e=a-t;e===v&&(h=(n-(l*e+(e-1)*r))/2);const i=c+m*p,o=h+u*g;return u++,(t+1)%s==0&&(m++,u=0),{top:i,left:o}}return f}({parentDimensions:t,dimensions:{width:a,height:r},rows:n,cols:o,count:e,gap:s});return{width:a,height:r,getPosition:l}}const $o=t=>{const[e,i]=t.split(":");return Number.parseInt(i)/Number.parseInt(e)},Uo={spotlight:"sm",mixed:"sm"},Fo=class{constructor(t){vt(this,t),this.stateUpdate=k(this,"dyteStateUpdate",7),this.hideSelf=!1,this.invalidRoomStates=["init","waitlisted","ended","kicked","rejected"],this.filterParticipants=t=>{var e;if(this.overrides&&(null===(e=this.overrides)||void 0===e?void 0:e.videoUnsubscribed)){const e=this.overrides.videoUnsubscribed.preset;e.length>0&&(t=t.filter((t=>!e.some((e=>void 0!==t.presetName&&t.presetName.match(e))))))}return t},this.onViewModeChanged=()=>{null!=this.meeting&&this.updateActiveParticipants()},this.onParticipantJoined=Do((()=>{this.updateActiveParticipants()}),50),this.onParticipantLeft=Do((()=>{this.updateActiveParticipants()}),50),this.stageStatusListener=()=>{this.updateActiveParticipants(),this.showLiveStreamPlayer=vi(this.meeting),"ON_STAGE"!==this.meeting.stage.status&&this.removeScreenShare(this.meeting.self)},this.peerStageStatusListener=t=>{this.updateActiveParticipants(),"ON_STAGE"!==this.meeting.stage.status&&(this.removePinned(t),this.removeScreenShare(t))},this.onScreenShareUpdate=t=>{t.screenShareEnabled?this.addScreenShare(t):this.removeScreenShare(t)},this.onSelfScreenShareUpdate=({screenShareEnabled:t})=>{t?this.addScreenShare(this.meeting.self):this.removeScreenShare(this.meeting.self)},this.toggleTileListener=({hidden:t})=>{this.hidden=t,this.updateActiveParticipants()},this.onPluginStateUpdate=(t,{active:e})=>{e?this.plugins.some((e=>e.id===t.id))||(this.plugins=[...this.plugins,t]):this.plugins=this.plugins.filter((e=>e.id!==t.id))},this.onParticipantPinned=()=>{this.updateActiveParticipants()},this.onParticipantUnpinned=()=>{this.updateActiveParticipants()},this.updateRoomStateListener=()=>{this.roomState=this.meeting.self.roomState},this.participants=[],this.pinnedParticipants=[],this.screenShareParticipants=[],this.plugins=[],this.emptyStage=!1,this.showLiveStreamPlayer=!1,this.canCurrentPeerHost=!1,this.pipSupported=!1,this.pipEnabled=!1,this.hidden=!1,this.roomState=void 0,this.layout="row",this.aspectRatio="16:9",this.meeting=void 0,this.gap=8,this.size=void 0,this.states=Ss,this.config=$t,this.iconPack=ts,this.t=ns(),this.gridSize=Uo,this.overrides={}}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){this.disconnectMeeting(this.meeting)}disconnectMeeting(t){var e;if(null==t)return;this.participants=[],this.plugins=[];const{self:i,participants:s,plugins:a}=t;i.removeListener("pinned",this.onParticipantPinned),i.removeListener("unpinned",this.onParticipantUnpinned),i.removeListener("roomLeft",this.updateRoomStateListener),i.removeListener("roomJoined",this.updateRoomStateListener),i.removeListener("screenShareUpdate",this.onSelfScreenShareUpdate),i.removeListener("toggleTile",this.toggleTileListener),null==a||a.all.removeListener("stateUpdate",this.onPluginStateUpdate),null===(e=t.stage)||void 0===e||e.removeListener("stageStatusUpdate",this.stageStatusListener),s.removeListener("viewModeChanged",this.onViewModeChanged),s.active.removeListener("participantLeft",this.onParticipantLeft),s.active.removeListener("participantJoined",this.onParticipantJoined),s.pinned.removeListener("participantJoined",this.onParticipantPinned),s.pinned.removeListener("participantLeft",this.onParticipantUnpinned),s.joined.removeListener("screenShareUpdate",this.onScreenShareUpdate),s.joined.removeListener("stageStatusUpdate",this.peerStageStatusListener)}meetingChanged(t,e){var i,s,a,r;if(null!==e&&this.disconnectMeeting(e),null!=t){const{self:e,participants:n,plugins:o,stage:l}=t;this.pipSupported=(null===(i=this.meeting.participants.pip)||void 0===i?void 0:i.isSupported())&&(null===(s=t.self.config)||void 0===s?void 0:s.pipMode),this.pipSupported&&this.meeting.participants.pip.init();const{permissions:d}=e;this.roomState=e.roomState;const c="ON_STAGE"!==this.meeting.stage.status,h=null==d?void 0:d.isRecorder;this.hideSelf=c||h||d.hiddenParticipant,this.participants=this.filterParticipants([...n.active.toArray(),...e.isPinned||this.hideSelf?[]:[e]]),this.pinnedParticipants=[...n.pinned.toArray(),...e.isPinned&&!this.hideSelf?[e]:[]],this.screenShareParticipants=n.joined.toArray().filter((t=>t.screenShareEnabled)),this.plugins=(null==o?void 0:o.active.toArray())||[],(null==d?void 0:d.stageEnabled)&&(this.canCurrentPeerHost=d.acceptStageRequests||d.canPresent,this.updateStage()),this.hidden=t.self.hidden,e.addListener("roomLeft",this.updateRoomStateListener),e.addListener("roomJoined",this.updateRoomStateListener),e.addListener("screenShareUpdate",this.onSelfScreenShareUpdate),e.addListener("pinned",this.onParticipantPinned),e.addListener("unpinned",this.onParticipantUnpinned),e.addListener("toggleTile",this.toggleTileListener),null==l||l.addListener("stageStatusUpdate",this.stageStatusListener),null==o||o.all.addListener("stateUpdate",this.onPluginStateUpdate),n.addListener("viewModeChanged",this.onViewModeChanged),n.active.addListener("participantLeft",this.onParticipantLeft),null===(a=null==n?void 0:n.joined)||void 0===a||a.on("stageStatusUpdate",this.peerStageStatusListener),n.joined.addListener("screenShareUpdate",this.onScreenShareUpdate),n.active.addListener("participantJoined",this.onParticipantJoined),n.pinned.addListener("participantJoined",this.onParticipantPinned),n.pinned.addListener("participantLeft",this.onParticipantUnpinned),(null===(r=t.stage)||void 0===r?void 0:r.status)&&this.stageStatusListener()}}overridesChanged(t){this.updateActiveParticipants()}screenShareParticipantsChanged(t){const e=t.length>0;!!Ss.activeScreenShare!==e&&(this.stateUpdate.emit({activeScreenShare:e}),Ss.activeScreenShare=e)}pluginsChanged(t){const e=t.length>0;!!Ss.activePlugin!==e&&(this.stateUpdate.emit({activePlugin:e}),Ss.activePlugin=e)}pinnedParticipantsChanged(t){const e=t.length>0;!!Ss.activeSpotlight!==e&&(this.stateUpdate.emit({activeSpotlight:e}),Ss.activeSpotlight=e)}updateActiveParticipants(){var t;const{self:e,participants:i,stage:s}=this.meeting;this.hideSelf=this.hidden||"ON_STAGE"!==s.status||(null===(t=e.permissions)||void 0===t?void 0:t.isRecorder)||e.permissions.hiddenParticipant,this.participants=this.filterParticipants([...i.active.toArray().filter((t=>t.id!==e.id)),..."ACTIVE_GRID"!==i.viewMode||e.isPinned||this.hideSelf?[]:[e]]),this.pinnedParticipants=[...i.pinned.toArray().filter((t=>t.id!==e.id)),...e.isPinned&&!this.hideSelf?[e]:[]],this.screenShareParticipants=i.joined.toArray().filter((t=>t.screenShareEnabled)),e.screenShareEnabled&&(this.screenShareParticipants=this.screenShareParticipants.concat([e])),this.updateStage()}updateStage(){var t;const{self:e}=this.meeting;this.meeting&&((null===(t=null==e?void 0:e.permissions)||void 0===t?void 0:t.stageEnabled)?this.emptyStage=0===this.participants.length&&0===this.pinnedParticipants.length:this.emptyStage=!1)}addScreenShare(t){this.screenShareParticipants.some((e=>e.id===t.id))||(this.screenShareParticipants=[...this.screenShareParticipants,t])}removeScreenShare(t){this.screenShareParticipants=this.screenShareParticipants.filter((e=>e.id!==t.id))}removePinned(t){this.pinnedParticipants=this.pinnedParticipants.filter((e=>e.id!==t.id))}render(){const t={meeting:this.meeting,size:this.size,states:this.states||Ss,config:this.config,iconPack:this.iconPack,t:this.t};return this.invalidRoomStates.includes(this.roomState)?m(f,null,m("div",{class:"offline-grid"},m("dyte-icon",{icon:this.iconPack.join_stage,size:"xl"}),m("h3",null,this.t("disconnected")),m("p",null,this.t("disconnected.description")))):"disconnected"===this.roomState?m(f,null,m("div",{class:"offline-grid"},m("dyte-icon",{icon:this.iconPack.disconnected,size:"xl"}),m("h3",null,this.t("offline")),m("p",null,this.t("offline.description")))):"failed"===this.roomState?m(f,null,m("div",{class:"offline-grid"},m("dyte-icon",{icon:this.iconPack.disconnected,size:"xl"}),m("h3",null,this.t("failed")),m("p",null,this.t("failed.description")))):this.showLiveStreamPlayer?m(f,null,m("dyte-livestream-player",{meeting:this.meeting,size:this.size}),m("dyte-livestream-indicator",{meeting:this.meeting,size:"sm",t:this.t}),m("dyte-viewer-count",{meeting:this.meeting,variant:"embedded",t:this.t})):this.emptyStage?m(f,null,m("div",{class:"webinar-stage"},m("div",{class:"center"},this.canCurrentPeerHost&&m("div",{class:"ctr",part:"container"},m("p",{class:"message",part:"message"},this.t("stage.empty_host")),m("span",{class:"description",part:"description"},this.t("stage.empty_host_summary"))),!this.canCurrentPeerHost&&m("div",{class:"ctr",part:"container"},m("p",{class:"message",part:"message"},this.t("stage.empty_viewer")))))):m(f,null,m(cs,{element:"dyte-grid",defaults:t,childProps:{participants:this.participants,screenShareParticipants:this.screenShareParticipants,plugins:this.plugins,pinnedParticipants:this.pinnedParticipants,aspectRatio:this.aspectRatio,gap:this.gap,layout:this.layout,gridSize:this.gridSize},onlyChildren:!0}),m("dyte-livestream-indicator",{meeting:this.meeting,size:"sm",t:this.t}),m("dyte-viewer-count",{meeting:this.meeting,variant:"embedded"}))}static get watchers(){return{meeting:["meetingChanged"],overrides:["overridesChanged"],screenShareParticipants:["screenShareParticipantsChanged"],plugins:["pluginsChanged"],pinnedParticipants:["pinnedParticipantsChanged"]}}};Fo.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block;height:100%;width:100%}.offline-grid{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center}.offline-grid h3{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);margin-left:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0, 0px);font-size:20px;font-weight:500;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.offline-grid p{margin-top:var(--dyte-space-1, 4px);margin-bottom:var(--dyte-space-1, 4px);margin-left:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0, 0px);text-align:center;font-size:16px;font-weight:400;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.offline-grid dyte-icon{margin-bottom:var(--dyte-space-2, 8px)}.webinar-stage{box-sizing:border-box;height:100%;display:flex;align-content:center;align-items:center;justify-content:center;text-align:center}.webinar-stage h2{margin:var(--dyte-space-0, 0px);font-weight:normal}dyte-viewer-count{display:none}.ctr{display:flex;flex-direction:column;align-items:center}.message{font-size:16px;border-radius:var(--dyte-border-radius-lg, 12px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));padding-left:var(--dyte-space-8, 32px);padding-right:var(--dyte-space-8, 32px);padding-top:var(--dyte-space-4, 16px);padding-bottom:var(--dyte-space-4, 16px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.description{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-4, 16px);font-size:14px}dyte-livestream-indicator{display:none}@media only screen and (max-device-height: 480px) and (orientation: landscape){dyte-viewer-count[variant='embedded']{position:absolute;top:var(--dyte-space-0, 0px);right:var(--dyte-space-2, 8px);z-index:20;margin-top:var(--dyte-space-0, 0px);margin-left:var(--dyte-space-0, 0px);display:flex}dyte-livestream-indicator{position:absolute;top:var(--dyte-space-0, 0px);left:var(--dyte-space-2, 8px);z-index:20;margin-top:var(--dyte-space-0, 0px);margin-left:var(--dyte-space-0, 0px);display:flex}}";var zo=Object.freeze({__proto__:null,dyte_grid:Fo});const No=class{constructor(t){vt(this,t),this.onPageChanged=({currentPage:t,pageCount:e})=>{this.pageCount=e,this.page=t},this.toggleGridPagination=Do((()=>{var t;const{self:e,participants:i}=this.meeting,{mobile:s,desktop:a}=null===(t=e.config)||void 0===t?void 0:t.maxVideoStreams,r="sm"===this.size?s:a,n=i.joined.toArray().filter((t=>"ON_STAGE"===t.stageStatus)).length;this.showPagination=!(n<r)}),50),this.onParticipantJoin=Do((()=>{this.pageCount=this.meeting.participants.pageCount,this.toggleGridPagination()}),50),this.onParticipantLeave=Do((()=>{this.pageCount=this.meeting.participants.pageCount,this.toggleGridPagination()}),50),this.onStateStatusUpdate=Do((()=>{this.pageCount=this.meeting.participants.pageCount,this.toggleGridPagination()}),50),this.prevPage=()=>{if(null==this.meeting)return;const{participants:t}=this.meeting;this.page>1?t.setPage(this.page-=1):"PAGINATED"===t.viewMode&&t.setViewMode("ACTIVE_GRID")},this.nextPage=()=>{if(null==this.meeting)return;const{participants:t}=this.meeting;this.page>0&&this.page<this.pageCount?t.setPage(this.page+=1):t.count>0&&0===this.pageCount&&t.setViewMode("PAGINATED")},this.meeting=void 0,this.states=void 0,this.size=void 0,this.variant="rounded",this.iconPack=ts,this.t=ns(),this.page=1,this.pageCount=0,this.activeCount=0,this.activeComputedCount=0,this.showPagination=!1}connectedCallback(){this.meetingChanged(this.meeting),this.sizeChanged()}disconnectedCallback(){if(null==this.meeting)return;const{participants:t,stage:e}=this.meeting;t.removeListener("pageChanged",this.onPageChanged),t.removeListener("viewModeChanged",this.onPageChanged),t.joined.removeListener("participantJoined",this.onParticipantJoin),t.joined.removeListener("participantLeft",this.onParticipantLeave),t.joined.removeListener("stageStatusUpdate",this.onStateStatusUpdate),e.removeListener("stageStatusUpdate",this.onStateStatusUpdate)}meetingChanged(t){if(null!=t){const{stage:e,participants:i}=t;this.page=i.currentPage,this.pageCount=i.pageCount,i.addListener("viewModeChanged",this.onPageChanged),i.addListener("pageChanged",this.onPageChanged),i.joined.addListener("participantJoined",this.onParticipantJoin),i.joined.addListener("participantLeft",this.onParticipantLeave),i.joined.addListener("stageStatusUpdate",this.onStateStatusUpdate),e.addListener("stageStatusUpdate",this.onStateStatusUpdate),this.activeCount=this.meeting.participants.joined.size,this.activeComputedCount=this.meeting.participants.joined.size,this.toggleGridPagination()}}sizeChanged(){this.toggleGridPagination()}render(){const{meta:t}=this.meeting;if(!("AUDIO_ROOM"===(null==t?void 0:t.viewType))&&this.showPagination)return m(f,null,m("dyte-button",{class:"prev",variant:"secondary",kind:"icon",disabled:0===this.pageCount,onClick:this.prevPage,"aria-label":this.t("page.prev"),iconPack:this.iconPack,t:this.t},m("dyte-icon",{icon:this.iconPack.chevron_left,iconPack:this.iconPack,t:this.t})),"grid"!==this.variant&&m("div",{class:"center"},m("span",{class:"page"},0===this.pageCount?m("dyte-tooltip",{label:this.t("layout.auto"),iconPack:this.iconPack,t:this.t},m("dyte-button",{kind:"icon",class:"auto",iconPack:this.iconPack,t:this.t},m("dyte-icon",{icon:this.iconPack.wand,iconPack:this.iconPack,t:this.t}))):this.page),0!==this.pageCount&&[m("span",{class:"slash"},"/"),m("span",{class:"pages"},this.pageCount)]),"grid"===this.variant&&this.pageCount>0&&m("div",{class:"dots"},[...Array(this.pageCount)].map(((t,e)=>m("div",{key:`dot-${e}`,class:{dot:!0,active:e+1===this.page}})))),m("dyte-button",{class:"next",variant:"secondary",kind:"icon",disabled:0!==this.page&&this.page===this.pageCount,onClick:this.nextPage,"aria-label":this.t("page.next"),iconPack:this.iconPack,t:this.t},m("dyte-icon",{icon:this.iconPack.chevron_right,tabIndex:-1,"aria-hidden":!0,iconPack:this.iconPack,t:this.t})))}static get watchers(){return{meeting:["meetingChanged"],size:["sizeChanged"]}}};No.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);display:flex;-webkit-user-select:none;-moz-user-select:none;user-select:none;align-items:center;font-size:16px}:host([size='sm']){margin-left:var(--dyte-space-1, 4px);margin-right:var(--dyte-space-1, 4px);font-size:12px}:host([size='sm']) .center{margin-left:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0, 0px)}:host([size='sm']) dyte-button{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px)}:host([size='sm']) dyte-button dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}dyte-button{--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.center{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.center .page{color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.center .slash{margin-left:var(--dyte-space-0\\.5, 2px);margin-right:var(--dyte-space-0\\.5, 2px)}.center .pages{align-self:flex-end;font-size:12px}:host([variant='rounded']){overflow:hidden;border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}:host([variant='rounded']) dyte-button{border-radius:9999px;border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}:host([variant='rounded']) dyte-button:not([disabled]):hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}:host([variant='rounded']) dyte-button:not([disabled]):focus{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}:host([variant='grid']){margin-left:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0, 0px)}:host([variant='grid']) dyte-button{position:absolute;top:50%;height:var(--dyte-space-20, 80px);width:var(--dyte-space-20, 80px);opacity:0.2;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}:host([variant='grid']) dyte-button:hover{opacity:1}:host([variant='grid']) dyte-button{transform:translateY(-50%)}:host([variant='grid']) dyte-button.prev{left:var(--dyte-space-0, 0px);border-top-right-radius:9999px;border-bottom-right-radius:9999px}:host([variant='grid']) dyte-button.next{right:var(--dyte-space-0, 0px);border-top-left-radius:9999px;border-bottom-left-radius:9999px}:host([variant='grid']) dyte-button.auto{left:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);border-top-right-radius:9999px;border-bottom-right-radius:9999px}:host([variant='grid']) .dots{position:absolute;left:50%;bottom:var(--dyte-space-3, 12px);display:flex;align-items:center;transform:translateX(-50%)}:host([variant='grid']) .dots .dot{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-2, 8px);width:var(--dyte-space-2, 8px);cursor:pointer;border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}:host([variant='grid']) .dots .dot:last-child{margin-right:var(--dyte-space-0, 0px)}:host([variant='grid']) .dots .dot.active{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity))}:host([variant='grid'][size='sm']) dyte-button{height:var(--dyte-space-14, 56px);width:var(--dyte-space-14, 56px);opacity:0.1}";var jo=Object.freeze({__proto__:null,dyte_grid_pagination:No});const Bo=class{constructor(t){vt(this,t),this.variant="solid",this.disableRender=!1,this.meeting=void 0,this.config=$t,this.states=void 0,this.iconPack=ts,this.t=ns(),this.size=void 0}render(){const t={meeting:this.meeting,config:this.config,states:this.states,t:this.t,iconPack:this.iconPack,size:this.size};return m(f,null,!this.disableRender&&m(cs,{element:"dyte-header",defaults:t,onlyChildren:!0}),m("slot",null))}};Bo.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:var(--dyte-space-12, 48px);align-items:center;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}@media only screen and (max-device-height: 480px) and (orientation: landscape){:host{display:none !important}}@media only screen and (max-height: 480px) and (orientation: landscape){:host{display:none !important}}";var Ho=Object.freeze({__proto__:null,dyte_header:Bo});const Vo=class{constructor(t){vt(this,t),this.meeting=void 0,this.config=$t,this.iconPack=ts,this.t=ns()}render(){return m(f,null,m("slot",null,m("div",{class:"ctr",part:"container"},m("dyte-logo",{meeting:this.meeting,config:this.config,t:this.t,part:"logo"}),m("dyte-spinner",{"aria-label":"Idle, waiting for meeting data",part:"spinner",iconPack:this.iconPack,t:this.t}))))}};Vo.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{height:100%;width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center}.ctr{display:flex;flex-direction:column;align-items:center;gap:var(--dyte-space-8, 32px)}dyte-logo.loaded{height:var(--dyte-space-12, 48px)}dyte-spinner{height:var(--dyte-space-12, 48px);width:var(--dyte-space-12, 48px);--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}";var Go=Object.freeze({__proto__:null,dyte_idle_screen:Vo});const qo=t=>t.split(/[#?]/)[0].split(".").pop().trim(),Zo=t=>{if(!t)return"0 B";const e=Math.floor(Math.log(t)/Math.log(1024));return`${(t/1024**e).toFixed(2)} ${["B","kB","MB","GB","TB"][e]}`},Ko=async(t,e)=>{t=$a(t);let i=null==e?void 0:e.name;const s=await fetch(t);if(!s.ok)return void window.open(t,"_blank");const a=URL.createObjectURL(await s.blob()),r=document.createElement("a");r.href=a,r.download=null!=i?i:((t,e="file")=>{try{const i=new URL(t).pathname.split("/").pop();return"/"!==i?i:e}catch(i){return e}})(t,null==e?void 0:e.fallbackName),r.click()},Wo=class{constructor(t){vt(this,t),this.close=k(this,"close",7),this.keypressListener=t=>{"Escape"===t.key&&this.close.emit()},this.handleOutsideClick=()=>this.close.emit(),this.image=void 0,this.size=void 0,this.t=ns(),this.iconPack=ts}connectedCallback(){document.addEventListener("keydown",this.keypressListener),document.addEventListener("click",this.handleOutsideClick)}disconnectedCallback(){document.removeEventListener("keydown",this.keypressListener),document.removeEventListener("click",this.handleOutsideClick)}render(){return m(f,{class:"scrollbar",onClick:t=>t.stopPropagation()},m("div",{class:"header"},m("div",{class:"shared-by-user"},this.t("chat.img.shared_by")," ",m("span",{class:"displayName"},Ua(Ia(this.image.displayName)))),m("div",{class:"actions"},m("dyte-button",{onClick:()=>Ko(this.image.link,{fallbackName:"image"}),iconPack:this.iconPack,t:this.t},m("dyte-icon",{icon:this.iconPack.download,slot:"start",iconPack:this.iconPack,t:this.t}),"Download"),m("dyte-button",{kind:"icon",variant:"secondary",onClick:()=>this.close.emit(),iconPack:this.iconPack,t:this.t},m("dyte-icon",{icon:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t})))),m("div",{class:"image-ctr"},m("img",{src:this.image.link})))}};Wo.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))\n    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{width:1140px;max-width:100%;box-sizing:border-box;display:flex;flex-direction:column;padding:var(--dyte-space-6, 24px);padding-top:var(--dyte-space-5, 20px);overflow-y:auto;color:rgb(var(--dyte-colors-text-1000, 255 255 255));z-index:40;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}.displayName{font-weight:700}.image-ctr{margin-top:var(--dyte-space-2, 8px);box-sizing:border-box;display:flex;justify-content:center;overflow:hidden}.actions{display:flex;align-items:center;justify-content:flex-end;gap:var(--dyte-space-2, 8px)}img{box-sizing:border-box;display:block;max-height:100%;max-width:100%;-o-object-fit:contain;object-fit:contain}.header{display:flex;align-items:center;justify-content:space-between;padding-bottom:var(--dyte-space-4, 16px)}.shared-by-user{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}:host([size='sm']) .header{flex-direction:column}:host([size='sm']) .header .actions{margin-top:var(--dyte-space-4, 16px)}";var Yo=Object.freeze({__proto__:null,dyte_image_viewer:Wo});const Qo=class{constructor(t){vt(this,t),this.iconPack=ts}render(){return m(f,null,m("div",{class:"tooltip-container"},m("dyte-icon",{icon:this.iconPack.info,size:"sm"}),m("div",{class:"tooltip"},m("slot",{name:"tootlip-text"}))))}};Qo.style=":host{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);cursor:pointer}.tooltip-container{position:relative;display:flex;flex-direction:row;align-items:center}.tooltip-container dyte-icon{cursor:pointer;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.tooltip-container dyte-icon:hover+.tooltip{display:flex !important}.tooltip{position:absolute;margin-left:var(--dyte-space-2, 8px);display:none !important;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));padding:var(--dyte-space-2, 8px);font-weight:400;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52));z-index:50;display:flex;min-width:var(--dyte-space-60, 240px);flex-direction:column;--tw-shadow:0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);left:14px}";var Jo=Object.freeze({__proto__:null,dyte_information_tooltip:Qo});const Xo=class{constructor(t){vt(this,t),this.stateUpdate=k(this,"dyteStateUpdate",7),this.leave=()=>{this.stateUpdate.emit({activeLeaveConfirmation:!0}),Ss.activeLeaveConfirmation=!0},this.variant="button",this.size=void 0,this.iconPack=ts,this.t=ns()}render(){const t=this.t("leave");return m(f,{label:t},m("dyte-controlbar-button",{size:this.size,iconPack:this.iconPack,t:this.t,class:"leave red-icon",onClick:this.leave,icon:this.iconPack.call_end,label:t,variant:this.variant,part:"controlbar-button"}))}};Xo.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}";var tl=Object.freeze({__proto__:null,dyte_leave_button:Xo});const el=class{constructor(t){vt(this,t),this.stateUpdate=k(this,"dyteStateUpdate",7),this.keyPressListener=t=>{"Escape"===t.key&&this.close()},this.isBreakoutRoomsActive=!1,this.isChildMeeting=!1,this.canJoinMainRoom=!1,this.permissionsUpdateListener=()=>{this.canEndMeeting=this.meeting.self.permissions.kickParticipant,this.canJoinMainRoom=this.meeting.self.permissions.connectedMeetings.canSwitchToParentMeeting},this.close=()=>{this.stateUpdate.emit({activeLeaveConfirmation:!1}),Ss.activeLeaveConfirmation=!1},this.handleLeave=()=>{var t;null===(t=this.meeting)||void 0===t||t.leaveRoom(),this.close()},this.handleJoinMainRoom=()=>{this.meeting.connectedMeetings.moveParticipants(this.meeting.meta.meetingId,this.meeting.connectedMeetings.parentMeeting.id,[this.meeting.self.userId]),this.close()},this.handleEndMeeting=()=>{var t;null===(t=this.meeting)||void 0===t||t.participants.kickAll(),this.close()},this.meeting=void 0,this.states=void 0,this.iconPack=ts,this.t=ns(),this.canEndMeeting=!1}connectedCallback(){this.meetingChanged(this.meeting),document.addEventListener("keydown",this.keyPressListener)}disconnectedCallback(){var t;document.removeEventListener("keydown",this.keyPressListener),null===(t=this.meeting)||void 0===t||t.self.permissions.removeListener("permissionsUpdate",this.permissionsUpdateListener)}meetingChanged(t){null!=t&&(this.isBreakoutRoomsActive=this.meeting.connectedMeetings.supportsConnectedMeetings&&this.meeting.connectedMeetings.isActive,this.isChildMeeting=this.meeting.connectedMeetings.supportsConnectedMeetings&&this.meeting.connectedMeetings.meetings.some((e=>e.id===t.meta.meetingId)),this.meeting.self.permissions.addListener("permissionsUpdate",this.permissionsUpdateListener),this.permissionsUpdateListener())}render(){return m(f,null,m("div",{class:"leave-modal"},m("div",{class:"header"},m("h2",{class:"title"},this.t("leave"))),m("p",{class:"message"},this.isBreakoutRoomsActive&&this.isChildMeeting?this.t("breakout_rooms.leave_confirmation"):this.t("leave_confirmation")),m("div",{class:"content"},m("dyte-button",{variant:"secondary",onClick:this.close,iconPack:this.iconPack,class:"secondary-btn",t:this.t},this.t("cancel")),this.isBreakoutRoomsActive&&this.isChildMeeting&&this.canJoinMainRoom&&m("dyte-button",{variant:"secondary",onClick:this.handleJoinMainRoom,iconPack:this.iconPack,class:"secondary-btn",t:this.t},this.t("breakout_rooms.leave_confirmation.main_room_btn")),m("dyte-button",{variant:this.canEndMeeting?"secondary":"danger",title:this.t("leave"),onClick:this.handleLeave,iconPack:this.iconPack,class:{"secondary-btn":this.canEndMeeting,"secondary-danger-btn":this.canEndMeeting},t:this.t},this.t("leave")),this.canEndMeeting&&m("dyte-button",{variant:"danger",onClick:this.handleEndMeeting,iconPack:this.iconPack,t:this.t},this.t("end.all")))))}static get watchers(){return{meeting:["meetingChanged"]}}};el.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.leave-modal{width:var(--dyte-space-72, 288px)}@media (min-width: 768px){.leave-modal{width:var(--dyte-space-96, 384px)}}.leave-modal{position:relative;display:flex;flex-direction:column;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));padding:var(--dyte-space-8, 32px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.leave-modal .header h2{margin:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-3, 12px)}.leave-modal .message{color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.leave-modal .content{margin-top:var(--dyte-space-4, 16px);font-size:14px;display:flex;flex-wrap:wrap;gap:var(--dyte-space-4, 16px)}.leave-modal .content dyte-button{height:var(--dyte-space-9, 36px);min-width:var(--dyte-space-44, 176px);flex-grow:1}.leave-modal .content .secondary-btn{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.leave-modal .content .secondary-btn:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.leave-modal .content .secondary-danger-btn{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}";var il=Object.freeze({__proto__:null,dyte_leave_meeting:el});const sl=class{constructor(t){vt(this,t),this.stateUpdate=k(this,"dyteStateUpdate",7),this.dyteAPIError=k(this,"dyteAPIError",7),this.livestreamStateListener=t=>{this.livestreamState=t,"LIVESTREAMING"!==t&&"IDLE"!==t||(this.stateUpdate.emit({activeMoreMenu:!1}),Ss.activeMoreMenu=!1)},this.isLoading=()=>null==this.meeting||"STARTING"===this.livestreamState||"STOPPING"===this.livestreamState,this.variant="button",this.meeting=void 0,this.size=void 0,this.iconPack=ts,this.t=ns(),this.livestreamState="IDLE"}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){this.clearListeners()}meetingChanged(t){var e,i;null!=t&&(this.livestreamState=null===(e=this.meeting.livestream)||void 0===e?void 0:e.state,null===(i=this.meeting.livestream)||void 0===i||i.on("livestreamUpdate",this.livestreamStateListener))}async toggleLivestream(){var t,e;if("LIVESTREAMING"===this.livestreamState)try{await(null===(t=this.meeting.livestream)||void 0===t?void 0:t.stop())}catch(i){this.dyteAPIError.emit({trace:this.t("livestream.stop"),message:this.t("livestream.error.stop")})}else try{await(null===(e=this.meeting.livestream)||void 0===e?void 0:e.start())}catch(s){this.dyteAPIError.emit({trace:this.t("livestream.start"),message:this.t("livestream.error.start")})}}clearListeners(){var t;null===(t=this.meeting.livestream)||void 0===t||t.removeListener("livestreamUpdate",this.livestreamStateListener)}getLivestreamLabel(){switch(this.livestreamState){case"IDLE":return this.t("livestream.go_live");case"LIVESTREAMING":return this.t("livestream.end_live");case"WAITING_ON_MANUAL_INGESTION":return this.t("livestream.waiting_on_manual_ingestion");case"STARTING":return this.t("livestream.starting");case"STOPPING":return this.t("livestream.stopping");default:return this.t("livestream.error")}}getLivestreamIcon(){switch(this.livestreamState){case"IDLE":case"WAITING_ON_MANUAL_INGESTION":return this.iconPack.start_livestream;default:return this.iconPack.stop_livestream}}render(){if(fi(this.meeting))return m(f,null,m("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,isLoading:this.isLoading(),class:{"active-livestream":"LIVESTREAMING"===this.livestreamState},onClick:()=>this.toggleLivestream(),icon:this.getLivestreamIcon(),disabled:this.isLoading(),label:this.t(this.getLivestreamLabel()),variant:this.variant}))}static get watchers(){return{meeting:["meetingChanged"]}}};sl.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}";var al=Object.freeze({__proto__:null,dyte_livestream_toggle:sl});const rl=class{constructor(t){vt(this,t),this.meeting=void 0,this.iconPack=ts,this.t=ns()}render(){var t;const e=null===(t=this.meeting)||void 0===t?void 0:t.meta.meetingTitle;return null==e?null:m(f,{tabIndex:0,role:"banner","aria-label":e},m("dyte-tooltip",{label:e,part:"tooltip",iconPack:this.iconPack,t:this.t},m("div",{class:"title",part:"title"},e)))}};rl.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-left:var(--dyte-space-3, 12px);margin-right:var(--dyte-space-3, 12px);-webkit-user-select:none;-moz-user-select:none;user-select:none;font-size:16px;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.title{text-align:center;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}:host([size='sm']){font-size:12px}";var nl=Object.freeze({__proto__:null,dyte_meeting_title:rl});var ol=/\s/;var ll=/^\s+/;function dl(t){return t?t.slice(0,function(t){for(var e=t.length;e--&&ol.test(t.charAt(e)););return e}(t)+1).replace(ll,""):t}var cl=/^[-+]0x[0-9a-f]+$/i,hl=/^0b[01]+$/i,pl=/^0o[0-7]+$/i,gl=parseInt;function ul(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||Wt(t)&&"[object Symbol]"==Zt(t)}(t))return NaN;if(Kt(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Kt(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=dl(t);var i=hl.test(t);return i||pl.test(t)?gl(t.slice(2),i?2:8):cl.test(t)?NaN:+t}var ml=function(){return zt.Date.now()},vl=Math.max,fl=Math.min;function yl(t,e,i){var s,a,r,n,o,l,d=0,c=!1,h=!1,p=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function g(e){var i=s,r=a;return s=a=void 0,d=e,n=t.apply(r,i)}function u(t){var i=t-l;return void 0===l||i>=e||i<0||h&&t-d>=r}function m(){var t=ml();if(u(t))return v(t);o=setTimeout(m,function(t){var i=e-(t-l);return h?fl(i,r-(t-d)):i}(t))}function v(t){return o=void 0,p&&s?g(t):(s=a=void 0,n)}function f(){var t=ml(),i=u(t);if(s=arguments,a=this,l=t,i){if(void 0===o)return function(t){return d=t,o=setTimeout(m,e),c?g(t):n}(l);if(h)return clearTimeout(o),o=setTimeout(m,e),g(l)}return void 0===o&&(o=setTimeout(m,e)),n}return e=ul(e)||0,Kt(i)&&(c=!!i.leading,r=(h="maxWait"in i)?vl(ul(i.maxWait)||0,e):r,p="trailing"in i?!!i.trailing:p),f.cancel=function(){void 0!==o&&clearTimeout(o),d=0,s=l=a=o=void 0},f.flush=function(){return void 0===o?n:v(ml())},f}const bl=class{constructor(t){vt(this,t),this.sizes=new Map,this.lastScrollTop=0,this.scrollToBottomRetries=0,this.elementObserver=(()=>{let t=null;const e=()=>t||("undefined"!=typeof ResizeObserver?t=new ResizeObserver((t=>{t.forEach((t=>{this.measureElement(t.target,t)}))})):null);return{disconnect:()=>{var t;return null===(t=e())||void 0===t?void 0:t.disconnect()},observe:t=>{var i;return null===(i=e())||void 0===i?void 0:i.observe(t,{box:"border-box"})},unobserve:t=>{var i;return null===(i=e())||void 0===i?void 0:i.unobserve(t)}}})(),this.measureElement=(t,e)=>{if(!t)return;const i=t.dataset.id;if(this.sizes.has(i))return void this.elementObserver.unobserve(t);if(e){const s=e.borderBoxSize[0];if(s&&s.blockSize>0)return this.saveItemSize(i,s.blockSize),void this.elementObserver.unobserve(t)}const s=t.getBoundingClientRect();s.height>0&&this.saveItemSize(i,s.height)},this.getVisibleItems=()=>this.messages.slice(this.range.start,this.range.end+1),this.updateVisibleItems=(t,e)=>{const i=this.messages.length;let s=t,a=e;i<=this.visibleItemsCount?(s=0,a=i-1):e-t<this.visibleItemsCount-1&&(s=this.range.end-this.visibleItemsCount+1),this.range.start!==s&&(this.range={start:s,end:a},this.totalHeight=this.getRangeSize(0,i))},this.getEstimatedItemSize=()=>this.estimateItemSize,this.getRangeSize=(t,e)=>{let i=0,s=0;for(let a=t;a<e;a++)s=this.sizes.get(this.messages[a].id),i+=s||this.getEstimatedItemSize();return i},this.getScrollTop=()=>this.$listRef?Math.ceil(this.$listRef.scrollTop):0,this.getClientHeight=()=>this.$listRef?Math.ceil(this.$listRef.clientHeight):0,this.getScrollHeight=()=>this.$listRef?Math.ceil(this.$listRef.scrollHeight):0,this.getItemsScrolled=()=>{const t=this.lastScrollTop;if(t<=0)return 0;let e=0,i=0,s=0,a=this.messages.length;for(;e<=a;){if(i=e+a>>>1,s=this.getRangeSize(0,i),s===t)return i;s<t?e=i+1:s>t&&(a=i-1)}return e>0?--e:0},this.getEndByStart=t=>Math.min(t+this.visibleItemsCount,this.messages.length-1),this.scrollToOffset=t=>{this.$listRef&&(this.$listRef.scrollTop=t)},this.scrollToIndex=t=>{if(t>=this.messages.length-1)this.scrollToBottom();else{const e=t<1?0:this.getRangeSize(0,t);this.scrollToOffset(e)}},this.scrollToBottom=()=>{this.$listEndRef&&It((()=>{this.$listEndRef.scrollIntoView(),this.getScrollHeight()-(this.getScrollTop()+this.getClientHeight())>0&&this.scrollToBottomRetries<10?setTimeout((()=>{this.scrollToBottom()}),1e3/60):(this.scrollToBottomRetries=0,this.autoScroll=!0)}))},this.handleScroll=async()=>{if(this.isFetching)return;const t=this.getScrollTop(),e=t<this.lastScrollTop||0===t?"UP":"DOWN";if(this.lastScrollTop=t,this.loadMore&&0===t&&"UP"===e&&!1===this.isFetching){this.isFetching=!0;const t=await this.loadMore(this.messages[0]);t&&t.length&&(this.messages=[...t,...this.messages]),this.isFetching=!1}"UP"===e?this.handleTop():"DOWN"===e&&this.handleBottom()},this.handleTop=()=>{const t=this.getItemsScrolled();if(t<=this.range.end-5&&(this.autoScroll=!1),t>this.range.start+5)return;const e=Math.max(this.range.start-5,0);this.updateVisibleItems(e,this.getEndByStart(e))},this.handleBottom=()=>{if(this.getItemsScrolled()<this.range.start+5)return;const t=this.range.start+5,e=this.getEndByStart(t);e===this.messages.length-1?this.updateVisibleItems(e-this.visibleItemsCount,e):this.updateVisibleItems(t,e)},this.updateTotalHeight=yl((()=>{this.totalHeight=this.getRangeSize(0,this.messages.length)}),1e3/30,{leading:!0}),this.rendererInternal=(t,e,i)=>{if(!t)return;if(t.dataset.id===e.id)return;const s=this.renderer(e,i);t.hasChildNodes&&(t.innerHTML=""),this.elementObserver.observe(t),t.dataset.id=e.id,t.appendChild(s)},this.messages=void 0,this.renderer=void 0,this.loadMore=void 0,this.visibleItemsCount=20,this.estimateItemSize=100,this.iconPack=ts,this.range=void 0,this.isFetching=!1,this.autoScroll=!0,this.totalHeight=0}connectedCallback(){const t=this.messages.length-1;this.range={start:t-this.visibleItemsCount,end:t},this.updateVisibleItems(this.range.start,this.range.end),this.totalHeight=this.getRangeSize(0,t)}componentDidLoad(){this.autoScroll&&this.scrollToBottom()}messagesUpdated(t,e){if(t.length>e.length){const i=t.length-e.length;this.updateVisibleItems(i,this.getEndByStart(i)),this.scrollToIndex(this.range.start)}}saveItemSize(t,e){this.sizes.set(t,Math.round(e)),this.updateTotalHeight()}render(){return m("div",{class:"scrollbar content-wrapper",ref:t=>this.$listRef=t,onScroll:this.handleScroll},m("div",{class:"scroller"},m("div",{style:{height:`${this.totalHeight}px`}}),m("div",{class:"smallest-dom-element",id:"list-end",ref:t=>this.$listEndRef=t})),m("div",{class:"content",style:{transform:`translateY(${this.getRangeSize(0,this.range.start)}px)`}},this.isFetching&&m("div",{class:"loader"},m("dyte-spinner",{size:"md"})),this.getVisibleItems().map(((t,e)=>m("div",{key:t.id,ref:i=>this.rendererInternal(i,t,e)})))))}static get watchers(){return{messages:["messagesUpdated"]}}};bl.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))\n    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}.loading{cursor:wait}.content-wrapper{height:100%;overflow-y:auto;position:relative;contain:strict}.scroller{width:1px;opacity:0}.content{position:absolute;top:0;width:100%}.smallest-dom-element{width:100%;height:2px;background:red}.loader{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);display:flex;justify-content:center}";var wl=Object.freeze({__proto__:null,dyte_message_list_view:bl});const xl=class{constructor(t){vt(this,t),this.stateUpdate=k(this,"dyteStateUpdate",7),this.audioUpdateListener=({audioEnabled:t})=>{this.audioEnabled=t},this.stageStatusListener=()=>{this.stageStatus=this.meeting.stage.status,this.canProduceAudio="ALLOWED"===this.meeting.self.permissions.canProduceAudio},this.mediaPermissionUpdateListener=({kind:t,message:e})=>{"audio"===t&&(this.micPermission=e)},this.meetingPermissionsUpdateListener=t=>{var e;(null===(e=null==t?void 0:t.media)||void 0===e?void 0:e.audio)&&(this.canProduceAudio="ALLOWED"===this.meeting.self.permissions.canProduceAudio)},this.toggleMic=()=>{var t,e,i,s,a,r,n,o,l,d,c,h;if(null===(t=this.meeting)||void 0===t||t.__internals__.logger.info("dyteMicToggle::toggleMic",{media:{audio:{enabled:Boolean(null===(i=null===(e=this.meeting)||void 0===e?void 0:e.self)||void 0===i?void 0:i.audioEnabled),permission:this.micPermission,canProduce:null===(r=null===(a=null===(s=this.meeting)||void 0===s?void 0:s.self)||void 0===a?void 0:a.permissions)||void 0===r?void 0:r.canProduceAudio}},webinar:{stageStatus:null===(o=null===(n=this.meeting)||void 0===n?void 0:n.stage)||void 0===o?void 0:o.status},livestream:{stageStatus:null===(d=null===(l=this.meeting)||void 0===l?void 0:l.stage)||void 0===d?void 0:d.status},moduleExists:{self:Boolean(null===(c=this.meeting)||void 0===c?void 0:c.self)}}),this.hasPermissionError()){const t={enabled:!0,kind:"audio"};return this.stateUpdate.emit({activePermissionsMessage:t}),Ss.activePermissionsMessage=t,!1}const p=null===(h=this.meeting)||void 0===h?void 0:h.self;null!=p&&this.canProduceAudio&&(p.audioEnabled?p.disableAudio():p.enableAudio())},this.variant="button",this.meeting=void 0,this.size=void 0,this.iconPack=ts,this.t=ns(),this.audioEnabled=!1,this.canProduceAudio=!1,this.micPermission="NOT_REQUESTED",this.stageStatus="OFF_STAGE"}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var t,e,i,s,a,r,n;null===(t=this.meeting)||void 0===t||t.self.removeListener("audioUpdate",this.audioUpdateListener),null===(e=this.meeting)||void 0===e||e.self.removeListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),null===(s=null===(i=this.meeting)||void 0===i?void 0:i.stage)||void 0===s||s.removeListener("stageStatusUpdate",this.stageStatusListener),null===(n=null===(r=null===(a=this.meeting)||void 0===a?void 0:a.self)||void 0===r?void 0:r.permissions)||void 0===n||n.removeListener("permissionsUpdate",this.meetingPermissionsUpdateListener)}meetingChanged(t){var e,i;if(null!=t){const{self:s,stage:a}=t;this.canProduceAudio="ALLOWED"===this.meeting.self.permissions.canProduceAudio,this.micPermission=t.self.mediaPermissions.audio||"NOT_REQUESTED",this.audioEnabled=s.audioEnabled,this.stageStatus=t.stage.status,s.addListener("audioUpdate",this.audioUpdateListener),s.addListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),null==a||a.addListener("stageStatusUpdate",this.stageStatusListener),null===(i=null===(e=t.self)||void 0===e?void 0:e.permissions)||void 0===i||i.addListener("permissionsUpdate",this.meetingPermissionsUpdateListener)}}hasPermissionError(){return"DENIED"===this.micPermission||"SYSTEM_DENIED"===this.micPermission}getState(){let t="",e="",i="",s={},a=this.hasPermissionError(),r="COULD_NOT_START"===this.micPermission;return this.audioEnabled&&!a?(e=this.t("mic_on"),i=this.iconPack.mic_on):(e=this.t("mic_off"),i=this.iconPack.mic_off,s["red-icon"]=!0),t=r?this.t("perm_could_not_start.audio"):"SYSTEM_DENIED"===this.micPermission?this.t("perm_sys_denied.audio"):"DENIED"===this.micPermission?this.t("perm_denied.audio"):this.audioEnabled?this.t("disable_mic"):this.t("enable_mic"),{tooltipLabel:t,label:e,icon:i,classList:s,showWarning:a||r,disable:a}}render(){if(!this.canProduceAudio||["OFF_STAGE","REQUESTED_TO_JOIN_STAGE"].includes(this.stageStatus))return null;const{tooltipLabel:t,label:e,icon:i,classList:s,showWarning:a,disable:r}=this.getState();return m(f,{title:e},m("dyte-tooltip",{kind:"block",label:t,part:"tooltip",iconPack:this.iconPack,t:this.t},m("dyte-controlbar-button",{part:"controlbar-button",icon:i,label:e,size:this.size,iconPack:this.iconPack,t:this.t,variant:this.variant,class:s,onClick:this.toggleMic,showWarning:a,disabled:r})))}static get watchers(){return{meeting:["meetingChanged"]}}};xl.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}:host(.audioDisabled) :slotted(dyte-icon){--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}";var kl=Object.freeze({__proto__:null,dyte_mic_toggle:xl});const Sl=class{constructor(t){vt(this,t),this.layout="row",this.participants=[],this.pinnedParticipants=[],this.screenShareParticipants=[],this.plugins=[],this.aspectRatio="16:9",this.gap=8,this.size=void 0,this.meeting=void 0,this.states=void 0,this.config=$t,this.iconPack=ts,this.t=ns(),this.gridSize=Uo,this.activeTab=void 0,this.initialised=void 0}componentWillLoad(){this.initialised=!1,this.screenShareParticipantsChanged(this.screenShareParticipants),this.pluginsChanged(this.plugins),this.initialised=!0}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var t;null===(t=this.meeting.meta)||void 0===t||t.removeListener("activeTabUpdate",this.activeTabUpdateListener)}meetingChanged(t){var e,i,s,a;null!=t&&(null!=(null===(e=t.meta)||void 0===e?void 0:e.selfActiveTab)&&this.onActiveTabUpdate(null===(i=t.meta.selfActiveTab)||void 0===i?void 0:i.type,null===(s=t.meta.selfActiveTab)||void 0===s?void 0:s.id),this.activeTabUpdateListener=t=>{this.onActiveTabUpdate(null==t?void 0:t.type,null==t?void 0:t.id)},null===(a=t.meta)||void 0===a||a.addListener("activeTabUpdate",this.activeTabUpdateListener))}screenShareParticipantsChanged(t=[]){(this.initialised||null==this.activeTab)&&(null==this.activeTab&&t.length>0?this.setActiveTab({type:"screenshare",participant:t[0]}):this.revalidateActiveTab())}pluginsChanged(t){if(this.initialised||null==this.activeTab)if(t.length>0){const e=t.length-1;this.setActiveTab({type:"plugin",plugin:t[e]})}else this.revalidateActiveTab()}revalidateActiveTab(){if(null!=this.activeTab)if("screenshare"===this.activeTab.type){const{participant:t}=this.activeTab;this.screenShareParticipants.some((e=>e.id===t.id))||this.reassignActiveTab()}else{const{plugin:t}=this.activeTab;this.plugins.some((e=>e.id===t.id))||this.reassignActiveTab()}}setActiveTab(t,e=!0){var i;this.activeTab=t;const s="screenshare"===t.type?t.participant.id:t.plugin.id;e&&(null===(i=this.meeting.meta)||void 0===i||i.setSelfActiveTab({type:t.type,id:s},0))}reassignActiveTab(){if(this.screenShareParticipants.length>0)this.setActiveTab({type:"screenshare",participant:this.screenShareParticipants[0]});else if(this.plugins.length>0){const t=this.plugins.length-1;this.setActiveTab({type:"plugin",plugin:this.plugins[t]})}}onActiveTabUpdate(t,e){if(null!=t&&null!=e)switch(t){case"plugin":const t=this.plugins.find((t=>t.id===e));null!=t&&this.setActiveTab({type:"plugin",plugin:t},!1);break;case"screenshare":const i=this.screenShareParticipants.find((t=>t.id===e));null!=i&&this.setActiveTab({type:"screenshare",participant:i},!1)}}getTabs(){const t=this.screenShareParticipants.map((t=>({type:"screenshare",participant:t}))),e=this.plugins.map((t=>({type:"plugin",plugin:t})));return t.concat(e)}render(){var t,e;const i={meeting:this.meeting,config:this.config,states:this.states,size:this.size,iconPack:this.iconPack,t:this.t};return m(f,null,m("main",{id:"main-view",part:"main-view"},(null===(t=this.getTabs())||void 0===t?void 0:t.length)>1&&m("dyte-tab-bar",Object.assign({activeTab:this.activeTab,tabs:this.getTabs(),onTabChange:t=>this.setActiveTab(t.detail)},i)),m("div",{id:"tabs",key:"tabs"},this.screenShareParticipants.map((t=>{var e,s;return m(cs,{element:"dyte-screenshare-view",defaults:i,props:{participant:t,key:t.id,style:{display:"screenshare"===(null===(e=this.activeTab)||void 0===e?void 0:e.type)&&(null===(s=this.activeTab)||void 0===s?void 0:s.participant.id)===t.id?"flex":"none"}},childProps:{participant:t,isScreenShare:!0},deepProps:!0})})),this.plugins.map((t=>{var e,s;return m(cs,{element:"dyte-plugin-main",defaults:i,props:{plugin:t,key:t.id,style:{display:"plugin"===(null===(e=this.activeTab)||void 0===e?void 0:e.type)&&(null===(s=this.activeTab)||void 0===s?void 0:s.plugin.id)===t.id?"flex":"none"}}})})))),m(cs,{element:"dyte-mixed-grid",defaults:i,childProps:{part:"participants-grid",class:this.gridSize.mixed?`grid-width-${this.gridSize.mixed}`:"grid-width-lg",participants:this.participants,pinnedParticipants:this.pinnedParticipants,screenShareParticipants:this.screenShareParticipants,plugins:this.plugins,aspectRatio:this.aspectRatio,gap:this.gap,size:"AUDIO_ROOM"===(null===(e=this.meeting.meta)||void 0===e?void 0:e.viewType)?"md":"sm",layout:"row"},onlyChildren:!0}))}get host(){return x(this)}static get watchers(){return{meeting:["meetingChanged"],screenShareParticipants:["screenShareParticipantsChanged"],plugins:["pluginsChanged"]}}};Sl.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block;height:100%;width:100%;display:flex}main{display:flex;flex:1 1 0%;padding-left:var(--dyte-space-4, 16px)}:host([layout='column']) main{padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}main dyte-tab-bar{margin-right:var(--dyte-space-4, 16px);box-sizing:border-box;display:flex;height:100%;width:var(--dyte-space-16, 64px);flex-direction:column}main #tabs{height:100%;flex:1 1 0%}dyte-button{z-index:10}.grid-width-sm{width:25%}.grid-width-md{width:50%}.grid-width-lg{width:66.666667%}.col{display:flex;flex-direction:column;align-items:center}.tab{display:flex;height:var(--dyte-space-16, 64px);width:var(--dyte-space-16, 64px);align-items:center;justify-content:center;margin-bottom:var(--dyte-space-2, 8px);font-size:12px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}.tab.active{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity))}.tab img{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px);border-radius:var(--dyte-border-radius-sm, 4px)}:host([size='sm']){flex-direction:column}:host([size='sm']) .grid-width-lg,:host([size='sm']) .grid-width-md{height:50%;width:100%;max-width:100%}:host([size='sm']) .grid-width-sm{height:33.333333%;width:100%;max-width:100%}:host([size='sm']) main{display:flex;flex:1 1 0%;flex-direction:column;padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}:host([size='sm']) dyte-tab-bar{height:var(--dyte-space-12, 48px);width:100%;flex-direction:row}:host([size='sm']) #tabs{flex:1 1 0%}:host([size='sm']) .tab{margin:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-2, 8px)}:host([layout='column']){flex-direction:column}:host([layout='column']) main{display:flex;flex:1 1 0%}:host([layout='column']) .grid-width-lg,:host([layout='column']) .grid-width-md{height:50%;max-width:100%;width:100%}:host([layout='column']) .grid-width-sm{height:33.333333%;max-width:100%;width:100%}@media (orientation: portrait){:host{flex-direction:column}:host .grid-width-lg{height:50%;width:100%;max-width:100%}:host .grid-width-md{height:33.333333%;width:100%;max-width:100%}:host .grid-width-sm{height:25%;width:100%;max-width:100%}:host main{flex:1 1 0%;flex-direction:column;padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}:host([size='md']) main{flex:1 1 0%;flex-direction:column;padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}:host dyte-tab-bar{height:var(--dyte-space-16, 64px);width:100%;flex-direction:row}:host #tabs{flex:1 1 0%}:host .tab{margin:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-2, 8px)}}@media (orientation: landscape){:host{flex-direction:row}:host([size='sm']){flex-direction:row}:host .grid-width-lg{height:50%;width:100%;max-width:100%}:host([size='sm']) .grid-width-sm{height:100%;max-height:100%;width:16.666667%}:host([size='sm']) main{flex:1 1 0%;flex-direction:row;padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px)}:host([size='md']) main{flex:1 1 0%;flex-direction:row;padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}:host([size='sm']) dyte-tab-bar{margin-right:var(--dyte-space-2, 8px);height:100%;width:var(--dyte-space-12, 48px);flex-direction:column}:host #tabs{flex:1 1 0%}:host .tab{margin:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-2, 8px)}}";var _l=Object.freeze({__proto__:null,dyte_mixed_grid:Sl});const Cl=class{constructor(t){vt(this,t),this.stateUpdate=k(this,"dyteStateUpdate",7),this.handleKeyDown=({key:t})=>{"Escape"===t&&this.states.activeMoreMenu&&(this.stateUpdate.emit({activeMoreMenu:!1}),Ss.activeMoreMenu=!Ss.activeMoreMenu)},this.handleOnClick=t=>{!t.composedPath().includes(this.host)&&this.states.activeMoreMenu&&(this.stateUpdate.emit({activeMoreMenu:!1}),Ss.activeMoreMenu=!Ss.activeMoreMenu)},this.toggleMoreMenu=()=>{this.stateUpdate.emit({activeMoreMenu:!Ss.activeMoreMenu}),Ss.activeMoreMenu=!Ss.activeMoreMenu},this.states=Ss,this.size=void 0,this.iconPack=ts,this.t=ns()}connectedCallback(){window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("click",this.handleOnClick)}disconnectedCallback(){window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("click",this.handleOnClick)}render(){const t=this.t("more");return m(f,{title:t},this.states.activeMoreMenu&&m("div",{class:"more-menu"},m("slot",{name:"more-elements"})),m("dyte-controlbar-button",{size:this.size,iconPack:this.iconPack,t:this.t,onClick:t=>{t.stopPropagation(),this.toggleMoreMenu()},icon:this.iconPack.horizontal_dots,label:t,part:"controlbar-button"}),m("slot",{name:"expanded"}))}get host(){return x(this)}};Cl.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:flex;flex-direction:column;overflow:visible}.more-menu{position:absolute;right:calc(var(--dyte-space-24, 96px) * -1);bottom:var(--dyte-space-16, 64px);z-index:50;margin-bottom:var(--dyte-space-3, 12px);box-sizing:border-box;max-height:60vh;width:var(--dyte-space-64, 256px);overflow:auto;border-radius:var(--dyte-border-radius-md, 8px);border-width:var(--dyte-border-width-sm, 1px);border-style:solid;--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-border-opacity));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));outline:2px solid transparent;outline-offset:2px}:host([size='sm']) .more-menu{bottom:var(--dyte-space-10, 40px)}.more-menu::-webkit-scrollbar{height:var(--dyte-space-0, 0px);width:var(--dyte-space-1\\.5, 6px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}.more-menu::-webkit-scrollbar-thumb{border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}";var Pl=Object.freeze({__proto__:null,dyte_more_toggle:Cl});const Ll=class{constructor(t){vt(this,t),this.stateUpdate=k(this,"dyteStateUpdate",7),this.permissionsUpdateListener=()=>{var t;this.canDisable=!!(null===(t=this.meeting)||void 0===t?void 0:t.self.permissions.canDisableParticipantAudio)},this.onMuteAll=()=>{this.stateUpdate.emit({activeMuteAllConfirmation:!0}),Ss.activeMuteAllConfirmation=!0},this.variant="button",this.meeting=void 0,this.size=void 0,this.iconPack=ts,this.t=ns(),this.canDisable=!1}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var t,e,i;null===(i=null===(e=null===(t=this.meeting)||void 0===t?void 0:t.self)||void 0===e?void 0:e.permissions)||void 0===i||i.removeListener("permissionsUpdate",this.permissionsUpdateListener)}meetingChanged(t){t&&(this.canDisable=!!(null==t?void 0:t.self.permissions.canDisableParticipantAudio),t.self.permissions.addListener("permissionsUpdate",this.permissionsUpdateListener))}render(){if(!this.canDisable)return null;const t=this.t("mute_all");return m(f,{title:t},m("dyte-tooltip",{kind:"block",label:t,part:"tooltip"},m("dyte-controlbar-button",{part:"controlbar-button",icon:this.iconPack.speaker_off,label:t,size:this.size,iconPack:this.iconPack,t:this.t,variant:this.variant,onClick:this.onMuteAll})))}static get watchers(){return{meeting:["meetingChanged"]}}};Ll.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}";var Tl=Object.freeze({__proto__:null,dyte_mute_all_button:Ll});const El=class{constructor(t){vt(this,t),this.stateUpdate=k(this,"dyteStateUpdate",7),this.onClose=()=>{this.stateUpdate.emit({activeMuteAllConfirmation:!1}),Ss.activeMuteAllConfirmation=!1},this.onMuteAll=()=>{var t;null===(t=this.meeting)||void 0===t||t.participants.disableAllAudio(this.allowUnmute),this.onClose()},this.meeting=void 0,this.states=void 0,this.iconPack=ts,this.t=ns(),this.allowUnmute=!0}render(){return m(f,null,m("div",{class:"leave-modal"},m("div",{class:"header"},m("h2",{class:"title"},this.t("mute_all.header"))),m("p",{class:"message"},this.t("mute_all.description")),m("div",{class:"content"},m("div",{class:"leave-meeting"},m("dyte-button",{variant:"secondary",title:this.t("close"),onClick:this.onClose,iconPack:this.iconPack,t:this.t},this.t("cancel")),m("dyte-button",{variant:"danger",title:this.t("mute_all"),onClick:this.onMuteAll,iconPack:this.iconPack,t:this.t},this.t("mute_all"))))))}};El.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block;-webkit-user-select:none;-moz-user-select:none;user-select:none}.leave-modal{position:relative;display:flex;flex-direction:column;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));padding:var(--dyte-space-4, 16px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.leave-modal .header h2{margin:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-3, 12px)}.leave-modal .content{font-size:14px}.leave-message p{margin-top:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-3, 12px)}.leave-meeting{display:flex;flex-direction:row;justify-content:space-between;gap:var(--dyte-space-2, 8px)}.leave-meeting dyte-button{flex:1 1 0%}.end-meeting{margin-top:var(--dyte-space-2, 8px)}.message{margin-bottom:var(--dyte-space-4, 16px)}label{display:flex;align-items:center}input[type='checkbox']{margin-right:var(--dyte-space-2, 8px);accent-color:rgb(var(--dyte-colors-brand-500, 33 96 253))}";var Al=Object.freeze({__proto__:null,dyte_mute_all_confirmation:El});const Ml=class{constructor(t){vt(this,t),this.onMediaScoreUpdate=({kind:t,isScreenshare:e,score:i})=>{("video"===t||this.isScreenShare&&e)&&(this.score=i)},this.participant=void 0,this.meeting=void 0,this.iconPack=ts,this.t=ns(),this.isScreenShare=!1,this.score=10}connectedCallback(){this.participantChanged(this.participant)}participantChanged(t){t&&t.addListener("mediaScoreUpdate",this.onMediaScoreUpdate)}disconnectedCallback(){var t;null===(t=this.participant)||void 0===t||t.removeListener("mediaScoreUpdate",this.onMediaScoreUpdate)}render(){let t=Math.round(this.score/2),e="good";if(t>3)return null;switch(t<1&&(t=1),t){case 3:case 2:e="poor";break;case 1:e="poorest"}return m(f,null,m("dyte-icon",{icon:this.iconPack[`signal_${t}`],class:e}),m("dyte-icon",{icon:this.iconPack.signal_5,class:"bg-signal"}))}static get watchers(){return{participant:["participantChanged"]}}};Ml.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:block;height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px)}dyte-icon{position:absolute;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);z-index:10;height:100%;width:100%;--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}dyte-icon.good{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}dyte-icon.poor{--tw-text-opacity:1;color:rgba(var(--dyte-colors-warning, 255 205 7) / var(--tw-text-opacity))}dyte-icon.poorest{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}:host([size='md']){height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}:host([size='sm']){height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}.bg-signal{position:absolute;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);z-index:0;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}";var Rl=Object.freeze({__proto__:null,dyte_network_indicator:Ml});const Dl=class{constructor(t){vt(this,t),this.disconnectMeeting=t=>{null!=t&&null!=this.countListener&&(t.participants.joined.removeListener("participantJoined",this.countListener),t.participants.joined.removeListener("participantLeft",this.countListener),(null==t?void 0:t.stage)&&this.stageUpdateListener&&t.stage.removeListener("stageStatusUpdate",this.stageUpdateListener),t.self.removeListener("roomJoined",this.countListener))},this.meeting=void 0,this.iconPack=ts,this.t=ns(),this.size=void 0,this.participantCount=0,this.isViewer=!1}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){this.disconnectMeeting(this.meeting)}meetingChanged(t,e){this.disconnectMeeting(e),null!=t&&(this.countListener=()=>{this.participantCount=t.participants.joined.size+(t.self.roomJoined?1:0)},this.countListener(),this.isViewer=vi(this.meeting),t.participants.joined.addListener("participantJoined",this.countListener),t.participants.joined.addListener("participantLeft",this.countListener),(null==t?void 0:t.stage)&&(this.stageUpdateListener=()=>{this.isViewer=vi(this.meeting)},null==t||t.stage.addListener("stageStatusUpdate",this.stageUpdateListener)),t.self.addListener("roomJoined",this.countListener))}render(){return this.isViewer?null:m(f,{tabIndex:0,role:"log","aria-label":`${this.participantCount} ${this.t("participants")}`},m("dyte-icon",{icon:this.iconPack.people,tabIndex:-1,"aria-hidden":!0,part:"icon",iconPack:this.iconPack,t:this.t}),this.participantCount)}static get watchers(){return{meeting:["meetingChanged"]}}};Dl.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);display:inline-flex;height:var(--dyte-space-10, 40px);-webkit-user-select:none;-moz-user-select:none;user-select:none;align-items:center}:host([size='sm']){margin-left:var(--dyte-space-1, 4px);margin-right:var(--dyte-space-1, 4px);font-size:12px}dyte-icon{margin-right:var(--dyte-space-1, 4px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}:host([size='sm']) dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}";var Il=Object.freeze({__proto__:null,dyte_participant_count:Dl});const Ol=class{constructor(t){vt(this,t),this.onVideoUpdate=t=>{this.videoState=t},this.videoState=void 0,this.isPinned=!1,this.nameTagPosition="bottom-left",this.isPreview=!1,this.participant=void 0,this.states=void 0,this.config=$t,this.variant="solid",this.size=void 0,this.iconPack=ts,this.t=ns()}connectedCallback(){this.participantsChanged(this.participant)}componentDidLoad(){this.videoStateChanged(this.videoState)}disconnectedCallback(){null!=this.participant&&this.participant.removeListener("videoUpdate",this.onVideoUpdate)}async participantsChanged(t){null!=t&&(this.videoState={videoEnabled:t.videoEnabled,videoTrack:t.videoTrack},this.isPinned=t.isPinned,t.addListener("videoUpdate",this.onVideoUpdate))}videoStateChanged(t){if(null!=t&&null!=this.videoEl)if(t.videoEnabled){const e=new MediaStream;e.addTrack(t.videoTrack),this.videoEl.srcObject=e}else this.videoEl.srcObject=void 0}isMirrored(){var t;if(null!=this.participant){if("preview"in this.participant||this.isPreview){const e=this.states||Ss,i=null===(t=null==e?void 0:e.prefs)||void 0===t?void 0:t.mirrorVideo;if("boolean"==typeof i)return i}}return!1}render(){var t,e,i,s;return m(f,null,m("video",{ref:t=>this.videoEl=t,class:{visible:null===(t=this.videoState)||void 0===t?void 0:t.videoEnabled,mirror:this.isMirrored(),[null!==(s=null===(i=null===(e=this.config)||void 0===e?void 0:e.config)||void 0===i?void 0:i.videoFit)&&void 0!==s?s:"cover"]:!0},autoPlay:!0,playsInline:!0,muted:!0}),m("slot",null))}static get watchers(){return{participant:["participantsChanged"],videoState:["videoStateChanged"]}}};Ol.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:flex;align-items:center;justify-content:center;aspect-ratio:16 / 9;height:var(--dyte-space-56, 224px);overflow:hidden;border-radius:var(--dyte-border-radius-lg, 12px);-webkit-user-select:none;-moz-user-select:none;user-select:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-video-bg, 24 24 24) / var(--tw-bg-opacity));transition-property:var(--dyte-transition-property, all);transition-duration:150ms}@media (prefers-reduced-motion){:host{--dyte-transition-property:none}}:host([size='sm'][variant='solid']) ::slotted(dyte-name-tag){left:var(--dyte-space-2, 8px);bottom:var(--dyte-space-2, 8px);height:var(--dyte-space-4, 16px)}video{display:none;position:absolute;height:100%;width:100%;border-radius:var(--dyte-border-radius-lg, 12px)}video.contain{-o-object-fit:contain;object-fit:contain}video.cover{-o-object-fit:cover;object-fit:cover}video.visible{display:block}video::-webkit-media-controls{display:none !important}:host([variant='gradient']) ::slotted(dyte-audio-visualizer){position:absolute;top:var(--dyte-space-2, 8px);right:var(--dyte-space-2, 8px);border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));padding:var(--dyte-space-2, 8px)}:host([variant='gradient']) ::slotted(dyte-name-tag){bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);display:flex;width:100%;align-items:center;justify-content:center;text-align:center;background-color:transparent;background-image:linear-gradient(to top, var(--tw-gradient-stops));--tw-gradient-from:rgb(var(--dyte-colors-background-1000, 8 8 8));--tw-gradient-to:rgba(var(--dyte-colors-background-1000, 8 8 8) / 0);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to);--tw-gradient-to:transparent}video.mirror{transform:scaleX(-1)}@media (orientation: portrait){:host{height:var(--dyte-space-44, 176px)}}";var $l=Object.freeze({__proto__:null,dyte_participant_setup:Ol});const Ul=class{constructor(t){vt(this,t),this.stateUpdate=k(this,"dyteStateUpdate",7),this.updateParticipantCountsInTabs=yl((()=>{var t;let e=(null===(t=this.meeting.participants.waitlisted)||void 0===t?void 0:t.size)||0,i=0,s=0;this.meeting.participants.joined.toArray().forEach((t=>{"ON_STAGE"===t.stageStatus&&i++,"OFF_STAGE"===t.stageStatus&&s++,"REQUESTED_TO_JOIN_STAGE"===t.stageStatus&&(e++,s++),"ACCEPTED_TO_JOIN_STAGE"===t.stageStatus&&s++})),"ON_STAGE"===this.meeting.self.stageStatus&&i++,"OFF_STAGE"===this.meeting.self.stageStatus&&s++,"REQUESTED_TO_JOIN_STAGE"===this.meeting.self.stageStatus&&(e++,s++),"ACCEPTED_TO_JOIN_STAGE"===this.meeting.self.stageStatus&&s++;const a=[];this.shouldShowRequestsTab()&&a.push({id:"requests",name:m("span",null,this.t("requests"),"\xa0",m("span",{class:`tab-participant-count-badge ${e>0?"requests-pending":""} ${"requests"===this.currentParticipantsTabId?"selected-tab":""}`},e))}),a.push({id:"stage-list",name:m("span",null,this.t("participants"),"\xa0",m("span",{class:"tab-participant-count-badge "+("stage-list"===this.currentParticipantsTabId?"selected-tab":"")},i))}),this.shouldShowViewersTab()&&a.push({id:"viewer-list",name:m("span",null,this.t("viewers"),"\xa0",m("span",{class:"tab-participant-count-badge "+("viewer-list"===this.currentParticipantsTabId?"selected-tab":"")},s))}),this.tabs=a,this.hasRequests=e>0})),this.onSearchInput=t=>{this.search=t.target.value},this.shouldShowViewersTab=()=>{var t,e,i;return null===(i=null===(e=null===(t=this.meeting)||void 0===t?void 0:t.self)||void 0===e?void 0:e.permissions)||void 0===i?void 0:i.stageEnabled},this.shouldShowRequestsTab=()=>{var t;let e=!1;return e="LIVESTREAM"!==this.meeting.meta.viewType&&((null===(t=this.meeting.self.config.waitingRoom)||void 0===t?void 0:t.isEnabled)&&this.meeting.self.permissions.acceptWaitingRequests),this.meeting.self.permissions.stageEnabled&&this.meeting.self.permissions.acceptStageRequests||e},this.viewSection=t=>{this.currentParticipantsTabId=t},this.meeting=void 0,this.states=void 0,this.config=$t,this.size=void 0,this.iconPack=ts,this.defaultParticipantsTabId="stage-list",this.t=ns(),this.currentParticipantsTabId=this.defaultParticipantsTabId,this.tabs=[],this.hasRequests=!1,this.search=""}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){null!=this.meeting&&(this.meeting.participants.joined.off("participantJoined",this.updateParticipantCountsInTabs),this.meeting.participants.joined.off("participantsUpdate",this.updateParticipantCountsInTabs),this.meeting.participants.joined.off("participantLeft",this.updateParticipantCountsInTabs),this.meeting.participants.joined.off("stageStatusUpdate",this.updateParticipantCountsInTabs),this.meeting.stage.off("stageStatusUpdate",this.updateParticipantCountsInTabs),this.meeting.participants.waitlisted.off("participantJoined",this.updateParticipantCountsInTabs),this.meeting.participants.waitlisted.off("participantLeft",this.updateParticipantCountsInTabs),this.meeting.participants.waitlisted.off("stageStatusUpdate",this.updateParticipantCountsInTabs))}meetingChanged(t){null!=t&&(t.participants.joined.on("participantJoined",this.updateParticipantCountsInTabs),t.participants.joined.on("participantsUpdate",this.updateParticipantCountsInTabs),t.participants.joined.on("participantLeft",this.updateParticipantCountsInTabs),t.participants.joined.on("stageStatusUpdate",this.updateParticipantCountsInTabs),t.stage.on("stageStatusUpdate",this.updateParticipantCountsInTabs),t.participants.waitlisted.on("participantJoined",this.updateParticipantCountsInTabs),t.participants.waitlisted.on("participantLeft",this.updateParticipantCountsInTabs),t.participants.waitlisted.on("stageStatusUpdate",this.updateParticipantCountsInTabs),this.updateParticipantCountsInTabs())}currentParticipantsTabIdChanged(){Ss.participantsTabId=this.currentParticipantsTabId,this.stateUpdate.emit({participantsTabId:this.currentParticipantsTabId}),this.updateParticipantCountsInTabs()}render(){const t={meeting:this.meeting,states:this.states||Ss,config:this.config,size:this.size,iconPack:this.iconPack,t:this.t};return m(f,null,m("div",{class:"search",part:"search"},m("dyte-icon",{icon:this.iconPack.search,part:"search-icon",iconPack:this.iconPack,t:this.t}),m("input",{type:"search",autocomplete:"off",placeholder:this.t("search"),onInput:this.onSearchInput,part:"search-input"})),m("slot",{name:"start"}),m("div",{class:"ctr scrollbar "+("requests"!==this.currentParticipantsTabId?"virtualised":""),part:"container"},m("dyte-sidebar-ui",{tabs:this.tabs,currentTab:this.currentParticipantsTabId,view:"full-screen",hideHeader:!0,hideCloseAction:!0,style:{position:"relative"},onTabChange:t=>{this.viewSection(t.detail),t.stopPropagation()}},(!this.currentParticipantsTabId||"stage-list"===this.currentParticipantsTabId)&&m("div",{slot:"stage-list",style:{marginTop:"10px",height:"100%"}},m(cs,{element:"dyte-participants-stage-list",defaults:t,props:{search:this.search,hideHeader:!0}})),"requests"===this.currentParticipantsTabId&&m("div",{slot:"requests",style:{marginTop:"10px",height:"100%"}},!this.hasRequests&&m("div",{class:"no-pending-requests"},this.t("participants.no_pending_requests")),m(cs,{element:"dyte-participants-stage-queue",defaults:t}),m(cs,{element:"dyte-participants-waiting-list",defaults:t})),"viewer-list"===this.currentParticipantsTabId&&m("div",{slot:"viewer-list",style:{marginTop:"10px",height:"100%"}},m(cs,{element:"dyte-participants-viewer-list",defaults:t,props:{search:this.search,hideHeader:!0}})))),m("slot",{name:"end"}))}static get watchers(){return{meeting:["meetingChanged"],currentParticipantsTabId:["currentParticipantsTabIdChanged"]}}};Ul.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))\n    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{display:flex;height:100%;width:100%;flex-direction:column;font-size:14px}*{box-sizing:border-box}.ctr{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);box-sizing:border-box;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-0, 0px);padding-bottom:var(--dyte-space-0, 0px);overflow-y:auto;flex-grow:1;flex-basis:0}.ctr.virtualised{overflow-y:hidden}.search{position:sticky;box-sizing:border-box;display:flex;align-items:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));margin-left:var(--dyte-space-3, 12px);margin-right:var(--dyte-space-3, 12px);margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-0, 0px)}.search dyte-icon{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.search input{box-sizing:border-box;height:var(--dyte-space-9, 36px);width:100%;padding-right:var(--dyte-space-2, 8px);border-width:var(--dyte-border-width-none, 0);border-style:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));outline:2px solid transparent;outline-offset:2px;border-radius:var(--dyte-border-radius-sm, 4px);font-size:14px}.search input::-moz-placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.search input::placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}:host([size='md']) .search{margin-top:var(--dyte-space-4, 16px) !important;margin-bottom:var(--dyte-space-4, 16px) !important}:host([size='sm']) .search{margin-top:var(--dyte-space-4, 16px) !important;margin-bottom:var(--dyte-space-4, 16px) !important}.no-pending-requests{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-4, 16px);text-align:center;font-size:12px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}";var Fl=Object.freeze({__proto__:null,dyte_participants:Ul});const zl=console;class Nl{constructor(t,e){this.meeting=t,this.audio=null!=e?e:document.createElement("audio"),this.audio.autoplay=!0,this.audioStream=new MediaStream,this.audio.srcObject=this.audioStream,this.audioTracks=[]}addTrack(t,e){this.audioTracks.some((e=>e.id===t))||(this.audioTracks.push({id:t,track:e}),this.audioStream.addTrack(e),this.play())}removeTrack(t){const e=this.audioTracks.find((e=>e.id===t));null!=e&&(this.audioStream.removeTrack(e.track),this.audioTracks=this.audioTracks.filter((e=>e.id!==t)))}async play(){var t;this.audio.srcObject=this.audioStream,await(null===(t=this.audio.play())||void 0===t?void 0:t.catch((t=>{"NotAllowedError"===t.name?null!=this._onError&&this._onError():"AbortError"!==t.name&&zl.error("[dyte-audio] play() error\n",t)})))}async setDevice(t){var e,i,s;Rs(this.meeting)||await(null===(s=null===(i=(e=this.audio).setSinkId)||void 0===i?void 0:i.call(e,t))||void 0===s?void 0:s.catch((t=>{zl.error("[dyte-audio] setSinkId() error\n",t)})))}onError(t){this._onError=t}}const jl=class{constructor(t){vt(this,t),this.dialogClose=k(this,"dialogClose",7),this.onDyteDialogClose=()=>{this.showPlayDialog=!1,this.dialogClose.emit()},this.meeting=void 0,this.iconPack=ts,this.t=ns(),this.preloadedAudioElem=void 0,this.showPlayDialog=!1}componentDidLoad(){this.meetingChanged(this.meeting)}disconnectedCallback(){var t;null!=this.meeting&&(this.audioUpdateListener&&this.meeting.participants.joined.removeListener("audioUpdate",this.audioUpdateListener),this.screenShareUpdateListener&&this.meeting.participants.joined.removeListener("screenShareUpdate",this.screenShareUpdateListener),this.participantLeftListener&&this.meeting.participants.joined.removeListener("participantLeft",this.participantLeftListener),this.deviceUpdateListener&&this.meeting.self.removeListener("deviceUpdate",this.deviceUpdateListener),this.stageStatusUpdateListener&&(null===(t=this.meeting.stage)||void 0===t||t.removeListener("stageStatusUpdate",this.stageStatusUpdateListener)))}async setupAudio(){this.audio=new Nl(this.meeting,this.preloadedAudioElem);const t=this.meeting.self.getCurrentDevices();null!=t.speaker&&await this.audio.setDevice(t.speaker.deviceId)}async handleAutoPlayError(){this.audio||await this.setupAudio(),this.audio.onError((()=>{this.showPlayDialog=!0})),this.audio.play()}async handleEvents(t){this.audioUpdateListener=({id:t,audioEnabled:e,audioTrack:i})=>{const s=`audio-${t}`;e&&null!=i?this.audio.addTrack(s,i):this.audio.removeTrack(s)};const e=t.participants.joined.toArray();for(const i of e)this.audioUpdateListener(i);this.participantLeftListener=({id:t})=>{this.audio.removeTrack(`audio-${t}`),this.audio.removeTrack(`screenshare-${t}`)},this.screenShareUpdateListener=({id:t,screenShareEnabled:e,screenShareTracks:i})=>{const s=`screenshare-${t}`;e&&null!=i.audio?this.audio.addTrack(s,i.audio):this.audio.removeTrack(s)},this.deviceUpdateListener=({device:t,preview:e})=>{e||"audiooutput"===t.kind&&this.audio.setDevice(t.deviceId)},t.participants.joined.addListener("audioUpdate",this.audioUpdateListener),t.participants.joined.addListener("screenShareUpdate",this.screenShareUpdateListener),t.participants.joined.addListener("participantLeft",this.participantLeftListener),t.self.addListener("deviceUpdate",this.deviceUpdateListener)}async meetingChanged(t){var e;null!=t&&(this.setupAudio(),vi(t)?(this.stageStatusUpdateListener=async t=>{"ON_STAGE"===t&&await this.handleAutoPlayError()},null===(e=t.stage)||void 0===e||e.on("stageStatusUpdate",this.stageStatusUpdateListener)):await this.handleAutoPlayError(),await this.handleEvents(t))}render(){return m(f,null,this.showPlayDialog&&m("dyte-dialog",{open:!0,onDyteDialogClose:this.onDyteDialogClose,hideCloseButton:!0,disableEscapeKey:!0,iconPack:this.iconPack,t:this.t},m("div",{class:"modal"},m("h3",null,this.t("audio_playback.title")),m("p",null,this.t("audio_playback.description")),m("dyte-button",{kind:"wide",onClick:()=>{this.audio.play(),this.onDyteDialogClose()},title:this.t("audio_playback"),iconPack:this.iconPack,t:this.t},this.t("audio_playback")))))}static get watchers(){return{meeting:["meetingChanged"]}}};jl.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block;overflow-wrap:break-word;color:rgb(var(--dyte-colors-text-1000, 255 255 255));word-wrap:break-word}.modal{box-sizing:border-box;width:100%;max-width:var(--dyte-space-96, 384px);padding:var(--dyte-space-4, 16px);border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity))}.modal h3{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px);font-size:24px;font-weight:500}.modal p{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-6, 24px)}.modal dyte-button{width:100%}";var Bl=Object.freeze({__proto__:null,dyte_participants_audio:jl});const Hl=class{constructor(t){vt(this,t),this.createParticipantNode=t=>{const e={meeting:this.meeting,view:this.view,t:this.t,config:this.config,states:Ss,size:this.size,iconPack:this.iconPack};return m("div",null,m(cs,{element:"dyte-participant",defaults:e,props:{role:"listitem",participant:t,key:t.id},childProps:Object.assign(Object.assign({},e),{participant:t,size:this.size}),deepProps:!0}))},this.updateStageList=()=>{this.getParticipants(this.search)},this.meeting=void 0,this.config=$t,this.size=void 0,this.hideHeader=!1,this.iconPack=ts,this.view="sidebar",this.t=ns(),this.search="",this.participants=[]}connectedCallback(){this.meetingChanged(this.meeting),this.searchChanged(this.search)}disconnectedCallback(){const{participants:t,stage:e}=this.meeting;null!=this.meeting&&(this.participantJoinedListener&&this.meeting.participants.joined.removeListener("participantJoined",this.participantJoinedListener),this.participantLeftListener&&this.meeting.participants.joined.removeListener("participantLeft",this.participantLeftListener),t.joined.removeListener("stageStatusUpdate",this.updateStageList),null==e||e.removeListener("stageStatusUpdate",this.updateStageList))}meetingChanged(t){null!=t&&(this.participantJoinedListener=t=>{if("ON_STAGE"!==t.stageStatus)return;const e=this.search.toLowerCase();t.name.toLowerCase().includes(e)&&t.id.toLowerCase().includes(e)&&(this.participants=[...this.participants.filter((e=>e.id!==t.id)),t])},this.participantLeftListener=t=>{this.participants=this.participants.filter((e=>e.id!==t.id))},t.participants.joined.addListener("participantJoined",this.participantJoinedListener),t.participants.joined.addListener("participantLeft",this.participantLeftListener),this.updateStageList(),null==t||t.participants.joined.on("stageStatusUpdate",this.updateStageList),null==t||t.stage.on("stageStatusUpdate",this.updateStageList))}searchChanged(t){this.getParticipants(t)}getParticipants(t=this.search){let e="ON_STAGE"===this.meeting.stage.status?[this.meeting.self]:[];e=[...e,...this.meeting.participants.joined.toArray().filter((t=>"ON_STAGE"===t.stageStatus))],this.participants=""===t?e:e.filter((e=>{var i;return(null!==(i=e.name)&&void 0!==i?i:e.id).toLowerCase().includes(t.toLowerCase())}))}render(){return m(f,null,m("div",{class:"participants-container"},!this.hideHeader&&m("div",{class:"heading-count",part:"heading-count"},this.t("participants")," (",this.participants.length,")"),m("dyte-virtualized-participant-list",{items:this.participants,renderItem:this.createParticipantNode,part:"participants",class:"participants",emptyListElement:m("div",{class:"empty-stage-list"},this.search.length>0?this.t("search.could_not_find"):this.t("search.empty"))})))}static get watchers(){return{meeting:["meetingChanged"],search:["searchChanged"]}}};Hl.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;width:100%;flex-direction:column;font-size:14px}.participants-container{margin-bottom:var(--dyte-space-4, 16px);height:100%;width:100%}h3,.heading-count{margin:var(--dyte-space-0, 0px);display:flex;align-items:center;justify-content:center;padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:400;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));text-align:center}.heading-count{font-size:14px}.participants{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.empty-stage-list{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-4, 16px);text-align:center;font-size:12px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}dyte-participant{width:100%}";var Vl=Object.freeze({__proto__:null,dyte_participants_stage_list:Hl});const Gl=class{constructor(t){vt(this,t),this.updateStageRequestedParticipants=()=>{this.stageRequestedParticipants=this.meeting.participants.joined.toArray().filter((t=>"REQUESTED_TO_JOIN_STAGE"===t.stageStatus))},this.acceptStageRequest=async t=>{const{userId:e}=t;await this.meeting.stage.grantAccess([e]),this.updateStageRequestedParticipants()},this.rejectStageRequest=async t=>{const{userId:e}=t;await this.meeting.stage.denyAccess([e]),this.updateStageRequestedParticipants()},this.acceptAllStageRequest=async()=>{await this.meeting.stage.grantAccess(this.stageRequestedParticipants.map((t=>t.userId))),this.updateStageRequestedParticipants()},this.denyAllStageRequest=async()=>{var t;await(null===(t=this.meeting.stage)||void 0===t?void 0:t.denyAccess(this.stageRequestedParticipants.map((t=>t.userId)))),this.updateStageRequestedParticipants()},this.shouldShowStageRequests=()=>this.meeting.self.permissions.stageEnabled&&this.meeting.self.permissions.acceptStageRequests&&this.stageRequestedParticipants.length>0,this.updateRequestList=async t=>{var e,i,s,a,r,n,o;this.meeting.self.permissions.acceptStageRequests&&this.meeting.self.permissions.stageEnabled?"LIVESTREAM"===this.meeting.meta.viewType||"HIVE"===(null===(s=null===(i=null===(e=this.meeting)||void 0===e?void 0:e.self)||void 0===i?void 0:i.permissions)||void 0===s?void 0:s.mediaRoomType)?(t||(t=null!==(n=null===(r=await(null===(a=this.meeting.stage)||void 0===a?void 0:a.getAccessRequests()))||void 0===r?void 0:r.stageRequests)&&void 0!==n?n:[]),this.stageRequestedParticipants=t.map((t=>Object.assign(Object.assign({},t),{name:t.displayName})))):this.stageRequestedParticipants=null===(o=[this.meeting.self,...this.meeting.participants.joined.toArray()])||void 0===o?void 0:o.filter((t=>"REQUESTED_TO_JOIN_STAGE"===t.stageStatus)):this.stageRequestedParticipants=[]},this.meeting=void 0,this.config=$t,this.size=void 0,this.iconPack=ts,this.view="sidebar",this.t=ns(),this.stageRequestedParticipants=[]}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){const{stage:t}=this.meeting;null==t||t.removeListener("stageAccessRequestUpdate",this.updateRequestList)}meetingChanged(t){var e;null!=t&&(this.updateRequestList(),null===(e=t.stage)||void 0===e||e.on("stageAccessRequestUpdate",this.updateRequestList))}render(){if("sidebar"===this.view&&this.shouldShowStageRequests())return m("div",{class:"stage-requested-participants"},m("div",{class:"heading-count",part:"staged-heading-count"},this.t("stage_request.header_title")," (",this.stageRequestedParticipants.length,")"),m("ul",{class:"participants",part:"staged-participants"},this.stageRequestedParticipants.map((t=>m("li",{class:"waiting-participant",key:t.id},m("div",{class:"participant-details"},m("dyte-avatar",{participant:t,size:"sm",iconPack:this.iconPack,t:this.t}),m("p",{class:"name",title:t.name},t.name)),m("div",{class:"waitlist-controls"},m("dyte-tooltip",{label:this.t("stage_request.deny_request"),variant:"secondary",iconPack:this.iconPack,t:this.t},m("dyte-button",{variant:"secondary",kind:"icon",onClick:()=>this.rejectStageRequest(t),iconPack:this.iconPack,t:this.t},m("dyte-icon",{class:"deny",icon:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t}))),m("dyte-tooltip",{label:this.t("stage_request.accept_request"),variant:"secondary",iconPack:this.iconPack,t:this.t},m("dyte-button",{variant:"secondary",kind:"icon",iconPack:this.iconPack,t:this.t,onClick:()=>this.acceptStageRequest(t)},m("dyte-icon",{class:"accept",icon:this.iconPack.checkmark})))))))),m("div",{class:"bulk-actions"},m("dyte-button",{class:"accept-all-button",variant:"secondary",iconPack:this.iconPack,t:this.t,onClick:this.acceptAllStageRequest},this.t("stage_request.accept_all")),m("dyte-button",{class:"deny-all-button",variant:"danger",iconPack:this.iconPack,t:this.t,onClick:this.denyAllStageRequest},this.t("stage_request.deny_all"))))}static get watchers(){return{meeting:["meetingChanged"]}}};Gl.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-top:var(--dyte-space-2, 8px);display:flex;width:100%;flex-direction:column;font-size:14px}.stage-requested-participants{margin-bottom:var(--dyte-space-8, 32px)}.stage-requested-participants .bulk-actions{display:flex;gap:var(--dyte-space-2, 8px)}.stage-requested-participants .bulk-actions .accept-all-button{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}.stage-requested-participants .bulk-actions dyte-button{flex:1 1 0%}h3,.heading-count{margin:var(--dyte-space-0, 0px);display:flex;align-items:center;justify-content:center;padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:400;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));text-align:center}.heading-count{font-size:14px}.participants{margin-top:var(--dyte-space-2, 8px);padding:var(--dyte-space-0, 0px)}.waiting-participant{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);display:flex;align-items:center}.waiting-participant .participant-details{margin-right:auto;display:flex;align-items:center}.waiting-participant .participant-details dyte-avatar{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);flex-shrink:0;font-size:14px}.waiting-participant .participant-details .name{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}@media (min-width: 1080px){.waiting-participant .participant-details .name{max-width:var(--dyte-space-40, 160px)}}.waiting-participant .waitlist-controls{display:flex}.waiting-participant .waitlist-controls dyte-button{margin-left:var(--dyte-space-2, 8px);cursor:pointer;border-radius:var(--dyte-border-radius-sm, 4px)}.waiting-participant .waitlist-controls dyte-icon.accept{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}.waiting-participant .waitlist-controls dyte-icon.deny{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}";var ql=Object.freeze({__proto__:null,dyte_participants_stage_queue:Gl});const Zl=class{constructor(t){vt(this,t),this.stateUpdate=k(this,"dyteStateUpdate",7),this.updateStageRequests=async t=>{var e,i,s;t||(t=null!==(s=null===(i=null===(e=this.meeting.stage)||void 0===e?void 0:e.getAccessRequests())||void 0===i?void 0:i.stageRequests)&&void 0!==s?s:[]),this.stageRequestedParticipants=t,this.stageRequestedParticipants="REQUESTED_TO_JOIN_STAGE"===this.meeting.stage.status?[this.meeting.self,...t]:t,this.updateBadgeCount()},this.updateBadgeCount=()=>{this.badgeCount=this.waitlistedParticipants.length+this.stageRequestedParticipants.length},this.updateCanView=()=>{this.canViewParticipants=Fn(this.meeting)},this.variant="button",this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=ts,this.t=ns(),this.participantsActive=!1,this.waitlistedParticipants=[],this.stageRequestedParticipants=[],this.badgeCount=0,this.canViewParticipants=!1}connectedCallback(){this.meetingChanged(this.meeting),this.statesChanged(this.states),this.removeStateChangeListener=_s("sidebar",(()=>this.statesChanged()))}disconnectedCallback(){var t,e,i;this.removeStateChangeListener&&this.removeStateChangeListener(),null!=this.meeting&&(null===(e=null===(t=this.meeting)||void 0===t?void 0:t.stage)||void 0===e||e.removeListener("stageStatusUpdate",this.updateCanView),this.waitlistedParticipantJoinedListener&&this.meeting.participants.waitlisted.removeListener("participantJoined",this.waitlistedParticipantJoinedListener),this.waitlistedParticipantLeftListener&&this.meeting.participants.waitlisted.removeListener("participantLeft",this.waitlistedParticipantLeftListener),null===(i=this.meeting.stage)||void 0===i||i.removeListener("stageAccessRequestUpdate",this.updateStageRequests))}meetingChanged(t){var e;null!=t&&(this.canViewParticipants=Fn(t),null===(e=null==t?void 0:t.stage)||void 0===e||e.on("stageStatusUpdate",this.updateCanView),t.self.permissions.acceptWaitingRequests&&(this.waitlistedParticipants=t.participants.waitlisted.toArray(),this.waitlistedParticipantJoinedListener=t=>{this.waitlistedParticipants.some((e=>e.id===t.id))||(this.waitlistedParticipants=[...this.waitlistedParticipants,t],this.updateBadgeCount())},this.waitlistedParticipantLeftListener=t=>{this.waitlistedParticipants=this.waitlistedParticipants.filter((e=>e.id!==t.id)),this.updateBadgeCount()},t.participants.waitlisted.addListener("participantJoined",this.waitlistedParticipantJoinedListener),t.participants.waitlisted.addListener("participantLeft",this.waitlistedParticipantLeftListener)),this.meeting.self.permissions.stageEnabled&&this.meeting.self.permissions.acceptStageRequests&&(this.updateStageRequests(),null==t||t.stage.on("stageAccessRequestUpdate",this.updateStageRequests)),this.updateBadgeCount())}statesChanged(t){const e=t||Ss;null!=e&&(this.participantsActive=!0===e.activeSidebar&&"participants"===e.sidebar)}toggleParticipantsTab(){const t=this.states||Ss;this.participantsActive=!((null==t?void 0:t.activeSidebar)&&"participants"===(null==t?void 0:t.sidebar)),Ss.activeSidebar=this.participantsActive,Ss.sidebar=this.participantsActive?"participants":void 0,Ss.activeMoreMenu=!1,Ss.activeAI=!1,this.stateUpdate.emit({activeSidebar:this.participantsActive,sidebar:this.participantsActive?"participants":void 0,activeMoreMenu:!1,activeAI:!1})}render(){if(!this.canViewParticipants)return;const t=this.t("participants");return m(f,{title:t},0!==this.badgeCount&&!this.participantsActive&&m("div",{class:"waiting-participants-count",part:"waiting-participants-count"},m("span",null,this.badgeCount<=100?this.badgeCount:"99+")),m("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,class:{active:this.participantsActive},onClick:()=>this.toggleParticipantsTab(),icon:this.iconPack.participants,label:t,variant:this.variant}))}static get watchers(){return{meeting:["meetingChanged"],states:["statesChanged"]}}};Zl.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:block}.waiting-participants-count{position:absolute;right:var(--dyte-space-3, 12px);box-sizing:border-box;padding:var(--dyte-space-0\\.5, 2px);-webkit-user-select:none;-moz-user-select:none;user-select:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));font-size:12px;display:flex;height:var(--dyte-space-5, 20px);min-width:var(--dyte-space-5, 20px);align-items:center;justify-content:center;border-radius:9999px;z-index:1}:host([variant='horizontal']){display:flex;flex-direction:row-reverse;align-items:center}:host([variant='horizontal']) .waiting-participants-count{right:var(--dyte-space-4, 16px);top:auto}";var Kl=Object.freeze({__proto__:null,dyte_participants_toggle:Zl});const Wl=class{constructor(t){vt(this,t),this.updateStageViewers=()=>{this.getViewers(this.search)},this.createParticipantNode=t=>m("dyte-participant",{role:"listitem",key:t.id,meeting:this.meeting,participant:t,view:this.view,iconPack:this.iconPack,config:this.config,t:this.t}),this.shouldShowViewers=()=>{var t,e,i;return null===(i=null===(e=null===(t=this.meeting)||void 0===t?void 0:t.self)||void 0===e?void 0:e.permissions)||void 0===i?void 0:i.stageEnabled},this.meeting=void 0,this.config=$t,this.size=void 0,this.hideHeader=!1,this.iconPack=ts,this.view="sidebar",this.search="",this.t=ns(),this.stageViewers=[]}connectedCallback(){this.meetingChanged(this.meeting),this.searchChanged(this.search)}meetingChanged(t){null!=t&&(this.participantJoinedListener=t=>{if("ON_STAGE"===t.stageStatus)return;const e=this.search.toLowerCase();e.length>0&&!t.name.toLowerCase().includes(e)||(this.stageViewers=[...this.stageViewers.filter((e=>e.id!==t.id)),t])},this.participantLeftListener=t=>{this.stageViewers=this.stageViewers.filter((e=>e.id!==t.id))},t.participants.joined.addListener("participantJoined",this.participantJoinedListener),t.participants.joined.addListener("participantLeft",this.participantLeftListener),t.participants.joined.on("stageStatusUpdate",this.updateStageViewers),t.stage.on("stageStatusUpdate",this.updateStageViewers))}searchChanged(t){this.getViewers(t)}disconnectedCallback(){const{participants:t,stage:e}=this.meeting;this.participantJoinedListener&&this.meeting.participants.joined.removeListener("participantJoined",this.participantJoinedListener),this.participantLeftListener&&this.meeting.participants.joined.removeListener("participantLeft",this.participantLeftListener),t.joined.removeListener("stageStatusUpdate",this.updateStageViewers),e.removeListener("stageStatusUpdate",this.updateStageViewers)}getViewers(t){let e="ON_STAGE"===this.meeting.stage.status?[]:[this.meeting.self];e=[...e,...this.meeting.participants.joined.toArray()].filter((t=>"ON_STAGE"!==t.stageStatus)),this.stageViewers=""===t?e:e.filter((e=>{var i;return(null!==(i=e.name)&&void 0!==i?i:e.id).toLowerCase().includes(t.toLowerCase())}))}render(){if("sidebar"===this.view&&this.shouldShowViewers())return m("div",{class:"list"},!this.hideHeader&&m("div",{class:"heading-count",part:"heading-count"},this.t("viewers")," (",this.stageViewers.length,")"),m("dyte-virtualized-participant-list",{items:this.stageViewers,renderItem:this.createParticipantNode,class:"participants",part:"participants",style:{height:"100%"},emptyListElement:m("div",{class:"empty-viewers-list"},this.search.length>0?this.t("participants.errors.empty_results"):this.t("participants.empty_list"))}))}static get watchers(){return{meeting:["meetingChanged"],search:["searchChanged"]}}};Wl.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:100%;width:100%;flex-direction:column;font-size:14px}.list{margin-bottom:var(--dyte-space-4, 16px);display:flex;height:100%;flex-direction:column}h3,.heading-count{margin:var(--dyte-space-0, 0px);align-items:center;justify-content:center;padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:400;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));text-align:center}.heading-count{font-size:14px}.participants{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.empty-viewers-list{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);text-align:center;font-size:12px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}";var Yl=Object.freeze({__proto__:null,dyte_participants_viewer_list:Wl});const Ql=class{constructor(t){vt(this,t),this.acceptWaitingRoomRequest=async t=>{await this.meeting.participants.acceptWaitingRoomRequest(t)},this.acceptAllWaitingRoomRequests=async()=>{await this.meeting.participants.acceptAllWaitingRoomRequest(this.waitlistedParticipants.map((t=>t.id)))},this.rejectWaitingRoomRequest=async t=>{await this.meeting.participants.rejectWaitingRoomRequest(t)},this.shouldShowWaitlist=()=>"LIVESTREAM"!==this.meeting.meta.viewType&&(this.meeting.self.permissions.acceptWaitingRequests&&0!==this.waitlistedParticipants.length),this.meeting=void 0,this.config=$t,this.size=void 0,this.iconPack=ts,this.view="sidebar",this.t=ns(),this.waitlistedParticipants=[]}disconnectedCallback(){const{participants:t}=this.meeting;this.waitlistedParticipantJoinedListener&&t.waitlisted.removeListener("participantJoined",this.waitlistedParticipantJoinedListener),this.waitlistedParticipantLeftListener&&t.waitlisted.removeListener("participantLeft",this.waitlistedParticipantLeftListener),this.waitlistedParticipantsClearedListener&&t.waitlisted.removeListener("participantsCleared",this.waitlistedParticipantsClearedListener)}connectedCallback(){this.meetingChanged(this.meeting)}meetingChanged(t){null!=t&&(this.waitlistedParticipants=t.participants.waitlisted.toArray(),this.waitlistedParticipantJoinedListener=t=>{this.waitlistedParticipants.some((e=>e.id===t.id))||(this.waitlistedParticipants=[...this.waitlistedParticipants,t])},this.waitlistedParticipantLeftListener=t=>{this.waitlistedParticipants=this.waitlistedParticipants.filter((e=>e.id!==t.id))},this.waitlistedParticipantsClearedListener=()=>{this.waitlistedParticipants=[]},t.participants.waitlisted.addListener("participantJoined",this.waitlistedParticipantJoinedListener),t.participants.waitlisted.addListener("participantLeft",this.waitlistedParticipantLeftListener),t.participants.waitlisted.addListener("participantsCleared",this.waitlistedParticipantsClearedListener))}render(){if("sidebar"===this.view&&this.shouldShowWaitlist())return m("div",{class:"waiting-participants"},m("div",{class:"heading-count",part:"waitlisted-heading-count"},this.t("waitlist.header_title")," (",this.waitlistedParticipants.length,")"),m("ul",{class:"participants",part:"waitlisted-participants"},this.waitlistedParticipants.map((t=>m("li",{class:"waiting-participant",key:t.id},m("div",{class:"participant-details"},m("dyte-avatar",{participant:t,size:"sm",iconPack:this.iconPack,t:this.t}),m("p",{class:"name",title:t.name},t.name)),m("div",{class:"waitlist-controls"},m("dyte-tooltip",{label:this.t("waitlist.deny_request"),variant:"secondary",iconPack:this.iconPack,t:this.t},m("dyte-button",{variant:"secondary",kind:"icon",iconPack:this.iconPack,t:this.t,onClick:()=>this.rejectWaitingRoomRequest(t.id)},m("dyte-icon",{class:"deny",icon:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t}))),m("dyte-tooltip",{label:this.t("waitlist.accept_request"),variant:"secondary",iconPack:this.iconPack,t:this.t},m("dyte-button",{variant:"secondary",kind:"icon",iconPack:this.iconPack,t:this.t,onClick:()=>this.acceptWaitingRoomRequest(t.id)},m("dyte-icon",{class:"accept",icon:this.iconPack.checkmark,iconPack:this.iconPack,t:this.t})))))))),m("dyte-button",{class:"accept-all-button",variant:"secondary",kind:"wide",iconPack:this.iconPack,t:this.t,onClick:this.acceptAllWaitingRoomRequests},this.t("waitlist.accept_all")))}static get watchers(){return{meeting:["meetingChanged"]}}};Ql.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-top:var(--dyte-space-4, 16px);margin-bottom:calc(var(--dyte-space-2, 8px) * -1);display:flex;width:100%;flex-direction:column;font-size:14px}.waiting-participants{margin-bottom:var(--dyte-space-8, 32px)}.waiting-participants .accept-all-button{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}h3,.heading-count{margin:var(--dyte-space-0, 0px);display:flex;align-items:center;justify-content:center;padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:400;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));text-align:center}.heading-count{font-size:14px}.participants{margin-top:var(--dyte-space-2, 8px);padding:var(--dyte-space-0, 0px)}.waiting-participant{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);display:flex;align-items:center}.waiting-participant .participant-details{margin-right:auto;display:flex;align-items:center}.waiting-participant .participant-details dyte-avatar{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);flex-shrink:0;font-size:14px}.waiting-participant .participant-details .name{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}@media (min-width: 1080px){.waiting-participant .participant-details .name{max-width:var(--dyte-space-40, 160px)}}.waiting-participant .waitlist-controls{display:flex}.waiting-participant .waitlist-controls dyte-button{margin-left:var(--dyte-space-2, 8px);cursor:pointer;border-radius:var(--dyte-border-radius-sm, 4px)}.waiting-participant .waitlist-controls dyte-icon.accept{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}.waiting-participant .waitlist-controls dyte-icon.deny{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}";var Jl=Object.freeze({__proto__:null,dyte_participants_waiting_list:Ql});const Xl={"Chrome.Desktop.audio":["Chrome1.svg","Chrome2.svg","Chrome3.svg"],"Chrome.Desktop.video":["Chrome1.svg","Chrome2.svg","Chrome3.svg"]},td=class{constructor(t){vt(this,t),this.stateUpdate=k(this,"dyteStateUpdate",7),this.continue=()=>{this.stateUpdate.emit({activePermissionsMessage:{enabled:!1}}),Ss.activePermissionsMessage={enabled:!1}},this.reload=()=>{"undefined"!=typeof window&&window.location.reload()},this.getImage=async t=>{function e(t,e,i){return t.split(e).join(i)}const i=await fetch(`https://assets.dyte.io/ui-kit/permissions/${t}`);let s=await i.text();return s=e(s,"yoursite.com",location.host),s=e(s,"Yoursite",document.title.length>14?`${document.title.slice(0,14)}...`:document.title),s},this.nextStep=()=>{this.currentStep=(this.currentStep+1)%this.svgSteps.length},this.openMacSystemSettings=()=>{const t=document.createElement("a");switch(this.mediaType){case"audio":t.href="x-apple.systempreferences:com.apple.preference.security?Privacy_Microphone";break;case"screenshare":t.href="x-apple.systempreferences:com.apple.preference.security?Privacy_ScreenCapture";break;case"video":t.href="x-apple.systempreferences:com.apple.preference.security?Privacy_Camera"}t.click()},this.meeting=void 0,this.t=ns(),this.iconPack=ts,this.states=void 0,this.device=void 0,this.currentStep=0,this.svgSteps=[]}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){this.stepsTimer&&clearTimeout(this.stepsTimer)}meetingChanged(t){var e,i,s;if(null!=t){this.device=t.self.device;const a=(null===(e=this.device)||void 0===e?void 0:e.isMobile)?"Mobile":"Desktop",r=null!==(s=Xl[`${null===(i=this.device)||void 0===i?void 0:i.browserName}.${a}.${this.mediaType}`])&&void 0!==s?s:[];Promise.all(r.map(this.getImage)).then((t=>{this.svgSteps=t}))}}getLink(t){let e;switch(t){case"audio":e="microphone";break;case"video":e="camera";break;default:e="screenshare"}let i=`Allow+${e}+access`;if(null!=this.device){const{browserName:t,isMobile:e}=this.device;i+="+"+t,e&&(i+="+mobile")}return"https://www.google.com/search?q="+i}isDeniedBySystem(){var t;const e=null===(t=this.meeting)||void 0===t?void 0:t.self.mediaPermissions;return null!=e&&"SYSTEM_DENIED"===e[this.mediaType]}getTitle(){return this.isDeniedBySystem()?this.t(`perm_sys_denied.${this.mediaType}`):this.t(`perm_denied.${this.mediaType}`)}get mediaType(){var t,e,i;return null!==(i=null===(e=null===(t=this.states)||void 0===t?void 0:t.activePermissionsMessage)||void 0===e?void 0:e.kind)&&void 0!==i?i:"audio"}getMessage(){var t;const{browserName:e,osName:i}=this.meeting.self.device,s=this.isDeniedBySystem(),a=null!==(t=e.toLowerCase())&&void 0!==t?t:"others",r=null!=i?i:"others";if(s){const t=`perm_sys_denied.${this.mediaType}.${r.toLowerCase()}.message`;return this.t(t)===t?this.t(`perm_sys_denied.${this.mediaType}.others.message`):this.t(t)}const n=`perm_denied.${this.mediaType}.${a}.message`;return this.t(n)===n?this.t(`perm_denied.${this.mediaType}.others.message`):this.t(n)}render(){var t,e,i;const s=this.isDeniedBySystem();this.svgSteps.length>0&&(this.stepsTimer&&clearTimeout(this.stepsTimer),this.stepsTimer=setTimeout(this.nextStep,2500));const a=s&&"macOS"==this.meeting.self.device.osName;return m(f,null,m("h2",null,m("dyte-icon",{class:"text-icon",icon:this.iconPack.warning,iconPack:this.iconPack,t:this.t}),this.getTitle()),this.svgSteps.length>0&&m("div",{class:"svg-container"},this.svgSteps.map(((t,e)=>m("p",{innerHTML:t,class:"svg-ins",key:this.currentStep,hidden:e!==this.currentStep})))),m("div",null,this.getMessage()),!s&&m("a",{class:"need-help-link",href:this.getLink(null!==(i=null===(e=null===(t=this.states)||void 0===t?void 0:t.activePermissionsMessage)||void 0===e?void 0:e.kind)&&void 0!==i?i:"audio"),target:"_blank",rel:"noreferrer external noreferrer noopener"},m("dyte-icon",{class:"text-icon",icon:this.iconPack.attach,iconPack:this.iconPack,t:this.t}),this.t("cta.help")),m("div",{class:"actions"},m("dyte-button",{size:"lg",kind:"wide",variant:"secondary",onClick:this.continue,iconPack:this.iconPack,t:this.t},this.t("cta.continue")),a?m("dyte-button",{size:"lg",kind:"wide",onClick:this.openMacSystemSettings,iconPack:this.iconPack,t:this.t},this.t("cta.system_settings")):m("dyte-button",{size:"lg",kind:"wide",onClick:this.reload,iconPack:this.iconPack,t:this.t},this.t("cta.reload"))),m("slot",null))}static get watchers(){return{meeting:["meetingChanged"]}}};td.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{box-sizing:border-box;display:block;max-height:100%;width:600px;overflow-y:auto;padding:var(--dyte-space-6, 24px);border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));overflow-wrap:break-word;color:rgb(var(--dyte-colors-text-1000, 255 255 255));word-wrap:break-word}.actions{display:flex;align-items:center;gap:var(--dyte-space-2, 8px)}.text-icon{display:inline-block;vertical-align:middle}h2{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-4, 16px)}h2 .text-icon{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}p{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-4, 16px)}.need-help-link{margin-top:var(--dyte-space-2, 8px);display:inline-block;text-underline-offset:2px;--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-400, 53 110 253) / var(--tw-text-opacity))}.need-help-link:hover{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-600, 13 81 253) / var(--tw-text-opacity))}a dyte-icon{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}:host([size='sm']) .actions{flex-direction:column;align-items:flex-start;justify-content:center}:host([size='sm']) .action{width:100%;padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px)}.actions{margin-top:var(--dyte-space-6, 24px)}.actions dyte-button{flex:1 1 0%}.svg-container{display:flex;width:100%;justify-content:center !important}.svg-ins{width:80%;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgb(255 255 255 / var(--tw-bg-opacity))}";var ed=Object.freeze({__proto__:null,dyte_permissions_message:td});const id=class{constructor(t){vt(this,t),this.stateUpdate=k(this,"dyteStateUpdate",7),this.variant="button",this.meeting=void 0,this.states=void 0,this.config=$t,this.iconPack=ts,this.size=void 0,this.t=ns(),this.pipSupported=!1}connectedCallback(){this.meetingChanged(this.meeting)}meetingChanged(t){var e,i,s;t&&(this.pipSupported=(null===(e=t.participants.pip)||void 0===e?void 0:e.isSupported())&&(null===(i=t.self.config)||void 0===i?void 0:i.pipMode)&&"LIVESTREAM"!==(null===(s=t.self.config)||void 0===s?void 0:s.viewType))}togglePip(){this.meeting.participants.pip&&(this.meeting.participants.pip.isActive?this.meeting.participants.pip.disable():this.meeting.participants.pip.enable(),this.stateUpdate.emit({activeMoreMenu:!1}),Ss.activeMoreMenu=!1)}render(){if(!this.pipSupported)return;const t=this.meeting.participants.pip.isActive;return m(f,{tabIndex:0,role:"log","aria-label":"Picture-in-Picture mode"},m("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,onClick:()=>this.togglePip(),icon:t?this.iconPack.pip_on:this.iconPack.pip_off,label:t?this.t("pip_off"):this.t("pip_on"),variant:this.variant}))}static get watchers(){return{meeting:["meetingChanged"]}}};id.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}";var sd=Object.freeze({__proto__:null,dyte_pip_toggle:id});const ad=class{constructor(t){vt(this,t),this.canInteractWithPlugin=()=>{const t=this.plugin.id;if(!t)return!0;const e=this.meeting.self.permissions.plugins.config[t];return!e||(!e.accessControl||"FULL_ACCESS"===e.accessControl)},this.meeting=void 0,this.plugin=void 0,this.iconPack=ts,this.t=ns(),this.canClosePlugin=!1,this.viewModeEnabled=!1}componentDidLoad(){this.meetingChanged(this.meeting),this.pluginChanged(this.plugin)}meetingChanged(t){if(null==t)return;const e=this.canInteractWithPlugin();this.viewModeEnabled=!e,It((()=>{this.canClosePlugin=t.self.permissions.plugins.canClose||this.plugin.enabledBy===t.self.id}))}pluginChanged(t){this.toggleViewModeListener=t=>{this.canInteractWithPlugin()||(this.viewModeEnabled=t)},null!=t&&(t.addPluginView(this.iframeEl,"plugin-main"),t.addListener("toggleViewMode",this.toggleViewModeListener))}disconnectedCallback(){var t,e;null===(t=this.plugin)||void 0===t||t.removePluginView("plugin-main"),null===(e=this.plugin)||void 0===e||e.removeListener("toggleViewMode",this.toggleViewModeListener)}render(){return null==this.plugin?null:m(f,null,m("header",{part:"header"},m("div",null,this.plugin.name),this.canClosePlugin&&m("div",null,m("dyte-button",{kind:"icon",onClick:()=>this.plugin.deactivate(),part:"button",iconPack:this.iconPack,t:this.t},m("dyte-icon",{icon:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t})))),m("div",{class:"iframe-container"},!this.canInteractWithPlugin()&&this.viewModeEnabled?m("div",{class:"block-inputs"}):null,m("iframe",{ref:t=>this.iframeEl=t,part:"iframe"})))}static get watchers(){return{meeting:["meetingChanged"],plugin:["pluginChanged"]}}};ad.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:100%;width:100%;flex-direction:column;overflow:hidden;border-radius:var(--dyte-border-radius-lg, 12px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}header{display:flex;height:var(--dyte-space-8, 32px);align-items:center;justify-content:space-between;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}header>div{display:flex;align-items:center}dyte-button{display:flex;height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);flex-direction:column;align-items:center;border-radius:9999px}dyte-button dyte-icon{height:var(--dyte-space-3, 12px);width:var(--dyte-space-3, 12px)}iframe{display:block;flex:1 1 0%;margin:var(--dyte-space-0, 0px);border-width:var(--dyte-border-width-none, 0);border-style:none;padding:var(--dyte-space-0, 0px);outline:2px solid transparent;outline-offset:2px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-video-bg, 24 24 24) / var(--tw-bg-opacity))}.iframe-container{position:relative;height:100%;width:100%}.block-inputs{position:absolute;z-index:10;height:100%;width:100%;border-left-width:var(--dyte-border-width-none, 0);border-top-width:var(--dyte-border-width-lg, 4px);border-style:solid;--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-border-opacity))}iframe{height:100%;width:100%}";var rd=Object.freeze({__proto__:null,dyte_plugin_main:ad});const nd=class{constructor(t){vt(this,t),this.stateUpdate=k(this,"dyteStateUpdate",7),this.close=()=>{this.stateUpdate.emit({activeSidebar:!1,sidebar:void 0}),Ss.activeSidebar=!1,Ss.sidebar=void 0},this.meeting=void 0,this.config=$t,this.size=void 0,this.iconPack=ts,this.t=ns(),this.plugins=[],this.canStartPlugins=!1,this.canClosePlugins=!1,this.activatedPluginsId=[]}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var t;null===(t=this.meeting)||void 0===t||t.plugins.all.removeListener("stateUpdate",this.updateActivePlugins)}meetingChanged(t){null!=t&&(this.canStartPlugins=t.self.permissions.plugins.canStart,this.canClosePlugins=t.self.permissions.plugins.canClose,this.plugins=t.plugins.all.toArray().filter((e=>{var i;return!(null===(i=t.self.config.disabledPlugins)||void 0===i?void 0:i.includes(e.id))})),this.updateActivePlugins=()=>{this.activatedPluginsId=t.plugins.active.toArray().map((t=>t.id))},this.updateActivePlugins(),t.plugins.all.addListener("stateUpdate",this.updateActivePlugins))}render(){return m(f,null,m("ul",{class:"scrollbar"},this.plugins.map((t=>m("li",{key:t.name,class:"plugin"},m("div",{class:"metadata"},m("img",{src:t.picture}),m("div",{class:"name"},t.name)),!this.activatedPluginsId.includes(t.id)&&this.canStartPlugins&&m("div",{class:"buttons"},m("dyte-button",{kind:"icon",size:"lg",iconPack:this.iconPack,t:this.t,onClick:()=>{t.activate(),this.close()},"aria-label":`${this.t("activate")} ${t.name}`},m("dyte-icon",{icon:this.iconPack.rocket,tabIndex:-1,"aria-hidden":!0,iconPack:this.iconPack,t:this.t}))),this.activatedPluginsId.includes(t.id)&&this.canClosePlugins&&m("div",{class:"buttons"},m("dyte-button",{kind:"icon",size:"lg",onClick:()=>{t.deactivate()},iconPack:this.iconPack,t:this.t,"aria-label":`${this.t("close")} ${t.name}`},m("dyte-icon",{icon:this.iconPack.dismiss,tabIndex:-1,"aria-hidden":!0,iconPack:this.iconPack,t:this.t}))))))))}static get watchers(){return{meeting:["meetingChanged"]}}};nd.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))\n    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);display:flex;height:100%;width:100%;flex-direction:column;font-size:14px;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}h3{margin-left:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0, 0px);margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-4, 16px);display:block;padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:400;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));text-align:center}ul{overflow-y:auto;padding:var(--dyte-space-0, 0px);flex-grow:1;flex-basis:0}.metadata{display:flex;align-items:center}.metadata img{height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);border-radius:var(--dyte-border-radius-sm, 4px)}.metadata .name{margin-left:var(--dyte-space-2, 8px);font-weight:500}.plugin{display:flex;align-items:center;justify-content:space-between;padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px);padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px)}.plugin .buttons{display:flex;align-items:center}dyte-button:hover{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000);--tw-ring-opacity:1;--tw-ring-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-ring-opacity));--tw-ring-offset-width:2px;--tw-ring-offset-color:rgb(var(--dyte-colors-background-1000, 8 8 8))}";var od=Object.freeze({__proto__:null,dyte_plugins:nd});const ld=class{constructor(t){vt(this,t),this.stateUpdate=k(this,"dyteStateUpdate",7),this.updateCanView=()=>{this.canViewPlugins=zn(this.meeting)},this.variant="button",this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=ts,this.t=ns(),this.pluginsActive=!1,this.canViewPlugins=!1}disconnectedCallback(){var t,e,i,s;this.removeStateChangeListener&&this.removeStateChangeListener(),null===(e=null===(t=this.meeting)||void 0===t?void 0:t.stage)||void 0===e||e.removeListener("stageStatusUpdate",this.updateCanView),null===(s=null===(i=this.meeting)||void 0===i?void 0:i.self)||void 0===s||s.permissions.removeListener("pluginsUpdate",this.updateCanView)}connectedCallback(){this.statesChanged(this.states),this.meetingChanged(this.meeting),this.removeStateChangeListener=_s("sidebar",(()=>this.statesChanged()))}meetingChanged(t){var e,i;null!=t&&(this.canViewPlugins=zn(t),null===(e=null==t?void 0:t.stage)||void 0===e||e.on("stageStatusUpdate",this.updateCanView),null===(i=null==t?void 0:t.self)||void 0===i||i.permissions.addListener("pluginsUpdate",this.updateCanView))}statesChanged(t){const e=t||Ss;null!=e&&(this.pluginsActive=!0===e.activeSidebar&&"plugins"===e.sidebar)}togglePlugins(){const t=this.states||Ss;this.pluginsActive=!((null==t?void 0:t.activeSidebar)&&"plugins"===(null==t?void 0:t.sidebar)),this.stateUpdate.emit({activeSidebar:this.pluginsActive,sidebar:this.pluginsActive?"plugins":void 0,activeMoreMenu:!1,activeAI:!1}),Ss.activeSidebar=this.pluginsActive,Ss.sidebar=this.pluginsActive?"plugins":void 0,Ss.activeMoreMenu=!1,Ss.activeAI=!1}render(){if(!this.canViewPlugins)return;const t=this.t("plugins");return m(f,{title:t},m("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,class:{active:this.pluginsActive},onClick:()=>this.togglePlugins(),icon:this.iconPack.rocket,label:t,variant:this.variant}))}static get watchers(){return{meeting:["meetingChanged"],states:["statesChanged"]}}};ld.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}";var dd=Object.freeze({__proto__:null,dyte_plugins_toggle:ld});const cd=class{constructor(t){vt(this,t),this.onPollsUpdate=t=>{this.polls=[...t.polls]},this.onUpdatePermissions=()=>{this.permissions=this.meeting.self.permissions},this.meeting=void 0,this.config=$t,this.size=void 0,this.iconPack=ts,this.t=ns(),this.create=!1,this.polls=void 0,this.permissions=void 0}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var t;null!=this.meeting&&(null===(t=this.meeting.polls)||void 0===t||t.removeListener("pollsUpdate",this.onPollsUpdate),this.meeting.self.permissions.removeListener("pollsUpdate",this.onUpdatePermissions))}meetingChanged(t){null!=t&&(t&&!t.polls||(this.permissions=this.meeting.self.permissions,this.polls=[...t.polls.items],t.polls.addListener("pollsUpdate",this.onPollsUpdate),this.meeting.self.permissions.addListener("pollsUpdate",this.onUpdatePermissions),this.onCreate=async e=>{this.create=!1,await t.polls.create(e.question,e.options,e.anonymous,e.hideVotes)},this.onVote=async(e,i)=>{await t.polls.vote(e,i)}))}toggleCreateState(){this.create=!this.create}componentDidRender(){Ba(this.pollEl)}render(){return m(f,null,m("div",{class:"ctr",part:"container"},m("div",{class:"polls-view scrollbar",ref:t=>this.pollEl=t,part:"polls"},0==this.polls.length&&!0!==this.create&&m("div",{class:"empty-polls"},this.t("polls.empty")),this.polls.map((t=>{var e;return m("dyte-poll",{key:t.id,poll:t,onDyteVotePoll:t=>{this.onVote(t.detail.id,t.detail.index)},self:null===(e=this.meeting)||void 0===e?void 0:e.self.userId,iconPack:this.iconPack,t:this.t,permissions:this.permissions})})),this.create&&m("dyte-poll-form",{part:"poll-form",onDyteCreatePoll:t=>{this.onCreate(t.detail)},iconPack:this.iconPack,t:this.t})),this.permissions.polls.canCreate&&m("dyte-button",{kind:"wide",onClick:()=>this.toggleCreateState(),variant:this.create?"secondary":"primary",part:"button",iconPack:this.iconPack,t:this.t},this.create?this.t("polls.cancel"):this.t("polls.create"))))}static get watchers(){return{meeting:["meetingChanged"]}}};cd.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))\n    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{margin-top:var(--dyte-space-2, 8px);display:flex;height:100%;width:100%;flex-direction:column;font-size:14px}*{box-sizing:border-box}.ctr{box-sizing:border-box;padding:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-0, 0px);display:flex;flex:1 1 0%;flex-direction:column}.polls-view{overflow-y:auto;flex:1 1 0%;flex-basis:0}.empty-polls{display:flex;height:100%;width:100%;align-items:center;justify-content:center}";var hd=Object.freeze({__proto__:null,dyte_polls:cd});const pd=class{constructor(t){vt(this,t),this.stateUpdate=k(this,"dyteStateUpdate",7),this.onPollsUpdate=({newPoll:t})=>{!0===t&&(this.unreadPollsCount+=1)},this.updateCanView=()=>{this.canViewPolls=Un(this.meeting)},this.variant="button",this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=ts,this.t=ns(),this.pollsActive=!1,this.unreadPollsCount=0,this.canViewPolls=!1}connectedCallback(){this.meetingChanged(this.meeting),this.statesChanged(this.states),this.removeStateChangeListener=_s("sidebar",(()=>this.statesChanged()))}disconnectedCallback(){var t,e,i,s,a,r;this.removeStateChangeListener&&this.removeStateChangeListener(),null===(e=null===(t=this.meeting)||void 0===t?void 0:t.polls)||void 0===e||e.removeListener("pollsUpdate",this.onPollsUpdate),null===(s=null===(i=this.meeting)||void 0===i?void 0:i.self)||void 0===s||s.permissions.removeListener("pollsUpdate",this.updateCanView),null===(r=null===(a=this.meeting)||void 0===a?void 0:a.stage)||void 0===r||r.removeListener("stageStatusUpdate",this.updateCanView)}meetingChanged(t){var e,i;t&&t.polls&&(this.unreadPollsCount=t.polls.items.length,this.meeting.polls.addListener("pollsUpdate",this.onPollsUpdate),null===(e=null==t?void 0:t.self)||void 0===e||e.permissions.addListener("pollsUpdate",this.updateCanView),this.canViewPolls=Un(t),null===(i=null==t?void 0:t.stage)||void 0===i||i.on("stageStatusUpdate",this.updateCanView))}statesChanged(t){const e=t||Ss;null!=e&&(this.pollsActive=!0===e.activeSidebar&&"polls"===e.sidebar)}togglePollsTab(){const t=this.states||Ss;this.unreadPollsCount=0,this.pollsActive=!((null==t?void 0:t.activeSidebar)&&"polls"===(null==t?void 0:t.sidebar)),this.stateUpdate.emit({activeSidebar:this.pollsActive,sidebar:this.pollsActive?"polls":void 0,activeMoreMenu:!1,activeAI:!1}),Ss.activeSidebar=this.pollsActive,Ss.sidebar=this.pollsActive?"polls":void 0,Ss.activeMoreMenu=!1,Ss.activeAI=!1}render(){if(!this.canViewPolls)return;const t=this.t("polls");return m(f,{title:t},0!==this.unreadPollsCount&&!this.pollsActive&&m("div",{class:"unread-count",part:"unread-count"},m("span",null,this.unreadPollsCount<=100?this.unreadPollsCount:"99+")),m("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,class:{active:this.pollsActive},onClick:()=>this.togglePollsTab(),icon:this.iconPack.poll,label:t,variant:this.variant}))}static get watchers(){return{meeting:["meetingChanged"],states:["statesChanged"]}}};pd.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:block}.unread-count{position:absolute;right:var(--dyte-space-3, 12px);box-sizing:border-box;padding:var(--dyte-space-0\\.5, 2px);-webkit-user-select:none;-moz-user-select:none;user-select:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));font-size:12px;color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)));display:flex;height:var(--dyte-space-5, 20px);min-width:var(--dyte-space-5, 20px);align-items:center;justify-content:center;border-radius:9999px;z-index:1}:host([variant='horizontal']){display:flex;flex-direction:row-reverse;align-items:center}:host([variant='horizontal']) .unread-count{right:var(--dyte-space-4, 16px);top:auto}";var gd=Object.freeze({__proto__:null,dyte_polls_toggle:pd});const ud=class{constructor(t){vt(this,t),this.setIsRecording=t=>{this.isRecording="RECORDING"===t},this.meeting=void 0,this.size=void 0,this.t=ns(),this.iconPack=ts,this.isRecording=void 0}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var t;null===(t=this.meeting)||void 0===t||t.recording.removeListener("recordingUpdate",this.updateRecordingStatus)}meetingChanged(t){null!=t&&(this.setIsRecording(t.recording.recordingState),this.updateRecordingStatus=t=>{this.setIsRecording(t)},t.recording.addListener("recordingUpdate",this.updateRecordingStatus))}render(){return m(f,null,this.isRecording&&m("div",{class:"indicator","aria-label":this.t("recording.indicator"),part:"indicator"},m("dyte-icon",{icon:this.iconPack.recording,"aria-hidden":!0,tabIndex:-1,part:"icon",iconPack:this.iconPack,t:this.t}),m("span",null,this.t("recording.label"))))}static get watchers(){return{meeting:["meetingChanged"]}}};ud.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);display:block}:host[size='sm']{margin-left:var(--dyte-space-1, 4px);margin-right:var(--dyte-space-1, 4px)}.indicator{display:flex;flex-direction:row;align-items:center;font-size:14px;--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}dyte-icon{margin-right:var(--dyte-space-1, 4px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);animation:blink 4s linear infinite}:host([size='sm']) dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}:host([size='sm']) .indicator span{display:none}@keyframes blink{0%,10%{opacity:0}11%,100%{opacity:1}}";var md=Object.freeze({__proto__:null,dyte_recording_indicator:ud});const vd=class{constructor(t){vt(this,t),this.dyteAPIError=k(this,"dyteAPIError",7),this.permissionsUpdateListener=()=>{this.canRecord=!0===this.meeting.self.permissions.canRecord},this.toggleRecording=async()=>{var t,e,i;if(!this.isLoading()&&!this.disabled)switch(this.recordingState){case"IDLE":try{return void await(null===(t=this.meeting)||void 0===t?void 0:t.recording.start())}catch(s){this.dyteAPIError.emit({trace:this.t("recording.start"),message:this.t("recording.error.start")})}return;case"RECORDING":try{return void await(null===(e=this.meeting)||void 0===e?void 0:e.recording.stop())}catch(a){this.dyteAPIError.emit({trace:this.t("recording.stop"),message:this.t("recording.error.stop")})}return;case"PAUSED":try{return void await(null===(i=this.meeting)||void 0===i?void 0:i.recording.resume())}catch(r){this.dyteAPIError.emit({trace:this.t("recording.resume"),message:this.t("recording.error.resume")})}return;default:return}},this.isLoading=()=>null==this.meeting||"STARTING"===this.recordingState||"STOPPING"===this.recordingState,this.variant="button",this.meeting=void 0,this.t=ns(),this.iconPack=ts,this.size=void 0,this.disabled=!1,this.recordingState=void 0,this.canRecord=!1}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var t,e;this.recordingStateUpdateListener&&(null===(t=this.meeting)||void 0===t||t.recording.removeListener("recordingUpdate",this.recordingStateUpdateListener)),null===(e=this.meeting)||void 0===e||e.self.permissions.removeListener("permissionsUpdate",this.permissionsUpdateListener)}meetingChanged(t){null!=t&&(this.recordingState=t.recording.recordingState,this.permissionsUpdateListener(),this.recordingStateUpdateListener=t=>{this.recordingState=t},t.recording.addListener("recordingUpdate",this.recordingStateUpdateListener),t.self.permissions.addListener("permissionsUpdate",this.permissionsUpdateListener))}getLabel(){switch(this.recordingState){case"IDLE":return"recording.idle";case"RECORDING":return"recording.stop";case"STARTING":return"recording.starting";case"STOPPING":return"recording.stopping";case"PAUSED":return"recording.resume";default:return"recording.loading"}}getIcon(){switch(this.recordingState){case"IDLE":case"STARTING":case"STOPPING":default:return this.iconPack.recording;case"RECORDING":return this.iconPack.stop_recording}}render(){if(this.canRecord)return m(f,{title:this.t("RECORDING"===this.recordingState?"recording.stop":"recording.idle")},m("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,onClick:this.toggleRecording,icon:this.getIcon(),isLoading:this.isLoading(),label:this.t(this.getLabel()),variant:this.variant,disabled:this.disabled}))}static get watchers(){return{meeting:["meetingChanged"]}}};vd.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}";var fd=Object.freeze({__proto__:null,dyte_recording_toggle:vd});const yd=()=>"undefined"!=typeof navigator&&void 0!==navigator.mediaDevices&&"getDisplayMedia"in navigator.mediaDevices,bd=class{constructor(t){vt(this,t),this.stateUpdate=k(this,"dyteStateUpdate",7),this.dyteAPIError=k(this,"dyteAPIError",7),this.screenShareListener=()=>{const t=this.meeting.participants.active.toArray().filter((t=>t.screenShareEnabled)).length,e=this.meeting.self.screenShareEnabled?1:0;this.screenShareCount=t+e,this.screenShareEnabled=this.meeting.self.screenShareEnabled,this.getState(),this.meeting.__internals__.logger.info("dyteScreenShare::screenShareUpdate",{media:{screenshare:{enabled:this.screenShareEnabled,count:this.screenShareCount}}})},this.participantLeftListener=({screenShareEnabled:t})=>{t&&(this.screenShareCount=Math.max(this.screenShareCount-1,0),this.getState(),this.meeting.__internals__.logger.info("dyteScreenShare::screenShareUpdate",{media:{screenshare:{enabled:this.screenShareEnabled,count:this.screenShareCount}}}))},this.stageStatusListener=()=>{this.stageStatus=this.meeting.stage.status,this.canScreenShare="ALLOWED"===this.meeting.self.permissions.canProduceScreenshare},this.mediaPermissionUpdateListener=({kind:t,message:e})=>{if("screenshare"===t&&(this.shareScreenPermission=e,this.getState(),"COULD_NOT_START"===e&&this.dyteAPIError.emit({trace:this.t("screenshare.permissions"),message:this.t("screenshare.error.unknown")}),this.hasPermissionError())){const t={enabled:!0,kind:"screenshare"};this.stateUpdate.emit({activePermissionsMessage:t}),Ss.activePermissionsMessage=t}},this.reachedMaxScreenShares=()=>this.maxScreenShareCount>0&&this.screenShareCount>=this.maxScreenShareCount,this.toggleScreenShare=async()=>{var t;if(this.screenShareState.disable)return;if(this.hasPermissionError()){const t={enabled:!0,kind:"screenshare"};return this.stateUpdate.emit({activePermissionsMessage:t}),Ss.activePermissionsMessage=t,!1}const e=null===(t=this.meeting)||void 0===t?void 0:t.self;this.screenShareEnabled?e.disableScreenShare():null==e||!this.canScreenShare||this.reachedMaxScreenShares()||this.hasPermissionError()||(this.screenShareState=Object.assign(Object.assign({},this.screenShareState),{disable:!0}),await e.enableScreenShare(),this.screenShareState=Object.assign(Object.assign({},this.screenShareState),{disable:!1}),this.stateUpdate.emit({activeMoreMenu:!1}),Ss.activeMoreMenu=!1)},this.states=void 0,this.variant="button",this.meeting=void 0,this.size=void 0,this.iconPack=ts,this.t=ns(),this.maxScreenShareCount=-1,this.screenShareCount=0,this.screenShareEnabled=!1,this.canScreenShare=!1,this.shareScreenPermission="NOT_REQUESTED",this.screenShareState={tooltipLabel:this.t("screenshare.start"),label:this.t("screenshare.start"),icon:this.iconPack.share_screen_start,classList:{},showWarning:!1,disable:!1},this.stageStatus="OFF_STAGE"}connectedCallback(){yd()?this.meetingChanged(this.meeting):zl.error("[dyte-screenshare-toggle] Device does not support screensharing.")}disconnectedCallback(){var t,e,i,s,a,r;null===(t=this.meeting)||void 0===t||t.participants.joined.removeListener("screenShareUpdate",this.screenShareListener),null===(e=this.meeting)||void 0===e||e.participants.joined.removeListener("participantLeft",this.participantLeftListener),null===(i=this.meeting)||void 0===i||i.self.removeListener("screenShareUpdate",this.screenShareListener),null===(s=this.meeting)||void 0===s||s.self.removeListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),null===(r=null===(a=this.meeting)||void 0===a?void 0:a.stage)||void 0===r||r.removeListener("stageStatusUpdate",this.stageStatusListener)}meetingChanged(t){if(null!=t){const{self:e,stage:i}=t;this.canScreenShare="ALLOWED"===this.meeting.self.permissions.canProduceScreenshare,this.maxScreenShareCount=e.config.maxScreenShareCount,this.screenShareEnabled=e.screenShareEnabled;let s=0;for(const a of t.participants.joined.toArray())a.screenShareEnabled&&s++;this.screenShareCount=s,this.getState(),t.__internals__.logger.info("dyteScreenShare::initialise",{media:{screenshare:{enabled:this.screenShareEnabled,count:this.screenShareCount,maxAllowedCount:this.maxScreenShareCount}}}),this.stageStatus=t.stage.status,t.participants.joined.addListener("screenShareUpdate",this.screenShareListener),t.participants.joined.addListener("participantLeft",this.participantLeftListener),e.addListener("screenShareUpdate",this.screenShareListener),e.addListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),null==i||i.addListener("stageStatusUpdate",this.stageStatusListener)}}hasPermissionError(){return"SYSTEM_DENIED"===this.shareScreenPermission||"DENIED"===this.shareScreenPermission}getState(){let t="",e="",i="",s={};const a=this.hasPermissionError()&&!this.screenShareEnabled,r=this.reachedMaxScreenShares()&&!this.screenShareEnabled,n="COULD_NOT_START"===this.shareScreenPermission;this.screenShareEnabled&&!a?(e=this.t("screenshare.stop"),i=this.iconPack.share_screen_stop,s["red-icon"]=!0):(e=this.t("screenshare.start"),i=this.iconPack.share_screen_start),"SYSTEM_DENIED"===this.shareScreenPermission?(t=this.t("perm_sys_denied.screenshare"),s["red-icon"]=!0):"DENIED"===this.shareScreenPermission?(t=this.t("perm_denied.screenshare"),s["red-icon"]=!0):t=e,r&&(t=this.t("screenshare.error.max_count")),n&&(t=this.t("screenshare.error.unknown")),this.screenShareState={tooltipLabel:t,label:e,icon:i,classList:s,disable:a||r,showWarning:a||r||n}}render(){return yd()&&this.canScreenShare&&!["OFF_STAGE","REQUESTED_TO_JOIN_STAGE"].includes(this.stageStatus)?m(f,{title:this.screenShareState.label},m("dyte-tooltip",{placement:"top",kind:"block",label:this.screenShareState.tooltipLabel,delay:600,part:"tooltip",iconPack:this.iconPack,t:this.t},m("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,variant:this.variant,label:this.screenShareState.label,icon:this.screenShareState.icon,class:this.screenShareState.classList,onClick:this.toggleScreenShare,disabled:this.screenShareState.disable,showWarning:this.screenShareState.showWarning}))):null}static get watchers(){return{meeting:["meetingChanged"]}}};bd.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}";var wd=Object.freeze({__proto__:null,dyte_screen_share_toggle:bd});const xd=t=>{null!=t&&(null!=t.requestFullscreen?t.requestFullscreen():null!=t.mozRequestFullScreen?t.mozRequestFullScreen():null!=t.webkitRequestFullscreen?t.webkitRequestFullscreen():null!=t.msRequestFullscreen&&t.msRequestFullscreen())},kd=()=>{null!=document.exitFullscreen?document.exitFullscreen():null!=document.mozExitFullScreen?document.mozExitFullScreen():null!=document.webkitExitFullscreen?document.webkitExitFullscreen():null!=document.msExitFullscreen&&document.msExitFullscreen()},Sd=()=>null!=document.fullscreenElement||null!=document.webkitCurrentFullScreenElement,_d=()=>"undefined"!=typeof document&&(document.fullscreenEnabled||document.mozFullscreenEnabled||document.webkitFullscreenEnabled||document.msFullscreenEnabled),Cd=class{constructor(t){vt(this,t),this.stateUpdate=k(this,"dyteStateUpdate",7),this.play=k(this,"screensharePlay",7),this.fullScreenListener=()=>{this.isFullScreen=Sd()},this.participantScreenshareUpdate=t=>{t.id===this.participant.id&&this.screenShareListener(t)},this.toggleFullScreen=()=>{this.isFullScreen?(kd(),this.isFullScreen=!1):(xd(this.host),this.isFullScreen=!0)},this.hideFullScreenButton=!1,this.nameTagPosition="bottom-left",this.participant=void 0,this.meeting=void 0,this.variant="solid",this.size=void 0,this.iconPack=ts,this.t=ns(),this.videoExpanded=!1,this.screenShareEnabled=!1,this.isFullScreen=!1,this.remoteControlInfo=void 0}connectedCallback(){null===window||void 0===window||window.addEventListener("fullscreenchange",this.fullScreenListener),null===window||void 0===window||window.addEventListener("webkitfullscreenchange",this.fullScreenListener)}componentDidLoad(){this.participantChanged(this.participant)}disconnectedCallback(){if(!this.meeting)return;const{self:t}=this.meeting;this.participant.id===t.id&&this.screenShareListener?this.participant.removeListener("screenShareUpdate",this.screenShareListener):this.meeting.participants.joined.removeListener("screenShareUpdate",this.participantScreenshareUpdate),null===window||void 0===window||window.removeEventListener("fullscreenchange",this.fullScreenListener),null===window||void 0===window||window.removeEventListener("webkitfullscreenchange",this.fullScreenListener)}participantChanged(t){if(null!=t&&this.meeting){const{self:e}=this.meeting;this.screenShareListener=({screenShareEnabled:t,screenShareTracks:e})=>{const i=t&&null!=e.video;if(It((()=>{this.screenShareEnabled=i})),i){const t=new MediaStream;t.addTrack(e.video),null!=this.videoEl&&(this.videoEl.srcObject=t,this.videoEl.play())}else null!=this.videoEl&&(this.videoEl.srcObject=void 0)},this.screenShareListener(t),t.id===e.id?t.addListener("screenShareUpdate",this.screenShareListener):this.meeting.participants.joined.addListener("screenShareUpdate",this.participantScreenshareUpdate)}}render(){var t,e;const i=(null===(t=this.participant)||void 0===t?void 0:t.id)===(null===(e=this.meeting)||void 0===e?void 0:e.self.id),s=this.isFullScreen?this.t("full_screen.exit"):this.t("full_screen"),a=this.isFullScreen?this.iconPack.full_screen_minimize:this.iconPack.full_screen_maximize;return m(f,{class:{isSelf:i}},m("div",{key:"video-container",id:"video-container",class:{expand:this.videoExpanded}},m("video",{ref:t=>this.videoEl=t,class:{visible:this.screenShareEnabled,"fit-in-container":this.participant.supportsRemoteControl},playsInline:!0,onPlay:()=>{this.play.emit({screenshareParticipant:this.participant,participant:this.meeting.self})},autoPlay:!0,muted:!0,id:`screen-share-video-${this.participant.id}`})),m("div",{id:"controls",key:"controls"},!this.hideFullScreenButton&&!i&&_d()&&m("dyte-tooltip",{label:s,iconPack:this.iconPack,t:this.t},m("dyte-button",{id:"full-screen-btn",kind:"icon",onClick:this.toggleFullScreen,title:s,iconPack:this.iconPack,t:this.t},m("dyte-icon",{icon:a,"aria-hidden":!0,tabIndex:-1,iconPack:this.iconPack,t:this.t})))),i&&m("div",{id:"self-message",key:"self-message"},m("h3",null,this.t("screenshare.shared")),m("div",{class:"actions"},null!=this.meeting&&m("dyte-button",{variant:"danger",onClick:()=>{this.meeting.self.disableScreenShare()},iconPack:this.iconPack,t:this.t},m("dyte-icon",{icon:this.iconPack.share_screen_stop,slot:"start",iconPack:this.iconPack,t:this.t}),this.t("screenshare.stop")),m("dyte-button",{variant:"secondary",id:"expand-btn",iconPack:this.iconPack,t:this.t,onClick:()=>{this.videoExpanded=!this.videoExpanded}},m("dyte-icon",{icon:this.videoExpanded?this.iconPack.full_screen_minimize:this.iconPack.full_screen_maximize,slot:"start",iconPack:this.iconPack,t:this.t}),this.videoExpanded?this.t("screenshare.min_preview"):this.t("screenshare.max_preview")))),m("slot",null))}get host(){return x(this)}static get watchers(){return{participant:["participantChanged"]}}};Cd.style=":host {\n  line-height: initial;\n  font-family: var(--dyte-font-family, sans-serif);\n\n  font-feature-settings: normal;\n  font-variation-settings: normal;\n}\n\np {\n  margin: var(--dyte-space-0, 0px);\n  padding: var(--dyte-space-0, 0px);\n}\n\n\n:host {\n  height: 100%;\n  width: 100%;\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  overflow: hidden;\n  border-radius: var(--dyte-border-radius-lg, 12px);\n  --tw-bg-opacity: 1;\n  background-color: rgba(var(--dyte-colors-video-bg, 24 24 24) / var(--tw-bg-opacity));\n  container-type: inline-size;\n  container-name: screentile;\n}\n\n::slotted(dyte-name-tag) {\n  position: absolute;\n  left: var(--dyte-space-3, 12px);\n  bottom: var(--dyte-space-3, 12px);\n  opacity: 0.8;\n}\n\n#video-container {\n  position: absolute;\n  display: block;\n  height: 100%;\n  width: 100%;\n}\n\n#video-container .fit-in-container {\n  -o-object-fit: fill;\n     object-fit: fill;\n}\n\nvideo {\n  height: 100%;\n  width: 100%;\n  -o-object-fit: contain;\n     object-fit: contain;\n}\n\n:host([variant='gradient']) ::slotted(dyte-audio-visualizer) {\n  position: absolute;\n  top: var(--dyte-space-2, 8px);\n  right: var(--dyte-space-2, 8px);\n  border-radius: 9999px;\n  --tw-bg-opacity: 1;\n  background-color: rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));\n  padding: var(--dyte-space-2, 8px);\n}\n\n:host([variant='gradient']) ::slotted(dyte-name-tag) {\n  bottom: var(--dyte-space-0, 0px);\n  left: var(--dyte-space-0, 0px);\n  display: flex;\n  width: 100%;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n  background-color: transparent;\n  background-image: linear-gradient(to top, var(--tw-gradient-stops));\n  --tw-gradient-from: rgb(var(--dyte-colors-background-1000, 8 8 8));\n  --tw-gradient-to: rgba(var(--dyte-colors-background-1000, 8 8 8) / 0);\n  --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to);\n  --tw-gradient-to: transparent;\n}\n\n:host([size='sm'][variant='gradient']) ::slotted(dyte-audio-visualizer) {\n  height: var(--dyte-space-5, 20px);\n  width: var(--dyte-space-5, 20px);\n}\n\nvideo.visible {\n  animation: video-fadein 0.4s ease;\n}\n\n#controls {\n  display: none;\n  position: absolute;\n  top: var(--dyte-space-3, 12px);\n  right: var(--dyte-space-3, 12px);\n  align-items: center;\n  justify-content: flex-end;\n  gap: var(--dyte-space-2, 8px);\n}\n\n:host(:hover) #controls, \n:host(:active) #controls, \n:host(:focus-visible) #controls {\n  display: flex;\n}\n\n#full-screen-btn {\n  --tw-bg-opacity: 1;\n  background-color: rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));\n}\n\n/** For self view */\n\nh3 {\n  margin-top: var(--dyte-space-10, 40px);\n  margin-bottom: var(--dyte-space-6, 24px);\n  text-align: center;\n  font-size: 20px;\n  font-weight: 500;\n}\n\n:host([size='sm']) h3 {\n  font-size: 16px;\n}\n\n#self-message {\n  padding-left: var(--dyte-space-4, 16px);\n  padding-right: var(--dyte-space-4, 16px);\n}\n\n:host(.isSelf) #self-view {\n  flex: 1 1 0%;\n}\n\n:host(.isSelf) #video-container {\n  position: static;\n  aspect-ratio: auto;\n  height: auto;\n  width: 50%;\n  max-width: var(--dyte-space-96, 384px);\n  border-radius: var(--dyte-border-radius-md, 8px);\n  transition: 0.6s ease;\n}\n\n:host(.isSelf) #video-container.expand {\n  width: 60%;\n  max-width: 100%;\n}\n\n.actions {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: var(--dyte-space-2, 8px);\n}\n\n:host([size='sm'].isSelf) #video-container,\n:host([size='md'].isSelf) #video-container,\n:host([size='sm'].isSelf) #expand-btn,\n:host([size='md'].isSelf) #expand-btn {\n  /** Hide video, fullscreen buttons in sm and md breakpoints */\n  display: none;\n}\n\n/** Remote control */\n\np {\n  margin: var(--dyte-space-0, 0px);\n  padding: var(--dyte-space-0, 0px);\n}\n\n.remote-control {\n  z-index: 10;\n  height: 100%;\n  max-height: 100%;\n  flex: 0 1 auto;\n}\n\n#remote-control-self {\n  position: absolute;\n  top: var(--dyte-space-0, 0px);\n  left: 50%;\n  z-index: 10;\n  width: -moz-max-content;\n  width: max-content;\n  max-width: 100%;\n  box-sizing: border-box;\n  display: flex;\n  height: var(--dyte-space-8, 32px);\n  align-items: center;\n  overflow: hidden;\n  border-radius: var(--dyte-border-radius-sm, 4px);\n  --tw-bg-opacity: 1;\n  background-color: rgba(var(--dyte-colors-warning, 255 205 7) / var(--tw-bg-opacity));\n  font-size: 12px;\n  color: rgb(var(--dyte-colors-text-1000, 255 255 255));\n  transform: translateX(-50%);\n}\n\n#remote-control-self p {\n  padding-left: var(--dyte-space-3, 12px);\n  padding-right: var(--dyte-space-3, 12px);\n  padding-top: var(--dyte-space-2, 8px);\n  padding-bottom: var(--dyte-space-2, 8px);\n}\n\n#remote-control-self dyte-button {\n  height: 100%;\n  border-radius: var(--dyte-border-radius-none, 0);\n  --tw-bg-opacity: 1;\n  background-color: rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-bg-opacity));\n  font-size: 12px;\n}\n\n:host([size='sm']) #remote-control-self {\n  height: auto;\n  flex-direction: column;\n}\n\n:host([size='sm']) #remote-control-self dyte-button {\n  width: 100%;\n  padding-top: var(--dyte-space-1, 4px);\n  padding-bottom: var(--dyte-space-1, 4px);\n}\n\n/** Name tag positions */\n\n:host([name-tag-position='bottom-right']) ::slotted(dyte-name-tag) {\n  left: auto;\n  right: var(--dyte-space-3, 12px);\n}\n\n:host([name-tag-position='bottom-center']) ::slotted(dyte-name-tag) {\n  left: auto;\n  right: auto;\n}\n\n:host([name-tag-position='top-left']) ::slotted(dyte-name-tag) {\n  top: var(--dyte-space-3, 12px);\n  bottom: auto;\n}\n\n:host([name-tag-position='top-right']) ::slotted(dyte-name-tag) {\n  top: var(--dyte-space-3, 12px);\n  right: var(--dyte-space-3, 12px);\n  left: auto;\n  bottom: auto;\n}\n\n:host([name-tag-position='top-center']) ::slotted(dyte-name-tag) {\n  left: auto;\n  right: auto;\n  bottom: auto;\n  top: var(--dyte-space-3, 12px);\n}\n\n/** Keyframes */\n\n@keyframes video-fadein {\n  0% {\n    opacity: 0;\n    transform: scale(1.4) translateY(20px);\n  }\n\n  100% {\n    opacity: 1;\n    transform: scale(1) translateY(0);\n  }\n}\n\n::slotted(dyte-network-indicator) {\n  position: absolute;\n  right: var(--dyte-space-3, 12px);\n  bottom: var(--dyte-space-3, 12px);\n}\n\n@media only screen and (max-height: 480px) and (orientation: landscape) {\n    :host([size='sm'][variant='solid']) ::slotted(dyte-name-tag), \n    :host([size='sm'][variant='solid']) dyte-name-tag {\n    left: var(--dyte-space-0, 0px);\n    bottom: var(--dyte-space-0, 0px);\n    border-radius: var(--dyte-border-radius-none, 0);\n      transform-origin: 0% 110%;\n      transform: scale(0.6);\n  }\n}\n\n@container screentile (max-width: 400px) {\n  ::slotted(dyte-name-tag) {\n    transform-origin: 0 130%;\n    transform: scale(0.7);\n  }\n}\n";var Pd=Object.freeze({__proto__:null,dyte_screenshare_view:Cd});const Ld=class{constructor(t){vt(this,t),this.stateUpdate=k(this,"dyteStateUpdate",7),this.keyPressListener=t=>{"Escape"===t.key&&this.close()},this.stageStatusListener=()=>{this.canProduceVideo="ALLOWED"===this.meeting.self.permissions.canProduceVideo},this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=ts,this.t=ns(),this.activeTab="connection",this.isMobileMainVisible=!1,this.networkStatus="good",this.canProduceVideo=!1}connectedCallback(){document.addEventListener("keydown",this.keyPressListener),this.meetingChanged(this.meeting)}disconnectedCallback(){var t;this.keyPressListener&&document.removeEventListener("keydown",this.keyPressListener),this.poorConnectionListener&&(null===(t=this.meeting)||void 0===t||t.meta.removeListener("poorConnection",this.poorConnectionListener)),this.meeting.stage.removeListener("stageStatusUpdate",this.stageStatusListener)}meetingChanged(t){null!=t&&(this.canProduceVideo="ALLOWED"===this.meeting.self.permissions.canProduceVideo,this.canProduceVideo?this.activeTab="video":this.activeTab="audio",this.poorConnectionListener=({score:t})=>{t<7?this.networkStatus="poor":t<4&&(this.networkStatus="poorest"),setTimeout((()=>{this.networkStatus="good"}),5e3)},t.meta.addListener("poorConnection",this.poorConnectionListener),t.stage.addListener("stageStatusUpdate",this.stageStatusListener))}changeTab(t){this.activeTab=t,"sm"===this.size&&(this.isMobileMainVisible||(this.isMobileMainVisible=!0))}close(){this.stateUpdate.emit({activeSettings:!1}),Ss.activeSettings=!1}render(){if(null==this.meeting)return null;const t={meeting:this.meeting,states:this.states||Ss,iconPack:this.iconPack,t:this.t};return m(f,null,m("aside",{class:{hide:this.isMobileMainVisible},part:"menu"},m("header",null,m("h2",null,this.t("settings"))),m("button",{type:"button",class:{active:"audio"===this.activeTab},onClick:()=>this.changeTab("audio")},this.t("audio"),m("div",{class:"right"},m("dyte-icon",{icon:this.iconPack.mic_on,iconPack:this.iconPack,t:this.t}),"sm"===this.size&&m("dyte-icon",{icon:this.iconPack.chevron_right,iconPack:this.iconPack,t:this.t}))),this.canProduceVideo&&m("button",{type:"button",class:{active:"video"===this.activeTab},onClick:()=>this.changeTab("video")},this.t("video"),m("div",{class:"right"},m("dyte-icon",{icon:this.iconPack.video_on,iconPack:this.iconPack,t:this.t}),"sm"===this.size&&m("dyte-icon",{icon:this.iconPack.chevron_right,iconPack:this.iconPack,t:this.t}))),m("button",{type:"none",title:`Your network condition is ${this.networkStatus}`},this.t("connection"),m("div",{class:"right"},m("dyte-icon",{icon:this.iconPack.wifi,class:this.networkStatus,iconPack:this.iconPack,t:this.t})))),m("main",{class:{active:this.isMobileMainVisible,scrollbar:!0},part:"main-content"},"sm"===this.size&&m("header",null,m("dyte-button",{kind:"icon",class:"back-btn",onClick:()=>this.isMobileMainVisible=!1,iconPack:this.iconPack,t:this.t},m("dyte-icon",{icon:this.iconPack.chevron_left,iconPack:this.iconPack,t:this.t})),m("h2",null,this.t("audio"===this.activeTab?"audio":"video"))),"audio"===this.activeTab&&m("dyte-settings-audio",Object.assign({},t)),"video"===this.activeTab&&m("dyte-settings-video",Object.assign({},t))))}static get watchers(){return{meeting:["meetingChanged"]}}};Ld.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))\n    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{position:relative;display:flex;overflow:hidden;border-radius:var(--dyte-border-radius-md, 8px);width:100%;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}header{display:flex;align-items:center;justify-content:space-between;padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}.title{font-size:20px;line-height:1}.back-btn,.dismiss-btn{border-radius:var(--dyte-border-radius-sm, 4px);background-color:transparent;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.back-btn:hover,.dismiss-btn:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}aside{box-sizing:border-box;display:flex;min-width:var(--dyte-space-56, 224px);flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));padding-left:var(--dyte-space-2, 8px)}aside button{margin-top:var(--dyte-space-4, 16px);box-sizing:border-box;display:flex;width:100%;align-items:center;justify-content:space-between;border-top-left-radius:var(--dyte-border-radius-sm, 4px);border-bottom-left-radius:var(--dyte-border-radius-sm, 4px);padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px);padding-top:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-3, 12px);background-color:transparent;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));cursor:default;font-size:16px;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);border-width:var(--dyte-border-width-none, 0);border-style:none;outline:2px solid transparent;outline-offset:2px}aside button .right{display:flex;align-items:center}aside button .right dyte-icon{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}aside button .right dyte-icon:last-child{margin-left:var(--dyte-space-4, 16px)}aside button[type='button']{cursor:pointer;transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}aside button[type='button']:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}aside button[type='button']{border-right:var(--dyte-border-width-md, 2px) solid transparent}aside button.active{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-border-opacity));background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.2)}aside button.active:hover{background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.2)}dyte-icon.poor{--tw-text-opacity:1;color:rgba(var(--dyte-colors-warning, 255 205 7) / var(--tw-text-opacity))}dyte-icon.poorest{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}dyte-icon.good{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}main{display:flex;flex:1 1 0%;align-items:center;justify-content:center;padding-left:var(--dyte-space-6, 24px);padding-right:var(--dyte-space-6, 24px);box-sizing:border-box;width:100%;max-width:calc(100% - var(--dyte-space-56, 224px))}.dismiss-btn{position:absolute;top:var(--dyte-space-3, 12px);right:var(--dyte-space-3, 12px);height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}:host([size='sm']) aside{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}:host([size='sm']) .dismiss-btn{top:var(--dyte-space-5, 20px);right:var(--dyte-space-4, 16px)}:host([size='sm']) aside{width:100%;padding-left:var(--dyte-space-0, 0px)}:host([size='sm']) aside button{border-radius:var(--dyte-border-radius-none, 0)}:host([size='sm']) aside button.active{border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent}:host([size='sm']) aside button.active:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}:host([size='sm']) aside.hide{display:none}:host([size='sm']) main{display:none;max-width:100%;overflow-y:auto;padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}:host([size='sm']) main header{justify-content:center}:host([size='sm']) main header dyte-button{position:absolute;left:var(--dyte-space-4, 16px)}:host([size='sm']) main.active{display:block}";var Td=Object.freeze({__proto__:null,dyte_settings:Ld});const Ed=class{constructor(t){vt(this,t),this.stateUpdate=k(this,"dyteStateUpdate",7),this.variant="button",this.states=void 0,this.size=void 0,this.iconPack=ts,this.t=ns()}toggleSettings(){var t;this.stateUpdate.emit({activeSettings:!(null===(t=this.states)||void 0===t?void 0:t.activeSettings),activeMoreMenu:!1}),Ss.activeSettings=!Ss.activeSettings,Ss.activeMoreMenu=!1}render(){const t=this.t("settings");return m(f,{title:t},m("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,onClick:()=>this.toggleSettings(),icon:this.iconPack.settings,label:t,variant:this.variant}))}};Ed.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}";var Ad=Object.freeze({__proto__:null,dyte_settings_toggle:Ed});const Md=class{constructor(t){vt(this,t),this.stateUpdate=k(this,"dyteStateUpdate",7),this.socketStateUpdate=({state:t})=>{this.connectionState=t,"failed"===t&&(this.isJoining=!1)},this.join=async()=>{var t,e,i;if(""!==(null===(t=this.displayName)||void 0===t?void 0:t.trim())&&!this.isJoining){this.isJoining=!0,null===(e=this.meeting)||void 0===e||e.self.setName(this.displayName),gs.setItem("dyte-display-name",this.displayName);try{await(null===(i=this.meeting)||void 0===i?void 0:i.joinRoom())}catch(s){this.isJoining=!1}}},this.meeting=void 0,this.states=Ss,this.size=void 0,this.config=$t,this.iconPack=ts,this.t=ns(),this.displayName=void 0,this.isJoining=!1,this.canEditName=!0,this.canProduceAudio=!0,this.connectionState=void 0}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){this.meeting.meta.removeListener("socketConnectionUpdate",this.socketStateUpdate)}componentDidLoad(){var t;null===(t=this.inputEl)||void 0===t||t.focus()}meetingChanged(t){var e,i,s;null!=t&&(this.connectionState=null===(e=t.meta.socketState)||void 0===e?void 0:e.state,this.canEditName=null===(i=t.self.permissions.canEditDisplayName)||void 0===i||i,this.displayName=(null===(s=t.self.name)||void 0===s?void 0:s.trim())||(this.canEditName?"":"Participant"),Ss.meeting="setup",t.meta.addListener("socketConnectionUpdate",this.socketStateUpdate))}render(){var t,e,i;const s=""===(null===(t=this.displayName)||void 0===t?void 0:t.trim())||"connected"!==this.connectionState||this.isJoining,a={meeting:this.meeting,config:this.config,states:this.states||Ss,size:this.size,iconPack:this.iconPack,t:this.t};return m(f,null,m("div",{class:"container"},m("div",{class:"container-tile"},m(cs,{element:"dyte-participant-tile",defaults:a,props:{participant:null===(e=this.meeting)||void 0===e?void 0:e.self,size:"md",isPreview:!0},childProps:{participant:null===(i=this.meeting)||void 0===i?void 0:i.self,size:"md"},deepProps:!0}),m("div",{class:"media-selectors"},m("dyte-microphone-selector",Object.assign({},a,{variant:"inline"})),m("dyte-camera-selector",Object.assign({},a,{variant:"inline"})),m("dyte-speaker-selector",Object.assign({},a,{variant:"inline"})))),m("div",{class:"metadata"},m("div",{class:"name"},this.t("setup_screen.join_in_as")),m("div",{class:"label"},m("div",{class:"name"},!this.canEditName&&Ia(this.displayName,20))),this.canEditName&&m("input",{placeholder:this.t("setup_screen.your_name"),value:this.displayName,spellcheck:!1,autoFocus:!0,ref:t=>{this.inputEl=t},onInput:t=>{this.displayName=t.target.value},onKeyDown:t=>{"Enter"===t.key&&this.join()}}),m("dyte-button",{size:"lg",kind:"wide",onClick:this.join,disabled:s,iconPack:this.iconPack,t:this.t},this.isJoining?m("dyte-spinner",{iconPack:this.iconPack,t:this.t}):this.t("join")),"connected"!==this.connectionState&&m("div",{class:"no-network-badge"},m("dyte-icon",{size:"md",variant:"danger",icon:this.iconPack.disconnected}),"failed"===this.connectionState?this.t("network.lost_extended"):this.t("network.lost")))))}static get watchers(){return{meeting:["meetingChanged"]}}};Md.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{box-sizing:border-box;padding:var(--dyte-space-4, 16px);height:100%;min-height:100%;width:100%;display:flex;place-items:center;justify-content:center;--dyte-controlbar-button-background-color:rgb(var(--dyte-colors-background-700, 44 44 44))}.container{width:100%;max-width:1080px;display:flex;align-items:center;justify-content:space-evenly;gap:var(--dyte-space-4, 16px)}.metadata{width:100%;max-width:var(--dyte-space-80, 320px)}.label{display:flex;flex-direction:column;align-items:center;font-size:14px}.label p{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-2, 8px);display:inline-block;font-size:16px}.container-tile{display:flex;height:100%;width:100%;max-width:584px;flex-direction:column;gap:var(--dyte-space-2, 8px)}.name{margin:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-6, 24px);text-align:center;font-size:28px;font-weight:500;letter-spacing:-0.025em;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}input{margin-bottom:var(--dyte-space-6, 24px);display:block;height:var(--dyte-space-10, 40px);width:100%;max-width:var(--dyte-space-80, 320px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);color:rgb(var(--dyte-colors-text-1000, 255 255 255));box-sizing:border-box;font-size:16px;outline:2px solid transparent;outline-offset:2px;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}input::-moz-placeholder{color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}input::placeholder{color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}input{border:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60))}input:focus{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-border-opacity))}dyte-spinner{color:rgb(var(--dyte-colors-text-1000, 255 255 255));--icon-size:var(--dyte-space-8, 32px)}:host([size='sm']) .container,:host([size='md']) .container{height:100%;flex-direction:column;justify-content:space-evenly}:host([size='sm']) .container-tile,:host([size='md']) .container-tile{height:-moz-min-content;height:min-content;flex-direction:column;justify-content:center}dyte-participant-tile{height:auto;width:100%;max-width:584px}.media-selectors{display:flex;flex-direction:column;justify-content:space-between}.media-selectors .row{display:grid;grid-template-columns:repeat(2, minmax(0, 1fr))}.no-network-badge{margin-top:var(--dyte-space-2, 8px);display:flex;width:100%;flex-direction:row;align-items:center;justify-content:flex-start;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));background-color:rgba(var(--dyte-colors-danger, 255 45 45) / 0.1);padding-top:var(--dyte-space-1, 4px);padding-bottom:var(--dyte-space-1, 4px);font-size:12px;color:rgba(var(--dyte-colors-danger, 255 45 45) / 0.75)}.no-network-badge dyte-icon{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px)}";var Rd=Object.freeze({__proto__:null,dyte_setup_screen:Md});const Dd=class{constructor(t){vt(this,t),this.stateUpdate=k(this,"dyteStateUpdate",7),this.getTabs=()=>this.meeting.self.config?this.enabledSections.filter((t=>this.meeting.self.config.controlBar.elements[t.id])):this.enabledSections,this.close=()=>{this.stateUpdate.emit({activeSidebar:!1,sidebar:this.defaultSection}),Ss.sidebar=this.currentTab,Ss.activeSidebar=!1},this.toggleFloating=()=>{this.isFloating=!this.isFloating,Ss.sidebarFloating=this.isFloating},this.enabledSections=[],this.defaultSection="chat",this.meeting=void 0,this.states=void 0,this.config=$t,this.iconPack=ts,this.t=ns(),this.size=void 0,this.view="sidebar",this.currentTab=this.defaultSection,this.isFloating=!1,this.enablePinning=!0}connectedCallback(){this.viewChanged(this.view),this.statesChanged(this.states),this.meetingChanged(this.meeting),this.isFloating=(null==Ss?void 0:Ss.sidebarFloating)||!1}disconnectedCallback(){var t,e;document.removeEventListener("keydown",this.keydownListener),null===(e=null===(t=this.meeting)||void 0===t?void 0:t.stage)||void 0===e||e.removeListener("stageStatusUpdate",this.onStageStatusUpdate),this.onStageStatusUpdate=null}meetingChanged(t){var e,i;this.updateEnabledSections(t),this.onStageStatusUpdate=t=>{this.updateEnabledSections(this.meeting)},null===(i=null===(e=this.meeting)||void 0===e?void 0:e.stage)||void 0===i||i.on("stageStatusUpdate",this.onStageStatusUpdate)}statesChanged(t){const e=t||Ss;(null==e?void 0:e.sidebar)&&(this.currentTab=e.sidebar)}viewChanged(t){"full-screen"===t?(this.enablePinning=!1,this.keydownListener=t=>{"Escape"===t.key&&this.close()},document.addEventListener("keydown",this.keydownListener)):this.enablePinning=!0}viewSection(t){this.currentTab=t,this.stateUpdate.emit({activeSidebar:!0,sidebar:this.currentTab}),Ss.activeSidebar=!0,Ss.sidebar=this.currentTab}updateEnabledSections(t=this.meeting){const e=[];$n(t)&&e.push({id:"chat",name:this.t("chat")}),Un(t)&&e.push({id:"polls",name:this.t("polls")}),Fn(t)&&e.push({id:"participants",name:this.t("participants")}),zn(t)&&e.push({id:"plugins",name:this.t("plugins")}),this.enabledSections=e}render(){var t;const e={meeting:this.meeting,config:this.config,states:this.states||Ss,size:this.size,t:this.t,iconPack:this.iconPack};return!1!==(null===(t=e.states)||void 0===t?void 0:t.activeSidebar)&&this.currentTab?m(f,{class:this.enablePinning?this.isFloating?"floating":"":"floating"},m("dyte-sidebar-ui",{tabs:this.getTabs(),currentTab:this.currentTab,view:this.view,onTabChange:t=>{this.viewSection(t.detail)},onSidebarClose:this.close},this.enablePinning&&m("div",{class:"pinned-state",slot:"pinned-state"},m("dyte-button",{variant:"ghost",kind:"icon",onClick:this.toggleFloating,"aria-label":this.isFloating?this.t("pin"):this.t("unpin")},m("dyte-icon",{icon:this.isFloating?this.iconPack.pin:this.iconPack.pin_off}))),"chat"===e.states.sidebar&&m(cs,{element:"dyte-chat",defaults:e,props:{slot:"chat"}}),"polls"===e.states.sidebar&&m(cs,{element:"dyte-polls",defaults:e,props:{slot:"polls"}}),"participants"===e.states.sidebar&&m(cs,{element:"dyte-participants",defaults:e,props:{slot:"participants"}}),"plugins"===e.states.sidebar&&m(cs,{element:"dyte-plugins",defaults:e,props:{slot:"plugins"}}))):null}static get watchers(){return{meeting:["meetingChanged"],states:["statesChanged"],view:["viewChanged"]}}};Dd.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{height:100%;width:100%;max-width:var(--dyte-space-96, 384px);box-sizing:border-box;display:flex;flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));border-width:var(--dyte-border-width-sm, 1px);border-style:solid;--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-border-opacity))}:host([view='sidebar']){right:var(--dyte-space-2, 8px);overflow:clip;border-radius:var(--dyte-border-radius-lg, 12px);--tw-shadow:0 25px 50px -12px rgb(0 0 0 / 0.25);--tw-shadow-colored:0 25px 50px -12px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);--tw-shadow-color:rgb(var(--dyte-colors-background-900, 26 26 26));--tw-shadow:var(--tw-shadow-colored)}:host([view='full-screen']){top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);max-width:100%}:host(.floating){position:absolute !important;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);left:auto;z-index:50}.pinned-state{position:absolute;right:var(--dyte-space-1, 4px);display:inline-flex;width:var(--dyte-space-2, 8px);justify-content:flex-end}";var Id=Object.freeze({__proto__:null,dyte_sidebar:Dd});const Od=class{constructor(t){vt(this,t),this.setHostDimensions=()=>{const{clientWidth:t,clientHeight:e}=this.host;this.dimensions={width:t,height:e}},this.participants=[],this.aspectRatio="16:9",this.gap=8,this.size=void 0,this.meeting=void 0,this.states=void 0,this.config=$t,this.iconPack=ts,this.t=ns(),this.dimensions={width:0,height:0},this.mediaConnection=void 0}connectedCallback(){this.resizeObserver=new _a(this.setHostDimensions),this.resizeObserver.observe(this.host),this.meetingChanged(this.meeting)}meetingChanged(t){const e=null==t?void 0:t.meta;e&&(this.mediaConnection=Object.assign({},e.mediaState))}disconnectedCallback(){var t;null===(t=this.resizeObserver)||void 0===t||t.disconnect()}render(){const t={meeting:this.meeting,config:this.config,states:this.states,size:this.size,iconPack:this.iconPack,t:this.t},{width:e,height:i,getPosition:s}=Oo({dimensions:this.dimensions,count:this.participants.length,aspectRatio:this.aspectRatio,gap:this.gap});return m(f,null,this.participants.map(((a,r)=>{const{top:n,left:o}=s(r);return m(cs,{element:"dyte-participant-tile",defaults:t,props:{participant:a,style:{position:"absolute",top:`${n}px`,left:`${o}px`,width:`${e}px`,height:`${i}px`},key:a.id,"data-participant":a.id,mediaConnection:this.mediaConnection},childProps:{participant:a},deepProps:!0})})),m("slot",null))}get host(){return x(this)}static get watchers(){return{meeting:["meetingChanged"]}}};Od.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:block;height:100%;width:100%}";var $d=Object.freeze({__proto__:null,dyte_simple_grid:Od});const Ud=class{constructor(t){vt(this,t),this.getAdaptiveSize=t=>"sm"===this.size||t>3||"md"===this.size?"sm":"md",this.layout="row",this.participants=[],this.pinnedParticipants=[],this.aspectRatio="16:9",this.gap=8,this.size=void 0,this.meeting=void 0,this.states=void 0,this.config=$t,this.iconPack=ts,this.t=ns(),this.gridSize=Uo}render(){const t={meeting:this.meeting,config:this.config,states:this.states,size:this.size,iconPack:this.iconPack,t:this.t},e=this.participants.filter((t=>this.pinnedParticipants.some((e=>e.id!=t.id))));return m(f,null,m("main",{part:"main"},m(cs,{element:"dyte-simple-grid",defaults:t,props:{part:"main-grid",participants:this.pinnedParticipants,aspectRatio:this.aspectRatio,gap:this.gap,size:this.getAdaptiveSize(this.pinnedParticipants.length)}})),e.length>0&&m("aside",{part:"aside",class:this.gridSize.spotlight?`grid-width-${this.gridSize.spotlight}`:"grid-width-md"},m(cs,{element:"dyte-simple-grid",defaults:t,props:{part:"aside-grid",participants:e,aspectRatio:this.aspectRatio,gap:this.gap,size:this.getAdaptiveSize(e.length)}})))}get host(){return x(this)}};Ud.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:100%;width:100%}main{flex:1 1 0%}.grid-width-sm{width:25%}.grid-width-md{width:50%}.grid-width-lg{width:66.666667%}:host([size='sm']),:host([size='md']){flex-direction:column}:host([size='md']) aside{max-height:var(--dyte-space-96, 384px);width:100%;max-width:100%}:host([size='md']) .grid-width-sm{height:25%}:host([size='md']) .grid-width-md{height:50%}:host([size='md']) .grid-width-lg{height:66.666667%}:host([size='sm']) aside{max-height:var(--dyte-space-96, 384px);width:100%;max-width:100%}:host([size='sm']) .grid-width-sm,:host([size='sm']) .grid-width-md,:host([size='sm']) .grid-width-lg{height:50%}:host([size='xl']) .grid-width-sm,:host([size='xl']) .grid-width-md,:host([size='xl']) .grid-width-lg{width:400px}:host([layout='column']){flex-direction:column}:host([layout='column']) main{flex:4}:host([layout='column']) aside{flex:2;max-width:100%;width:100%}";var Fd=Object.freeze({__proto__:null,dyte_spotlight_grid:Ud});const zd=class{constructor(t){vt(this,t),this.stateUpdate=k(this,"dyteStateUpdate",7),this.iconPack=ts,this.t=ns()}render(){return m(f,null,m("slot",null))}};zd.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block;position:relative;overflow:hidden}";var Nd=Object.freeze({__proto__:null,dyte_stage:zd});const jd=class{constructor(t){vt(this,t),this.stateUpdate=k(this,"dyteStateUpdate",7),this.stageCallback=async()=>{var t,e,i,s,a,r,n;const o=null===(t=this.meeting.stage)||void 0===t?void 0:t.status;"ON_STAGE"===o&&await(null===(i=null===(e=null==this?void 0:this.meeting)||void 0===e?void 0:e.stage)||void 0===i?void 0:i.leave()),"OFF_STAGE"===o&&(null===(a=null===(s=null==this?void 0:this.meeting)||void 0===s?void 0:s.stage)||void 0===a||a.requestAccess(),(t=>{var e,i;return(null===(e=null==t?void 0:t.self)||void 0===e?void 0:e.permissions.stageEnabled)&&"ALLOWED"===(null===(i=null==t?void 0:t.self)||void 0===i?void 0:i.permissions.stageAccess)})(this.meeting)&&(this.stateUpdate.emit({activeJoinStage:!0}),Ss.activeJoinStage=!0)),"REQUESTED_TO_JOIN_STAGE"===o&&(null===(n=null===(r=null==this?void 0:this.meeting)||void 0===r?void 0:r.stage)||void 0===n||n.cancelRequestAccess())},this.variant="button",this.meeting=void 0,this.size=void 0,this.iconPack=ts,this.stageStatus="OFF_STAGE",this.state={label:"",disabled:!1,icon:""},this.t=ns()}connectedCallback(){this.meetingChanged(this.meeting)}stageStatusHandler(t,e){this.stageStatus=e,"ACCEPTED_TO_JOIN_STAGE"===e&&(t.self.setupTracks({audio:!1,video:!1}),this.stateUpdate.emit({activeJoinStage:!0}),Ss.activeJoinStage=!0),this.state=this.getState()}disconnectedCallback(){var t,e;null===(e=null===(t=this.meeting)||void 0===t?void 0:t.stage)||void 0===e||e.removeListener("stageStatusUpdate",(t=>this.stageStatusHandler(this.meeting,t)))}meetingChanged(t){var e,i,s,a;null!=t&&(this.stageStatus=null===(e=t.stage)||void 0===e?void 0:e.status,this.stageStatusHandler(t,null===(i=t.stage)||void 0===i?void 0:i.status),null===(a=null===(s=this.meeting)||void 0===s?void 0:s.stage)||void 0===a||a.on("stageStatusUpdate",(e=>this.stageStatusHandler(t,e))))}getState(){let t="",e="",i=!1;switch(this.stageStatus){case"ON_STAGE":e=this.iconPack.leave_stage,t=this.t("stage_request.leave_stage"),i=!1;break;case"ACCEPTED_TO_JOIN_STAGE":e=this.iconPack.join_stage,t=this.t("stage_request.request"),i=!0;break;case"REQUESTED_TO_JOIN_STAGE":e=this.iconPack.join_stage,t=this.t("stage_request.requested"),i=!1;break;default:e=this.iconPack.join_stage,t=this.t("stage_request.request"),i=!1}return{label:t,disabled:i,icon:e}}render(){var t,e,i;if(t=this.meeting,(null===(e=null==t?void 0:t.self)||void 0===e?void 0:e.permissions.stageEnabled)&&"NOT_ALLOWED"!==(null===(i=null==t?void 0:t.self)||void 0===i?void 0:i.permissions.stageAccess))return m(f,{title:this.state.label},m("dyte-tooltip",{placement:"top",kind:"block",label:this.state.label,delay:600,part:"tooltip",iconPack:this.iconPack,t:this.t},m("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,variant:this.variant,label:this.state.label,icon:this.state.icon,onClick:this.stageCallback,disabled:this.state.disabled,showWarning:!1})))}static get watchers(){return{meeting:["meetingChanged"]}}};jd.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}";var Bd=Object.freeze({__proto__:null,dyte_stage_toggle:jd});const Hd=class{constructor(t){vt(this,t),this.stateUpdate=k(this,"dyteStateUpdate",7),this.type="text",this.placeholder="",this.disabled=!1,this.iconPack=ts,this.t=ns()}connectedCallback(){this.stateUpdate.emit({abc:!1}),Ss.abc=!1}get value(){return this.input.value}render(){return m(f,null,m("input",{ref:t=>this.input=t,type:this.type,placeholder:this.placeholder,disabled:this.disabled}))}};Hd.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}input{display:block;height:var(--dyte-space-10, 40px);padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);font-size:14px;border-width:var(--dyte-border-width-md, 2px);border-style:solid;border-color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}input::-moz-placeholder{color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}input::placeholder{color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}input:focus{color:rgb(var(--dyte-colors-text-1000, 255 255 255))}input{border-radius:var(--dyte-border-radius-sm, 4px);outline:2px solid transparent;outline-offset:2px;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}input:focus{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-border-opacity))}input:disabled{cursor:not-allowed}";var Vd=Object.freeze({__proto__:null,dyte_text_field:Hd});const Gd=class{constructor(t){vt(this,t),this.onTranscript=t=>{t.transcript&&this.add(t)},this.meeting=void 0,this.states=Ss,this.config=$t,this.t=ns(),this.transcripts=[],this.listenerAttached=!1}connectedCallback(){this.meetingChanged(this.meeting)}addListener(t){var e;null===(e=null==t?void 0:t.ai)||void 0===e||e.addListener("transcript",this.onTranscript),this.listenerAttached=!0}clearListeners(t){var e;this.onTranscript&&(null===(e=null==t?void 0:t.ai)||void 0===e||e.removeListener("transcript",this.onTranscript)),this.listenerAttached=!1,clearTimeout(this.disconnectTimeout),this.transcripts=[]}disconnectedCallback(){null!=this.meeting&&this.clearListeners(this.meeting)}meetingChanged(t,e){clearTimeout(this.disconnectTimeout),void 0!==e&&this.clearListeners(e),null!=t&&this.states.activeCaptions&&this.addListener(t)}statesChanged(t){const e=t||Ss;e.activeCaptions&&!this.listenerAttached&&this.addListener(this.meeting),!e.activeCaptions&&this.listenerAttached&&this.clearListeners(this.meeting)}transcriptionsReducer(t,e){if(!t.length)return[e];let i=t[t.length-1];return i.peerId!==e.peerId?t.concat(e):i.id===e.id?(i.transcript=e.transcript,t.pop(),t.concat(Or(i))):t.concat(e)}add(t){this.transcripts=this.transcriptionsReducer(this.transcripts,t)}remove(t){this.transcripts=this.transcripts.filter((e=>e.renderedId!==t))}handleDismiss(t){t.stopPropagation();const{id:e,renderedId:i}=t.detail,s=this.host.shadowRoot.querySelector(`[data-id="${e}"]`);null==s||s.classList.add("exit"),setTimeout((()=>{It((()=>{this.remove(i)}))}),400)}renderTranscripts(){const t=[];return this.transcripts.forEach((e=>{const i={name:e.name,date:e.date,peerId:e.peerId,transcript:e.transcript,id:e.id,renderedId:e.id};if(!t.length)return e.renderedId=i.renderedId,void t.push(i);const s=t[t.length-1];if(s.transcript.length+i.transcript.length>400||s.peerId!==e.peerId)return e.renderedId=i.renderedId,void t.push(i);s.transcript+=" "+e.transcript,e.renderedId=s.renderedId})),t.splice(0,t.length-2),null==t?void 0:t.map((t=>m("dyte-transcript",{key:t.id,"data-id":t.id,transcript:t,onDyteTranscriptDismiss:t=>this.handleDismiss(t),t:this.t})))}render(){if(this.states.activeCaptions)return m(f,null,this.renderTranscripts())}get host(){return x(this)}static get watchers(){return{meeting:["meetingChanged"],states:["statesChanged"]}}};Gd.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:absolute;top:var(--dyte-space-4, 16px);right:var(--dyte-space-4, 16px);bottom:var(--dyte-space-4, 16px);left:var(--dyte-space-4, 16px);top:auto;display:flex;flex-direction:column;pointer-events:none;justify-content:center;width:100%;z-index:5}dyte-transcript{margin-top:var(--dyte-space-2, 8px)}";var qd=Object.freeze({__proto__:null,dyte_transcripts:Gd});var Zd=Object.freeze({__proto__:null,dyte_ui_provider:class{constructor(t){vt(this,t),this.meeting=void 0,this.size=void 0,this.config=$t,this.t=ns(),this.iconPackUrl=void 0,this.loadConfigFromPreset=!0,this.applyDesignSystem=!0,this.joinRoom=!0,this.isReady=!1,this.iconPack=ts}async iconPackUrlChanged(t){this.iconPack=await es(t)}async meetingChanged(t){var e;if(t){if(!t.self.roomJoined&&this.joinRoom&&(this.isReady=!1,await t.joinRoom(),this.isReady=!0),this.loadConfigFromPreset&&null!=t.self.config){const e=t.self.config,{config:i}=Xi(e,t);this.config===$t&&(this.config=Object.assign(Object.assign(Object.assign({},$t),i),{designTokens:Object.assign(Object.assign({},$t.designTokens),i.designTokens)}))}this.applyDesignSystem&&null!=(null===(e=this.config)||void 0===e?void 0:e.designTokens)&&"undefined"!=typeof document&&Ai(document.documentElement,this.config.designTokens),Array.from(this.hostEl.children).filter((t=>t.tagName.startsWith("DYTE-"))).forEach((e=>{e.meeting=t,e.config=this.config,e.size=this.size,e.iconPack=this.iconPack,e.t=this.t}))}}connectedCallback(){this.resizeObserver=new ResizeObserver((()=>this.handleResize())),this.resizeObserver.observe(this.hostEl),this.meetingChanged(this.meeting),this.iconPackUrlChanged(this.iconPackUrl)}handleResize(){this.size=as(this.hostEl.clientWidth)}render(){return this.isReady?m("slot",null):null}get hostEl(){return x(this)}static get watchers(){return{iconPackUrl:["iconPackUrlChanged"],meeting:["meetingChanged"]}}}});const Kd=class{constructor(t){vt(this,t),this.meeting=void 0,this.config=$t,this.iconPack=ts,this.t=ns()}render(){return m(f,null,m("slot",null,m("div",{class:"centered",part:"content"},m("dyte-logo",{meeting:this.meeting,config:this.config,part:"logo",t:this.t}),m("p",null,this.t("waitlist.body_text")))))}};Kd.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{height:100%;width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center}.centered{display:flex;flex-direction:column;align-items:center}dyte-logo{margin-bottom:var(--dyte-space-8, 32px);height:var(--dyte-space-12, 48px)}p{font-size:16px;border-radius:var(--dyte-border-radius-lg, 12px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));padding-left:var(--dyte-space-8, 32px);padding-right:var(--dyte-space-8, 32px);padding-top:var(--dyte-space-4, 16px);padding-bottom:var(--dyte-space-4, 16px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}";var Wd=Object.freeze({__proto__:null,dyte_waiting_screen:Kd});const Yd=class{constructor(t){vt(this,t),this.onParticipantsAdd=k(this,"participantsAdd",7),this.onParticipantDelete=k(this,"participantDelete",7),this.onRoomJoin=k(this,"roomJoin",7),this.deleteRoom=k(this,"delete",7),this.updateRoom=k(this,"update",7),this.permissionsUpdateListener=()=>{this.permissions=this.meeting.self.permissions.connectedMeetings},this.reset=()=>{this.editingTitleRoomId=null,this.newTitle=null},this.onEditClick=()=>{if(this.editingTitleRoomId){if(this.newTitle.length<3)return;this.roomTitle=this.newTitle,this.updateRoom.emit({title:this.newTitle,id:this.editingTitleRoomId}),this.glowCard(),this.reset()}else this.editingTitleRoomId=this.room.id,It((()=>{this.inputTextEl.focus(),this.inputTextEl.select()}))},this.onDrop=t=>{t.currentTarget instanceof HTMLParagraphElement&&(t.currentTarget.classList.remove("drop-zone-active"),this.onAssign())},this.onDragOver=t=>{t.currentTarget instanceof HTMLParagraphElement&&(t.currentTarget.classList.add("drop-zone-active"),t.preventDefault())},this.meeting=void 0,this.assigningParticipants=void 0,this.mode=void 0,this.states=void 0,this.allowDelete=!0,this.iconPack=ts,this.t=ns(),this.isDragMode=!1,this.room=void 0,this.defaultExpanded=!1,this.editingTitleRoomId=null,this.newTitle=null,this.showExpandedCard=!1,this.glowingCard=!1}connectedCallback(){var t;this.allParticipants=Us(this.meeting),this.permissionsUpdateListener(),this.showExpandedCard=this.defaultExpanded,this.roomTitle=this.room.isParent?this.t("breakout_rooms.main_room"):null===(t=this.room)||void 0===t?void 0:t.title,this.canEditMeetingTitle=this.permissions.canAlterConnectedMeetings&&!this.room.isParent&&!this.meeting.connectedMeetings.isActive,this.meeting.self.permissions.on("permissionsUpdate",this.permissionsUpdateListener)}disconnectedCallback(){this.meeting.self.permissions.off("permissionsUpdate",this.permissionsUpdateListener)}onDragLeave(t){t.currentTarget instanceof HTMLParagraphElement&&t.currentTarget.classList.remove("drop-zone-active")}getAssignmentHint(){return this.assigningParticipants&&this.isDragMode?this.t("breakout_rooms.drag_drop_participants"):this.assigningParticipants?this.t("breakout_rooms.click_drop_participants"):0===this.room.participants.length?this.t("breakout_rooms.none_assigned"):void 0}toggleCardDisplay(){this.showExpandedCard=!this.showExpandedCard}glowCard(){this.glowingCard=!0,setTimeout((()=>{this.glowingCard=!1}),2e3)}onAssign(){this.onParticipantsAdd.emit(),this.glowCard()}onJoin(){this.onRoomJoin.emit()}onTitleChanged(t){"Enter"===t.key&&(this.newTitle=t.target.value,this.onEditClick())}renderPeer(t){const{displayPictureUrl:e}=this.allParticipants.find((e=>$s(e)===$s(t))),i=Ua(t.displayName||"");return m("div",{class:"peer-ui-container"},m("dyte-avatar",{participant:{name:i,picture:e},size:"sm"}),m("p",{class:"name",title:i},Ia(i,16),this.meeting.self.userId===t.id&&` (${this.t("you")})`))}renderExpandedCardMaybe(){if(this.showExpandedCard&&!this.room.isParent&&this.getAssignmentHint()&&this.permissions.canAlterConnectedMeetings)return m("div",{class:"message-container"},m("p",{class:{"compact-height":0!==this.room.participants.length},onClick:()=>this.onAssign(),onDragOver:this.onDragOver,onDragLeave:this.onDragLeave,onDrop:this.onDrop},this.getAssignmentHint()))}renderParticipantsMaybe(){if(this.showExpandedCard&&!this.room.isParent&&0!==this.room.participants.length)return m("div",{class:"participant-list",onClick:()=>{this.onAssign()}},this.room.participants.map((t=>m("div",{class:"participant-item",role:"listitem",key:t.id},this.renderPeer(t),this.permissions.canAlterConnectedMeetings&&m("dyte-icon",{class:"show-on-hover",icon:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t,onClick:()=>{this.onParticipantDelete.emit(t)}})))))}render(){var t,e,i;return m(f,null,m("div",{class:{"assign-mode":this.assigningParticipants,"selector-mode":!this.assigningParticipants,"glowing-card":this.glowingCard}},m("div",{class:"header"},m("input",{ref:t=>this.inputTextEl=t,placeholder:this.t("breakout_rooms.room_name"),disabled:!(this.editingTitleRoomId===this.room.id),value:this.roomTitle,minlength:3,onChange:t=>{this.newTitle=t.target.value},onKeyPress:t=>this.onTitleChanged(t),class:{"editing-enabled":this.editingTitleRoomId===this.room.id},style:{width:`${this.roomTitle.length+1}ch`}}),this.editingTitleRoomId!==this.room.id&&m("span",{class:"participant-count"},"(",m("dyte-icon",{icon:this.iconPack.people,iconPack:this.iconPack,t:this.t}),null!==(i=null===(e=null===(t=this.room)||void 0===t?void 0:t.participants)||void 0===e?void 0:e.length)&&void 0!==i?i:"0",")"),this.canEditMeetingTitle&&m("dyte-tooltip",{label:this.editingTitleRoomId===this.room.id?this.t("breakout_rooms.save_room_name"):this.t("breakout_rooms.edit_room_name"),iconPack:this.iconPack,t:this.t},m("dyte-icon",{icon:this.editingTitleRoomId===this.room.id?this.iconPack.checkmark:this.iconPack.edit,iconPack:this.iconPack,t:this.t,class:"show-on-hover",onClick:this.onEditClick})),m("div",{class:"rooms-container"},this.permissions.canAlterConnectedMeetings&&!this.room.isParent&&this.allowDelete&&m("dyte-tooltip",{label:this.t("breakout_rooms.delete"),class:"danger",iconPack:this.iconPack,t:this.t},m("dyte-icon",{icon:this.iconPack.delete,class:"show-on-hover",iconPack:this.iconPack,t:this.t,onClick:()=>{this.deleteRoom.emit()}})),this.assigningParticipants&&this.permissions.canAlterConnectedMeetings&&!this.room.isParent&&m("dyte-button",{iconPack:this.iconPack,t:this.t,kind:"button",variant:"ghost",class:"assign-button",size:"md",onClick:()=>this.onAssign()},this.t("breakout_rooms.assign")),"edit"===this.mode&&!this.assigningParticipants&&this.permissions.canSwitchConnectedMeetings&&m("dyte-button",{iconPack:this.iconPack,t:this.t,kind:"button",variant:"ghost",class:"assign-button",size:"md",disabled:this.room.id===this.meeting.meta.meetingId,onClick:()=>this.onJoin()},this.room.id===this.meeting.meta.meetingId?this.t("joined"):this.t("join")),!this.room.isParent&&m("dyte-icon",{icon:this.showExpandedCard?this.iconPack.chevron_up:this.iconPack.chevron_down,iconPack:this.iconPack,t:this.t,onClick:()=>this.toggleCardDisplay()}))),this.renderExpandedCardMaybe(),this.renderParticipantsMaybe()))}};Yd.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));border-radius:var(--dyte-border-radius-sm, 4px)}@keyframes bg-glow{25%{background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.2)}50%{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}75%{background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.2)}}.glowing-card{animation:bg-glow 0.8s}.selector-mode,.assign-mode{display:flex;flex-direction:column;align-items:center;padding:var(--dyte-space-2, 8px);cursor:pointer}.selector:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.show-on-hover{display:none}.header{width:100%;display:flex;align-items:center}.header dyte-icon{margin-left:var(--dyte-space-2, 8px);height:var(--dyte-space-5, 20px);cursor:pointer}.header .danger{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}.header .hide{display:none}.header .rooms-container{display:flex;flex-grow:1;flex-direction:row;align-items:center;justify-content:flex-end}.header input{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));padding:var(--dyte-space-1, 4px);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));max-width:var(--dyte-space-36, 144px);font-size:14px;font-weight:500;border-radius:var(--dyte-border-radius-sm, 4px);border-width:var(--dyte-border-width-none, 0);border-style:none;outline:2px solid transparent;outline-offset:2px;border-bottom-width:var(--dyte-border-width-sm, 1px);border-style:solid;--tw-border-opacity:1;border-bottom-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-border-opacity))}.header input:disabled{overflow-x:visible;border-radius:var(--dyte-border-radius-none, 0);border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent}.header input:invalid{border-bottom-width:var(--dyte-border-width-sm, 1px);border-style:dashed;--tw-border-opacity:1;border-bottom-color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-border-opacity))}.header input.editing-enabled{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}.header .participant-count{display:flex;align-items:center;font-size:14px;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.header .participant-count dyte-icon{margin:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0\\.5, 2px);width:var(--dyte-space-3, 12px)}.header .assign-button{height:var(--dyte-space-6, 24px);--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity));-webkit-text-decoration-line:underline;text-decoration-line:underline}.header .assign-button:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.participant-list{display:grid;flex-grow:1;grid-template-columns:repeat(2, minmax(0, 1fr));gap:var(--dyte-space-2, 8px);margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);width:100%;border-radius:var(--dyte-border-radius-sm, 4px)}.participant-list::-webkit-scrollbar{width:var(--dyte-space-1\\.5, 6px)}.participant-list::-webkit-scrollbar-thumb{border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.participant-list::-webkit-scrollbar-track{border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.participant-item{display:flex;align-items:center;justify-content:space-between;margin-right:var(--dyte-space-2, 8px);height:-moz-fit-content;height:fit-content;padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px)}.participant-item:hover{border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.selector-mode:hover .show-on-hover{display:flex}.message-container{margin:var(--dyte-space-0, 0px);display:flex;width:100%;padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px)}.message-container p{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-0, 0px);height:var(--dyte-space-20, 80px);display:flex;width:100%;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);font-size:12px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));border-style:dashed;--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-border-opacity))}.message-container p:hover{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-border-opacity));background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.25)}.message-container .drop-zone-active{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-border-opacity));background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.25)}dyte-icon{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}.show-on-hover{margin-left:var(--dyte-space-4, 16px);height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);display:none}:host(:hover) .show-on-hover{display:flex}.peer-ui-container{position:relative;display:flex;align-items:center;gap:var(--dyte-space-2, 8px);height:var(--dyte-space-10, 40px);cursor:pointer;border-radius:var(--dyte-border-radius-sm, 4px);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.peer-ui-container dyte-avatar{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px);font-size:14px;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.peer-ui-container .name{font-size:14px;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}";const Qd=class{constructor(t){vt(this,t),this.onSelectedParticipantsUpdate=k(this,"selectedParticipantsUpdate",7),this.onAllToggled=k(this,"allParticipantsToggleUpdate",7),this.onParticipantsDragging=k(this,"participantsDragging",7),this.onSearchInput=t=>{this.search=t.target.value},this.onDragStart=t=>{this.isDragging=!0,this.onParticipantsDragging.emit(!0),this.updateSelectedParticipants(t,!0)},this.onDragEnd=t=>{this.isDragging=!1,this.onParticipantsDragging.emit(!1),this.updateSelectedParticipants(t,!1)},this.onClick=t=>{const e=this.selectedParticipantIds.includes($s(t));this.updateSelectedParticipants(t,!e)},this.onToggleAll=t=>{const e=t?this.participantsToShow.map($s):[];this.onAllToggled.emit(e)},this.meeting=void 0,this.participantIds=[],this.iconPack=ts,this.t=ns(),this.search="",this.participantsToShow=[],this.selectedParticipantIds=[],this.isDragging=!1}connectedCallback(){this.meetingChanged(this.meeting),this.searchChanged(this.search)}disconnectedCallback(){this.meeting}updateSelectedParticipants(t,e){const i=$s(t);let s=[];s=e&&!this.selectedParticipantIds.includes(i)?[...this.selectedParticipantIds,i]:[...this.selectedParticipantIds.filter((t=>t!==i))],this.onSelectedParticipantsUpdate.emit(s)}meetingChanged(t){null!=t&&this.getParticipants(this.search)}participantsChanged(){this.getParticipants(this.search)}searchChanged(t){this.getParticipants(t)}getParticipants(t){const e=Us(this.meeting);this.participantsToShow=e.filter((e=>{var i;return this.participantIds.includes($s(e))&&(null!==(i=e.displayName)&&void 0!==i?i:"").toLowerCase().includes(t.toLowerCase())}))}renderPeer(t){const e=Ua(t.displayName||"");return m("div",{class:"peer-ui-container"},m("dyte-avatar",{participant:{name:t.displayName,picture:t.displayPictureUrl},size:"sm"}),m("p",{class:"name",title:e},Ia(e,16),this.meeting.self.userId===t.id&&` (${this.t("you")})`))}render(){return m(f,null,m("div",{class:"search-wrapper"},m("div",{class:"search",part:"search"},m("dyte-icon",{icon:this.iconPack.search,part:"search-icon",iconPack:this.iconPack,t:this.t,class:"search-icon"}),m("input",{type:"search",autocomplete:"off",placeholder:this.t("search"),onInput:this.onSearchInput,part:"search-input"})),m("slot",{name:"shuffle-button"})),m("div",{class:"header"},m("div",{class:"title-wrapper"},m("span",null,this.t("breakout_rooms.main_room")),m("span",{class:"participant-count"},"(",m("dyte-icon",{icon:this.iconPack.people,iconPack:this.iconPack,t:this.t}),this.participantsToShow.length,")")),0!==this.selectedParticipantIds.length&&m("dyte-tooltip",{label:this.t("breakout_rooms.select_all"),iconPack:this.iconPack,t:this.t},m("input",{type:"checkbox",checked:this.selectedParticipantIds.length===this.participantsToShow.length,onChange:t=>this.onToggleAll(!!t.target.checked)}))),m("div",{class:"ctr scrollbar",part:"container"},this.participantsToShow.length>0&&m("ul",{class:"participants",part:"participants"},this.participantsToShow.map((t=>m("li",{class:{"participant-item":!0,dragging:this.isDragging},onClick:()=>this.onClick(t),onDragStart:()=>this.onDragStart(t),onDragEnd:()=>this.onDragEnd(t),draggable:0===this.selectedParticipantIds.length,role:"listitem",key:t.id},this.renderPeer(t),!this.isDragging&&m("input",{type:"checkbox",class:{"hide-checkbox":0===this.selectedParticipantIds.length},checked:this.selectedParticipantIds.includes($s(t))}))))),0===this.participantsToShow.length&&this.search.length>0&&m("div",{class:"empty-message"},this.t("participants.errors.empty_results")),0===this.participantsToShow.length&&0===this.search.length&&m("div",{class:"empty-room"},m("dyte-icon",{icon:this.iconPack.people_checked,part:"search-icon",iconPack:this.iconPack,t:this.t,class:"search-icon"}),m("p",null,this.t("breakout_rooms.all_assigned")),m("span",null,this.t("breakout_rooms.empty_main_room")))))}static get watchers(){return{meeting:["meetingChanged"],participantIds:["participantsChanged"],search:["searchChanged"]}}};Qd.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))\n    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{display:flex;height:100%;flex-direction:column;font-size:14px}:host input[type='checkbox']{margin:var(--dyte-space-0, 0px);cursor:pointer;-webkit-appearance:none;-moz-appearance:none;appearance:none;border-radius:var(--dyte-border-radius-sm, 4px);position:relative;height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);border-width:var(--dyte-border-width-sm, 1px);border-style:solid;border-color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}:host input[type='checkbox']:checked{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-border-opacity));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity))}:host input[type='checkbox']:checked::before{position:absolute;top:1px;left:1px;height:var(--dyte-space-3, 12px);width:var(--dyte-space-3, 12px);background-color:rgb(var(--dyte-colors-text-1000, 255 255 255));content:'';clip-path:polygon(5% 60%, 35% 93%, 100% 19%, 86% 4%, 36% 62%, 19% 44%)}*{box-sizing:border-box}.participants{margin-top:var(--dyte-space-2, 8px);padding:var(--dyte-space-0, 0px)}.ctr{box-sizing:border-box;padding-top:var(--dyte-space-0, 0px);padding-bottom:var(--dyte-space-0, 0px);overflow-y:auto;flex-grow:1;flex-basis:0}.empty-message{margin-top:var(--dyte-space-10, 40px);margin-bottom:var(--dyte-space-10, 40px);text-align:center;font-size:14px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.empty-room{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:var(--dyte-space-2, 8px);height:100%;text-align:center;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.empty-room dyte-icon{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px)}.empty-room p{font-size:16px;font-weight:500;margin:var(--dyte-space-0, 0px)}.empty-room span{font-size:12px;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.search-wrapper{margin-bottom:var(--dyte-space-1, 4px);display:flex;align-items:center;gap:var(--dyte-space-2, 8px)}.search{position:sticky;box-sizing:border-box;display:flex;align-items:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-0, 0px);height:var(--dyte-space-8, 32px)}.search .search-icon{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.search input{box-sizing:border-box;width:100%;padding-right:var(--dyte-space-2, 8px);border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:inherit;color:rgb(var(--dyte-colors-text-1000, 255 255 255));outline:2px solid transparent;outline-offset:2px;border-radius:var(--dyte-border-radius-sm, 4px);font-size:14px}.search input::-moz-placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.search input::placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.header{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-1\\.5, 6px);height:var(--dyte-space-9, 36px);padding-top:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-0\\.5, 2px);border-bottom-width:var(--dyte-border-width-sm, 1px);border-top-width:var(--dyte-border-width-none, 0);border-right-width:var(--dyte-border-width-none, 0);border-left-width:var(--dyte-border-width-none, 0);border-style:solid;--tw-border-opacity:1;border-bottom-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-border-opacity));font-size:12px;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));display:flex;align-items:center;justify-content:space-between}.title-wrapper{display:flex;align-items:center;gap:var(--dyte-space-2, 8px)}.participant-count{display:flex;align-items:center;font-size:14px}.participant-count dyte-icon{margin-right:var(--dyte-space-0\\.5, 2px);width:var(--dyte-space-3, 12px)}.participant-item{display:flex;align-items:center;justify-content:space-between;margin-top:var(--dyte-space-1, 4px);margin-bottom:var(--dyte-space-1, 4px);border-radius:var(--dyte-border-radius-sm, 4px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);cursor:pointer}.participant-item input.hide-checkbox{display:none}.participant-item input:checked{display:inline-block}.dragging input{display:none}.participant-item:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.participant-item:hover input{display:inline-block}.peer-ui-container{position:relative;display:flex;align-items:center;gap:var(--dyte-space-2, 8px);height:var(--dyte-space-10, 40px);cursor:pointer;border-radius:var(--dyte-border-radius-sm, 4px);color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.peer-ui-container dyte-avatar{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px);font-size:14px;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.peer-ui-container .name{font-size:14px;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}";const Jd=class{constructor(t){vt(this,t),this.onChange=k(this,"valueChange",7),this.input="1",this.size=void 0,this.value=void 0,this.minValue=0,this.iconPack=ts,this.t=ns()}connectedCallback(){this.watchStateHandler(this.input),this.input=this.value.toString()}watchStateHandler(t){this.onChange.emit(t)}increment(){this.input=Math.max(parseInt(this.input)+1,this.minValue).toString()}decrement(){this.input=Math.max(this.minValue,parseInt(this.input)-1).toString()}render(){return m(f,null,m("dyte-button",{kind:"icon",variant:"ghost",onClick:()=>this.decrement(),iconPack:this.iconPack,t:this.t},m("dyte-icon",{icon:this.iconPack.subtract,iconPack:this.iconPack,t:this.t})),m("input",{type:"number",value:this.input,min:this.minValue,onInput:t=>{const e=parseInt(t.target.value,10);isNaN(e)||e<this.minValue?this.input=this.minValue.toString():this.input=e.toString()}}),m("dyte-button",{kind:"icon",variant:"ghost",onClick:()=>this.increment(),iconPack:this.iconPack,t:this.t},m("dyte-icon",{icon:this.iconPack.add,iconPack:this.iconPack,t:this.t})))}static get watchers(){return{input:["watchStateHandler"]}}};Jd.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;flex-direction:row;align-items:center;justify-content:center;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));width:-moz-fit-content;width:fit-content;border-radius:var(--dyte-border-radius-sm, 4px);padding:var(--dyte-space-1, 4px)}p{margin:var(--dyte-space-0, 0px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px)}input{margin:var(--dyte-space-0, 0px);width:var(--dyte-space-6, 24px);padding:var(--dyte-space-2, 8px);border-width:var(--dyte-border-width-sm, 1px);border-style:solid;border-color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));text-align:center;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));border-radius:var(--dyte-border-radius-sm, 4px);font-size:16px;outline:2px solid transparent;outline-offset:2px;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}input::-webkit-outer-spin-button,input::-webkit-inner-spin-button{margin:var(--dyte-space-0, 0px);appearance:none;-webkit-appearance:none}input[type='number']{-moz-appearance:textfield}";var Xd=Object.freeze({__proto__:null,dyte_breakout_room_manager:Yd,dyte_breakout_room_participants:Qd,dyte_counter:Jd});const tc={joined:"https://dyte-uploads.s3.ap-south-1.amazonaws.com/notification_join.mp3",left:"https://dyte-uploads.s3.ap-south-1.amazonaws.com/notification_join.mp3",message:"https://dyte-uploads.s3.ap-south-1.amazonaws.com/notification_message.mp3"};class ec{constructor(t){this.meeting=t,this.audio=document.createElement("audio"),this.audio.volume=.3}play(t,e=3e3){var i;this.playing||(this.playing=!0,this.audio.src=tc[t],this.audio.volume=.3,null===(i=this.audio.play())||void 0===i||i.catch((i=>{zl.error("[dyte-notifications] play() failed\n",{sound:t,duration:e},i)})),setTimeout((()=>{this.playing=!1}),e))}async setDevice(t){var e,i,s;Rs(this.meeting)||await(null===(s=null===(i=null===(e=this.audio)||void 0===e?void 0:e.setSinkId)||void 0===i?void 0:i.call(e,t))||void 0===s?void 0:s.catch((t=>{zl.error("[dyte-notifications] setSinkId() error\n",t)})))}}const ic=class{constructor(t){vt(this,t),this.search=k(this,"search",7),this.searchDismissed=k(this,"searchDismissed",7),this.back=k(this,"back",7),this.meeting=void 0,this.channel=void 0,this.iconPack=ts,this.t=ns(),this.showChannelDetailsDialog=!1,this.showSearchBar=!1,this.members=[],this.showBackButton=!1}onChannelChanged(){this.$searchInput&&(this.$searchInput.value=""),this.showSearchBar=!1,this.channel.isDirectMessage||this.meeting.chat.getChannelMembers(this.channel.id).then((t=>{this.members=t}))}connectedCallback(){this.onChannelChanged()}renderChannelDetails(){return m("dyte-dialog",{open:!0,onDyteDialogClose:()=>{this.showChannelDetailsDialog=!1},iconPack:this.iconPack,t:this.t},m("dyte-channel-details",{members:this.members,channel:this.channel}))}render(){return this.channel?m(f,null,this.showChannelDetailsDialog&&this.renderChannelDetails(),m("header",{class:{searching:this.showSearchBar}},this.showBackButton&&m("dyte-button",{kind:"icon",variant:"secondary",class:"back-btn",onClick:()=>{this.back.emit()}},m("dyte-icon",{icon:this.iconPack.chevron_left})),m("div",{class:"channel-details"},m("span",{class:"name"},this.channel.displayName),!this.channel.isDirectMessage&&m("span",{class:"members"},this.members.map((t=>t.name)).join(", "))),m("div",{class:"channel-tools"},!this.channel.isDirectMessage&&m("dyte-tooltip",{label:this.t("chat.channel_members"),iconPack:this.iconPack,t:this.t,variant:"primary"},m("dyte-button",{iconPack:this.iconPack,t:this.t,kind:"button",variant:"secondary",size:"md",onClick:()=>{this.showChannelDetailsDialog=!this.showChannelDetailsDialog},class:"br-primary-btn"},m("dyte-icon",{icon:this.iconPack.people,iconPack:this.iconPack,t:this.t})))))):null}static get watchers(){return{channel:["onChannelChanged"]}}};ic.style="header{box-sizing:border-box;height:var(--dyte-space-16, 64px);width:100%;padding:var(--dyte-space-4, 16px);display:flex;justify-content:space-between;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));border-left-width:var(--dyte-border-width-none, 0);border-right-width:var(--dyte-border-width-none, 0);border-bottom-width:var(--dyte-border-width-sm, 1px);border-top-width:var(--dyte-border-width-none, 0);border-style:solid;--tw-border-opacity:1;border-bottom-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-border-opacity))}header.searching{justify-content:flex-end}header.searching .channel-details{display:none}header .channel-details{display:flex;flex-grow:1;flex-direction:column;justify-content:center;height:var(--dyte-space-9, 36px);width:var(--dyte-space-1, 4px)}header .channel-details .name{font-weight:500}header .channel-details .members{margin-top:var(--dyte-space-0\\.5, 2px);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:12px;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}header .channel-tools{display:flex;flex-shrink:0;justify-content:flex-end;gap:var(--dyte-space-1, 4px);min-width:var(--dyte-space-24, 96px)}header .channel-tools dyte-tooltip{height:var(--dyte-space-8, 32px);width:var(--dyte-space-10, 40px);display:flex}header .search-input{height:var(--dyte-space-8, 32px);width:var(--dyte-space-48, 192px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);border-width:var(--dyte-border-width-none, 0);border-style:none;outline:2px solid transparent;outline-offset:2px;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}header .name{font-size:16px}header .br-primary-btn{background-color:transparent}header .br-primary-btn:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}@media (orientation: landscape) and (min-width: 400px){header.searching .channel-details{display:flex}}.back-btn{margin-right:var(--dyte-space-3, 12px)}";const sc=class{constructor(t){vt(this,t),this.channelChange=k(this,"channelChange",7),this.calculateListHeight=yl((()=>{if("list"===this.viewAs&&this.$listEl){let t=0;const e=this.$el.shadowRoot.querySelector('slot[name="header"]');e&&e.assignedElements().forEach((e=>t+=e.offsetHeight)),this.$searchEl&&(t+=this.$searchEl.offsetHeight),this.$listEl.style.height=window.innerHeight-t-16+"px"}}),60),this.getFilteredChannels=()=>""===this.searchQuery.trim()?this.channels:this.channels.filter((t=>t.name.toLowerCase().includes(this.searchQuery.toLowerCase()))),this.toggleDropdown=()=>{this.showDropdown=!this.showDropdown},this.getChannelById=t=>this.channels.find((e=>e.id===t)),this.getTotalUnreads=()=>this.channels.reduce(((t,e)=>t+e.unreadCount),0),this.onChannelClickHandler=t=>{this.channelChange.emit(t),"dropdown"===this.viewAs&&(this.showDropdown=!1)},this.channels=void 0,this.selectedChannelId=void 0,this.disableSearch=!1,this.hideAvatar=!1,this.iconPack=ts,this.t=ns(),this.viewAs="list",this.searchQuery="",this.showDropdown=!1}connectedCallback(){this.resizeObserver=new ResizeObserver(this.calculateListHeight)}componentDidLoad(){this.resizeObserver.observe(this.$el),this.calculateListHeight()}disconnectedCallback(){var t;null===(t=this.resizeObserver)||void 0===t||t.disconnect(),this.calculateListHeight.cancel()}getTimeLabel(t){const e=new Date,i=new Date(e);i.setDate(e.getDate()-1);const s=new Date(e);if(s.setDate(e.getDate()-e.getDay()-1),t.toDateString()===e.toDateString())return t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});if(t.toDateString()===i.toDateString())return this.t("date.yesteday");if(t>s){const e=["date.sunday","date.monday","date.tuesday","date.wednesday","date.thursday","date.friday","date.saturday"];return this.t(e[t.getDay()])}return Intl.DateTimeFormat([],{day:"2-digit",month:"2-digit",year:"2-digit"}).format(t)}render(){const t=this.getFilteredChannels(),e="list"===this.viewAs||"dropdown"===this.viewAs&&this.showDropdown;return m(f,null,"list"===this.viewAs&&m("slot",{name:"header"}),e&&m("div",{class:{dropdown:"dropdown"===this.viewAs,scrollbar:"dropdown"===this.viewAs,list:"list"===this.viewAs}},!this.disableSearch&&m("div",{class:"search-container",ref:t=>this.$searchEl=t},m("input",{type:"text",placeholder:this.t("chat.search_conversations"),value:this.searchQuery,onInput:t=>this.searchQuery=t.target.value}),m("dyte-icon",{icon:this.iconPack.search})),m("div",{class:"channels-container scrollbar",ref:t=>this.$listEl=t},t.map((t=>m("button",{class:{channel:!0,active:this.selectedChannelId===t.id},onClick:()=>this.onChannelClickHandler(t)},!this.hideAvatar&&m("div",null,t.icon?m("dyte-icon",{class:"avatar-icon",icon:this.iconPack[t.icon]}):m("dyte-avatar",{participant:{name:t.name,picture:t.avatarUrl}})),m("div",{class:"channel-data"},m("div",{class:"col"},m("div",{class:"name"},t.name),t.latestMessage&&m("div",{class:{"last-message":!0,"no-message":!t.latestMessage}},m("dyte-text-message-view",{isMarkdown:!0,text:t.latestMessage}))),m("div",{class:"col channel-meta"},t.latestMessageTime&&m("time",{class:"time"},this.getTimeLabel(t.latestMessageTime)),t.unreadCount>0&&m("div",{class:"unread-count"},t.unreadCount)))))))),"dropdown"===this.viewAs&&m("button",{class:"dropdown-trigger",onClick:this.toggleDropdown},m("span",null,this.selectedChannelId&&`${this.t("to")} ${this.getChannelById(this.selectedChannelId).name}`,this.getTotalUnreads()>0&&m("div",{class:"unread-count"},this.getTotalUnreads())),m("dyte-icon",{icon:this.showDropdown?this.iconPack.chevron_up:this.iconPack.chevron_down})))}get $el(){return x(this)}};sc.style=".scrollbar {\n  /* For Firefox */\n  scrollbar-width: thin;\n  scrollbar-color: var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))\n    var(--dyte-scrollbar-background, transparent);\n}\n\n/* For WebKit */\n.scrollbar::-webkit-scrollbar {\n  height: var(--dyte-space-1\\.5, 6px);\n  width: var(--dyte-space-1\\.5, 6px);\n  border-radius: 9999px;\n  background-color: var(--dyte-scrollbar-background, transparent);\n}\n\n.scrollbar::-webkit-scrollbar-thumb {\n  border-radius: 9999px;\n  background-color: var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)));\n}\n\n\n:host {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  --tw-bg-opacity: 1;\n  background-color: rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));\n  position: relative;\n  z-index: 10;\n  height: var(--dyte-space-12, 48px);\n  min-height: 48px;\n}\n\n.dropdown-trigger {\n  height: 100%;\n  width: 100%;\n  border-width: var(--dyte-border-width-none, 0);\n  border-style: none;\n  padding: var(--dyte-space-4, 16px);\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  --tw-bg-opacity: 1;\n  background-color: rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));\n  font-size: 14px;\n  color: rgb(var(--dyte-colors-text-1000, 255 255 255));\n  cursor: pointer;\n  position: absolute;\n  z-index: 20;\n}\n\n.dropdown-trigger span {\n  display: flex;\n  flex: 1 1 0%;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.dropdown-trigger dyte-icon {\n  margin-left: var(--dyte-space-1, 4px);\n  height: var(--dyte-space-5, 20px);\n  width: var(--dyte-space-5, 20px);\n  flex-shrink: 0;\n}\n\n@container chatcontainer (height < 360px) {\n  .dropdown-trigger {\n    padding: var(--dyte-space-2, 8px);\n  }\n  .dropdown {\n    top: var(--dyte-space-8, 32px) !important;\n  }\n  .search-container {\n    padding-left: var(--dyte-space-0, 0px) !important;\n    padding-right: var(--dyte-space-0, 0px) !important;\n    padding-top: var(--dyte-space-0, 0px) !important;\n    padding-bottom: var(--dyte-space-0, 0px) !important;\n  }\n  input {\n    height: var(--dyte-space-8, 32px) !important;\n    border-radius: var(--dyte-border-radius-none, 0) !important;\n  }\n  .channel {\n    height: var(--dyte-space-8, 32px) !important;\n    border-radius: var(--dyte-border-radius-sm, 4px) !important;\n  }\n  .avatar-icon {\n    height: var(--dyte-space-3, 12px) !important;\n    width: var(--dyte-space-3, 12px) !important;\n    padding: var(--dyte-space-1, 4px) !important;\n  }\n\n  dyte-avatar {\n    height: var(--dyte-space-5, 20px) !important;\n    width: var(--dyte-space-5, 20px) !important;\n  }\n}\n\n.dropdown {\n  position: absolute;\n  width: 100%;\n  --tw-bg-opacity: 1;\n  background-color: rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));\n  top: var(--dyte-space-12, 48px);\n  z-index: 10;\n  animation: 0.3s slide-down ease;\n}\n\n.dropdown .channels-container {\n  max-height: var(--dyte-space-80, 320px);\n}\n\n.list {\n  display: flex;\n  flex-direction: column;\n}\n\n.list .channel .channel-data {\n  align-items: flex-start;\n}\n\n.unread-count {\n  display: flex;\n  justify-content: center;\n  height: var(--dyte-space-5, 20px);\n  min-width: var(--dyte-space-3, 12px);\n  border-radius: 9999px;\n  padding-left: var(--dyte-space-1, 4px);\n  padding-right: var(--dyte-space-1, 4px);\n  font-size: 12px;\n  line-height: 1.25rem;\n  --tw-bg-opacity: 1;\n  background-color: rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));\n  color: rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)));\n}\n\ninput {\n  height: var(--dyte-space-9, 36px);\n  width: 100%;\n  padding-left: var(--dyte-space-3, 12px);\n  padding-right: var(--dyte-space-3, 12px);\n  box-sizing: border-box;\n  border-width: var(--dyte-border-width-none, 0);\n  border-style: none;\n  outline: 2px solid transparent;\n  outline-offset: 2px;\n  border-radius: var(--dyte-border-radius-sm, 4px);\n  --tw-bg-opacity: 1;\n  background-color: rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));\n  color: rgb(var(--dyte-colors-text-1000, 255 255 255));\n}\n\n.search-container {\n  display: flex;\n  flex-shrink: 0;\n  flex-grow: 0;\n  flex-basis: auto;\n  align-items: center;\n  padding-top: var(--dyte-space-3, 12px);\n  padding-bottom: var(--dyte-space-3, 12px);\n  padding-left: var(--dyte-space-2, 8px);\n  padding-right: var(--dyte-space-2, 8px);\n  border-bottom: var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-700, 44 44 44));\n}\n\n.search-container dyte-icon {\n  margin-left: calc(var(--dyte-space-8, 32px) * -1);\n  height: var(--dyte-space-5, 20px);\n  width: var(--dyte-space-5, 20px);\n  color: rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76));\n}\n\n.channels-container {\n  display: flex;\n  flex-direction: column;\n  gap: var(--dyte-space-1, 4px);\n  padding: var(--dyte-space-2, 8px);\n  flex: 1 1 auto;\n  overflow-y: auto;\n}\n\n.channel {\n  flex-shrink: 0;\n  box-sizing: border-box;\n  border-width: var(--dyte-border-width-none, 0);\n  border-style: none;\n  background-color: transparent;\n  outline: 2px solid transparent;\n  outline-offset: 2px;\n  cursor: pointer;\n  border-radius: var(--dyte-border-radius-md, 8px);\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: var(--dyte-space-2, 8px);\n  height: var(--dyte-space-16, 64px);\n  width: 100%;\n  padding-left: var(--dyte-space-2, 8px);\n  padding-right: var(--dyte-space-3, 12px);\n  color: rgb(var(--dyte-colors-text-1000, 255 255 255));\n  transition-property: color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;\n  transition-property: color, background-color, border-color, text-decoration-color, fill, stroke;\n  transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;\n  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n  transition-duration: 150ms;\n}\n\n.channel:hover {\n  --tw-bg-opacity: 1;\n  background-color: rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));\n}\n\n.channel .channel-data {\n  flex: 1 1 0%;\n  align-items: center;\n  justify-content: space-between;\n  display: flex;\n  gap: var(--dyte-space-2, 8px);\n}\n\n.channel .name {\n  font-size: 16px;\n}\n\n.channel .name, \n  .channel .last-message {\n  max-width: var(--dyte-space-40, 160px);\n  text-align: left;\n  overflow: hidden;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 1;\n}\n\n.channel .no-message {\n  font-style: italic;\n}\n\n.channel dyte-avatar {\n  height: var(--dyte-space-12, 48px);\n  width: var(--dyte-space-12, 48px);\n  overflow: clip;\n  border-radius: 9999px;\n  font-size: 14px;\n}\n\n.channel .avatar-icon {\n  height: var(--dyte-space-6, 24px);\n  width: var(--dyte-space-6, 24px);\n  padding: var(--dyte-space-3, 12px);\n  color: rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)));\n  overflow: clip;\n  border-radius: 9999px;\n  --tw-bg-opacity: 1;\n  background-color: rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));\n}\n\n.channel time, \n  .channel .last-message {\n  font-size: 12px;\n  color: rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76));\n}\n\n.channel.active {\n  --tw-bg-opacity: 1;\n  background-color: rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-bg-opacity));\n  color: rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)));\n}\n\n.channel.active .unread-count {\n  background-color: rgb(var(--dyte-colors-text-on-brand-800, var(--dyte-colors-text-800, 255 255 255 / 0.76)));\n  --tw-text-opacity: 1;\n  color: rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity));\n}\n\n.channel.active time {\n  color: rgb(var(--dyte-colors-text-on-brand-800, var(--dyte-colors-text-800, 255 255 255 / 0.76)));\n}\n\n.channel.active .last-message {\n  color: rgb(var(--dyte-colors-text-on-brand-700, var(--dyte-colors-text-700, 255 255 255 / 0.64)));\n}\n\n.channel.active dyte-avatar {\n  --tw-bg-opacity: 1;\n  background-color: rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));\n  color: rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)));\n}\n\n.col {\n  gap: var(--dyte-space-1, 4px);\n  display: flex;\n  flex-direction: column;\n}\n\n.channel-meta {\n  flex-shrink: 0;\n  align-items: flex-end;\n}\n\n@keyframes slide-down {\n  from {\n    transform: translateY(-50px);\n  }\n  to {\n    transform: translateY(0%);\n  }\n}\n";const ac={messagesSent:0,startTime:0},rc=class{constructor(t){vt(this,t),this.onNewMessage=k(this,"newMessage",7),this.onEditMessage=k(this,"editMessage",7),this.onEditCancel=k(this,"editCancel",7),this.onQuotedMessageDismiss=k(this,"quotedMessageDismiss",7),this.textMessage="",this.sendFile=()=>{this.canSendFiles&&("image"===this.fileToUpload.type?this.onNewMessage.emit({type:"image",image:this.fileToUpload.file}):this.onNewMessage.emit({type:"file",file:this.fileToUpload.file}),this.fileToUpload=null)},this.handleSendMessage=()=>{if(!this.canSendTextMessage||this.rateLimitsBreached)return;if(null!==this.fileToUpload)return void this.sendFile();const t=this.textMessage,e=Date.now();e-ac.startTime>1e3*this.rateLimits.period&&(ac.startTime=e,ac.messagesSent=0),ac.messagesSent+=1,this.checkRateLimitBreached(e),t.length>0&&(this.quotedMessage.length,this.onNewMessage.emit({type:"text",message:t}),this.cleanup())},this.handleEditMessage=()=>{this.onEditMessage.emit(this.textMessage),this.cleanup()},this.handleEditCancel=()=>{this.onEditCancel.emit(),this.cleanup()},this.onTextChangeHandler=t=>{var e;this.textMessage=t.detail,this.textMessage.length>=(null!==(e=this.maxLength)&&void 0!==e?e:xn)?this.disableSendButton=!0:this.disableSendButton&&(this.disableSendButton=!1),gs.setItem(this.storageKey,t.detail)},this.onKeyDownHandler=t=>{"Enter"===t.key&&t.shiftKey||this.disableSendButton||"Enter"===t.key&&(t.preventDefault(),this.isEditing?this.handleEditMessage():this.handleSendMessage())},this.onFileUploadHandler=(t,e)=>{this.fileToUpload={type:t,file:e}},this.onQuotedMessageDismissHandler=()=>{this.onQuotedMessageDismiss.emit()},this.cleanup=()=>{this.textMessage="",this.fileToUpload=null,gs.setItem(this.storageKey,""),this.$textComposer.setText("",!0),this.isEmojiPickerOpen=!1},this.canSendTextMessage=!0,this.canSendFiles=!0,this.message="",this.quotedMessage="",this.storageKey="dyte-text-message",this.inputTextPlaceholder="Enter your message",this.isEditing=!1,this.iconPack=ts,this.t=ns(),this.maxLength=void 0,this.disableEmojiPicker=!1,this.rateLimits={period:60,maxInvocations:60},this.fileToUpload=null,this.isEmojiPickerOpen=!1,this.disableSendButton=!1,this.rateLimitsBreached=!1,this.onKeyDownHandler=this.onKeyDownHandler.bind(this)}connectedCallback(){this.textMessage=this.message||gs.getItem(this.storageKey)||"",this.checkRateLimitBreached(Date.now())}componentWillUpdate(){this.textMessage=this.message||gs.getItem(this.storageKey)||""}componentDidLoad(){this.message&&It((()=>this.$textComposer.setText(this.message,!0)))}checkRateLimitBreached(t){if(ac.messagesSent>=this.rateLimits.maxInvocations){this.disableSendButton=!0,this.rateLimitsBreached=!0;const e=t-ac.startTime+1e3*this.rateLimits.period;setTimeout((()=>{ac.messagesSent=0,ac.startTime=Date.now(),this.disableSendButton=!1,this.rateLimitsBreached=!1}),e)}}render(){var t;const e={iconPack:this.iconPack,t:this.t};return m(f,null,this.canSendTextMessage&&this.isEmojiPickerOpen&&m("dyte-emoji-picker",Object.assign({part:"emoji-picker",onPickerClose:()=>{this.isEmojiPickerOpen=!1},onDyteEmojiClicked:t=>{this.textMessage+=t.detail,this.$textComposer.setText(this.textMessage,!0)}},e)),m("slot",{name:"chat-addon"}),this.quotedMessage&&0!==this.quotedMessage.length&&m("div",{class:"quoted-message-container",part:"quoted-message-container"},m("div",{class:"quoted-message scrollbar"},m("dyte-text-message-view",{text:this.quotedMessage,isMarkdown:!0})),m("div",null,m("dyte-icon",Object.assign({"aria-label":this.t("dismiss"),class:"dismiss",icon:this.iconPack.dismiss,onClick:this.onQuotedMessageDismissHandler},e)))),m("div",{class:"composer-container"},m("div",{class:"composers"},this.fileToUpload&&m("dyte-draft-attachment-view",Object.assign({},e,{attachment:this.fileToUpload,onDeleteAttachment:()=>this.fileToUpload=null})),!this.fileToUpload&&m("dyte-text-composer-view",{value:this.textMessage,placeholder:this.inputTextPlaceholder,onTextChange:this.onTextChangeHandler,keyDownHandler:this.onKeyDownHandler,maxLength:null!==(t=this.maxLength)&&void 0!==t?t:xn,rateLimitBreached:this.rateLimitsBreached,t:this.t,iconPack:this.iconPack,ref:t=>this.$textComposer=t})),m("div",{class:"chat-buttons",part:"chat-buttons"},m("div",{class:"left",part:"chat-buttons-left"},!this.fileToUpload&&!this.isEditing&&m("div",null,this.canSendFiles&&[m("dyte-file-picker-button",Object.assign({},e,{onFileChange:t=>this.onFileUploadHandler("file",t.detail)})),m("dyte-file-picker-button",Object.assign({filter:"image/*",label:this.t("chat.send_img"),icon:"image",onFileChange:t=>this.onFileUploadHandler("image",t.detail)},e))],this.canSendTextMessage&&!this.disableEmojiPicker&&m("dyte-emoji-picker-button",Object.assign({isActive:this.isEmojiPickerOpen,onClick:()=>{this.isEmojiPickerOpen=!this.isEmojiPickerOpen}},e)),m("slot",{name:"chat-buttons"}))),m("div",{class:"right",part:"chat-buttons-right"},!this.isEditing&&m("dyte-tooltip",Object.assign({variant:"primary",label:this.t("chat.send_msg"),delay:2e3},e),m("dyte-button",Object.assign({kind:"icon",disabled:this.disableSendButton,onClick:()=>this.handleSendMessage(),title:this.t("chat.send_msg")},e),m("dyte-icon",{icon:this.iconPack.send}))),this.isEditing&&m("div",{class:"edit-buttons"},m("dyte-tooltip",Object.assign({variant:"secondary",label:this.t("cancel"),delay:2e3},e),m("dyte-button",Object.assign({kind:"icon",variant:"secondary",onClick:()=>this.handleEditCancel(),title:this.t("cancel")},e),m("dyte-icon",{icon:this.iconPack.dismiss}))),m("dyte-tooltip",Object.assign({variant:"primary",label:this.t("chat.update_msg"),delay:2e3},e),m("dyte-button",Object.assign({kind:"icon",onClick:()=>this.handleEditMessage(),title:this.t("chat.send_msg")},e),m("dyte-icon",{icon:this.iconPack.checkmark}))))))))}};rc.style=":host {\n  display: flex;\n  flex-direction: column;\n  font-family: var(--dyte-font-family, sans-serif);\n  font-size: 14px;\n  position: relative;\n}\n\n.quoted-message-container {\n  margin-bottom: var(--dyte-space-2, 8px);\n  display: flex;\n  justify-content: space-between;\n  --tw-bg-opacity: 1;\n  background-color: rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));\n  color: rgb(var(--dyte-colors-text-1000, 255 255 255));\n  border-radius: var(--dyte-border-radius-md, 8px);\n  border: var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60));\n}\n\n.quoted-message-container .quoted-message {\n  flex: 1 1 0%;\n  padding: var(--dyte-space-2, 8px);\n  border-radius: var(--dyte-border-radius-md, 8px);\n  max-height: var(--dyte-space-24, 96px);\n  overflow-y: auto;\n  word-break: break-all;\n}\n\n.quoted-message-container .quoted-message blockquote {\n  display: none;\n}\n\n.quoted-message-container dyte-icon.dismiss {\n  margin-left: auto;\n  height: var(--dyte-space-5, 20px);\n  width: var(--dyte-space-5, 20px);\n  padding: var(--dyte-space-2, 8px);\n  border-radius: var(--dyte-border-radius-md, 8px);\n  color: rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52));\n}\n\n.quoted-message-container dyte-icon.dismiss:hover {\n  cursor: pointer;\n  color: rgb(var(--dyte-colors-text-1000, 255 255 255));\n}\n\n.quoted-message-container dyte-icon.dismiss {\n  transition-property: color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;\n  transition-property: color, background-color, border-color, text-decoration-color, fill, stroke;\n  transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;\n  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n  transition-duration: 150ms;\n}\n\n.composer-container {\n  position: relative;\n  --tw-bg-opacity: 1;\n  background-color: rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));\n  border-radius: var(--dyte-border-radius-md, 8px);\n  overflow: hidden;\n  border: var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60));\n}\n\n.composer-container > .composers {\n    min-height: 60px;\n  }\n\n@container chatcontainer (height < 360px) {\n    .composer-container > .composers {\n      min-height: 30px;\n    }\n}\n\n.chat-buttons {\n  padding: var(--dyte-space-3, 12px);\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  --tw-bg-opacity: 1;\n  background-color: rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));\n  color: rgb(var(--dyte-colors-text-1000, 255 255 255));\n}\n\n.chat-buttons .right {\n  z-index: 10;\n}\n\n.chat-buttons .right .edit-buttons {\n  display: flex;\n  gap: var(--dyte-space-2, 8px);\n}\n\n.chat-buttons > div {\n  display: flex;\n  align-items: center;\n}\n\ndyte-emoji-picker {\n  z-index: 20;\n  position: absolute;\n  top: calc(var(--dyte-space-72, 288px) * -1);\n  border-top: var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60));\n  animation: 0.3s slide-up ease;\n}\n\n@keyframes slide-up {\n  from {\n    transform: translateY(100%);\n  }\n  to {\n    transform: translateY(0%);\n  }\n}\n";const nc=class{constructor(t){vt(this,t),this.onPinMessage=k(this,"pinMessage",7),this.stateUpdate=k(this,"dyteStateUpdate",7),this.observingEl=[],this.autoScrollEnabled=!0,this.onScroll=t=>{const e=t.target;It((()=>{const{scrollTop:t,clientHeight:i,scrollHeight:s}=e;t+i+10>=s?(this.autoScrollEnabled=!0,this.showLatestMessageButton=!1):this.autoScrollEnabled=!1}))},this.scrollToBottom=()=>{Ba(this.$chat)},this.observeMessage=t=>{t&&this.observingEl.push(t);try{this.intersectionObserver.observe(t)}catch(Rw){}},this.getMessageActions=t=>{const e=[];return!t.pinned&&this.canPinMessages&&e.push({id:"pin_message",label:this.t("pin"),icon:this.iconPack.pin}),e},this.onMessageActionHandler=(t,e)=>{if("pin_message"===t)this.onPinMessage.emit(e)},this.selectedGroup=void 0,this.messages=[],this.selfUserId=void 0,this.canPinMessages=!1,this.size=void 0,this.iconPack=ts,this.t=ns(),this.now=new Date,this.showLatestMessageButton=!1}connectedCallback(){var t;this.lastReadTimestamp=null!==(t=ys.everyone)&&void 0!==t?t:new Date("0001-01-01T00:00:00Z"),this.intersectionObserver=new IntersectionObserver((t=>{document.hasFocus()&&It((()=>{for(const e of t)if(e.isIntersecting){parseInt(e.target.getAttribute("data-timestamp"))>this.lastReadTimestamp.getTime()&&(ys[this.selectedGroup]=new Date)}}))}));const e=()=>{this.now=new Date,this.timeout=setTimeout((()=>{null!=this.request&&(this.request=requestAnimationFrame(e))}),6e4)};this.request=requestAnimationFrame(e),this.chatChanged(this.messages)}componentDidLoad(){this.$chat.addEventListener("scroll",this.onScroll),this.$chat.scrollTop=this.$chat.scrollHeight}componentDidRender(){this.autoScrollEnabled?Ba(this.$chat):null==this.autoScrollEnabled&&Ba(this.$chat,!1)}chatChanged(t){if(null!=this.$chat&&!this.autoScrollEnabled&&this.$chat.clientHeight!==this.$chat.scrollHeight)for(let e=t.length-1;e>=0;e--)if(t[e].message.time>this.lastReadTimestamp&&t[e].message.userId!==this.selfUserId){this.showLatestMessageButton=!0;break}}selectedBucketChanged(){this.autoScrollEnabled=void 0,this.observingEl.forEach((t=>{this.intersectionObserver.unobserve(t)})),this.observingEl=[]}disconnectedCallback(){this.$chat.removeEventListener("scroll",this.onScroll),this.intersectionObserver.disconnect(),clearTimeout(this.timeout),cancelAnimationFrame(this.request)}render(){var t;let e=null,i=!1;return m(f,null,m("div",{class:"chat-container scrollbar",ref:t=>this.$chat=t,part:"container"},m("div",{class:"spacer",part:"spacer"}),m("div",{class:"chat",part:"chat"},null===(t=this.messages)||void 0===t?void 0:t.map((t=>{if("chat"===t.type){const{message:s}=t,a=!(s.userId===this.selfUserId)&&!this.autoScrollEnabled&&!i&&s.time>this.lastReadTimestamp;a&&(i=a);const r=!a&&s.userId===(null==e?void 0:e.userId)&&Ma(s.time,null==e?void 0:e.time)<2;return e=s,m("div",{"is-continued":r,key:t.message.id,ref:this.observeMessage,"data-timestamp":s.time.getTime(),class:s.pinned?"pinned":""},a&&m("div",{class:"new-chat-marker",part:"new-chat-marker"},this.t("chat.new")),m("div",{class:"message-wrapper"},m("dyte-message-view",{time:s.time,actions:this.getMessageActions(s),authorName:s.displayName,hideAuthorName:!0,hideAvatar:!0,hideMetadata:!0,viewType:"incoming",variant:"bubble",onAction:t=>this.onMessageActionHandler(t.detail,s)},m("div",null,!r&&m("div",{class:"head"},m("div",{class:"name"},s.displayName),!!s.time&&m("div",{class:"time",title:Da(s.time)},Ra(s.time,new Date(Date.now())))),m("div",{class:"body"},"text"===s.type&&m("dyte-text-message-view",{text:s.message,isMarkdown:!0}),"file"===s.type&&m("dyte-file-message-view",{name:s.name,url:s.link,size:s.size}),"image"===s.type&&m("dyte-image-message-view",{url:s.link,onPreview:()=>{this.stateUpdate.emit({image:s}),Ss.image=s}})))),s.pinned&&m("div",{class:"pin-button",part:"pin-button"},m("dyte-tooltip",{label:this.t("unpin"),iconPack:this.iconPack,t:this.t},m("dyte-button",{kind:"icon",variant:"ghost",onClick:()=>this.onMessageActionHandler("pin_message",s),iconPack:this.iconPack,t:this.t,disabled:!this.canPinMessages},m("dyte-icon",{icon:this.iconPack.pin,iconPack:this.iconPack,t:this.t,size:"sm"}))))))}return null})))),m("div",{class:"show-new-messages-ctr"},m("dyte-button",{class:{"show-new-messages":!0,active:this.showLatestMessageButton},kind:"icon",part:"show-new-messages",onClick:this.scrollToBottom,iconPack:this.iconPack,t:this.t},m("dyte-icon",{icon:this.iconPack.chevron_down,iconPack:this.iconPack,t:this.t}))))}static get watchers(){return{messages:["chatChanged"],selectedGroup:["selectedBucketChanged"]}}};nc.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))\n    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{position:relative;display:flex;flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));word-break:break-word}.chat-container{box-sizing:border-box;display:flex;flex-direction:column;padding-top:var(--dyte-space-4, 16px);padding-bottom:var(--dyte-space-4, 16px);flex:1 0 0px;overflow-y:scroll}.chat-container .spacer{flex:1 1 auto}.chat-container .chat{flex:0 0 auto}.file-picker{display:none}.chat .head{display:flex;align-items:center}.chat .head .name{margin-right:var(--dyte-space-4, 16px);font-size:12px;font-weight:700}.chat .head .time{font-size:12px;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.chat .body{margin-top:var(--dyte-space-2, 8px);overflow-wrap:break-word;line-height:1.375}.chat .body .emoji{font-size:24px}p{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-3, 12px)}dyte-message-view{margin-top:var(--dyte-space-4, 16px);display:block;padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));box-sizing:border-box}dyte-message-view::part(message){flex-grow:1}*[is-continued] dyte-message-view{margin-top:var(--dyte-space-1, 4px)}.pinned .message-wrapper{position:relative}.pinned .pin-button{position:absolute;right:var(--dyte-space-4, 16px);top:calc(var(--dyte-space-4, 16px) * -1);display:flex;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.pinned .pin-button:hover dyte-button{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-600, 13 81 253) / var(--tw-bg-opacity))}.pinned dyte-message-view{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));padding-top:var(--dyte-space-1, 4px);padding-bottom:var(--dyte-space-1, 4px)}a{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity));-webkit-text-decoration-line:none;text-decoration-line:none}a:hover{-webkit-text-decoration-line:underline;text-decoration-line:underline}.new-chat-marker{display:flex;width:100%;align-items:center;gap:var(--dyte-space-2, 8px);--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity))}.new-chat-marker::before{content:'';height:1px;flex:1 1 0%;background-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / 0.5)}.show-new-messages-ctr{pointer-events:none;display:flex;justify-content:flex-end;padding:var(--dyte-space-3, 12px);z-index:0;margin-top:calc(var(--dyte-space-14, 56px) * -1)}.show-new-messages{pointer-events:auto;--tw-translate-y:var(--dyte-space-16, 64px);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));opacity:0;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.show-new-messages.active{--tw-translate-y:var(--dyte-space-0, 0px);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));opacity:1}";const oc=class{constructor(t){vt(this,t),this.editMessageInit=k(this,"editMessageInit",7),this.onPinMessage=k(this,"pinMessage",7),this.onDeleteMessage=k(this,"deleteMessage",7),this.stateUpdate=k(this,"dyteStateUpdate",7),this.pageSize=25,this.lastReadMessageIndex=-1,this.permissionsUpdateListener=()=>{this.permissionsChanged=!this.permissionsChanged},this.maybeMarkChannelAsRead=t=>{if(!this.selectedChannelId)return;if(0===t.length)return;if(-1!==this.lastReadMessageIndex)return;const e=t.at(0).time>t.at(-1).time?t.at(0):t.at(-1);e.channelIndex&&(this.lastReadMessageIndex=parseInt(e.channelIndex,10),this.meeting.chat.markLastReadMessage(this.selectedChannelId,e))},this.getChatMessages=async(t,e,i)=>{const{messages:s}=await this.meeting.chat.getMessages(t,e,i,void 0,this.selectedChannelId);return this.maybeMarkChannelAsRead(s),s},this.createChatNodes=t=>t.map(((e,i)=>{var s;const a=e.userId===(null===(s=t[i-1])||void 0===s?void 0:s.userId);return this.createChatNode(e,a)})),this.disconnectMeeting=t=>{var e,i;null===(e=null==t?void 0:t.chat)||void 0===e||e.removeListener("chatUpdate",this.chatUpdateListener),null===(i=this.meeting)||void 0===i||i.self.permissions.removeListener("permissionsUpdate",this.permissionsUpdateListener)},this.getMessageActions=t=>{const e=[];return this.meeting.self.permissions.pinParticipant&&e.push({id:"pin_message",label:t.pinned?this.t("unpin"):this.t("pin"),icon:this.iconPack.pin}),e},this.onMessageActionHandler=(t,e)=>{switch(t){case"pin_message":this.onPinMessage.emit(e);break;case"delete_message":this.onDeleteMessage.emit(e)}},this.createChatNode=(t,e)=>{var i,s,a,r;if(0!==t.targetUserIds.length)return null;let n;return n="CHAT"===this.meeting.meta.viewType?null===(i=this.meeting.participants.all.toArray().find((e=>e.userId===t.userId)))||void 0===i?void 0:i.picture:this.meeting.self.userId===t.userId?this.meeting.self.picture:null!==(a=null===(s=this.meeting.participants.joined.toArray().find((e=>e.userId===t.userId)))||void 0===s?void 0:s.picture)&&void 0!==a?a:null===(r=this.meeting.participants.waitlisted.toArray().find((e=>e.userId===t.userId)))||void 0===r?void 0:r.picture,m("div",{class:{pinned:t.pinned}},m("div",{class:"message-wrapper"},m("dyte-message-view",{time:t.time,actions:this.getMessageActions(t),authorName:t.displayName,avatarUrl:n,hideAuthorName:e,viewType:"incoming",variant:"bubble",onAction:e=>this.onMessageActionHandler(e.detail,t)},m("div",null,m("div",{class:"body"},"text"===t.type&&m("dyte-text-message-view",{text:t.message,isMarkdown:!0}),"file"===t.type&&m("dyte-file-message-view",{name:t.name,url:t.link,size:t.size}),"image"===t.type&&m("dyte-image-message-view",{url:t.link,onPreview:()=>{this.stateUpdate.emit({image:t}),Ss.image=t}})),t.pinned&&m("div",{class:"pin-icon",part:"pin-icon"},m("dyte-icon",{icon:this.iconPack.pin,iconPack:this.iconPack,t:this.t,size:"sm"}))))))},this.chatUpdateListener=t=>{this.selectedChannelId&&t.message.channelId!==this.selectedChannelId||("add"===t.action?(this.$paginatedListRef.onNewNode(t.message),this.lastReadMessageIndex=-1,this.maybeMarkChannelAsRead([t.message])):"delete"===t.action?this.$paginatedListRef.onNodeDelete(t.message.id):"edit"===t.action&&this.$paginatedListRef.onNodeUpdate(t.message.id,t.message))},this.meeting=void 0,this.selectedChannel=void 0,this.selectedChannelId=void 0,this.size=void 0,this.iconPack=ts,this.t=ns(),this.children=void 0,this.leftAlign=!1,this.permissionsChanged=!1}componentDidLoad(){const t=this.host.shadowRoot.querySelector("slot");t&&(this.children=t.assignedElements()[0])}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){this.disconnectMeeting(this.meeting)}meetingChanged(t,e){var i;null!=e&&this.disconnectMeeting(e),t&&!t.chat||(null!=t&&(null===(i=t.chat)||void 0===i||i.addListener("chatUpdate",this.chatUpdateListener),t.self.permissions.addListener("permissionsUpdate",this.permissionsUpdateListener)),this.permissionsUpdateListener())}channelChanged(){this.lastReadMessageIndex=-1}render(){return m(f,null,m("dyte-paginated-list",{ref:t=>this.$paginatedListRef=t,pageSize:this.pageSize,pagesAllowed:3,fetchData:this.getChatMessages,createNodes:this.createChatNodes,selectedItemId:this.selectedChannelId,emptyListLabel:this.t("chat.empty_channel")},m("slot",null)))}get host(){return x(this)}static get watchers(){return{meeting:["meetingChanged"],selectedChannelId:["channelChanged"]}}};oc.style=":host{display:flex;flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));flex:1 0 0px}";const lc=class{constructor(t){vt(this,t),this.pageSize=50,this.searchMessages=async(t,e,i)=>this.meeting.chat.searchMessages(this.query,{channelId:this.channelId,timestamp:t,size:e,reversed:i}),this.nodeRenderer=t=>t.map((t=>m("dyte-chat-message",{key:t.id,message:t,disableControls:!0}))),this.meeting=void 0,this.query=void 0,this.channelId=void 0,this.iconPack=ts,this.t=ns()}render(){return m(f,null,m("dyte-paginated-list",{pageSize:this.pageSize,pagesAllowed:3,fetchData:this.searchMessages,createNodes:this.nodeRenderer,selectedItemId:this.query}))}};lc.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:100%;flex-direction:column;position:relative;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}";const dc=class{constructor(t){vt(this,t),this.stateUpdate=k(this,"dyteStateUpdate",7),this.updateStoreState=(t,e)=>{Ss[t]=e,this.stateUpdate.emit({[t]:e})},this.cancelJoinStage=async()=>{var t,e,i;"ACCEPTED_TO_JOIN_STAGE"===(null===(t=this.meeting.stage)||void 0===t?void 0:t.status)&&await(null===(i=null===(e=this.meeting)||void 0===e?void 0:e.stage)||void 0===i?void 0:i.leave()),this.updateStoreState("activeJoinStage",!1)},this.joinStage=async()=>{await this.meeting.stage.join()},this.stageStatusUpdateListener=t=>{var e;((null===(e=this.states)||void 0===e?void 0:e.activeJoinStage)||Ss.activeJoinStage)&&"ON_STAGE"===t&&this.updateStoreState("activeJoinStage",!1)},this.meeting=void 0,this.config=$t,this.states=Ss,this.size=void 0,this.iconPack=ts,this.t=ns()}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var t;null===(t=this.meeting.stage)||void 0===t||t.removeListener("stageStatusUpdate",this.stageStatusUpdateListener)}meetingChanged(t){if(null==t)return;const{stage:e}=t;null==e||e.addListener("stageStatusUpdate",this.stageStatusUpdateListener)}render(){var t,e,i,s;const a={meeting:this.meeting,states:this.states||Ss,config:this.config,size:this.size,iconPack:this.iconPack,t:this.t},r=this.states||Ss;if(null!=(null==r?void 0:r.image)){const t=r.image,e=()=>{this.stateUpdate.emit({image:null}),Ss.image=null};return m(f,null,m("dyte-dialog",{open:!0,onDyteDialogClose:e,hideCloseButton:!0,iconPack:this.iconPack,t:this.t},m(cs,{element:"dyte-image-viewer",defaults:a,props:{image:t,onClose:e}})))}if(!0===(null==r?void 0:r.activeSettings))return m(f,null,m("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.updateStoreState("activeSettings",!1),iconPack:this.iconPack,t:this.t},m(cs,{element:"dyte-settings",defaults:a})));if(!0===(null==r?void 0:r.activeDebugger))return m(f,null,m("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.updateStoreState("activeDebugger",!1),iconPack:this.iconPack,t:this.t},m(cs,{element:"dyte-debugger",defaults:a})));if(!0===(null==r?void 0:r.activeLeaveConfirmation))return m(f,null,m("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.updateStoreState("activeLeaveConfirmation",!1),iconPack:this.iconPack,t:this.t},m(cs,{element:"dyte-leave-meeting",defaults:a})));if(!0===(null===(t=null==r?void 0:r.activePermissionsMessage)||void 0===t?void 0:t.enabled))return m(f,null,m("dyte-dialog",{open:!0,hideCloseButton:!0,iconPack:this.iconPack,t:this.t},m(cs,{element:"dyte-permissions-message",defaults:a})));if(!0===(null==r?void 0:r.activeRemoteAccessManager))return m(f,null,m("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.updateStoreState("activeRemoteAccessManager",!1),iconPack:this.iconPack,t:this.t},m(cs,{element:"dyte-remote-access-manager",defaults:a})));if(!0===(null===(e=null==r?void 0:r.activeBreakoutRoomsManager)||void 0===e?void 0:e.active))return m(f,null,m("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.updateStoreState("activeBreakoutRoomsManager",{active:!1,data:void 0}),iconPack:this.iconPack,t:this.t},m(cs,{element:"dyte-breakout-rooms-manager",defaults:a,props:{mode:this.meeting.connectedMeetings.isActive?"view":"create"}})));if(!0===(null===(i=null==r?void 0:r.activeConfirmationModal)||void 0===i?void 0:i.active))return m(f,null,m("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.updateStoreState("activeConfirmationModal",!1),iconPack:this.iconPack,t:this.t},m(cs,{element:"dyte-confirmation-modal",defaults:a})));if(!0===(null===(s=null==r?void 0:r.activeOverlayModal)||void 0===s?void 0:s.active))return m(f,null,m("dyte-overlay-modal",{meeting:this.meeting,states:this.states,iconPack:this.iconPack,t:this.t}));if(null==r?void 0:r.activeBroadcastMessageModal)return m(f,null,m("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.updateStoreState("activeBroadcastMessageModal",!1),iconPack:this.iconPack,t:this.t},m(cs,{element:"dyte-broadcast-message-modal",defaults:a})));if(!0===(null==r?void 0:r.activeJoinStage)){const t={title:this.t("stage.join_title"),label:{accept:this.t("stage.join_confirm"),reject:this.t("stage.join_cancel")},description:this.t("stage.join_summary")};return m(f,null,m("dyte-dialog",{open:!0,onDyteDialogClose:this.cancelJoinStage,iconPack:this.iconPack,t:this.t},m("dyte-join-stage",Object.assign({dataConfig:t,onDyteJoinStage:this.joinStage,onDyteLeaveStage:this.cancelJoinStage},a))))}return!0===(null==r?void 0:r.activeMuteAllConfirmation)?m(f,null,m("dyte-dialog",{open:!0,onDyteDialogClose:()=>{this.updateStoreState("activeMuteAllConfirmation",!1)},iconPack:this.iconPack,t:this.t},m(cs,{element:"dyte-mute-all-confirmation",defaults:a}))):(null==r?void 0:r.activeChannelCreator)?m(f,null,m("dyte-dialog",{open:!0,onDyteDialogClose:()=>{this.updateStoreState("activeChannelCreator",!1)},iconPack:this.iconPack,t:this.t},m(cs,{element:"dyte-channel-creator",defaults:a}))):null}static get watchers(){return{meeting:["meetingChanged"]}}};dc.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}";const cc=2e3,hc=Object.freeze({notifications:{participant_joined:!0,participant_left:!0,participant_joined_waitlist:!0,chat:!0,polls:!0,webinar:!0,tab_sync:!0,recording_started:!0,recording_stopped:!0},notification_sounds:{participant_joined:!0,participant_left:!0,chat:!0,polls:!0,webinar:!0,participant_joined_waitlist:!0},notification_duration:{participant_joined:2100,participant_left:2100,participant_joined_waitlist:4e3,chat:cc,polls:cc,webinar:cc,tab_sync:cc,recording_started:cc,recording_stopped:cc},participant_joined_sound_notification_limit:10,participant_chat_message_sound_notification_limit:10});function pc(t){return Object.keys(t).filter((e=>t[e]))}const gc=class{constructor(t){vt(this,t),this.permissions=hc,this.enabledSounds=pc(hc.notification_sounds),this.addStagePeersListeners=t=>{t.participants.joined.addListener("participantJoined",this.participantJoinedListener),t.participants.joined.addListener("participantLeft",this.participantLeftListener)},this.removeStagePeersListeners=t=>{t.participants.joined.removeListener("participantJoined",this.participantJoinedListener),t.participants.joined.removeListener("participantLeft",this.participantLeftListener)},this.onDyteNotification=t=>{this.add(t.detail);const e=t.detail.playSound;null!=e&&this.audio.play(e)},this.onRecordingUpdate=t=>{var e,i;"RECORDING"===t&&!1!==this.permissions.notifications.recording_started?this.add({id:"recording-started",icon:this.iconPack.recording,message:this.t("recording.started"),duration:null!==(e=this.permissions.notification_duration.recording_started)&&void 0!==e?e:cc}):"STOPPING"===t&&!1!==this.permissions.notifications.recording_stopped&&this.add({id:"recording-stopped",icon:this.iconPack.stop_recording,message:this.t("recording.stopped"),duration:null!==(i=this.permissions.notification_duration.recording_stopped)&&void 0!==i?i:cc})},this.meeting=void 0,this.states=void 0,this.config=$t,this.t=ns(),this.size=void 0,this.iconPack=ts,this.notifications=[]}connectedCallback(){"undefined"!=typeof document&&(null===document||void 0===document||document.addEventListener("dyteNotification",this.onDyteNotification)),this.meetingChanged(this.meeting),this.configChanged(this.config),this.statesChanged(this.states)}clearListeners(t){var e,i,s,a,r,n,o,l;const d="LIVESTREAM"===t.meta.viewType;(d&&"ON_STAGE"===(null===(e=t.stage)||void 0===e?void 0:e.status)||!d)&&this.removeStagePeersListeners(t),this.chatUpdateListener&&(null===(i=t.chat)||void 0===i||i.removeListener("chatUpdate",this.chatUpdateListener)),this.pollUpdateListener&&(null===(s=t.polls)||void 0===s||s.removeListener("pollsUpdate",this.pollUpdateListener)),t.meta.removeListener("socketConnectionUpdate",this.socketConnectionUpdateListener),this.stageRequestAccepted&&(null===(a=t.stage)||void 0===a||a.removeListener("stageRequestApproved",this.stageRequestAccepted)),this.stageRequestRejected&&(null===(r=t.stage)||void 0===r||r.removeListener("stageRequestRejected",this.stageRequestRejected)),this.newStageRequests&&(null===(n=t.stage)||void 0===n||n.removeListener("newStageRequest",this.newStageRequests)),this.stageStatusUpdateListener&&(null===(o=t.stage)||void 0===o||o.removeListener("stageStatusUpdate",this.stageStatusUpdateListener)),null===(l=t.recording)||void 0===l||l.removeListener("recordingUpdate",this.onRecordingUpdate),clearTimeout(this.disconnectTimeout),t.self.removeListener("deviceUpdate",this.deviceUpdateListener)}disconnectedCallback(){var t;"undefined"!=typeof document&&(null===document||void 0===document||document.removeEventListener("dyteNotification",this.onDyteNotification)),null!=this.meeting&&(this.clearListeners(this.meeting),this.waitlistedParticipantJoinedListener&&this.meeting.participants.waitlisted.removeListener("participantJoined",this.waitlistedParticipantJoinedListener),this.waitlistedParticipantLeftListener&&this.meeting.participants.waitlisted.removeListener("participantLeft",this.waitlistedParticipantLeftListener),this.activeTabUpdateListener&&(null===(t=this.meeting.meta)||void 0===t||t.removeListener("activeTabUpdate",this.activeTabUpdateListener)),this.peerStageStatusListener&&this.meeting.participants.joined.removeListener("stageStatusUpdate",this.peerStageStatusListener))}meetingChanged(t,e){var i,s,a,r,n,o,l,d,c;if(clearTimeout(this.disconnectTimeout),void 0!==e&&this.clearListeners(e),null==t)return;const h="LIVESTREAM"===t.meta.viewType;this.audio=new ec(t);const{notifications:p,notification_duration:g,notification_sounds:u}=this.permissions;if(this.participantJoinedListener=t=>{p.participant_joined&&this.add({id:`${t.id}-joined`,message:`${Ua(t.name)} ${this.t("notifications.joined")}`,image:t.picture,duration:g.participant_joined}),u.participant_joined&&this.canPlayParticipantJoinedSound()&&this.audio.play("joined")},this.participantLeftListener=t=>{const{socketState:{state:e}}=this.meeting.meta;p.participant_left&&"connected"!==e&&this.add({id:`${t.id}-left`,message:`${Ua(t.name)} ${this.t("notifications.left")}`,image:t.picture,duration:g.participant_left}),u.participant_left&&this.canPlayParticipantJoinedSound()&&this.audio.play("left")},this.waitlistedParticipantJoinedListener=t=>{if(!this.canAcceptWaitingRequests())return;const e=`${t.id}-joined-waitlist`;this.add({id:e,message:`${Ua(t.name)} ${this.t("notifications.requesting_to_join_meeting")}`,image:t.picture,duration:g.participant_joined_waitlist,button:{text:this.t("notifications.accept"),variant:"primary",onClick:async()=>{await this.meeting.participants.acceptWaitingRoomRequest(t.id),this.remove(e)}}}),u.participant_joined_waitlist&&this.canPlayParticipantJoinedSound()&&this.audio.play("message")},this.waitlistedParticipantLeftListener=t=>{this.remove(`${t.id}-joined-waitlist`)},this.chatUpdateListener=({message:e})=>{const i=nn(e);if(null!=i){if(i.userId===t.self.userId)return;"text"===i.type&&(p.chat&&this.add({id:`message-${Math.random().toString(36)}`,icon:this.iconPack.chat,message:`${i.displayName}: ${i.message}`,duration:g.chat}),u.chat&&this.canPlayChatSound()&&this.audio.play("message"))}},this.pollUpdateListener=({polls:t,newPoll:e})=>{!1!==e&&(p.polls&&this.meeting.self.userId!==t[t.length-1].createdByUserId&&this.add({id:`poll-${Math.random().toString(36)}`,icon:this.iconPack.poll,message:`${this.t("notifications.new_poll_created_by")} ${t[t.length-1].createdBy}`,duration:g.polls}),u.polls&&this.meeting.self.userId!==t[t.length-1].createdByUserId&&this.canPlayChatSound()&&this.audio.play("message"))},this.deviceUpdateListener=({device:t,preview:e})=>{e||("audiooutput"===t.kind&&(this.audio.setDevice(t.deviceId),this.remove("speaker-switched"),this.add({id:"speaker-switched",message:`${this.t("notifications.connected_to")} ${t.label}`,icon:this.iconPack.speaker,duration:5e3})),"videoinput"===t.kind&&(this.remove("camera-switched"),this.add({id:"camera-switched",message:`${this.t("notifications.connected_to")} ${t.label}`,icon:this.meeting.self.videoEnabled?this.iconPack.video_on:this.iconPack.video_off,iconVariant:this.meeting.self.videoEnabled?"primary":"danger",duration:5e3})),"audioinput"===t.kind&&(this.remove("mic-switched"),this.add({id:"mic-switched",message:`${this.t("notifications.connected_to")} ${t.label}`,icon:this.meeting.self.audioEnabled?this.iconPack.mic_on:this.iconPack.mic_off,iconVariant:this.meeting.self.audioEnabled?"primary":"danger",duration:5e3})))},this.socketConnectionUpdateListener=({state:t,reconnectionAttempt:e,reconnected:i})=>{switch(t){case"connected":this.remove("socket"),i&&this.add({id:"socket",icon:this.iconPack.wifi,message:this.t("network.restored"),duration:3e3});break;case"disconnected":this.remove("socket"),this.add({id:"socket",icon:this.iconPack.disconnected,message:this.t("network.reconnecting")});break;case"reconnecting":e>=6?(this.remove("socket"),this.add({id:"socket",icon:this.iconPack.disconnected,message:this.t("network.disconnected"),button:{text:this.t("end"),variant:"danger",onClick:()=>{var t;return null===(t=this.meeting)||void 0===t?void 0:t.leaveRoom()}}})):e>=4&&(this.remove("socket"),this.add({id:"socket",icon:this.iconPack.disconnected,message:this.t("network.delay_extended")}));break;case"failed":this.remove("socket"),this.add({id:"socket",icon:this.iconPack.disconnected,message:this.t("network.leaving"),button:{text:this.t("end"),variant:"danger",onClick:()=>{var t;return null===(t=this.meeting)||void 0===t?void 0:t.leaveRoom()}}})}},this.activeTabUpdateListener=e=>{if(p.tab_sync)switch(e.type){case"plugin":const i=t.plugins.active.toArray().find((t=>t.id==e.id));null!=i&&this.add({id:"activeTab",message:`${this.t("notifications.plugin_switched_to")} ${i.name}`,duration:g.participant_joined});break;case"screenshare":const s=t.participants.joined.toArray().filter((t=>t.screenShareEnabled)).find((t=>t.id==e.id));null!=s&&this.add({id:"spotlight",message:`Now watching ${s.name}'s screen`,duration:g.webinar})}},this.peerStageStatusListener=t=>{"REQUESTED_TO_JOIN_STAGE"===t.stageStatus&&(this.add({id:`stage-request-${t.id}`,message:`${t.name} ${this.t("notifications.requested_to_join_stage")}`,duration:g.webinar,button:{text:this.t("notifications.accept"),variant:"primary",onClick:async()=>{await this.meeting.stage.grantAccess([t.userId]),this.remove(`stage-request-${t.id}`)}}}),u.webinar&&this.audio.play("joined")),"ON_STAGE"===t.stageStatus&&(this.add({id:`stage-joined-${t.id}`,message:`${t.name} ${this.t("notifications.joined_stage")}`,duration:g.webinar}),u.webinar&&this.audio.play("joined"))},this.stageRequestAccepted=()=>{this.add({id:"stage-request-accepted",message:this.t("notifications.request_to_join_accepted"),duration:3e3})},this.stageRequestRejected=()=>{this.add({id:"stage-request-rejected",message:this.t("notifications.request_to_join_rejected"),duration:3e3})},this.newStageRequests=({count:t})=>{this.add({id:"new-stage-request",message:`You have ${t<0?"new stage":`${t} pending`} request${1===t?"":"s"}`,duration:3e3})},this.stageStatusUpdateListener=e=>{"ON_STAGE"===e?this.addStagePeersListeners(t):this.removeStagePeersListeners(t)},!yi(t)&&(null===(i=t.chat)||void 0===i||i.addListener("chatUpdate",this.chatUpdateListener)),"CHAT"===(null===(s=t.self.config.viewType)||void 0===s?void 0:s.toString()))return;const m=t.self.getCurrentDevices();null!=m.speaker&&this.audio.setDevice(m.speaker.deviceId),h?null===(a=t.stage)||void 0===a||a.on("stageStatusUpdate",this.stageStatusUpdateListener):this.addStagePeersListeners(t),this.canAcceptWaitingRequests()&&(t.participants.waitlisted.addListener("participantJoined",this.waitlistedParticipantJoinedListener),t.participants.waitlisted.addListener("participantLeft",this.waitlistedParticipantLeftListener)),null===(r=t.polls)||void 0===r||r.addListener("pollsUpdate",this.pollUpdateListener),t.self.addListener("deviceUpdate",this.deviceUpdateListener),t.meta.addListener("socketConnectionUpdate",this.socketConnectionUpdateListener),null===(n=t.meta)||void 0===n||n.addListener("activeTabUpdate",this.activeTabUpdateListener),null===(o=t.recording)||void 0===o||o.addListener("recordingUpdate",this.onRecordingUpdate),null===(l=t.stage)||void 0===l||l.addListener("stageRequestApproved",this.stageRequestAccepted),null===(d=t.stage)||void 0===d||d.addListener("stageRequestRejected",this.stageRequestRejected),t.self.permissions.stageEnabled&&t.self.permissions.acceptStageRequests&&(null===(c=t.stage)||void 0===c||c.addListener("newStageRequest",this.newStageRequests))}configChanged(t){null!=t&&null!=(null==t?void 0:t.config)&&(this.permissions=function(t){const e=Object.assign({},hc);return null==t||(Object.assign(e.notification_sounds,t.notification_sounds),Object.assign(e.notifications,t.notifications),Object.assign(e.notification_duration,t.notification_duration),e.participant_chat_message_sound_notification_limit=t.participant_chat_message_sound_notification_limit,e.participant_joined_sound_notification_limit=t.participant_joined_sound_notification_limit),e}(t.config),this.enabledSounds=pc(this.permissions.notification_sounds))}statesChanged(t){var e;if(null!=t){const i=!(null===(e=null==t?void 0:t.prefs)||void 0===e?void 0:e.muteNotificationSounds);for(const t of this.enabledSounds)t in this.permissions.notification_sounds&&(this.permissions.notification_sounds[t]=i)}}apiErrorListener({detail:t}){const{trace:e,message:i}=t;this.add({id:e,message:i,duration:cc,icon:this.iconPack.warning})}sendNotificationListener({detail:t}){const{trace:e,message:i}=t;this.add({id:e,message:i,duration:cc})}add(t){"visible"===document.visibilityState&&this.notifications.length<5&&(this.notifications=[...this.notifications,t])}remove(t){this.notifications=this.notifications.filter((e=>e.id!==t))}handleDismiss(t){t.stopPropagation();const e=t.detail,i=this.host.shadowRoot.querySelector(`[data-id="${e}"]`);null==i||i.classList.add("exit"),setTimeout((()=>{It((()=>{this.remove(e)}))}),400)}canPlayParticipantJoinedSound(){return null==this.permissions.participant_joined_sound_notification_limit||this.permissions.participant_joined_sound_notification_limit<=0||this.meeting.participants.count<=this.permissions.participant_joined_sound_notification_limit}canPlayChatSound(){return null==this.permissions.participant_chat_message_sound_notification_limit||this.permissions.participant_chat_message_sound_notification_limit<=0||this.meeting.participants.count<=this.permissions.participant_chat_message_sound_notification_limit}canAcceptWaitingRequests(){return this.permissions.notifications.participant_joined_waitlist&&this.meeting.self.permissions.acceptWaitingRequests}render(){return m(f,null,this.notifications.map((t=>m("dyte-notification",{size:this.size,key:t.id,"data-id":t.id,notification:t,onDyteNotificationDismiss:t=>this.handleDismiss(t),iconPack:this.iconPack,t:this.t}))))}get host(){return x(this)}static get watchers(){return{meeting:["meetingChanged"],config:["configChanged"],states:["statesChanged"]}}};gc.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:absolute;top:var(--dyte-space-4, 16px);right:var(--dyte-space-4, 16px);bottom:var(--dyte-space-4, 16px);left:var(--dyte-space-4, 16px);top:auto;display:flex;flex-direction:column;pointer-events:none;z-index:100}dyte-notification{margin-top:var(--dyte-space-2, 8px)}";var uc=Object.freeze({__proto__:null,dyte_channel_header:ic,dyte_channel_selector_view:sc,dyte_chat_composer_view:rc,dyte_chat_messages_ui:nc,dyte_chat_messages_ui_paginated:oc,dyte_chat_search_results:lc,dyte_dialog_manager:dc,dyte_notifications:gc});function mc({stats:t}){if(!t||!t.length)return null;let e="Good";const i=t.map((t=>t.verdict));return i.includes("Poor")?e="Poor":i.includes("Average")&&(e="Average"),e}function vc({packetLossPercentage:t}){let e="Good";return t>4?e="Poor":t>=1&&t<=4&&(e="Average"),e}function fc({jitterInMS:t}){let e="Good";return t>100?e="Poor":t>=50&&t<=100&&(e="Average"),e}function yc({bitrate:t}){let e="Good";return 0===Math.round(t/1024)&&(e="Poor"),e}function bc({batteryLevelPercentage:t}){let e="Good";return t<20?e="Poor":t<50&&(e="Average"),e}function wc({charging:t,dischargingTimeInSeconds:e,batteryLevelPercentage:i}){return i<20?"Poor":t?"Good":e<1800?"Poor":"Average"}const xc=class{constructor(t){vt(this,t),this.mediaScoreUpdateListener=({kind:t,isScreenshare:e,scoreStats:i})=>{"audio"!==t||e||(this.audioProducerScoreStats=i)},this.deviceListUpdateListener=async()=>{const t=await this.meeting.self.getAudioDevices();this.devicesHealth=(null==t?void 0:t.length)>0?"Good":"Poor"},this.audioUpdateListener=()=>{this.meeting.self.audioEnabled||(this.audioProducerScoreStats=null)},this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=ts,this.t=ns(),this.isNetworkOpen=!0,this.isDevicesOpen=!1,this.audioProducerFormattedStats=[],this.audioProducerScoreStats=null,this.networkBasedMediaHealth=null,this.devicesHealth=null}async audioProducerScoreStatsChanged(t){if(!t)return void(this.audioProducerFormattedStats=[]);const e=t,i=[];i.push({name:this.t("debugger.stats.bitrate.label"),value:`${Math.round(e.bitrate/1024)} kbps`,description:this.t("debugger.stats.bitrate.description"),verdict:yc({bitrate:e.bitrate,kind:"audio",isScreenshare:!1})}),i.push({name:this.t("debugger.stats.packet_loss.label"),value:`${e.packetsLostPercentage}%`,description:this.t("debugger.stats.packet_loss.description"),verdict:vc({packetLossPercentage:e.packetsLostPercentage})}),i.push({name:this.t("debugger.stats.jitter.label"),value:`${Math.round(1e3*e.jitter)} ms`,description:this.t("debugger.stats.jitter.description"),verdict:fc({jitterInMS:1e3*e.jitter})}),this.audioProducerFormattedStats=i,this.networkBasedMediaHealth=mc({kind:"audio",isScreenshare:!1,stats:i})}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){this.meeting&&(this.meeting.self.off("mediaScoreUpdate",this.mediaScoreUpdateListener),this.meeting.self.off("audioUpdate",this.audioUpdateListener),this.meeting.self.off("deviceListUpdate",this.deviceListUpdateListener))}async meetingChanged(t){t&&(t.self.on("mediaScoreUpdate",this.mediaScoreUpdateListener),t.self.on("audioUpdate",this.audioUpdateListener),t.self.on("deviceListUpdate",this.deviceListUpdateListener),await this.deviceListUpdateListener())}render(){var t,e;if(this.meeting)return m(f,null,m("div",{id:"header"}),m("div",{class:"tab-body"},m("div",{class:"status-container"},m("div",{class:"status-section"},m("div",{class:"section-header "+(this.networkBasedMediaHealth?"":"only-child")},m("span",null,this.t("debugger.audio.sections.network_media")),this.networkBasedMediaHealth&&m("span",{class:`status ${null===(t=this.networkBasedMediaHealth)||void 0===t?void 0:t.toLowerCase()}`},this.t(`debugger.quality.${null===(e=this.networkBasedMediaHealth)||void 0===e?void 0:e.toLowerCase()}`))),this.isNetworkOpen&&!this.audioProducerFormattedStats.length&&m("div",{class:"section-body missing-stats"},this.meeting.self.audioEnabled?m("span",null,this.t("debugger.audio.messages.generating_report")):m("span",null,this.t("debugger.audio.messages.enable_media"))),this.isNetworkOpen&&!!this.audioProducerFormattedStats.length&&m("div",{class:"section-body network-table"},this.audioProducerFormattedStats.map((t=>{var e,i;return m("div",{class:"network-row"},m("div",{class:"network-cell label"},m("strong",null,t.name),m("span",{class:"description"},t.description)),m("div",{class:"network-cell value"},m("span",{class:`status ${null===(e=t.verdict)||void 0===e?void 0:e.toLowerCase()}`},this.t(`debugger.quality.${null===(i=t.verdict)||void 0===i?void 0:i.toLowerCase()}`)),m("span",{class:"value"},t.value)))})))))))}static get watchers(){return{audioProducerScoreStats:["audioProducerScoreStatsChanged"],meeting:["meetingChanged"]}}};xc.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))\n    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{position:relative;display:flex;flex-direction:column;overflow:hidden;height:100%;width:100%;color:rgb(var(--dyte-colors-text-1000, 255 255 255));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.tab-body::-webkit-scrollbar{width:var(--dyte-space-1\\.5, 6px);border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity))}.tab-body::-webkit-scrollbar-thumb{border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}h3{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:600}#header{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-5, 20px);display:flex;align-items:center;justify-content:space-evenly}.tab-body{margin:var(--dyte-space-4, 16px);display:flex;height:100%;flex-direction:column;justify-content:space-between;overflow-y:auto}.status-container{border:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60));border-radius:8px;padding:16px}.status-section{margin-bottom:12px}.section-header{display:flex;justify-content:space-between;align-items:center;font-weight:bold;padding:8px 0}.section-header.only-child{justify-content:center}.section-body.missing-stats{display:flex;text-align:center;justify-content:center}.section-header .status{color:rgba(var(--dyte-colors-success));font-weight:bold}.section-header .arrow{font-size:14px}.network-table{border:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60));border-radius:8px;margin-top:8px;overflow:hidden}.network-row{display:flex;justify-content:space-between;padding:12px;border-bottom:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60))}.network-row:last-child{border-bottom:none}.network-cell{display:flex;flex-direction:column}.network-cell.label strong{font-size:14px}.network-cell.label .description{font-size:12px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));margin-top:4px}.network-cell.value{text-align:right}.status.good{color:rgba(var(--dyte-colors-success))}.status.average{color:rgba(var(--dyte-colors-warning))}.status.poor{color:rgba(var(--dyte-colors-danger))}.value{font-size:14px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));margin-top:4px}dyte-settings-audio{display:flex;flex-direction:column}";const kc=class{constructor(t){vt(this,t),this.mediaScoreUpdateListener=({kind:t,isScreenshare:e,scoreStats:i})=>{"video"===t&&e&&(this.videoProducerScoreStats=i),"audio"===t&&e&&(this.audioProducerScoreStats=i)},this.screenShareUpdateListener=()=>{this.meeting.self.screenShareEnabled||(this.videoProducerScoreStats=null,this.audioProducerScoreStats=null)},this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=ts,this.t=ns(),this.isNetworkOpen=!0,this.isDevicesOpen=!1,this.videoProducerFormattedStats=[],this.videoProducerScoreStats=null,this.audioProducerFormattedStats=[],this.audioProducerScoreStats=null,this.networkBasedMediaHealth=null}async videoProducerScoreStatsChanged(t){if(!t)return void(this.videoProducerFormattedStats=[]);const e=t,i=[];i.push({name:this.t("debugger.stats.cpu_limitations.label"),value:e.cpuLimitations?"Yes":"No",description:this.t("debugger.stats.cpu_limitations.description"),verdict:e.cpuLimitations?"Poor":"Good"}),i.push({name:this.t("debugger.stats.bandwidth_limitations.label"),value:e.bandwidthLimitations?"Yes":"No",description:this.t("debugger.stats.bandwidth_limitations.description"),verdict:e.bandwidthLimitations?"Poor":"Good"}),i.push({name:this.t("debugger.stats.bitrate.label"),value:`${Math.round(e.bitrate/1024)} kbps`,description:this.t("debugger.stats.bitrate.description"),verdict:yc({bitrate:e.bitrate,kind:"video",isScreenshare:!1})}),i.push({name:this.t("debugger.stats.packet_loss.label"),value:`${e.packetsLostPercentage}%`,description:this.t("debugger.stats.packet_loss.description"),verdict:vc({packetLossPercentage:e.packetsLostPercentage})}),i.push({name:this.t("debugger.stats.jitter.label"),value:`${Math.round(1e3*e.jitter)} ms`,description:this.t("debugger.stats.jitter.description"),verdict:fc({jitterInMS:1e3*e.jitter})}),this.videoProducerFormattedStats=i,this.networkBasedMediaHealth=mc({kind:"video",isScreenshare:!1,stats:i})}async audioProducerScoreStatsChanged(t){if(!t)return void(this.audioProducerFormattedStats=[]);const e=t,i=[];i.push({name:this.t("debugger.stats.bitrate.label"),value:`${Math.round(e.bitrate/1024)} kbps`,description:this.t("debugger.stats.bitrate.description"),verdict:yc({bitrate:e.bitrate,kind:"audio",isScreenshare:!0})}),i.push({name:this.t("debugger.stats.packet_loss.label"),value:`${e.packetsLostPercentage}%`,description:this.t("debugger.stats.packet_loss.description"),verdict:vc({packetLossPercentage:e.packetsLostPercentage})}),i.push({name:this.t("debugger.stats.jitter.label"),value:`${Math.round(1e3*e.jitter)} ms`,description:this.t("debugger.stats.jitter.description"),verdict:fc({jitterInMS:1e3*e.jitter})}),this.audioProducerFormattedStats=i}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){this.meeting&&(this.meeting.self.off("mediaScoreUpdate",this.mediaScoreUpdateListener),this.meeting.self.off("screenShareUpdate",this.screenShareUpdateListener))}async meetingChanged(t){t&&(t.self.on("mediaScoreUpdate",this.mediaScoreUpdateListener),t.self.on("screenShareUpdate",this.screenShareUpdateListener))}render(){var t,e;if(this.meeting)return m(f,null,m("div",{id:"header"}),m("div",{class:"tab-body"},m("div",{class:"status-container"},m("div",{class:"status-section"},m("div",{class:"section-header "+(this.networkBasedMediaHealth?"":"only-child")},m("span",null,this.t("debugger.screenshare.sections.network_media")),this.networkBasedMediaHealth&&m("span",{class:`status ${null===(t=this.networkBasedMediaHealth)||void 0===t?void 0:t.toLowerCase()}`},this.t(`debugger.quality.${null===(e=this.networkBasedMediaHealth)||void 0===e?void 0:e.toLowerCase()}`))),this.isNetworkOpen&&!this.videoProducerFormattedStats.length&&m("div",{class:"section-body missing-stats"},this.meeting.self.screenShareEnabled?m("span",null,this.t("debugger.screenshare.messages.generating_report")):m("span",null,this.t("debugger.screenshare.messages.enable_media"))),this.isNetworkOpen&&!!this.videoProducerFormattedStats.length&&m("div",{class:"section-body network-table"},this.videoProducerFormattedStats.map((t=>{var e,i;return m("div",{class:"network-row"},m("div",{class:"network-cell label"},m("strong",null,t.name),m("span",{class:"description"},t.description)),m("div",{class:"network-cell value"},m("span",{class:`status ${null===(e=t.verdict)||void 0===e?void 0:e.toLowerCase()}`},this.t(`debugger.quality.${null===(i=t.verdict)||void 0===i?void 0:i.toLowerCase()}`)),m("span",{class:"value"},t.value)))})))))))}static get watchers(){return{videoProducerScoreStats:["videoProducerScoreStatsChanged"],audioProducerScoreStats:["audioProducerScoreStatsChanged"],meeting:["meetingChanged"]}}};kc.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))\n    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{position:relative;display:flex;flex-direction:column;overflow:hidden;height:100%;width:100%;color:rgb(var(--dyte-colors-text-1000, 255 255 255));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.tab-body::-webkit-scrollbar{width:var(--dyte-space-1\\.5, 6px);border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity))}.tab-body::-webkit-scrollbar-thumb{border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}h3{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:600}#header{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-5, 20px);display:flex;align-items:center;justify-content:space-evenly}.tab-body{margin:var(--dyte-space-4, 16px);display:flex;height:100%;flex-direction:column;justify-content:space-between;overflow-y:auto}.status-container{border:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60));border-radius:8px;padding:16px}.status-section{margin-bottom:12px}.section-header{display:flex;justify-content:space-between;align-items:center;font-weight:bold;padding:8px 0}.section-header.only-child{justify-content:center}.section-body.missing-stats{display:flex;text-align:center;justify-content:center}.section-header .status{color:rgba(var(--dyte-colors-success));font-weight:bold}.section-header .arrow{font-size:14px}.network-table{border:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60));border-radius:8px;margin-top:8px;overflow:hidden}.network-row{display:flex;justify-content:space-between;padding:12px;border-bottom:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60))}.network-row:last-child{border-bottom:none}.network-cell{display:flex;flex-direction:column}.network-cell.label strong{font-size:14px}.network-cell.label .description{font-size:12px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));margin-top:4px}.network-cell.value{text-align:right}.status.good{color:rgba(var(--dyte-colors-success))}.status.average{color:rgba(var(--dyte-colors-warning))}.status.poor{color:rgba(var(--dyte-colors-danger))}.value{font-size:14px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));margin-top:4px}";const Sc=class{constructor(t){vt(this,t),this.batteryUpdateListener=()=>{const t=Math.round(100*this.battery.level),e=[];e.push({name:this.t("debugger.system.battery.level.label"),value:`${t}%`,description:this.t("debugger.system.battery.level.description"),verdict:bc({batteryLevelPercentage:t})}),e.push({name:this.t("debugger.system.battery.charging.label"),value:`${this.battery.charging?this.t("debugger.system.battery.charging.is_charging"):this.t("debugger.system.battery.charging.is_not_charging")}`,description:this.t("debugger.system.battery.charging.description"),verdict:wc({batteryLevelPercentage:t,chargingTimeInSeconds:this.battery.chargingTime,dischargingTimeInSeconds:this.battery.dischargingTime,charging:this.battery.charging})}),this.batterySectionHealth=function({stats:t}){if(!t||!t.length)return null;let e="Good";const i=t.map((t=>t.verdict));return i.includes("Poor")?e="Poor":i.includes("Average")&&(e="Average"),e}({stats:e}),this.batteryFormattedStats=e},this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=ts,this.t=ns(),this.isBatterySectionOpen=!0,this.batterySectionHealth=null,this.battery=null,this.batteryFormattedStats=[]}toggleSection(t){"battery"===t&&(this.isBatterySectionOpen=!this.isBatterySectionOpen)}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){this.meeting&&this.battery&&(this.battery.removeEventListener("levelchange",this.batteryUpdateListener),this.battery.removeEventListener("chargingchange",this.batteryUpdateListener))}async meetingChanged(t){t&&void 0!==navigator.getBattery&&(this.battery=await navigator.getBattery(),this.battery.addEventListener("levelchange",this.batteryUpdateListener),this.battery.addEventListener("chargingchange",this.batteryUpdateListener),this.batteryUpdateListener())}render(){var t,e;if(this.meeting)return m(f,null,m("div",{id:"header"}),m("div",{class:"tab-body"},m("div",{class:"status-container"},m("div",{class:"status-section"},m("div",{class:"section-header",onClick:()=>this.toggleSection("battery")},m("span",null,this.t("debugger.system.sections.battery")),this.batterySectionHealth&&m("span",{class:`status ${null===(t=this.batterySectionHealth)||void 0===t?void 0:t.toLowerCase()}`},this.t(`debugger.quality.${null===(e=this.batterySectionHealth)||void 0===e?void 0:e.toLowerCase()}`))),this.isBatterySectionOpen&&!!this.batteryFormattedStats.length&&m("div",{class:"section-body battery-table"},this.batteryFormattedStats.map((t=>{var e,i;return m("div",{class:"battery-row"},m("div",{class:"battery-cell label"},m("strong",null,t.name),m("span",{class:"description"},t.description)),m("div",{class:"battery-cell value"},m("span",{class:`status ${null===(e=t.verdict)||void 0===e?void 0:e.toLowerCase()}`},this.t(`debugger.quality.${null===(i=t.verdict)||void 0===i?void 0:i.toLowerCase()}`)),m("span",{class:"value"},t.value)))})))))))}static get watchers(){return{meeting:["meetingChanged"]}}};Sc.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))\n    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{position:relative;display:flex;flex-direction:column;overflow:hidden;height:100%;width:100%;color:rgb(var(--dyte-colors-text-1000, 255 255 255));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.tab-body::-webkit-scrollbar{width:var(--dyte-space-1\\.5, 6px);border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity))}.tab-body::-webkit-scrollbar-thumb{border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}h3{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:600}#header{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-5, 20px);display:flex;align-items:center;justify-content:space-evenly}.tab-body{margin:var(--dyte-space-4, 16px);display:flex;height:100%;flex-direction:column;justify-content:space-between;overflow-y:auto}.status-container{border:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60));border-radius:8px;padding:16px}.status-section{margin-bottom:12px}.section-header{display:flex;justify-content:space-between;align-items:center;font-weight:bold;padding:8px 0}.section-body.missing-stats{display:flex;text-align:center;justify-content:center}.section-header .status{color:rgba(var(--dyte-colors-success));font-weight:bold}.section-header .arrow{font-size:14px}.battery-table{border:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60));border-radius:8px;margin-top:8px;overflow:hidden}.battery-row{display:flex;justify-content:space-between;padding:12px;border-bottom:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60))}.battery-row:last-child{border-bottom:none}.battery-cell{display:flex;flex-direction:column}.battery-cell.label strong{font-size:14px}.battery-cell.label .description{font-size:12px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));margin-top:4px}.battery-cell.value{text-align:right}.status.good{color:rgba(var(--dyte-colors-success))}.status.average{color:rgba(var(--dyte-colors-warning))}.status.poor{color:rgba(var(--dyte-colors-danger))}.value{font-size:14px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));margin-top:4px}dyte-settings-video{display:flex;flex-direction:column}";const _c=class{constructor(t){vt(this,t),this.mediaScoreUpdateListener=({kind:t,isScreenshare:e,scoreStats:i})=>{"video"!==t||e||(this.videoProducerScoreStats=i)},this.deviceListUpdateListener=async()=>{const t=await this.meeting.self.getVideoDevices();this.devicesHealth=(null==t?void 0:t.length)>0?"Good":"Poor"},this.videoUpdateListener=()=>{this.meeting.self.videoEnabled||(this.videoProducerScoreStats=null)},this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=ts,this.t=ns(),this.isNetworkOpen=!0,this.isDevicesOpen=!1,this.videoProducerFormattedStats=[],this.videoProducerScoreStats=null,this.networkBasedMediaHealth=null,this.devicesHealth=null}async videoProducerScoreStatsChanged(t){if(!t)return void(this.videoProducerFormattedStats=[]);const e=t,i=[];i.push({name:this.t("debugger.stats.cpu_limitations.label"),value:e.cpuLimitations?"Yes":"No",description:this.t("debugger.stats.cpu_limitations.description"),verdict:e.cpuLimitations?"Poor":"Good"}),i.push({name:this.t("debugger.stats.bandwidth_limitations.label"),value:e.bandwidthLimitations?"Yes":"No",description:this.t("debugger.stats.bandwidth_limitations.description"),verdict:e.bandwidthLimitations?"Poor":"Good"}),i.push({name:this.t("debugger.stats.bitrate.label"),value:`${Math.round(e.bitrate/1024)} kbps`,description:this.t("debugger.stats.bitrate.description"),verdict:yc({bitrate:e.bitrate,kind:"video",isScreenshare:!1})}),i.push({name:this.t("debugger.stats.packet_loss.label"),value:`${e.packetsLostPercentage}%`,description:this.t("debugger.stats.packet_loss.description"),verdict:vc({packetLossPercentage:e.packetsLostPercentage})}),i.push({name:this.t("debugger.stats.jitter.label"),value:`${Math.round(1e3*e.jitter)} ms`,description:this.t("debugger.stats.jitter.description"),verdict:fc({jitterInMS:1e3*e.jitter})}),this.videoProducerFormattedStats=i,this.networkBasedMediaHealth=mc({kind:"video",isScreenshare:!1,stats:i})}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){this.meeting&&(this.meeting.self.off("mediaScoreUpdate",this.mediaScoreUpdateListener),this.meeting.self.off("videoUpdate",this.videoUpdateListener),this.meeting.self.off("deviceListUpdate",this.deviceListUpdateListener))}async meetingChanged(t){t&&(t.self.on("mediaScoreUpdate",this.mediaScoreUpdateListener),t.self.on("videoUpdate",this.videoUpdateListener),t.self.on("deviceListUpdate",this.deviceListUpdateListener),await this.deviceListUpdateListener())}render(){var t,e;if(this.meeting)return m(f,null,m("div",{id:"header"}),m("div",{class:"tab-body"},m("div",{class:"status-container"},m("div",{class:"status-section"},m("div",{class:"section-header "+(this.networkBasedMediaHealth?"":"only-child")},m("span",null,this.t("debugger.video.sections.network_media")),this.networkBasedMediaHealth&&m("span",{class:`status ${null===(t=this.networkBasedMediaHealth)||void 0===t?void 0:t.toLowerCase()}`},this.t(`debugger.quality.${null===(e=this.networkBasedMediaHealth)||void 0===e?void 0:e.toLowerCase()}`))),this.isNetworkOpen&&!this.videoProducerFormattedStats.length&&m("div",{class:"section-body missing-stats"},this.meeting.self.videoEnabled?m("span",null,this.t("debugger.video.messages.generating_report")):m("span",null,this.t("debugger.video.messages.enable_media"))),this.isNetworkOpen&&!!this.videoProducerFormattedStats.length&&m("div",{class:"section-body network-table"},this.videoProducerFormattedStats.map((t=>{var e,i;return m("div",{class:"network-row"},m("div",{class:"network-cell label"},m("strong",null,t.name),m("span",{class:"description"},t.description)),m("div",{class:"network-cell value"},m("span",{class:`status ${null===(e=t.verdict)||void 0===e?void 0:e.toLowerCase()}`},this.t(`debugger.quality.${null===(i=t.verdict)||void 0===i?void 0:i.toLowerCase()}`)),m("span",{class:"value"},t.value)))})))))))}static get watchers(){return{videoProducerScoreStats:["videoProducerScoreStatsChanged"],meeting:["meetingChanged"]}}};_c.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))\n    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{position:relative;display:flex;flex-direction:column;overflow:hidden;height:100%;width:100%;color:rgb(var(--dyte-colors-text-1000, 255 255 255));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.tab-body::-webkit-scrollbar{width:var(--dyte-space-1\\.5, 6px);border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity))}.tab-body::-webkit-scrollbar-thumb{border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}h3{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:600}#header{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-5, 20px);display:flex;align-items:center;justify-content:space-evenly}.tab-body{margin:var(--dyte-space-4, 16px);display:flex;height:100%;flex-direction:column;justify-content:space-between;overflow-y:auto}.status-container{border:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60));border-radius:8px;padding:16px}.status-section{margin-bottom:12px}.section-header{display:flex;justify-content:space-between;align-items:center;font-weight:bold;padding:8px 0}.section-header.only-child{justify-content:center}.section-body.missing-stats{display:flex;text-align:center;justify-content:center}.section-header .status{color:rgba(var(--dyte-colors-success));font-weight:bold}.section-header .arrow{font-size:14px}.network-table{border:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60));border-radius:8px;margin-top:8px;overflow:hidden}.network-row{display:flex;justify-content:space-between;padding:12px;border-bottom:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60))}.network-row:last-child{border-bottom:none}.network-cell{display:flex;flex-direction:column}.network-cell.label strong{font-size:14px}.network-cell.label .description{font-size:12px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));margin-top:4px}.network-cell.value{text-align:right}.status.good{color:rgba(var(--dyte-colors-success))}.status.average{color:rgba(var(--dyte-colors-warning))}.status.poor{color:rgba(var(--dyte-colors-danger))}.value{font-size:14px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));margin-top:4px}dyte-settings-video{display:flex;flex-direction:column}";var Cc=Object.freeze({__proto__:null,dyte_debugger_audio:xc,dyte_debugger_screenshare:kc,dyte_debugger_system:Sc,dyte_debugger_video:_c});const Pc=class{constructor(t){vt(this,t),this.setIsLivestreaming=t=>{this.isLivestreaming="LIVESTREAMING"===t},this.meeting=void 0,this.size=void 0,this.t=ns(),this.isLivestreaming=void 0,this.iconPack=ts}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var t,e;null===(e=null===(t=this.meeting)||void 0===t?void 0:t.livestream)||void 0===e||e.removeListener("livestreamUpdate",this.setIsLivestreaming)}meetingChanged(t){var e,i;null!=t&&(this.setIsLivestreaming(null===(e=this.meeting.livestream)||void 0===e?void 0:e.state),null===(i=this.meeting.livestream)||void 0===i||i.on("livestreamUpdate",this.setIsLivestreaming))}render(){if(yi(this.meeting)&&this.isLivestreaming)return m(f,null,m("div",{class:"indicator","aria-label":this.t("livestream.indicator"),part:"indicator"},m("dyte-icon",{icon:this.iconPack.start_livestream,size:this.size}),m("span",null,this.t("LIVE"))))}static get watchers(){return{meeting:["meetingChanged"]}}};function Lc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}Pc.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);display:flex}:host[size='sm']{margin-left:var(--dyte-space-1, 4px);margin-right:var(--dyte-space-1, 4px)}.indicator{display:flex;flex-direction:row;align-items:center;font-size:14px;--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}dyte-icon{margin-right:var(--dyte-space-1, 4px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);animation:blink 4s linear infinite}:host([size='sm']) dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}:host([size='sm']) .indicator span{display:none}@keyframes blink{0%,10%{opacity:0}11%,100%{opacity:1}}";var Tc={exports:{}};!function(t){var e,i,s,a,r;e=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,i=/^(?=([^\/?#]*))\1([^]*)$/,s=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,r={buildAbsoluteURL:function(t,e,s){if(s=s||{},t=t.trim(),!(e=e.trim())){if(!s.alwaysNormalize)return t;var a=r.parseURL(t);if(!a)throw new Error("Error trying to parse base URL.");return a.path=r.normalizePath(a.path),r.buildURLFromParts(a)}var n=r.parseURL(e);if(!n)throw new Error("Error trying to parse relative URL.");if(n.scheme)return s.alwaysNormalize?(n.path=r.normalizePath(n.path),r.buildURLFromParts(n)):e;var o=r.parseURL(t);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var l=i.exec(o.path);o.netLoc=l[1],o.path=l[2]}o.netLoc&&!o.path&&(o.path="/");var d={scheme:o.scheme,netLoc:n.netLoc,path:null,params:n.params,query:n.query,fragment:n.fragment};if(!n.netLoc&&(d.netLoc=o.netLoc,"/"!==n.path[0]))if(n.path){var c=o.path,h=c.substring(0,c.lastIndexOf("/")+1)+n.path;d.path=r.normalizePath(h)}else d.path=o.path,n.params||(d.params=o.params,n.query||(d.query=o.query));return null===d.path&&(d.path=s.alwaysNormalize?r.normalizePath(n.path):n.path),r.buildURLFromParts(d)},parseURL:function(t){var i=e.exec(t);return i?{scheme:i[1]||"",netLoc:i[2]||"",path:i[3]||"",params:i[4]||"",query:i[5]||"",fragment:i[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(s,"");t.length!==(t=t.replace(a,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}},t.exports=r}(Tc);var Ec=Tc.exports;function Ac(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function Mc(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Ac(Object(i),!0).forEach((function(e){Dc(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Ac(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Rc(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}function Dc(t,e,i){return(e=Rc(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Ic(){return Ic=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},Ic.apply(this,arguments)}const Oc=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},$c=Number.isSafeInteger||function(t){return"number"==typeof t&&Math.abs(t)<=Uc},Uc=Number.MAX_SAFE_INTEGER||9007199254740991;let Fc=function(t){return t.MEDIA_ATTACHING="hlsMediaAttaching",t.MEDIA_ATTACHED="hlsMediaAttached",t.MEDIA_DETACHING="hlsMediaDetaching",t.MEDIA_DETACHED="hlsMediaDetached",t.BUFFER_RESET="hlsBufferReset",t.BUFFER_CODECS="hlsBufferCodecs",t.BUFFER_CREATED="hlsBufferCreated",t.BUFFER_APPENDING="hlsBufferAppending",t.BUFFER_APPENDED="hlsBufferAppended",t.BUFFER_EOS="hlsBufferEos",t.BUFFER_FLUSHING="hlsBufferFlushing",t.BUFFER_FLUSHED="hlsBufferFlushed",t.MANIFEST_LOADING="hlsManifestLoading",t.MANIFEST_LOADED="hlsManifestLoaded",t.MANIFEST_PARSED="hlsManifestParsed",t.LEVEL_SWITCHING="hlsLevelSwitching",t.LEVEL_SWITCHED="hlsLevelSwitched",t.LEVEL_LOADING="hlsLevelLoading",t.LEVEL_LOADED="hlsLevelLoaded",t.LEVEL_UPDATED="hlsLevelUpdated",t.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",t.LEVELS_UPDATED="hlsLevelsUpdated",t.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",t.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",t.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",t.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",t.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",t.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",t.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",t.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",t.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",t.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",t.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",t.CUES_PARSED="hlsCuesParsed",t.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",t.INIT_PTS_FOUND="hlsInitPtsFound",t.FRAG_LOADING="hlsFragLoading",t.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",t.FRAG_LOADED="hlsFragLoaded",t.FRAG_DECRYPTED="hlsFragDecrypted",t.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",t.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",t.FRAG_PARSING_METADATA="hlsFragParsingMetadata",t.FRAG_PARSED="hlsFragParsed",t.FRAG_BUFFERED="hlsFragBuffered",t.FRAG_CHANGED="hlsFragChanged",t.FPS_DROP="hlsFpsDrop",t.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",t.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",t.ERROR="hlsError",t.DESTROYING="hlsDestroying",t.KEY_LOADING="hlsKeyLoading",t.KEY_LOADED="hlsKeyLoaded",t.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",t.BACK_BUFFER_REACHED="hlsBackBufferReached",t.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",t}({}),zc=function(t){return t.NETWORK_ERROR="networkError",t.MEDIA_ERROR="mediaError",t.KEY_SYSTEM_ERROR="keySystemError",t.MUX_ERROR="muxError",t.OTHER_ERROR="otherError",t}({}),Nc=function(t){return t.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",t.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",t.KEY_SYSTEM_NO_SESSION="keySystemNoSession",t.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",t.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",t.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",t.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",t.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",t.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",t.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",t.MANIFEST_LOAD_ERROR="manifestLoadError",t.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",t.MANIFEST_PARSING_ERROR="manifestParsingError",t.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",t.LEVEL_EMPTY_ERROR="levelEmptyError",t.LEVEL_LOAD_ERROR="levelLoadError",t.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",t.LEVEL_PARSING_ERROR="levelParsingError",t.LEVEL_SWITCH_ERROR="levelSwitchError",t.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",t.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",t.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",t.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",t.FRAG_LOAD_ERROR="fragLoadError",t.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",t.FRAG_DECRYPT_ERROR="fragDecryptError",t.FRAG_PARSING_ERROR="fragParsingError",t.FRAG_GAP="fragGap",t.REMUX_ALLOC_ERROR="remuxAllocError",t.KEY_LOAD_ERROR="keyLoadError",t.KEY_LOAD_TIMEOUT="keyLoadTimeOut",t.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",t.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",t.BUFFER_APPEND_ERROR="bufferAppendError",t.BUFFER_APPENDING_ERROR="bufferAppendingError",t.BUFFER_STALLED_ERROR="bufferStalledError",t.BUFFER_FULL_ERROR="bufferFullError",t.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",t.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",t.INTERNAL_EXCEPTION="internalException",t.INTERNAL_ABORTED="aborted",t.UNKNOWN="unknown",t}({});const jc=function(){},Bc={trace:jc,debug:jc,log:jc,warn:jc,info:jc,error:jc};let Hc=Bc;function Vc(t,...e){e.forEach((function(e){Hc[e]=t[e]?t[e].bind(t):function(t){const e=self.console[t];return e?e.bind(self.console,`[${t}] >`):jc}(e)}))}const Gc=Hc,qc=/^(\d+)x(\d+)$/,Zc=/(.+?)=(".*?"|.*?)(?:,|$)/g;class Kc{constructor(t){"string"==typeof t&&(t=Kc.parseAttrList(t)),Ic(this,t)}get clientAttrs(){return Object.keys(this).filter((t=>"X-"===t.substring(0,2)))}decimalInteger(t){const e=parseInt(this[t],10);return e>Number.MAX_SAFE_INTEGER?1/0:e}hexadecimalInteger(t){if(this[t]){let e=(this[t]||"0x").slice(2);e=(1&e.length?"0":"")+e;const i=new Uint8Array(e.length/2);for(let t=0;t<e.length/2;t++)i[t]=parseInt(e.slice(2*t,2*t+2),16);return i}return null}hexadecimalIntegerAsNumber(t){const e=parseInt(this[t],16);return e>Number.MAX_SAFE_INTEGER?1/0:e}decimalFloatingPoint(t){return parseFloat(this[t])}optionalFloat(t,e){const i=this[t];return i?parseFloat(i):e}enumeratedString(t){return this[t]}bool(t){return"YES"===this[t]}decimalResolution(t){const e=qc.exec(this[t]);if(null!==e)return{width:parseInt(e[1],10),height:parseInt(e[2],10)}}static parseAttrList(t){let e;const i={};for(Zc.lastIndex=0;null!==(e=Zc.exec(t));){let t=e[2];0===t.indexOf('"')&&t.lastIndexOf('"')===t.length-1&&(t=t.slice(1,-1));i[e[1].trim()]=t}return i}}function Wc(t){return"SCTE35-OUT"===t||"SCTE35-IN"===t}class Yc{constructor(t,e){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,e){const i=e.attr;for(const e in i)if(Object.prototype.hasOwnProperty.call(t,e)&&t[e]!==i[e]){Gc.warn(`DATERANGE tag attribute: "${e}" does not match for tags with ID: "${t.ID}"`),this._badValueForSameId=e;break}t=Ic(new Kc({}),i,t)}if(this.attr=t,this._startDate=new Date(t["START-DATE"]),"END-DATE"in this.attr){const t=new Date(this.attr["END-DATE"]);Oc(t.getTime())&&(this._endDate=t)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get startDate(){return this._startDate}get endDate(){if(this._endDate)return this._endDate;const t=this.duration;return null!==t?new Date(this._startDate.getTime()+1e3*t):null}get duration(){if("DURATION"in this.attr){const t=this.attr.decimalFloatingPoint("DURATION");if(Oc(t))return t}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isValid(){return!!this.id&&!this._badValueForSameId&&Oc(this.startDate.getTime())&&(null===this.duration||this.duration>=0)&&(!this.endOnNext||!!this.class)}}class Qc{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var Jc="audio",Xc="video",th="audiovideo";class eh{constructor(t){this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams={[Jc]:null,[Xc]:null,[th]:null},this.baseurl=t}setByteRange(t,e){const i=t.split("@",2);let s;s=1===i.length?(null==e?void 0:e.byteRangeEndOffset)||0:parseInt(i[1]),this._byteRange=[s,parseInt(i[0])+s]}get byteRange(){return this._byteRange?this._byteRange:[]}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=Ec.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(t){this._url=t}}class ih extends eh{constructor(t,e){super(e),this._decryptdata=null,this.rawProgramDateTime=null,this.programDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.stats=new Qc,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=t}get decryptdata(){const{levelkeys:t}=this;if(!t&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){const t=this.levelkeys.identity;if(t)this._decryptdata=t.getDecryptData(this.sn);else{const t=Object.keys(this.levelkeys);if(1===t.length)return this._decryptdata=this.levelkeys[t[0]].getDecryptData(this.sn)}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(null===this.programDateTime)return null;if(!Oc(this.programDateTime))return null;const t=Oc(this.duration)?this.duration:0;return this.programDateTime+1e3*t}get encrypted(){var t;if(null!=(t=this._decryptdata)&&t.encrypted)return!0;if(this.levelkeys){const t=Object.keys(this.levelkeys),e=t.length;if(e>1||1===e&&this.levelkeys[t[0]].encrypted)return!0}return!1}setKeyFormat(t){if(this.levelkeys){const e=this.levelkeys[t];e&&!this._decryptdata&&(this._decryptdata=e.getDecryptData(this.sn))}}abortRequests(){var t,e;null==(t=this.loader)||t.abort(),null==(e=this.keyLoader)||e.abort()}setElementaryStreamInfo(t,e,i,s,a,r=!1){const{elementaryStreams:n}=this,o=n[t];o?(o.startPTS=Math.min(o.startPTS,e),o.endPTS=Math.max(o.endPTS,i),o.startDTS=Math.min(o.startDTS,s),o.endDTS=Math.max(o.endDTS,a)):n[t]={startPTS:e,endPTS:i,startDTS:s,endDTS:a,partial:r}}clearElementaryStreamInfo(){const{elementaryStreams:t}=this;t[Jc]=null,t[Xc]=null,t[th]=null}}class sh extends eh{constructor(t,e,i,s,a){super(i),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.stats=new Qc,this.duration=t.decimalFloatingPoint("DURATION"),this.gap=t.bool("GAP"),this.independent=t.bool("INDEPENDENT"),this.relurl=t.enumeratedString("URI"),this.fragment=e,this.index=s;const r=t.enumeratedString("BYTERANGE");r&&this.setByteRange(r,a),a&&(this.fragOffset=a.fragOffset+a.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:t}=this;return!!(t.audio||t.video||t.audiovideo)}}class ah{constructor(t){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=t}reloaded(t){if(!t)return this.advanced=!0,void(this.updated=!0);const e=this.lastPartSn-t.lastPartSn,i=this.lastPartIndex-t.lastPartIndex;this.updated=this.endSN!==t.endSN||!!i||!!e||!this.live,this.advanced=this.endSN>t.endSN||e>0||0===e&&i>0,this.updated||this.advanced?this.misses=Math.floor(.6*t.misses):this.misses=t.misses+1,this.availabilityDelay=t.availabilityDelay}get hasProgramDateTime(){return!!this.fragments.length&&Oc(this.fragments[this.fragments.length-1].programDateTime)}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||10}get drift(){const t=this.driftEndTime-this.driftStartTime;if(t>0){return 1e3*(this.driftEnd-this.driftStart)/t}return 1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var t;return null!=(t=this.partList)&&t.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){var t;return null!=(t=this.fragments)&&t.length?this.fragments[this.fragments.length-1].end:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var t;return null!=(t=this.partList)&&t.length?this.partList[this.partList.length-1].index:-1}get lastPartSn(){var t;return null!=(t=this.partList)&&t.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}function rh(t){return Uint8Array.from(atob(t),(t=>t.charCodeAt(0)))}function nh(t){const e=t.split(":");let i=null;if("data"===e[0]&&2===e.length){const t=e[1].split(";"),s=t[t.length-1].split(",");if(2===s.length){const e="base64"===s[0],a=s[1];e?(t.splice(-1,1),i=rh(a)):i=function(t){const e=oh(t).subarray(0,16),i=new Uint8Array(16);return i.set(e,16-e.length),i}(a)}}return i}function oh(t){return Uint8Array.from(unescape(encodeURIComponent(t)),(t=>t.charCodeAt(0)))}const lh="undefined"!=typeof self?self:void 0;var dh={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},ch="org.w3.clearkey",hh="com.apple.streamingkeydelivery",ph="com.microsoft.playready",gh="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";function uh(t){switch(t){case hh:return dh.FAIRPLAY;case ph:return dh.PLAYREADY;case gh:return dh.WIDEVINE;case ch:return dh.CLEARKEY}}var mh="1077efecc0b24d02ace33c1e52e2fb4b",vh="e2719d58a985b3c9781ab030af78d30e",fh="9a04f07998404286ab92e65be0885f95",yh="edef8ba979d64acea3c827dcd51d21ed";function bh(t){return t===yh?dh.WIDEVINE:t===fh?dh.PLAYREADY:t===mh||t===vh?dh.CLEARKEY:void 0}function wh(t){switch(t){case dh.FAIRPLAY:return hh;case dh.PLAYREADY:return ph;case dh.WIDEVINE:return gh;case dh.CLEARKEY:return ch}}function xh(t){const{drmSystems:e,widevineLicenseUrl:i}=t,s=e?[dh.FAIRPLAY,dh.WIDEVINE,dh.PLAYREADY,dh.CLEARKEY].filter((t=>!!e[t])):[];return!s[dh.WIDEVINE]&&i&&s.push(dh.WIDEVINE),s}const kh=null!=lh&&null!=(Sh=lh.navigator)&&Sh.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null;var Sh;function _h(t,e,i){return Uint8Array.prototype.slice?t.slice(e,i):new Uint8Array(Array.prototype.slice.call(t,e,i))}const Ch=(t,e)=>e+10<=t.length&&73===t[e]&&68===t[e+1]&&51===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128,Ph=(t,e)=>e+10<=t.length&&51===t[e]&&68===t[e+1]&&73===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128,Lh=(t,e)=>{const i=e;let s=0;for(;Ch(t,e);){s+=10;s+=Th(t,e+6),Ph(t,e+10)&&(s+=10),e+=s}if(s>0)return t.subarray(i,i+s)},Th=(t,e)=>{let i=0;return i=(127&t[e])<<21,i|=(127&t[e+1])<<14,i|=(127&t[e+2])<<7,i|=127&t[e+3],i},Eh=(t,e)=>Ch(t,e)&&Th(t,e+6)+10<=t.length-e,Ah=t=>{const e=Dh(t);for(let i=0;i<e.length;i++){const t=e[i];if(Mh(t))return Fh(t)}},Mh=t=>t&&"PRIV"===t.key&&"com.apple.streaming.transportStreamTimestamp"===t.info,Rh=t=>{const e=String.fromCharCode(t[0],t[1],t[2],t[3]),i=Th(t,4);return{type:e,size:i,data:t.subarray(10,10+i)}},Dh=t=>{let e=0;const i=[];for(;Ch(t,e);){const s=Th(t,e+6);e+=10;const a=e+s;for(;e+8<a;){const s=Rh(t.subarray(e)),a=Ih(s);a&&i.push(a),e+=s.size+10}Ph(t,e)&&(e+=10)}return i},Ih=t=>"PRIV"===t.type?Oh(t):"W"===t.type[0]?Uh(t):$h(t),Oh=t=>{if(t.size<2)return;const e=zh(t.data,!0),i=new Uint8Array(t.data.subarray(e.length+1));return{key:t.type,info:e,data:i.buffer}},$h=t=>{if(t.size<2)return;if("TXXX"===t.type){let e=1;const i=zh(t.data.subarray(e),!0);e+=i.length+1;const s=zh(t.data.subarray(e));return{key:t.type,info:i,data:s}}const e=zh(t.data.subarray(1));return{key:t.type,data:e}},Uh=t=>{if("WXXX"===t.type){if(t.size<2)return;let e=1;const i=zh(t.data.subarray(e),!0);e+=i.length+1;const s=zh(t.data.subarray(e));return{key:t.type,info:i,data:s}}const e=zh(t.data);return{key:t.type,data:e}},Fh=t=>{if(8===t.data.byteLength){const e=new Uint8Array(t.data),i=1&e[3];let s=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return s/=45,i&&(s+=47721858.84),Math.round(s)}},zh=(t,e=!1)=>{const i=jh();if(i){const s=i.decode(t);if(e){const t=s.indexOf("\0");return-1!==t?s.substring(0,t):s}return s.replace(/\0/g,"")}const s=t.length;let a,r,n,o="",l=0;for(;l<s;){if(a=t[l++],0===a&&e)return o;if(0!==a&&3!==a)switch(a>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o+=String.fromCharCode(a);break;case 12:case 13:r=t[l++],o+=String.fromCharCode((31&a)<<6|63&r);break;case 14:r=t[l++],n=t[l++],o+=String.fromCharCode((15&a)<<12|(63&r)<<6|63&n)}}return o};let Nh;function jh(){if(!navigator.userAgent.includes("PlayStation 4"))return Nh||void 0===self.TextDecoder||(Nh=new self.TextDecoder("utf-8")),Nh}const Bh=function(t){let e="";for(let i=0;i<t.length;i++){let s=t[i].toString(16);s.length<2&&(s="0"+s),e+=s}return e},Hh=Math.pow(2,32)-1,Vh=[].push,Gh={video:1,audio:2,id3:3,text:4};function qh(t){return String.fromCharCode.apply(null,t)}function Zh(t,e){const i=t[e]<<8|t[e+1];return i<0?65536+i:i}function Kh(t,e){const i=Yh(t,e);return i<0?4294967296+i:i}function Wh(t,e){let i=Kh(t,e);return i*=Math.pow(2,32),i+=Kh(t,e+4),i}function Yh(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}function Qh(t,e,i){t[e]=i>>24,t[e+1]=i>>16&255,t[e+2]=i>>8&255,t[e+3]=255&i}function Jh(t,e){const i=[];if(!e.length)return i;const s=t.byteLength;for(let a=0;a<s;){const r=Kh(t,a),n=r>1?a+r:s;if(qh(t.subarray(a+4,a+8))===e[0])if(1===e.length)i.push(t.subarray(a+8,n));else{const s=Jh(t.subarray(a+8,n),e.slice(1));s.length&&Vh.apply(i,s)}a=n}return i}function Xh(t){const e=[],i=t[0];let s=8;const a=Kh(t,s);s+=4;let r=0,n=0;0===i?(r=Kh(t,s),n=Kh(t,s+4),s+=8):(r=Wh(t,s),n=Wh(t,s+8),s+=16),s+=2;let o=t.length+n;const l=Zh(t,s);s+=2;for(let d=0;d<l;d++){let i=s;const r=Kh(t,i);i+=4;const n=2147483647&r;if(1===(2147483648&r)>>>31)return Gc.warn("SIDX has hierarchical references (not supported)"),null;const l=Kh(t,i);i+=4,e.push({referenceSize:n,subsegmentDuration:l,info:{duration:l/a,start:o,end:o+n-1}}),o+=n,i+=4,s=i}return{earliestPresentationTime:r,timescale:a,version:i,referencesCount:l,references:e}}function tp(t){const e=[],i=Jh(t,["moov","trak"]);for(let s=0;s<i.length;s++){const t=i[s],a=Jh(t,["tkhd"])[0];if(a){let i=a[0];const s=Kh(a,0===i?12:20),r=Jh(t,["mdia","mdhd"])[0];if(r){i=r[0];const a=Kh(r,0===i?12:20),n=Jh(t,["mdia","hdlr"])[0];if(n){const i=qh(n.subarray(8,12)),r={soun:Jc,vide:Xc}[i];if(r){const i=ep(Jh(t,["mdia","minf","stbl","stsd"])[0]);e[s]={timescale:a,type:r},e[r]=Mc({timescale:a,id:s},i)}}}}}return Jh(t,["moov","mvex","trex"]).forEach((t=>{const i=Kh(t,4),s=e[i];s&&(s.default={duration:Kh(t,12),flags:Kh(t,20)})})),e}function ep(t){const e=t.subarray(8),i=e.subarray(86),s=qh(e.subarray(4,8));let a=s;const r="enca"===s||"encv"===s;if(r){const t=Jh(e,[s])[0];Jh(t.subarray("enca"===s?28:78),["sinf"]).forEach((t=>{const e=Jh(t,["schm"])[0];if(e){const i=qh(e.subarray(4,8));if("cbcs"===i||"cenc"===i){const e=Jh(t,["frma"])[0];e&&(a=qh(e))}}}))}switch(a){case"avc1":case"avc2":case"avc3":case"avc4":{const t=Jh(i,["avcC"])[0];a+="."+sp(t[1])+sp(t[2])+sp(t[3]);break}case"mp4a":{const t=Jh(e,[s])[0],i=Jh(t.subarray(28),["esds"])[0];if(i&&i.length>12){let t=4;if(3!==i[t++])break;t=ip(i,t),t+=2;const e=i[t++];if(128&e&&(t+=2),64&e&&(t+=i[t++]),4!==i[t++])break;t=ip(i,t);const s=i[t++];if(64!==s)break;if(a+="."+sp(s),t+=12,5!==i[t++])break;t=ip(i,t);const r=i[t++];let n=(248&r)>>3;31===n&&(n+=1+((7&r)<<3)+((224&i[t])>>5)),a+="."+n}break}case"hvc1":case"hev1":{const t=Jh(i,["hvcC"])[0],e=t[1],s=["","A","B","C"][e>>6],r=31&e,n=Kh(t,2),o=(32&e)>>5?"H":"L",l=t[12],d=t.subarray(6,12);a+="."+s+r,a+="."+n.toString(16).toUpperCase(),a+="."+o+l;let c="";for(let i=d.length;i--;){const t=d[i];if(t||c){c="."+t.toString(16).toUpperCase()+c}}a+=c;break}case"dvh1":case"dvhe":{const t=Jh(i,["dvcC"])[0],e=t[2]>>1&127,s=t[2]<<5&32|t[3]>>3&31;a+="."+ap(e)+"."+ap(s);break}case"vp09":{const t=Jh(i,["vpcC"])[0],e=t[4],s=t[5],r=t[6]>>4&15;a+="."+ap(e)+"."+ap(s)+"."+ap(r);break}case"av01":{const t=Jh(i,["av1C"])[0],e=t[1]>>>5,s=31&t[1],r=t[2]>>>7?"H":"M",n=(64&t[2])>>6,o=(32&t[2])>>5,l=2===e&&n?o?12:10:n?10:8,d=(16&t[2])>>4,c=(8&t[2])>>3,h=(4&t[2])>>2,p=3&t[2],g=1,u=1,m=1,v=0;a+="."+e+"."+ap(s)+r+"."+ap(l)+"."+d+"."+c+h+p+"."+ap(g)+"."+ap(u)+"."+ap(m)+"."+v;break}}return{codec:a,encrypted:r}}function ip(t,e){const i=e+5;for(;128&t[e++]&&e<i;);return e}function sp(t){return("0"+t.toString(16).toUpperCase()).slice(-2)}function ap(t){return(t<10?"0":"")+t}function rp(t){const e=Jh(t,["schm"])[0];if(e){const i=qh(e.subarray(4,8));if("cbcs"===i||"cenc"===i)return Jh(t,["schi","tenc"])[0]}return null}function np(t){const e=Kh(t,0);let i=8;1&e&&(i+=4),4&e&&(i+=4);let s=0;const a=Kh(t,4);for(let r=0;r<a;r++){if(256&e){s+=Kh(t,i),i+=4}512&e&&(i+=4),1024&e&&(i+=4),2048&e&&(i+=4)}return s}function op(t,e){const i=new Uint8Array(t.length+e.length);return i.set(t),i.set(e,t.length),i}function lp(t,e){const i=[],s=e.samples,a=e.timescale,r=e.id;let n=!1;return Jh(s,["moof"]).map((o=>{const l=o.byteOffset-8;Jh(o,["traf"]).map((o=>{const d=Jh(o,["tfdt"]).map((t=>{const e=t[0];let i=Kh(t,4);return 1===e&&(i*=Math.pow(2,32),i+=Kh(t,8)),i/a}))[0];return void 0!==d&&(t=d),Jh(o,["tfhd"]).map((d=>{const c=Kh(d,4),h=16777215&Kh(d,0);let p=0;const g=!!(16&h);let u=0;const m=!!(32&h);let v=8;c===r&&(!!(1&h)&&(v+=8),!!(2&h)&&(v+=4),!!(8&h)&&(p=Kh(d,v),v+=4),g&&(u=Kh(d,v),v+=4),m&&(v+=4),"video"===e.type&&(n=function(t){if(!t)return!1;const e=t.indexOf("."),i=e<0?t:t.substring(0,e);return"hvc1"===i||"hev1"===i||"dvh1"===i||"dvhe"===i}(e.codec)),Jh(o,["trun"]).map((r=>{const o=r[0],d=16777215&Kh(r,0),c=!!(1&d);let h=0;const g=!!(4&d),m=!!(256&d);let v=0;const f=!!(512&d);let y=0;const b=!!(1024&d),w=!!(2048&d);let x=0;const k=Kh(r,4);let S=8;c&&(h=Kh(r,S),S+=4),g&&(S+=4);let _=h+l;for(let l=0;l<k;l++){if(m?(v=Kh(r,S),S+=4):v=p,f?(y=Kh(r,S),S+=4):y=u,b&&(S+=4),w&&(x=0===o?Kh(r,S):Yh(r,S),S+=4),e.type===Xc){let e=0;for(;e<y;){const r=Kh(s,_);if(_+=4,dp(n,s[_])){cp(s.subarray(_,_+r),n?2:1,t+x/a,i)}_+=r,e+=r+4}}t+=v/a}})))}))}))})),i}function dp(t,e){if(t){const t=e>>1&63;return 39===t||40===t}return 6===(31&e)}function cp(t,e,i,s){const a=hp(t);let r=0;r+=e;let n=0,o=0,l=0;for(;r<a.length;){n=0;do{if(r>=a.length)break;l=a[r++],n+=l}while(255===l);o=0;do{if(r>=a.length)break;l=a[r++],o+=l}while(255===l);const t=a.length-r;let e=r;if(o<t)r+=o;else if(o>t){Gc.error(`Malformed SEI payload. ${o} is too small, only ${t} bytes left to parse.`);break}if(4===n){if(181===a[e++]){const t=Zh(a,e);if(e+=2,49===t){const t=Kh(a,e);if(e+=4,1195456820===t){const t=a[e++];if(3===t){const r=a[e++],o=64&r,l=o?2+3*(31&r):0,d=new Uint8Array(l);if(o){d[0]=r;for(let t=1;t<l;t++)d[t]=a[e++]}s.push({type:t,payloadType:n,pts:i,bytes:d})}}}}}else if(5===n&&o>16){const t=[];for(let i=0;i<16;i++){const s=a[e++].toString(16);t.push(1==s.length?"0"+s:s),3!==i&&5!==i&&7!==i&&9!==i||t.push("-")}const r=o-16,l=new Uint8Array(r);for(let i=0;i<r;i++)l[i]=a[e++];s.push({payloadType:n,pts:i,uuid:t.join(""),userData:zh(l),userDataBytes:l})}}}function hp(t){const e=t.byteLength,i=[];let s=1;for(;s<e-2;)0===t[s]&&0===t[s+1]&&3===t[s+2]?(i.push(s+2),s+=2):s++;if(0===i.length)return t;const a=e-i.length,r=new Uint8Array(a);let n=0;for(s=0;s<a;n++,s++)n===i[0]&&(n++,i.shift()),r[s]=t[n];return r}function pp(t,e,i){if(16!==t.byteLength)throw new RangeError("Invalid system id");let s,a,r;if(e){s=1,a=new Uint8Array(16*e.length);for(let t=0;t<e.length;t++){const i=e[t];if(16!==i.byteLength)throw new RangeError("Invalid key");a.set(i,16*t)}}else s=0,a=new Uint8Array;s>0?(r=new Uint8Array(4),e.length>0&&new DataView(r.buffer).setUint32(0,e.length,!1)):r=new Uint8Array;const n=new Uint8Array(4);return i&&i.byteLength>0&&new DataView(n.buffer).setUint32(0,i.byteLength,!1),function(t,...e){const i=e.length;let s=8,a=i;for(;a--;)s+=e[a].byteLength;const r=new Uint8Array(s);for(r[0]=s>>24&255,r[1]=s>>16&255,r[2]=s>>8&255,r[3]=255&s,r.set(t,4),a=0,s=8;a<i;a++)r.set(e[a],s),s+=e[a].byteLength;return r}([112,115,115,104],new Uint8Array([s,0,0,0]),t,r,a,n,i||new Uint8Array)}function gp(t){const e=t.getUint32(0),i=t.byteOffset,s=t.byteLength;if(s<e)return{offset:i,size:s};if(1886614376!==t.getUint32(4))return{offset:i,size:e};const a=t.getUint32(8)>>>24;if(0!==a&&1!==a)return{offset:i,size:e};const r=t.buffer,n=Bh(new Uint8Array(r,i+12,16)),o=t.getUint32(28);let l=null,d=null;if(0===a){if(e-32<o||o<22)return{offset:i,size:e};d=new Uint8Array(r,i+32,o)}else if(1===a){if(!o||s<i+32+16*o+16)return{offset:i,size:e};l=[];for(let t=0;t<o;t++)l.push(new Uint8Array(r,i+32+16*t,16))}return{version:a,systemId:n,kids:l,data:d,offset:i,size:e}}let up={};class mp{static clearKeyUriToKeyIdMap(){up={}}constructor(t,e,i,s=[1],a=null){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=t,this.uri=e,this.keyFormat=i,this.keyFormatVersions=s,this.iv=a,this.encrypted=!!t&&"NONE"!==t,this.isCommonEncryption=this.encrypted&&"AES-128"!==t}isSupported(){if(this.method){if("AES-128"===this.method||"NONE"===this.method)return!0;if("identity"===this.keyFormat)return"SAMPLE-AES"===this.method;switch(this.keyFormat){case hh:case gh:case ph:case ch:return-1!==["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)}}return!1}getDecryptData(t){if(!this.encrypted||!this.uri)return null;if("AES-128"===this.method&&this.uri&&!this.iv){"number"!=typeof t&&("AES-128"!==this.method||this.iv||Gc.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),t=0);const e=function(t){const e=new Uint8Array(16);for(let i=12;i<16;i++)e[i]=t>>8*(15-i)&255;return e}(t);return new mp(this.method,this.uri,"identity",this.keyFormatVersions,e)}const e=nh(this.uri);if(e)switch(this.keyFormat){case gh:this.pssh=e,e.length>=22&&(this.keyId=e.subarray(e.length-22,e.length-6));break;case ph:{const t=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=pp(t,null,e);const i=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2),s=String.fromCharCode.apply(null,Array.from(i)),a=s.substring(s.indexOf("<"),s.length),r=(new DOMParser).parseFromString(a,"text/xml").getElementsByTagName("KID")[0];if(r){const t=r.childNodes[0]?r.childNodes[0].nodeValue:r.getAttribute("VALUE");if(t){const e=rh(t).subarray(0,16);!function(t){const e=function(t,e,i){const s=t[e];t[e]=t[i],t[i]=s};e(t,0,3),e(t,1,2),e(t,4,5),e(t,6,7)}(e),this.keyId=e}}break}default:{let t=e.subarray(0,16);if(16!==t.length){const e=new Uint8Array(16);e.set(t,16-t.length),t=e}this.keyId=t;break}}if(!this.keyId||16!==this.keyId.byteLength){let t=up[this.uri];if(!t){const e=Object.keys(up).length%Number.MAX_SAFE_INTEGER;t=new Uint8Array(16);new DataView(t.buffer,12,4).setUint32(0,e),up[this.uri]=t}this.keyId=t}return this}}const vp=/\{\$([a-zA-Z0-9-_]+)\}/g;function fp(t){return vp.test(t)}function yp(t,e,i){if(null!==t.variableList||t.hasVariableRefs)for(let s=i.length;s--;){const a=i[s],r=e[a];r&&(e[a]=bp(t,r))}}function bp(t,e){if(null!==t.variableList||t.hasVariableRefs){const i=t.variableList;return e.replace(vp,(e=>{const s=e.substring(2,e.length-1),a=null==i?void 0:i[s];return void 0===a?(t.playlistParsingError||(t.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${s}"`)),e):a}))}return e}function wp(t,e,i){let s,a,r=t.variableList;if(r||(t.variableList=r={}),"QUERYPARAM"in e){s=e.QUERYPARAM;try{const t=new self.URL(i).searchParams;if(!t.has(s))throw new Error(`"${s}" does not match any query parameter in URI: "${i}"`);a=t.get(s)}catch(n){t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${n.message}`))}}else s=e.NAME,a=e.VALUE;s in r?t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${s}"`)):r[s]=a||""}function xp(t,e,i){const s=e.IMPORT;if(i&&s in i){let e=t.variableList;e||(t.variableList=e={}),e[s]=i[s]}else t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${s}"`))}function kp(t=!0){if("undefined"==typeof self)return;return(t||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}const Sp={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function _p(t,e,i=!0){return!t.split(",").some((t=>!Cp(t,e,i)))}function Cp(t,e,i=!0){var s;const a=kp(i);return null!=(s=null==a?void 0:a.isTypeSupported(Pp(t,e)))&&s}function Pp(t,e){return`${e}/mp4;codecs="${t}"`}function Lp(t){if(t){const e=t.substring(0,4);return Sp.video[e]}return 2}function Tp(t){return t.split(",").reduce(((t,e)=>{const i=Sp.video[e];return i?(2*i+t)/(t?3:2):(Sp.audio[e]+t)/(t?2:1)}),0)}const Ep={};const Ap=/flac|opus/i;function Mp(t,e=!0){return t.replace(Ap,(t=>function(t,e=!0){if(Ep[t])return Ep[t];const i={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"]}[t];for(let s=0;s<i.length;s++)if(Cp(i[s],"audio",e))return Ep[t]=i[s],i[s];return t}(t.toLowerCase(),e)))}function Rp(t,e){return t&&"mp4a"!==t?t:e?e.split(",")[0]:e}const Dp=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,Ip=/#EXT-X-MEDIA:(.*)/g,Op=/^#EXT(?:INF|-X-TARGETDURATION):/m,$p=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),Up=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class Fp{static findGroup(t,e){for(let i=0;i<t.length;i++){const s=t[i];if(s.id===e)return s}}static resolve(t,e){return Ec.buildAbsoluteURL(e,t,{alwaysNormalize:!0})}static isMediaPlaylist(t){return Op.test(t)}static parseMasterPlaylist(t,e){const i={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:fp(t)},s=[];let a;for(Dp.lastIndex=0;null!=(a=Dp.exec(t));)if(a[1]){var r;const t=new Kc(a[1]);yp(i,t,["CODECS","SUPPLEMENTAL-CODECS","ALLOWED-CPC","PATHWAY-ID","STABLE-VARIANT-ID","AUDIO","VIDEO","SUBTITLES","CLOSED-CAPTIONS","NAME"]);const n=bp(i,a[2]),o={attrs:t,bitrate:t.decimalInteger("BANDWIDTH")||t.decimalInteger("AVERAGE-BANDWIDTH"),name:t.NAME,url:Fp.resolve(n,e)},l=t.decimalResolution("RESOLUTION");l&&(o.width=l.width,o.height=l.height),jp(t.CODECS,o),null!=(r=o.unknownCodecs)&&r.length||s.push(o),i.levels.push(o)}else if(a[3]){const t=a[3],s=a[4];switch(t){case"SESSION-DATA":{const t=new Kc(s);yp(i,t,["DATA-ID","LANGUAGE","VALUE","URI"]);const e=t["DATA-ID"];e&&(null===i.sessionData&&(i.sessionData={}),i.sessionData[e]=t);break}case"SESSION-KEY":{const t=zp(s,e,i);t.encrypted&&t.isSupported()?(null===i.sessionKeys&&(i.sessionKeys=[]),i.sessionKeys.push(t)):Gc.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${s}"`);break}case"DEFINE":{const t=new Kc(s);yp(i,t,["NAME","VALUE","QUERYPARAM"]),wp(i,t,e)}break;case"CONTENT-STEERING":{const t=new Kc(s);yp(i,t,["SERVER-URI","PATHWAY-ID"]),i.contentSteering={uri:Fp.resolve(t["SERVER-URI"],e),pathwayId:t["PATHWAY-ID"]||"."};break}case"START":i.startTimeOffset=Np(s)}}const n=s.length>0&&s.length<i.levels.length;return i.levels=n?s:i.levels,0===i.levels.length&&(i.playlistParsingError=new Error("no levels found in manifest")),i}static parseMasterPlaylistMedia(t,e,i){let s;const a={},r=i.levels,n={AUDIO:r.map((t=>({id:t.attrs.AUDIO,audioCodec:t.audioCodec}))),SUBTITLES:r.map((t=>({id:t.attrs.SUBTITLES,textCodec:t.textCodec}))),"CLOSED-CAPTIONS":[]};let o=0;for(Ip.lastIndex=0;null!==(s=Ip.exec(t));){const t=new Kc(s[1]),r=t.TYPE;if(r){const s=n[r],l=a[r]||[];a[r]=l,yp(i,t,["URI","GROUP-ID","LANGUAGE","ASSOC-LANGUAGE","STABLE-RENDITION-ID","NAME","INSTREAM-ID","CHARACTERISTICS","CHANNELS"]);const d=t.LANGUAGE,c=t["ASSOC-LANGUAGE"],h=t.CHANNELS,p=t.CHARACTERISTICS,g=t["INSTREAM-ID"],u={attrs:t,bitrate:0,id:o++,groupId:t["GROUP-ID"]||"",name:t.NAME||d||"",type:r,default:t.bool("DEFAULT"),autoselect:t.bool("AUTOSELECT"),forced:t.bool("FORCED"),lang:d,url:t.URI?Fp.resolve(t.URI,e):""};if(c&&(u.assocLang=c),h&&(u.channels=h),p&&(u.characteristics=p),g&&(u.instreamId=g),null!=s&&s.length){const t=Fp.findGroup(s,u.groupId)||s[0];Bp(u,t,"audioCodec"),Bp(u,t,"textCodec")}l.push(u)}}return a}static parseLevelPlaylist(t,e,i,s,a,r){const n=new ah(e),o=n.fragments;let l,d,c,h=null,p=0,g=0,u=0,m=0,v=null,f=new ih(s,e),y=-1,b=!1,w=null;for($p.lastIndex=0,n.m3u8=t,n.hasVariableRefs=fp(t);null!==(l=$p.exec(t));){b&&(b=!1,f=new ih(s,e),f.start=u,f.sn=p,f.cc=m,f.level=i,h&&(f.initSegment=h,f.rawProgramDateTime=h.rawProgramDateTime,h.rawProgramDateTime=null,w&&(f.setByteRange(w),w=null)));const t=l[1];if(t){f.duration=parseFloat(t);const e=(" "+l[2]).slice(1);f.title=e||null,f.tagList.push(e?["INF",t,e]:["INF",t])}else if(l[3]){if(Oc(f.duration)){f.start=u,c&&Gp(f,c,n),f.sn=p,f.level=i,f.cc=m,o.push(f);const t=(" "+l[3]).slice(1);f.relurl=bp(n,t),Hp(f,v),v=f,u+=f.duration,p++,g=0,b=!0}}else if(l[4]){const t=(" "+l[4]).slice(1);v?f.setByteRange(t,v):f.setByteRange(t)}else if(l[5])f.rawProgramDateTime=(" "+l[5]).slice(1),f.tagList.push(["PROGRAM-DATE-TIME",f.rawProgramDateTime]),-1===y&&(y=o.length);else{if(l=l[0].match(Up),!l){Gc.warn("No matches on slow regex match for level playlist!");continue}for(d=1;d<l.length&&void 0===l[d];d++);const t=(" "+l[d]).slice(1),a=(" "+l[d+1]).slice(1),u=l[d+2]?(" "+l[d+2]).slice(1):"";switch(t){case"PLAYLIST-TYPE":n.type=a.toUpperCase();break;case"MEDIA-SEQUENCE":p=n.startSN=parseInt(a);break;case"SKIP":{const t=new Kc(a);yp(n,t,["RECENTLY-REMOVED-DATERANGES"]);const e=t.decimalInteger("SKIPPED-SEGMENTS");if(Oc(e)){n.skippedSegments=e;for(let t=e;t--;)o.unshift(null);p+=e}const i=t.enumeratedString("RECENTLY-REMOVED-DATERANGES");i&&(n.recentlyRemovedDateranges=i.split("\t"));break}case"TARGETDURATION":n.targetduration=Math.max(parseInt(a),1);break;case"VERSION":n.version=parseInt(a);break;case"INDEPENDENT-SEGMENTS":case"EXTM3U":break;case"ENDLIST":n.live=!1;break;case"#":(a||u)&&f.tagList.push(u?[a,u]:[a]);break;case"DISCONTINUITY":m++,f.tagList.push(["DIS"]);break;case"GAP":f.gap=!0,f.tagList.push([t]);break;case"BITRATE":f.tagList.push([t,a]);break;case"DATERANGE":{const t=new Kc(a);yp(n,t,["ID","CLASS","START-DATE","END-DATE","SCTE35-CMD","SCTE35-OUT","SCTE35-IN"]),yp(n,t,t.clientAttrs);const e=new Yc(t,n.dateRanges[t.ID]);e.isValid||n.skippedSegments?n.dateRanges[e.id]=e:Gc.warn(`Ignoring invalid DATERANGE tag: "${a}"`),f.tagList.push(["EXT-X-DATERANGE",a]);break}case"DEFINE":{const t=new Kc(a);yp(n,t,["NAME","VALUE","IMPORT","QUERYPARAM"]),"IMPORT"in t?xp(n,t,r):wp(n,t,e)}break;case"DISCONTINUITY-SEQUENCE":m=parseInt(a);break;case"KEY":{const t=zp(a,e,n);if(t.isSupported()){if("NONE"===t.method){c=void 0;break}c||(c={}),c[t.keyFormat]&&(c=Ic({},c)),c[t.keyFormat]=t}else Gc.warn(`[Keys] Ignoring invalid EXT-X-KEY tag: "${a}"`);break}case"START":n.startTimeOffset=Np(a);break;case"MAP":{const t=new Kc(a);if(yp(n,t,["BYTERANGE","URI"]),f.duration){const a=new ih(s,e);Vp(a,t,i,c),h=a,f.initSegment=h,h.rawProgramDateTime&&!f.rawProgramDateTime&&(f.rawProgramDateTime=h.rawProgramDateTime)}else{const e=f.byteRangeEndOffset;if(e){const t=f.byteRangeStartOffset;w=`${e-t}@${t}`}else w=null;Vp(f,t,i,c),h=f,b=!0}break}case"SERVER-CONTROL":{const t=new Kc(a);n.canBlockReload=t.bool("CAN-BLOCK-RELOAD"),n.canSkipUntil=t.optionalFloat("CAN-SKIP-UNTIL",0),n.canSkipDateRanges=n.canSkipUntil>0&&t.bool("CAN-SKIP-DATERANGES"),n.partHoldBack=t.optionalFloat("PART-HOLD-BACK",0),n.holdBack=t.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{const t=new Kc(a);n.partTarget=t.decimalFloatingPoint("PART-TARGET");break}case"PART":{let t=n.partList;t||(t=n.partList=[]);const i=g>0?t[t.length-1]:void 0,s=g++,r=new Kc(a);yp(n,r,["BYTERANGE","URI"]);const o=new sh(r,f,e,s,i);t.push(o),f.duration+=o.duration;break}case"PRELOAD-HINT":{const t=new Kc(a);yp(n,t,["URI"]),n.preloadHint=t;break}case"RENDITION-REPORT":{const t=new Kc(a);yp(n,t,["URI"]),n.renditionReports=n.renditionReports||[],n.renditionReports.push(t);break}default:Gc.warn(`line parsed but not handled: ${l}`)}}}v&&!v.relurl?(o.pop(),u-=v.duration,n.partList&&(n.fragmentHint=v)):n.partList&&(Hp(f,v),f.cc=m,n.fragmentHint=f,c&&Gp(f,c,n));const x=o.length,k=o[0],S=o[x-1];if(u+=n.skippedSegments*n.targetduration,u>0&&x&&S){n.averagetargetduration=u/x;const t=S.sn;n.endSN="initSegment"!==t?t:0,n.live||(S.endList=!0),k&&(n.startCC=k.cc)}else n.endSN=0,n.startCC=0;return n.fragmentHint&&(u+=n.fragmentHint.duration),n.totalduration=u,n.endCC=m,y>0&&function(t,e){let i=t[e];for(let s=e;s--;){const e=t[s];if(!e)return;e.programDateTime=i.programDateTime-1e3*e.duration,i=e}}(o,y),n}}function zp(t,e,i){var s,a;const r=new Kc(t);yp(i,r,["KEYFORMAT","KEYFORMATVERSIONS","URI","IV","URI"]);const n=null!=(s=r.METHOD)?s:"",o=r.URI,l=r.hexadecimalInteger("IV"),d=r.KEYFORMATVERSIONS,c=null!=(a=r.KEYFORMAT)?a:"identity";o&&r.IV&&!l&&Gc.error(`Invalid IV: ${r.IV}`);const h=o?Fp.resolve(o,e):"",p=(d||"1").split("/").map(Number).filter(Number.isFinite);return new mp(n,h,c,p,l)}function Np(t){const e=new Kc(t).decimalFloatingPoint("TIME-OFFSET");return Oc(e)?e:null}function jp(t,e){let i=(t||"").split(/[ ,]+/).filter((t=>t));["video","audio","text"].forEach((t=>{const s=i.filter((e=>function(t,e){const i=Sp[e];return!!i&&!!i[t.slice(0,4)]}(e,t)));s.length&&(e[`${t}Codec`]=s.join(","),i=i.filter((t=>-1===s.indexOf(t))))})),e.unknownCodecs=i}function Bp(t,e,i){const s=e[i];s&&(t[i]=s)}function Hp(t,e){t.rawProgramDateTime?t.programDateTime=Date.parse(t.rawProgramDateTime):null!=e&&e.programDateTime&&(t.programDateTime=e.endProgramDateTime),Oc(t.programDateTime)||(t.programDateTime=null,t.rawProgramDateTime=null)}function Vp(t,e,i,s){t.relurl=e.URI,e.BYTERANGE&&t.setByteRange(e.BYTERANGE),t.level=i,t.sn="initSegment",s&&(t.levelkeys=s),t.initSegment=null}function Gp(t,e,i){t.levelkeys=e;const{encryptedFragments:s}=i;s.length&&s[s.length-1].levelkeys===e||!Object.keys(e).some((t=>e[t].isCommonEncryption))||s.push(t)}var qp="manifest",Zp="level",Kp="audioTrack",Wp="subtitleTrack",Yp="main",Qp="audio",Jp="subtitle";function Xp(t){const{type:e}=t;switch(e){case Kp:return Qp;case Wp:return Jp;default:return Yp}}function tg(t,e){let i=t.url;return void 0!==i&&0!==i.indexOf("data:")||(i=e.url),i}class eg{constructor(t){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.hls=t,this.registerListeners()}startLoad(t){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:t}=this;t.on(Fc.MANIFEST_LOADING,this.onManifestLoading,this),t.on(Fc.LEVEL_LOADING,this.onLevelLoading,this),t.on(Fc.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),t.on(Fc.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}unregisterListeners(){const{hls:t}=this;t.off(Fc.MANIFEST_LOADING,this.onManifestLoading,this),t.off(Fc.LEVEL_LOADING,this.onLevelLoading,this),t.off(Fc.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),t.off(Fc.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}createInternalLoader(t){const e=this.hls.config,i=e.pLoader,s=e.loader,a=new(i||s)(e);return this.loaders[t.type]=a,a}getInternalLoader(t){return this.loaders[t.type]}resetInternalLoader(t){this.loaders[t]&&delete this.loaders[t]}destroyInternalLoaders(){for(const t in this.loaders){const e=this.loaders[t];e&&e.destroy(),this.resetInternalLoader(t)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(t,e){const{url:i}=e;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:qp,url:i,deliveryDirectives:null})}onLevelLoading(t,e){const{id:i,level:s,pathwayId:a,url:r,deliveryDirectives:n}=e;this.load({id:i,level:s,pathwayId:a,responseType:"text",type:Zp,url:r,deliveryDirectives:n})}onAudioTrackLoading(t,e){const{id:i,groupId:s,url:a,deliveryDirectives:r}=e;this.load({id:i,groupId:s,level:null,responseType:"text",type:Kp,url:a,deliveryDirectives:r})}onSubtitleTrackLoading(t,e){const{id:i,groupId:s,url:a,deliveryDirectives:r}=e;this.load({id:i,groupId:s,level:null,responseType:"text",type:Wp,url:a,deliveryDirectives:r})}load(t){var e;const i=this.hls.config;let s,a=this.getInternalLoader(t);if(a){const e=a.context;if(e&&e.url===t.url&&e.level===t.level)return void Gc.trace("[playlist-loader]: playlist request ongoing");Gc.log(`[playlist-loader]: aborting previous loader for type: ${t.type}`),a.abort()}if(s=t.type===qp?i.manifestLoadPolicy.default:Ic({},i.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),a=this.createInternalLoader(t),Oc(null==(e=t.deliveryDirectives)?void 0:e.part)){let e;if(t.type===Zp&&null!==t.level?e=this.hls.levels[t.level].details:t.type===Kp&&null!==t.id?e=this.hls.audioTracks[t.id].details:t.type===Wp&&null!==t.id&&(e=this.hls.subtitleTracks[t.id].details),e){const t=e.partTarget,i=e.targetduration;if(t&&i){const e=1e3*Math.max(3*t,.8*i);s=Ic({},s,{maxTimeToFirstByteMs:Math.min(e,s.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(e,s.maxTimeToFirstByteMs)})}}}const r=s.errorRetry||s.timeoutRetry||{},n={loadPolicy:s,timeout:s.maxLoadTimeMs,maxRetry:r.maxNumRetry||0,retryDelay:r.retryDelayMs||0,maxRetryDelay:r.maxRetryDelayMs||0},o={onSuccess:(t,e,i,s)=>{const a=this.getInternalLoader(i);this.resetInternalLoader(i.type);const r=t.data;0===r.indexOf("#EXTM3U")?(e.parsing.start=performance.now(),Fp.isMediaPlaylist(r)?this.handleTrackOrLevelPlaylist(t,e,i,s||null,a):this.handleMasterPlaylist(t,e,i,s)):this.handleManifestParsingError(t,i,new Error("no EXTM3U delimiter"),s||null,e)},onError:(t,e,i,s)=>{this.handleNetworkError(e,i,!1,t,s)},onTimeout:(t,e,i)=>{this.handleNetworkError(e,i,!0,void 0,t)}};a.load(t,n,o)}handleMasterPlaylist(t,e,i,s){const a=this.hls,r=t.data,n=tg(t,i),o=Fp.parseMasterPlaylist(r,n);if(o.playlistParsingError)return void this.handleManifestParsingError(t,i,o.playlistParsingError,s,e);const{contentSteering:l,levels:d,sessionData:c,sessionKeys:h,startTimeOffset:p,variableList:g}=o;this.variableList=g;const{AUDIO:u=[],SUBTITLES:m,"CLOSED-CAPTIONS":v}=Fp.parseMasterPlaylistMedia(r,n,o);if(u.length){u.some((t=>!t.url))||!d[0].audioCodec||d[0].attrs.AUDIO||(Gc.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),u.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new Kc({}),bitrate:0,url:""}))}a.trigger(Fc.MANIFEST_LOADED,{levels:d,audioTracks:u,subtitles:m,captions:v,contentSteering:l,url:n,stats:e,networkDetails:s,sessionData:c,sessionKeys:h,startTimeOffset:p,variableList:g})}handleTrackOrLevelPlaylist(t,e,i,s,a){const r=this.hls,{id:n,level:o,type:l}=i,d=tg(t,i),c=Oc(o)?o:Oc(n)?n:0,h=Xp(i),p=Fp.parseLevelPlaylist(t.data,d,c,h,0,this.variableList);if(l===qp){const t={attrs:new Kc({}),bitrate:0,details:p,name:"",url:d};r.trigger(Fc.MANIFEST_LOADED,{levels:[t],audioTracks:[],url:d,stats:e,networkDetails:s,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}e.parsing.end=performance.now(),i.levelDetails=p,this.handlePlaylistLoaded(p,t,e,i,s,a)}handleManifestParsingError(t,e,i,s,a){this.hls.trigger(Fc.ERROR,{type:zc.NETWORK_ERROR,details:Nc.MANIFEST_PARSING_ERROR,fatal:e.type===qp,url:t.url,err:i,error:i,reason:i.message,response:t,context:e,networkDetails:s,stats:a})}handleNetworkError(t,e,i=!1,s,a){let r=`A network ${i?"timeout":"error"+(s?" (status "+s.code+")":"")} occurred while loading ${t.type}`;t.type===Zp?r+=`: ${t.level} id: ${t.id}`:t.type!==Kp&&t.type!==Wp||(r+=` id: ${t.id} group-id: "${t.groupId}"`);const n=new Error(r);Gc.warn(`[playlist-loader]: ${r}`);let o=Nc.UNKNOWN,l=!1;const d=this.getInternalLoader(t);switch(t.type){case qp:o=i?Nc.MANIFEST_LOAD_TIMEOUT:Nc.MANIFEST_LOAD_ERROR,l=!0;break;case Zp:o=i?Nc.LEVEL_LOAD_TIMEOUT:Nc.LEVEL_LOAD_ERROR,l=!1;break;case Kp:o=i?Nc.AUDIO_TRACK_LOAD_TIMEOUT:Nc.AUDIO_TRACK_LOAD_ERROR,l=!1;break;case Wp:o=i?Nc.SUBTITLE_TRACK_LOAD_TIMEOUT:Nc.SUBTITLE_LOAD_ERROR,l=!1}d&&this.resetInternalLoader(t.type);const c={type:zc.NETWORK_ERROR,details:o,fatal:l,url:t.url,loader:d,context:t,error:n,networkDetails:e,stats:a};if(s){const i=(null==e?void 0:e.url)||t.url;c.response=Mc({url:i,data:void 0},s)}this.hls.trigger(Fc.ERROR,c)}handlePlaylistLoaded(t,e,i,s,a,r){const n=this.hls,{type:o,level:l,id:d,groupId:c,deliveryDirectives:h}=s,p=tg(e,s),g=Xp(s),u="number"==typeof s.level&&g===Yp?l:void 0;if(!t.fragments.length){const t=new Error("No Segments found in Playlist");return void n.trigger(Fc.ERROR,{type:zc.NETWORK_ERROR,details:Nc.LEVEL_EMPTY_ERROR,fatal:!1,url:p,error:t,reason:t.message,response:e,context:s,level:u,parent:g,networkDetails:a,stats:i})}t.targetduration||(t.playlistParsingError=new Error("Missing Target Duration"));const m=t.playlistParsingError;if(m)n.trigger(Fc.ERROR,{type:zc.NETWORK_ERROR,details:Nc.LEVEL_PARSING_ERROR,fatal:!1,url:p,error:m,reason:m.message,response:e,context:s,level:u,parent:g,networkDetails:a,stats:i});else switch(t.live&&r&&(r.getCacheAge&&(t.ageHeader=r.getCacheAge()||0),r.getCacheAge&&!isNaN(t.ageHeader)||(t.ageHeader=0)),o){case qp:case Zp:n.trigger(Fc.LEVEL_LOADED,{details:t,level:u||0,id:d||0,stats:i,networkDetails:a,deliveryDirectives:h});break;case Kp:n.trigger(Fc.AUDIO_TRACK_LOADED,{details:t,id:d||0,groupId:c||"",stats:i,networkDetails:a,deliveryDirectives:h});break;case Wp:n.trigger(Fc.SUBTITLE_TRACK_LOADED,{details:t,id:d||0,groupId:c||"",stats:i,networkDetails:a,deliveryDirectives:h})}}}function ig(t,e){let i;try{i=new Event("addtrack")}catch(s){i=document.createEvent("Event"),i.initEvent("addtrack",!1,!1)}i.track=t,e.dispatchEvent(i)}function sg(t,e){const i=t.mode;if("disabled"===i&&(t.mode="hidden"),t.cues&&!t.cues.getCueById(e.id))try{if(t.addCue(e),!t.cues.getCueById(e.id))throw new Error(`addCue is failed for: ${e}`)}catch(s){Gc.debug(`[texttrack-utils]: ${s}`);try{const i=new self.TextTrackCue(e.startTime,e.endTime,e.text);i.id=e.id,t.addCue(i)}catch(a){Gc.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${a}`)}}"disabled"===i&&(t.mode=i)}function ag(t){const e=t.mode;if("disabled"===e&&(t.mode="hidden"),t.cues)for(let i=t.cues.length;i--;)t.removeCue(t.cues[i]);"disabled"===e&&(t.mode=e)}function rg(t,e,i,s){const a=t.mode;if("disabled"===a&&(t.mode="hidden"),t.cues&&t.cues.length>0){const a=function(t,e,i){const s=[],a=function(t,e){if(e<t[0].startTime)return 0;const i=t.length-1;if(e>t[i].endTime)return-1;let s=0,a=i;for(;s<=a;){const r=Math.floor((a+s)/2);if(e<t[r].startTime)a=r-1;else{if(!(e>t[r].startTime&&s<i))return r;s=r+1}}return t[s].startTime-e<e-t[a].startTime?s:a}(t,e);if(a>-1)for(let r=a,n=t.length;r<n;r++){const a=t[r];if(a.startTime>=e&&a.endTime<=i)s.push(a);else if(a.startTime>i)return s}return s}(t.cues,e,i);for(let e=0;e<a.length;e++)s&&!s(a[e])||t.removeCue(a[e])}"disabled"===a&&(t.mode=a)}function ng(t){const e=[];for(let i=0;i<t.length;i++){const s=t[i];"subtitles"!==s.kind&&"captions"!==s.kind||!s.label||e.push(t[i])}return e}var og="org.id3",lg="com.apple.quicktime.HLS",dg="https://aomedia.org/emsg/ID3";function cg(){if("undefined"!=typeof self)return self.VTTCue||self.TextTrackCue}function hg(t,e,i,s,a){let r=new t(e,i,"");try{r.value=s,a&&(r.type=a)}catch(n){r=new t(e,i,JSON.stringify(a?Mc({type:a},s):s))}return r}const pg=(()=>{const t=cg();try{t&&new t(0,Number.POSITIVE_INFINITY,"")}catch(e){return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();function gg(t,e){return t.getTime()/1e3-e}class ug{constructor(t){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=t,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null}_registerListeners(){const{hls:t}=this;t.on(Fc.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(Fc.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(Fc.MANIFEST_LOADING,this.onManifestLoading,this),t.on(Fc.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),t.on(Fc.BUFFER_FLUSHING,this.onBufferFlushing,this),t.on(Fc.LEVEL_UPDATED,this.onLevelUpdated,this)}_unregisterListeners(){const{hls:t}=this;t.off(Fc.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(Fc.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(Fc.MANIFEST_LOADING,this.onManifestLoading,this),t.off(Fc.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),t.off(Fc.BUFFER_FLUSHING,this.onBufferFlushing,this),t.off(Fc.LEVEL_UPDATED,this.onLevelUpdated,this)}onMediaAttached(t,e){this.media=e.media}onMediaDetaching(){this.id3Track&&(ag(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(t){const e=this.getID3Track(t.textTracks);return e.mode="hidden",e}getID3Track(t){if(this.media){for(let e=0;e<t.length;e++){const i=t[e];if("metadata"===i.kind&&"id3"===i.label)return ig(i,this.media),i}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(t,e){if(!this.media)return;const{hls:{config:{enableEmsgMetadataCues:i,enableID3MetadataCues:s}}}=this;if(!i&&!s)return;const{samples:a}=e;this.id3Track||(this.id3Track=this.createTrack(this.media));const r=cg();if(r)for(let n=0;n<a.length;n++){const t=a[n].type;if(t===dg&&!i||!s)continue;const e=Dh(a[n].data);if(e){const i=a[n].pts;let s=i+a[n].duration;s>pg&&(s=pg);s-i<=0&&(s=i+.25);for(let a=0;a<e.length;a++){const n=e[a];if(!Mh(n)){this.updateId3CueEnds(i,t);const e=hg(r,i,s,n,t);e&&this.id3Track.addCue(e)}}}}}updateId3CueEnds(t,e){var i;const s=null==(i=this.id3Track)?void 0:i.cues;if(s)for(let a=s.length;a--;){const i=s[a];i.type===e&&i.startTime<t&&i.endTime===pg&&(i.endTime=t)}}onBufferFlushing(t,{startOffset:e,endOffset:i,type:s}){const{id3Track:a,hls:r}=this;if(!r)return;const{config:{enableEmsgMetadataCues:n,enableID3MetadataCues:o}}=r;if(a&&(n||o)){let t;t="audio"===s?t=>t.type===og&&o:"video"===s?t=>t.type===dg&&n:t=>t.type===og&&o||t.type===dg&&n,rg(a,e,i,t)}}onLevelUpdated(t,{details:e}){if(!this.media||!e.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)return;const{dateRangeCuesAppended:i,id3Track:s}=this,{dateRanges:a}=e,r=Object.keys(a);if(s){const t=Object.keys(i).filter((t=>!r.includes(t)));for(let e=t.length;e--;){const a=t[e];Object.keys(i[a].cues).forEach((t=>{s.removeCue(i[a].cues[t])})),delete i[a]}}const n=e.fragments[e.fragments.length-1];if(0===r.length||!Oc(null==n?void 0:n.programDateTime))return;this.id3Track||(this.id3Track=this.createTrack(this.media));const o=n.programDateTime/1e3-n.start,l=cg();for(let h=0;h<r.length;h++){const t=r[h],e=a[t],s=gg(e.startDate,o),n=i[t],p=(null==n?void 0:n.cues)||{};let g=(null==n?void 0:n.durationKnown)||!1,u=pg;const m=e.endDate;if(m)u=gg(m,o),g=!0;else if(e.endOnNext&&!g){const t=r.reduce(((t,i)=>{if(i!==e.id){const s=a[i];if(s.class===e.class&&s.startDate>e.startDate&&(!t||e.startDate<t.startDate))return s}return t}),null);t&&(u=gg(t.startDate,o),g=!0)}const v=Object.keys(e.attr);for(let i=0;i<v.length;i++){const a=v[i];if("ID"===(c=a)||"CLASS"===c||"START-DATE"===c||"DURATION"===c||"END-DATE"===c||"END-ON-NEXT"===c)continue;const r=p[a];if(r)g&&!n.durationKnown&&(r.endTime=u);else if(l){let i=e.attr[a];Wc(a)&&(d=i,i=Uint8Array.from(d.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer);const r=hg(l,s,u,{key:a,data:i},lg);r&&(r.id=t,this.id3Track.addCue(r),p[a]=r)}}i[t]={cues:p,dateRange:e,durationKnown:g}}var d,c}}class mg{constructor(t){this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=()=>this.timeupdate(),this.hls=t,this.config=t.config,this.registerListeners()}get latency(){return this._latency||0}get maxLatency(){const{config:t,levelDetails:e}=this;return void 0!==t.liveMaxLatencyDuration?t.liveMaxLatencyDuration:e?t.liveMaxLatencyDurationCount*e.targetduration:0}get targetLatency(){const{levelDetails:t}=this;if(null===t)return null;const{holdBack:e,partHoldBack:i,targetduration:s}=t,{liveSyncDuration:a,liveSyncDurationCount:r,lowLatencyMode:n}=this.config,o=this.hls.userConfig;let l=n&&i||e;(o.liveSyncDuration||o.liveSyncDurationCount||0===l)&&(l=void 0!==a?a:r*s);const d=s;return l+Math.min(1*this.stallCount,d)}get liveSyncPosition(){const t=this.estimateLiveEdge(),e=this.targetLatency,i=this.levelDetails;if(null===t||null===e||null===i)return null;const s=i.edge,a=t-e-this.edgeStalled,r=s-i.totalduration,n=s-(this.config.lowLatencyMode&&i.partTarget||i.targetduration);return Math.min(Math.max(r,a),n)}get drift(){const{levelDetails:t}=this;return null===t?1:t.drift}get edgeStalled(){const{levelDetails:t}=this;if(null===t)return 0;const e=3*(this.config.lowLatencyMode&&t.partTarget||t.targetduration);return Math.max(t.age-e,0)}get forwardBufferLength(){const{media:t,levelDetails:e}=this;if(!t||!e)return 0;const i=t.buffered.length;return(i?t.buffered.end(i-1):e.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null}registerListeners(){this.hls.on(Fc.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(Fc.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(Fc.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(Fc.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(Fc.ERROR,this.onError,this)}unregisterListeners(){this.hls.off(Fc.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(Fc.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.off(Fc.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(Fc.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.off(Fc.ERROR,this.onError,this)}onMediaAttached(t,e){this.media=e.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)}onManifestLoading(){this.levelDetails=null,this._latency=null,this.stallCount=0}onLevelUpdated(t,{details:e}){this.levelDetails=e,e.advanced&&this.timeupdate(),!e.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)}onError(t,e){var i;e.details===Nc.BUFFER_STALLED_ERROR&&(this.stallCount++,null!=(i=this.levelDetails)&&i.live&&Gc.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))}timeupdate(){const{media:t,levelDetails:e}=this;if(!t||!e)return;this.currentTime=t.currentTime;const i=this.computeLatency();if(null===i)return;this._latency=i;const{lowLatencyMode:s,maxLiveSyncPlaybackRate:a}=this.config;if(!s||1===a||!e.live)return;const r=this.targetLatency;if(null===r)return;const n=i-r;if(n<Math.min(this.maxLatency,r+e.targetduration)&&n>.05&&this.forwardBufferLength>1){const e=Math.min(2,Math.max(1,a)),i=Math.round(2/(1+Math.exp(-.75*n-this.edgeStalled))*20)/20;t.playbackRate=Math.min(e,Math.max(1,i))}else 1!==t.playbackRate&&0!==t.playbackRate&&(t.playbackRate=1)}estimateLiveEdge(){const{levelDetails:t}=this;return null===t?null:t.edge+t.age}computeLatency(){const t=this.estimateLiveEdge();return null===t?null:t-this.currentTime}}const vg=["NONE","TYPE-0","TYPE-1",null];const fg=["SDR","PQ","HLG"];var yg="",bg="YES",wg="v2";function xg(t){const{canSkipUntil:e,canSkipDateRanges:i,age:s}=t;return e&&s<e/2?i?wg:bg:yg}class kg{constructor(t,e,i){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=t,this.part=e,this.skip=i}addDirectives(t){const e=new self.URL(t);return void 0!==this.msn&&e.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&e.searchParams.set("_HLS_part",this.part.toString()),this.skip&&e.searchParams.set("_HLS_skip",this.skip),e.href}}class Sg{constructor(t){this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[t.url],this._attrs=[t.attrs],this.bitrate=t.bitrate,t.details&&(this.details=t.details),this.id=t.id||0,this.name=t.name,this.width=t.width||0,this.height=t.height||0,this.frameRate=t.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=t.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=t.audioCodec,this.videoCodec=t.videoCodec,this.codecSet=[t.videoCodec,t.audioCodec].filter((t=>!!t)).map((t=>t.substring(0,4))).join(","),this.addGroupId("audio",t.attrs.AUDIO),this.addGroupId("text",t.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(t){return _g(this._audioGroups,t)}hasSubtitleGroup(t){return _g(this._subtitleGroups,t)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(t,e){if(e)if("audio"===t){let t=this._audioGroups;t||(t=this._audioGroups=[]),-1===t.indexOf(e)&&t.push(e)}else if("text"===t){let t=this._subtitleGroups;t||(t=this._subtitleGroups=[]),-1===t.indexOf(e)&&t.push(e)}}get urlId(){return 0}set urlId(t){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var t;return null==(t=this.audioGroups)?void 0:t[0]}get textGroupId(){var t;return null==(t=this.subtitleGroups)?void 0:t[0]}addFallback(){}}function _g(t,e){return!(!e||!t)&&-1!==t.indexOf(e)}function Cg(t,e){const i=e.startPTS;if(Oc(i)){let s,a=0;e.sn>t.sn?(a=i-t.start,s=t):(a=t.start-i,s=e),s.duration!==a&&(s.duration=a)}else if(e.sn>t.sn){t.cc===e.cc&&t.minEndPTS?e.start=t.start+(t.minEndPTS-t.start):e.start=t.start+t.duration}else e.start=Math.max(t.start-e.duration,0)}function Pg(t,e,i,s,a,r){s-i<=0&&(Gc.warn("Fragment should have a positive duration",e),s=i+e.duration,r=a+e.duration);let n=i,o=s;const l=e.startPTS,d=e.endPTS;if(Oc(l)){const t=Math.abs(l-i);Oc(e.deltaPTS)?e.deltaPTS=Math.max(t,e.deltaPTS):e.deltaPTS=t,n=Math.max(i,l),i=Math.min(i,l),a=Math.min(a,e.startDTS),o=Math.min(s,d),s=Math.max(s,d),r=Math.max(r,e.endDTS)}const c=i-e.start;0!==e.start&&(e.start=i),e.duration=s-e.start,e.startPTS=i,e.maxStartPTS=n,e.startDTS=a,e.endPTS=s,e.minEndPTS=o,e.endDTS=r;const h=e.sn;if(!t||h<t.startSN||h>t.endSN)return 0;let p;const g=h-t.startSN,u=t.fragments;for(u[g]=e,p=g;p>0;p--)Cg(u[p],u[p-1]);for(p=g;p<u.length-1;p++)Cg(u[p],u[p+1]);return t.fragmentHint&&Cg(u[u.length-1],t.fragmentHint),t.PTSKnown=t.alignedSliding=!0,c}function Lg(t,e){let i=null;const s=t.fragments;for(let l=s.length-1;l>=0;l--){const t=s[l].initSegment;if(t){i=t;break}}t.fragmentHint&&delete t.fragmentHint.endPTS;let a,r=0;if(function(t,e,i){const s=e.skippedSegments,a=Math.max(t.startSN,e.startSN)-e.startSN,r=(t.fragmentHint?1:0)+(s?e.endSN:Math.min(t.endSN,e.endSN))-e.startSN,n=e.startSN-t.startSN,o=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,l=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments;for(let d=a;d<=r;d++){const t=l[n+d];let a=o[d];s&&!a&&d<s&&(a=e.fragments[d]=t),t&&a&&i(t,a)}}(t,e,((t,s)=>{t.relurl&&(r=t.cc-s.cc),Oc(t.startPTS)&&Oc(t.endPTS)&&(s.start=s.startPTS=t.startPTS,s.startDTS=t.startDTS,s.maxStartPTS=t.maxStartPTS,s.endPTS=t.endPTS,s.endDTS=t.endDTS,s.minEndPTS=t.minEndPTS,s.duration=t.endPTS-t.startPTS,s.duration&&(a=s),e.PTSKnown=e.alignedSliding=!0),s.elementaryStreams=t.elementaryStreams,s.loader=t.loader,s.stats=t.stats,t.initSegment&&(s.initSegment=t.initSegment,i=t.initSegment)})),i){(e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments).forEach((t=>{var e;!t||t.initSegment&&t.initSegment.relurl!==(null==(e=i)?void 0:e.relurl)||(t.initSegment=i)}))}if(e.skippedSegments)if(e.deltaUpdateFailed=e.fragments.some((t=>!t)),e.deltaUpdateFailed){Gc.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let t=e.skippedSegments;t--;)e.fragments.shift();e.startSN=e.fragments[0].sn,e.startCC=e.fragments[0].cc}else e.canSkipDateRanges&&(e.dateRanges=function(t,e,i){const s=Ic({},t);i&&i.forEach((t=>{delete s[t]}));return Object.keys(e).forEach((t=>{const i=new Yc(e[t].attr,s[t]);i.isValid?s[t]=i:Gc.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${JSON.stringify(e[t].attr)}"`)})),s}(t.dateRanges,e.dateRanges,e.recentlyRemovedDateranges));const n=e.fragments;if(r){Gc.warn("discontinuity sliding from playlist, take drift into account");for(let t=0;t<n.length;t++)n[t].cc+=r}e.skippedSegments&&(e.startCC=e.fragments[0].cc),function(t,e,i){if(t&&e){let s=0;for(let a=0,r=t.length;a<=r;a++){const r=t[a],n=e[a+s];r&&n&&r.index===n.index&&r.fragment.sn===n.fragment.sn?i(r,n):s--}}}(t.partList,e.partList,((t,e)=>{e.elementaryStreams=t.elementaryStreams,e.stats=t.stats})),a?Pg(e,a,a.startPTS,a.endPTS,a.startDTS,a.endDTS):Tg(t,e),n.length&&(e.totalduration=e.edge-n[0].start),e.driftStartTime=t.driftStartTime,e.driftStart=t.driftStart;const o=e.advancedDateTime;if(e.advanced&&o){const t=e.edge;e.driftStart||(e.driftStartTime=o,e.driftStart=t),e.driftEndTime=o,e.driftEnd=t}else e.driftEndTime=t.driftEndTime,e.driftEnd=t.driftEnd,e.advancedDateTime=t.advancedDateTime}function Tg(t,e){const i=e.startSN+e.skippedSegments-t.startSN,s=t.fragments;i<0||i>=s.length||Eg(e,s[i].start)}function Eg(t,e){if(e){const i=t.fragments;for(let s=t.skippedSegments;s<i.length;s++)i[s].start+=e;t.fragmentHint&&(t.fragmentHint.start+=e)}}function Ag(t,e,i){var s;return null!=t&&t.details?Mg(null==(s=t.details)?void 0:s.partList,e,i):null}function Mg(t,e,i){if(t)for(let s=t.length;s--;){const a=t[s];if(a.index===i&&a.fragment.sn===e)return a}return null}function Rg(t){t.forEach(((t,e)=>{const{details:i}=t;null!=i&&i.fragments&&i.fragments.forEach((t=>{t.level=e}))}))}function Dg(t){switch(t.details){case Nc.FRAG_LOAD_TIMEOUT:case Nc.KEY_LOAD_TIMEOUT:case Nc.LEVEL_LOAD_TIMEOUT:case Nc.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function Ig(t,e){const i=Dg(e);return t.default[(i?"timeout":"error")+"Retry"]}function Og(t,e){const i="linear"===t.backoff?1:Math.pow(2,e);return Math.min(i*t.retryDelayMs,t.maxRetryDelayMs)}function $g(t){return Mc(Mc({},t),{errorRetry:null,timeoutRetry:null})}function Ug(t,e,i,s){if(!t)return!1;const a=null==s?void 0:s.code,r=e<t.maxNumRetry&&(function(t){return 0===t&&!1===navigator.onLine||!!t&&(t<400||t>499)}(a)||!!i);return t.shouldRetry?t.shouldRetry(t,e,i,s,r):r}const Fg=function(t,e){let i=0,s=t.length-1,a=null,r=null;for(;i<=s;){a=(i+s)/2|0,r=t[a];const n=e(r);if(n>0)i=a+1;else{if(!(n<0))return r;s=a-1}}return null};function zg(t,e,i=0,s=0,a=.005){let r=null;if(t){r=e[t.sn-e[0].sn+1]||null;const s=t.endDTS-i;s>0&&s<15e-7&&(i+=15e-7)}else 0===i&&0===e[0].start&&(r=e[0]);if(r&&((!t||t.level===r.level)&&0===Ng(i,s,r)||function(t,e,i){if(e&&0===e.start&&e.level<t.level&&(e.endPTS||0)>0){const s=e.tagList.reduce(((t,e)=>("INF"===e[0]&&(t+=parseFloat(e[1])),t)),i);return t.start<=s}return!1}(r,t,Math.min(a,s))))return r;const n=Fg(e,Ng.bind(null,i,s));return!n||n===t&&r?r:n}function Ng(t=0,e=0,i){if(i.start<=t&&i.start+i.duration>t)return 0;const s=Math.min(e,i.duration+(i.deltaPTS?i.deltaPTS:0));return i.start+i.duration-s<=t?1:i.start-s>t&&i.start?-1:0}function jg(t,e,i){const s=1e3*Math.min(e,i.duration+(i.deltaPTS?i.deltaPTS:0));return(i.endProgramDateTime||0)-s>t}var Bg=0,Hg=2,Vg=3,Gg=5,qg=0,Zg=1,Kg=2;class Wg{constructor(t,e){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.log=void 0,this.warn=void 0,this.log=Gc.log.bind(Gc,`${e}:`),this.warn=Gc.warn.bind(Gc,`${e}:`),this.hls=t}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){-1!==this.timer&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.requestScheduled=-1,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(t,e,i){const s=null==e?void 0:e.renditionReports;if(s){let r=-1;for(let i=0;i<s.length;i++){const n=s[i];let o;try{o=new self.URL(n.URI,e.url).href}catch(a){Gc.warn(`Could not construct new URL for Rendition Report: ${a}`),o=n.URI||""}if(o===t){r=i;break}o===t.substring(0,o.length)&&(r=i)}if(-1!==r){const t=s[r],a=parseInt(t["LAST-MSN"])||(null==e?void 0:e.lastPartSn);let n=parseInt(t["LAST-PART"])||(null==e?void 0:e.lastPartIndex);if(this.hls.config.lowLatencyMode){const t=Math.min(e.age-e.partTarget,e.targetduration);n>=0&&t>e.partTarget&&(n+=1)}const o=i&&xg(i);return new kg(a,n>=0?n:void 0,o)}}}loadPlaylist(t){-1===this.requestScheduled&&(this.requestScheduled=self.performance.now())}shouldLoadPlaylist(t){return this.canLoad&&!!t&&!!t.url&&(!t.details||t.details.live)}shouldReloadPlaylist(t){return-1===this.timer&&-1===this.requestScheduled&&this.shouldLoadPlaylist(t)}playlistLoaded(t,e,i){const{details:s,stats:a}=e,r=self.performance.now(),n=a.loading.first?Math.max(0,r-a.loading.first):0;if(s.advancedDateTime=Date.now()-n,s.live||null!=i&&i.live){if(s.reloaded(i),i&&this.log(`live playlist ${t} ${s.advanced?"REFRESHED "+s.lastPartSn+"-"+s.lastPartIndex:s.updated?"UPDATED":"MISSED"}`),i&&s.fragments.length>0&&Lg(i,s),!this.canLoad||!s.live)return;let n,o,l;if(s.canBlockReload&&s.endSN&&s.advanced){const t=this.hls.config.lowLatencyMode,a=s.lastPartSn,r=s.endSN,d=s.lastPartIndex,c=a===r;-1!==d?(o=c?r+1:a,l=c?t?0:d:d+1):o=r+1;const h=s.age,p=h+s.ageHeader;let g=Math.min(p-s.partTarget,1.5*s.targetduration);if(g>0){if(i&&g>i.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${i.tuneInGoal} to: ${g} with playlist age: ${s.age}`),g=0;else{const t=Math.floor(g/s.targetduration);if(o+=t,void 0!==l){l+=Math.round(g%s.targetduration/s.partTarget)}this.log(`CDN Tune-in age: ${s.ageHeader}s last advanced ${h.toFixed(2)}s goal: ${g} skip sn ${t} to part ${l}`)}s.tuneInGoal=g}if(n=this.getDeliveryDirectives(s,e.deliveryDirectives,o,l),t||!c)return void this.loadPlaylist(n)}else(s.canBlockReload||s.canSkipUntil)&&(n=this.getDeliveryDirectives(s,e.deliveryDirectives,o,l));const d=this.hls.mainForwardBufferInfo,c=d?d.end-d.len:0,h=function(t,e=1/0){let i=1e3*t.targetduration;if(t.updated){const s=t.fragments,a=4;if(s.length&&i*a>e){const t=1e3*s[s.length-1].duration;t<i&&(i=t)}}else i/=2;return Math.round(i)}(s,1e3*(s.edge-c));s.updated&&r>this.requestScheduled+h&&(this.requestScheduled=a.loading.start),void 0!==o&&s.canBlockReload?this.requestScheduled=a.loading.first+h-(1e3*s.partTarget||1e3):-1===this.requestScheduled||this.requestScheduled+h<r?this.requestScheduled=r:this.requestScheduled-r<=0&&(this.requestScheduled+=h);let p=this.requestScheduled-r;p=Math.max(0,p),this.log(`reload live playlist ${t} in ${Math.round(p)} ms`),this.timer=self.setTimeout((()=>this.loadPlaylist(n)),p)}else this.clearTimer()}getDeliveryDirectives(t,e,i,s){let a=xg(t);return null!=e&&e.skip&&t.deltaUpdateFailed&&(i=e.msn,s=e.part,a=yg),new kg(i,s,a)}checkRetry(t){const e=t.details,i=Dg(t),s=t.errorAction,{action:a,retryCount:r=0,retryConfig:n}=s||{},o=!!s&&!!n&&(a===Gg||!s.resolved&&a===Hg);if(o){var l;if(this.requestScheduled=-1,r>=n.maxNumRetry)return!1;if(i&&null!=(l=t.context)&&l.deliveryDirectives)this.warn(`Retrying playlist loading ${r+1}/${n.maxNumRetry} after "${e}" without delivery-directives`),this.loadPlaylist();else{const t=Og(n,r);this.timer=self.setTimeout((()=>this.loadPlaylist()),t),this.warn(`Retrying playlist loading ${r+1}/${n.maxNumRetry} after "${e}" in ${t}ms`)}t.levelRetry=!0,s.resolved=!0}return o}}class Yg{constructor(t,e=0,i=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=t,this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=e,this.totalWeight_=i}sample(t,e){const i=Math.pow(this.alpha_,t);this.estimate_=e*(1-i)+i*this.estimate_,this.totalWeight_+=t}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const t=1-Math.pow(this.alpha_,this.totalWeight_);if(t)return this.estimate_/t}return this.estimate_}}class Qg{constructor(t,e,i,s=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=i,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Yg(t),this.fast_=new Yg(e),this.defaultTTFB_=s,this.ttfb_=new Yg(t)}update(t,e){const{slow_:i,fast_:s,ttfb_:a}=this;i.halfLife!==t&&(this.slow_=new Yg(t,i.getEstimate(),i.getTotalWeight())),s.halfLife!==e&&(this.fast_=new Yg(e,s.getEstimate(),s.getTotalWeight())),a.halfLife!==t&&(this.ttfb_=new Yg(t,a.getEstimate(),a.getTotalWeight()))}sample(t,e){const i=(t=Math.max(t,this.minDelayMs_))/1e3,s=8*e/i;this.fast_.sample(i,s),this.slow_.sample(i,s)}sampleTTFB(t){const e=t/1e3,i=Math.sqrt(2)*Math.exp(-Math.pow(e,2)/2);this.ttfb_.sample(i,Math.max(t,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}destroy(){}}const Jg={supported:!0,configurations:[],decodingInfoResults:[{supported:!0,powerEfficient:!0,smooth:!0}]},Xg={};function tu(t,e,i,s,a,r){const n=t.audioCodec?t.audioGroups:null,o=null==r?void 0:r.audioCodec,l=null==r?void 0:r.channels,d=l?parseInt(l):o?1/0:2;let c=null;if(null!=n&&n.length)try{c=1===n.length&&n[0]?e.groups[n[0]].channels:n.reduce(((t,i)=>{if(i){const s=e.groups[i];if(!s)throw new Error(`Audio track group ${i} not found`);Object.keys(s.channels).forEach((e=>{t[e]=(t[e]||0)+s.channels[e]}))}return t}),{2:0})}catch(h){return!0}return void 0!==t.videoCodec&&(t.width>1920&&t.height>1088||t.height>1920&&t.width>1088||t.frameRate>Math.max(s,30)||"SDR"!==t.videoRange&&t.videoRange!==i||t.bitrate>Math.max(a,8e6))||!!c&&Oc(d)&&Object.keys(c).some((t=>parseInt(t)>d))}function eu(t,e,i){const s=t.videoCodec,a=t.audioCodec;if(!s||!a||!i)return Promise.resolve(Jg);const r={width:t.width,height:t.height,bitrate:Math.ceil(Math.max(.9*t.bitrate,t.averageBitrate)),framerate:t.frameRate||30},n=t.videoRange;"SDR"!==n&&(r.transferFunction=n.toLowerCase());const o=s.split(",").map((t=>({type:"media-source",video:Mc(Mc({},r),{},{contentType:Pp(t,"video")})})));return a&&t.audioGroups&&t.audioGroups.forEach((t=>{var i;t&&(null==(i=e.groups[t])||i.tracks.forEach((e=>{if(e.groupId===t){const t=e.channels||"",i=parseFloat(t);Oc(i)&&i>2&&o.push.apply(o,a.split(",").map((t=>({type:"media-source",audio:{contentType:Pp(t,"audio"),channels:""+i}}))))}})))})),Promise.all(o.map((t=>{const e=function(t){const{audio:e,video:i}=t,s=i||e;if(s){const t=s.contentType.split('"')[1];if(i)return`r${i.height}x${i.width}f${Math.ceil(i.framerate)}${i.transferFunction||"sd"}_${t}_${Math.ceil(i.bitrate/1e5)}`;if(e)return`c${e.channels}${e.spatialRendering?"s":"n"}_${t}`}return""}(t);return Xg[e]||(Xg[e]=i.decodingInfo(t))}))).then((t=>({supported:!t.some((t=>!t.supported)),configurations:o,decodingInfoResults:t}))).catch((t=>({supported:!1,configurations:o,decodingInfoResults:[],error:t})))}function iu(t,e){let i=!1,s=[];return t&&(i="SDR"!==t,s=[t]),e&&(s=e.allowedVideoRanges||fg.slice(0),i=void 0!==e.preferHDR?e.preferHDR:function(){if("function"==typeof matchMedia){const t=matchMedia("(dynamic-range: high)"),e=matchMedia("bad query");if(t.media!==e.media)return!0===t.matches}return!1}(),s=i?s.filter((t=>"SDR"!==t)):["SDR"]),{preferHDR:i,allowedVideoRanges:s}}function su(t,e){Gc.log(`[abr] start candidates with "${t}" ignored because ${e}`)}function au(t,e,i){if("attrs"in t){const i=e.indexOf(t);if(-1!==i)return i}for(let s=0;s<e.length;s++){if(ru(t,e[s],i))return s}return-1}function ru(t,e,i){const{groupId:s,name:a,lang:r,assocLang:n,characteristics:o,default:l}=t,d=t.forced;return(void 0===s||e.groupId===s)&&(void 0===a||e.name===a)&&(void 0===r||e.lang===r)&&(void 0===r||e.assocLang===n)&&(void 0===l||e.default===l)&&(void 0===d||e.forced===d)&&(void 0===o||function(t,e=""){const i=t.split(","),s=e.split(",");return i.length===s.length&&!i.some((t=>-1===s.indexOf(t)))}(o,e.characteristics))&&(void 0===i||i(t,e))}function nu(t,e){const{audioCodec:i,channels:s}=t;return!(void 0!==i&&(e.audioCodec||"").substring(0,4)!==i.substring(0,4)||void 0!==s&&s!==(e.channels||"2"))}function ou(t,e,i){for(let s=e;s>-1;s--)if(i(t[s]))return s;for(let s=e+1;s<t.length;s++)if(i(t[s]))return s;return-1}class lu{constructor(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(t){return!this._tickInterval&&(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,t),!0)}clearInterval(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)}clearNextTick(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)}tick(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}var du="NOT_LOADED",cu="APPENDING",hu="PARTIAL",pu="OK";class gu{constructor(t){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=t,this._registerListeners()}_registerListeners(){const{hls:t}=this;t.on(Fc.BUFFER_APPENDED,this.onBufferAppended,this),t.on(Fc.FRAG_BUFFERED,this.onFragBuffered,this),t.on(Fc.FRAG_LOADED,this.onFragLoaded,this)}_unregisterListeners(){const{hls:t}=this;t.off(Fc.BUFFER_APPENDED,this.onBufferAppended,this),t.off(Fc.FRAG_BUFFERED,this.onFragBuffered,this),t.off(Fc.FRAG_LOADED,this.onFragLoaded,this)}destroy(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(t,e){const i=this.activePartLists[e];if(i)for(let s=i.length;s--;){const e=i[s];if(!e)break;const a=e.end;if(e.start<=t&&null!==a&&t<=a)return e}return this.getBufferedFrag(t,e)}getBufferedFrag(t,e){const{fragments:i}=this,s=Object.keys(i);for(let a=s.length;a--;){const r=i[s[a]];if((null==r?void 0:r.body.type)===e&&r.buffered){const e=r.body;if(e.start<=t&&t<=e.end)return e}}return null}detectEvictedFragments(t,e,i,s){this.timeRanges&&(this.timeRanges[t]=e);const a=(null==s?void 0:s.fragment.sn)||-1;Object.keys(this.fragments).forEach((s=>{const r=this.fragments[s];if(!r)return;if(a>=r.body.sn)return;if(!r.buffered&&!r.loaded)return void(r.body.type===i&&this.removeFragment(r.body));const n=r.range[t];n&&n.time.some((t=>{const i=!this.isTimeBuffered(t.startPTS,t.endPTS,e);return i&&this.removeFragment(r.body),i}))}))}detectPartialFragments(t){const e=this.timeRanges,{frag:i,part:s}=t;if(!e||"initSegment"===i.sn)return;const a=mu(i),r=this.fragments[a];if(!r||r.buffered&&i.gap)return;const n=!i.relurl;if(Object.keys(e).forEach((t=>{const a=i.elementaryStreams[t];if(!a)return;const o=e[t],l=n||!0===a.partial;r.range[t]=this.getBufferedTimes(i,s,l,o)})),r.loaded=null,Object.keys(r.range).length){r.buffered=!0;(r.body.endList=i.endList||r.body.endList)&&(this.endListFragments[r.body.type]=r),uu(r)||this.removeParts(i.sn-1,i.type)}else this.removeFragment(r.body)}removeParts(t,e){const i=this.activePartLists[e];i&&(this.activePartLists[e]=i.filter((e=>e.fragment.sn>=t)))}fragBuffered(t,e){const i=mu(t);let s=this.fragments[i];!s&&e&&(s=this.fragments[i]={body:t,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},t.gap&&(this.hasGaps=!0)),s&&(s.loaded=null,s.buffered=!0)}getBufferedTimes(t,e,i,s){const a={time:[],partial:i},r=t.start,n=t.end,o=t.minEndPTS||n,l=t.maxStartPTS||r;for(let d=0;d<s.length;d++){const t=s.start(d)-this.bufferPadding,e=s.end(d)+this.bufferPadding;if(l>=t&&o<=e){a.time.push({startPTS:Math.max(r,s.start(d)),endPTS:Math.min(n,s.end(d))});break}if(r<e&&n>t){const t=Math.max(r,s.start(d)),e=Math.min(n,s.end(d));e>t&&(a.partial=!0,a.time.push({startPTS:t,endPTS:e}))}else if(n<=t)break}return a}getPartialFragment(t){let e,i,s,a=null,r=0;const{bufferPadding:n,fragments:o}=this;return Object.keys(o).forEach((l=>{const d=o[l];d&&uu(d)&&(i=d.body.start-n,s=d.body.end+n,t>=i&&t<=s&&(e=Math.min(t-i,s-t),r<=e&&(a=d.body,r=e)))})),a}isEndListAppended(t){const e=this.endListFragments[t];return void 0!==e&&(e.buffered||uu(e))}getState(t){const e=mu(t),i=this.fragments[e];return i?i.buffered?uu(i)?hu:pu:cu:du}isTimeBuffered(t,e,i){let s,a;for(let r=0;r<i.length;r++){if(s=i.start(r)-this.bufferPadding,a=i.end(r)+this.bufferPadding,t>=s&&e<=a)return!0;if(e<=s)return!1}return!1}onFragLoaded(t,e){const{frag:i,part:s}=e;if("initSegment"===i.sn||i.bitrateTest)return;const a=s?null:e,r=mu(i);this.fragments[r]={body:i,appendedPTS:null,loaded:a,buffered:!1,range:Object.create(null)}}onBufferAppended(t,e){const{frag:i,part:s,timeRanges:a}=e;if("initSegment"===i.sn)return;const r=i.type;if(s){let t=this.activePartLists[r];t||(this.activePartLists[r]=t=[]),t.push(s)}this.timeRanges=a,Object.keys(a).forEach((t=>{const e=a[t];this.detectEvictedFragments(t,e,r,s)}))}onFragBuffered(t,e){this.detectPartialFragments(e)}hasFragment(t){const e=mu(t);return!!this.fragments[e]}hasParts(t){var e;return!(null==(e=this.activePartLists[t])||!e.length)}removeFragmentsInRange(t,e,i,s,a){s&&!this.hasGaps||Object.keys(this.fragments).forEach((r=>{const n=this.fragments[r];if(!n)return;const o=n.body;o.type!==i||s&&!o.gap||o.start<e&&o.end>t&&(n.buffered||a)&&this.removeFragment(o)}))}removeFragment(t){const e=mu(t);t.stats.loaded=0,t.clearElementaryStreamInfo();const i=this.activePartLists[t.type];if(i){const e=t.sn;this.activePartLists[t.type]=i.filter((t=>t.fragment.sn!==e))}delete this.fragments[e],t.endList&&delete this.endListFragments[t.type]}removeAllFragments(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1}}function uu(t){var e,i,s;return t.buffered&&(t.body.gap||(null==(e=t.range.video)?void 0:e.partial)||(null==(i=t.range.audio)?void 0:i.partial)||(null==(s=t.range.audiovideo)?void 0:s.partial))}function mu(t){return`${t.type}_${t.level}_${t.sn}`}const vu={length:0,start:()=>0,end:()=>0};class fu{static isBuffered(t,e){try{if(t){const i=fu.getBuffered(t);for(let t=0;t<i.length;t++)if(e>=i.start(t)&&e<=i.end(t))return!0}}catch(i){}return!1}static bufferInfo(t,e,i){try{if(t){const s=fu.getBuffered(t),a=[];let r;for(r=0;r<s.length;r++)a.push({start:s.start(r),end:s.end(r)});return this.bufferedInfo(a,e,i)}}catch(s){}return{len:0,start:e,end:e,nextStart:void 0}}static bufferedInfo(t,e,i){e=Math.max(0,e),t.sort((function(t,e){const i=t.start-e.start;return i||e.end-t.end}));let s=[];if(i)for(let l=0;l<t.length;l++){const e=s.length;if(e){const a=s[e-1].end;t[l].start-a<i?t[l].end>a&&(s[e-1].end=t[l].end):s.push(t[l])}else s.push(t[l])}else s=t;let a,r=0,n=e,o=e;for(let l=0;l<s.length;l++){const t=s[l].start,d=s[l].end;if(e+i>=t&&e<d)n=t,o=d,r=o-e;else if(e+i<t){a=t;break}}return{len:r,start:n||0,end:o||0,nextStart:a}}static getBuffered(t){try{return t.buffered}catch(e){return Gc.log("failed to get media.buffered",e),vu}}}class yu{constructor(t,e,i,s=0,a=-1,r=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=t,this.sn=e,this.id=i,this.size=s,this.part=a,this.partial=r}}function bu(t,e){for(let s=0,a=t.length;s<a;s++){var i;if((null==(i=t[s])?void 0:i.cc)===e)return t[s]}return null}function wu(t,e){if(t){const i=t.start+e;t.start=t.startPTS=i,t.endPTS=i+t.duration}}function xu(t,e){const i=e.fragments;for(let s=0,a=i.length;s<a;s++)wu(i[s],t);e.fragmentHint&&wu(e.fragmentHint,t),e.alignedSliding=!0}function ku(t,e,i){e&&(!function(t,e,i){if(function(t,e,i){return!(!e||!(i.endCC>i.startCC||t&&t.cc<i.startCC))}(t,i,e)){const t=function(t,e){const i=t.fragments,s=e.fragments;if(!s.length||!i.length)return void Gc.log("No fragments to align");const a=bu(i,s[0].cc);if(a&&(!a||a.startPTS))return a;Gc.log("No frag in previous level to align on")}(i,e);t&&Oc(t.start)&&(Gc.log(`Adjusting PTS using last level due to CC increase within current level ${e.url}`),xu(t.start,e))}}(t,i,e),!i.alignedSliding&&e&&Su(i,e),i.alignedSliding||!e||i.skippedSegments||Tg(e,i))}function Su(t,e){if(!t.hasProgramDateTime||!e.hasProgramDateTime)return;const i=t.fragments,s=e.fragments;if(!i.length||!s.length)return;let a,r;const n=Math.min(e.endCC,t.endCC);e.startCC<n&&t.startCC<n&&(a=bu(s,n),r=bu(i,n)),a&&r||(a=s[Math.floor(s.length/2)],r=bu(i,a.cc)||i[Math.floor(i.length/2)]);const o=a.programDateTime,l=r.programDateTime;if(!o||!l)return;xu((l-o)/1e3-(r.start-a.start),t)}const _u=Math.pow(2,17);class Cu{constructor(t){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=t}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(t,e){const i=t.url;if(!i)return Promise.reject(new Tu({type:zc.NETWORK_ERROR,details:Nc.FRAG_LOAD_ERROR,fatal:!1,frag:t,error:new Error("Fragment does not have a "+(i?"part list":"url")),networkDetails:null}));this.abort();const s=this.config,a=s.fLoader,r=s.loader;return new Promise(((n,o)=>{if(this.loader&&this.loader.destroy(),t.gap){if(t.tagList.some((t=>"GAP"===t[0])))return void o(Lu(t));t.gap=!1}const l=this.loader=t.loader=a?new a(s):new r(s),d=Pu(t),c=$g(s.fragLoadPolicy.default),h={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:"initSegment"===t.sn?1/0:_u};t.stats=l.stats,l.load(d,h,{onSuccess:(e,i,s,a)=>{this.resetLoader(t,l);let r=e.data;s.resetIV&&t.decryptdata&&(t.decryptdata.iv=new Uint8Array(r.slice(0,16)),r=r.slice(16)),n({frag:t,part:null,payload:r,networkDetails:a})},onError:(e,s,a,r)=>{this.resetLoader(t,l),o(new Tu({type:zc.NETWORK_ERROR,details:Nc.FRAG_LOAD_ERROR,fatal:!1,frag:t,response:Mc({url:i,data:void 0},e),error:new Error(`HTTP Error ${e.code} ${e.text}`),networkDetails:a,stats:r}))},onAbort:(e,i,s)=>{this.resetLoader(t,l),o(new Tu({type:zc.NETWORK_ERROR,details:Nc.INTERNAL_ABORTED,fatal:!1,frag:t,error:new Error("Aborted"),networkDetails:s,stats:e}))},onTimeout:(e,i,s)=>{this.resetLoader(t,l),o(new Tu({type:zc.NETWORK_ERROR,details:Nc.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t,error:new Error(`Timeout after ${h.timeout}ms`),networkDetails:s,stats:e}))},onProgress:(i,s,a,r)=>{e&&e({frag:t,part:null,payload:a,networkDetails:r})}})}))}loadPart(t,e,i){this.abort();const s=this.config,a=s.fLoader,r=s.loader;return new Promise(((n,o)=>{if(this.loader&&this.loader.destroy(),t.gap||e.gap)return void o(Lu(t,e));const l=this.loader=t.loader=a?new a(s):new r(s),d=Pu(t,e),c=$g(s.fragLoadPolicy.default),h={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:_u};e.stats=l.stats,l.load(d,h,{onSuccess:(s,a,r,o)=>{this.resetLoader(t,l),this.updateStatsFromPart(t,e);const d={frag:t,part:e,payload:s.data,networkDetails:o};i(d),n(d)},onError:(i,s,a,r)=>{this.resetLoader(t,l),o(new Tu({type:zc.NETWORK_ERROR,details:Nc.FRAG_LOAD_ERROR,fatal:!1,frag:t,part:e,response:Mc({url:d.url,data:void 0},i),error:new Error(`HTTP Error ${i.code} ${i.text}`),networkDetails:a,stats:r}))},onAbort:(i,s,a)=>{t.stats.aborted=e.stats.aborted,this.resetLoader(t,l),o(new Tu({type:zc.NETWORK_ERROR,details:Nc.INTERNAL_ABORTED,fatal:!1,frag:t,part:e,error:new Error("Aborted"),networkDetails:a,stats:i}))},onTimeout:(i,s,a)=>{this.resetLoader(t,l),o(new Tu({type:zc.NETWORK_ERROR,details:Nc.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t,part:e,error:new Error(`Timeout after ${h.timeout}ms`),networkDetails:a,stats:i}))}})}))}updateStatsFromPart(t,e){const i=t.stats,s=e.stats,a=s.total;if(i.loaded+=s.loaded,a){const s=Math.round(t.duration/e.duration),r=Math.min(Math.round(i.loaded/a),s),n=(s-r)*Math.round(i.loaded/r);i.total=i.loaded+n}else i.total=Math.max(i.loaded,i.total);const r=i.loading,n=s.loading;r.start?r.first+=n.first-n.start:(r.start=n.start,r.first=n.first),r.end=n.end}resetLoader(t,e){t.loader=null,this.loader===e&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),e.destroy()}}function Pu(t,e=null){const i=e||t,s={frag:t,part:e,responseType:"arraybuffer",url:i.url,headers:{},rangeStart:0,rangeEnd:0},a=i.byteRangeStartOffset,r=i.byteRangeEndOffset;if(Oc(a)&&Oc(r)){var n;let e=a,i=r;if("initSegment"===t.sn&&"AES-128"===(null==(n=t.decryptdata)?void 0:n.method)){const t=r-a;t%16&&(i=r+(16-t%16)),0!==a&&(s.resetIV=!0,e=a-16)}s.rangeStart=e,s.rangeEnd=i}return s}function Lu(t,e){const i=new Error(`GAP ${t.gap?"tag":"attribute"} found`),s={type:zc.MEDIA_ERROR,details:Nc.FRAG_GAP,fatal:!1,frag:t,error:i,networkDetails:null};return e&&(s.part=e),(e||t).stats.aborted=!0,new Tu(s)}class Tu extends Error{constructor(t){super(t.error.message),this.data=void 0,this.data=t}}class Eu{constructor(t,e){this.subtle=void 0,this.aesIV=void 0,this.subtle=t,this.aesIV=e}decrypt(t,e){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},e,t)}}class Au{constructor(t,e){this.subtle=void 0,this.key=void 0,this.subtle=t,this.key=e}expandKey(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}class Mu{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(t){const e=new DataView(t),i=new Uint32Array(4);for(let s=0;s<4;s++)i[s]=e.getUint32(4*s);return i}initTable(){const t=this.sBox,e=this.invSBox,i=this.subMix,s=i[0],a=i[1],r=i[2],n=i[3],o=this.invSubMix,l=o[0],d=o[1],c=o[2],h=o[3],p=new Uint32Array(256);let g=0,u=0,m=0;for(m=0;m<256;m++)p[m]=m<128?m<<1:m<<1^283;for(m=0;m<256;m++){let i=u^u<<1^u<<2^u<<3^u<<4;i=i>>>8^255&i^99,t[g]=i,e[i]=g;const o=p[g],m=p[o],v=p[m];let f=257*p[i]^16843008*i;s[g]=f<<24|f>>>8,a[g]=f<<16|f>>>16,r[g]=f<<8|f>>>24,n[g]=f,f=16843009*v^65537*m^257*o^16843008*g,l[i]=f<<24|f>>>8,d[i]=f<<16|f>>>16,c[i]=f<<8|f>>>24,h[i]=f,g?(g=o^p[p[p[v^o]]],u^=p[p[u]]):g=u=1}}expandKey(t){const e=this.uint8ArrayToUint32Array_(t);let i=!0,s=0;for(;s<e.length&&i;)i=e[s]===this.key[s],s++;if(i)return;this.key=e;const a=this.keySize=e.length;if(4!==a&&6!==a&&8!==a)throw new Error("Invalid aes key size="+a);const r=this.ksRows=4*(a+6+1);let n,o;const l=this.keySchedule=new Uint32Array(r),d=this.invKeySchedule=new Uint32Array(r),c=this.sBox,h=this.rcon,p=this.invSubMix,g=p[0],u=p[1],m=p[2],v=p[3];let f,y;for(n=0;n<r;n++)n<a?f=l[n]=e[n]:(y=f,n%a==0?(y=y<<8|y>>>24,y=c[y>>>24]<<24|c[y>>>16&255]<<16|c[y>>>8&255]<<8|c[255&y],y^=h[n/a|0]<<24):a>6&&n%a==4&&(y=c[y>>>24]<<24|c[y>>>16&255]<<16|c[y>>>8&255]<<8|c[255&y]),l[n]=f=(l[n-a]^y)>>>0);for(o=0;o<r;o++)n=r-o,y=3&o?l[n]:l[n-4],d[o]=o<4||n<=4?y:g[c[y>>>24]]^u[c[y>>>16&255]]^m[c[y>>>8&255]]^v[c[255&y]],d[o]=d[o]>>>0}networkToHostOrderSwap(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24}decrypt(t,e,i){const s=this.keySize+6,a=this.invKeySchedule,r=this.invSBox,n=this.invSubMix,o=n[0],l=n[1],d=n[2],c=n[3],h=this.uint8ArrayToUint32Array_(i);let p=h[0],g=h[1],u=h[2],m=h[3];const v=new Int32Array(t),f=new Int32Array(v.length);let y,b,w,x,k,S,_,C,P,L,T,E,A,M;const R=this.networkToHostOrderSwap;for(;e<v.length;){for(P=R(v[e]),L=R(v[e+1]),T=R(v[e+2]),E=R(v[e+3]),k=P^a[0],S=E^a[1],_=T^a[2],C=L^a[3],A=4,M=1;M<s;M++)y=o[k>>>24]^l[S>>16&255]^d[_>>8&255]^c[255&C]^a[A],b=o[S>>>24]^l[_>>16&255]^d[C>>8&255]^c[255&k]^a[A+1],w=o[_>>>24]^l[C>>16&255]^d[k>>8&255]^c[255&S]^a[A+2],x=o[C>>>24]^l[k>>16&255]^d[S>>8&255]^c[255&_]^a[A+3],k=y,S=b,_=w,C=x,A+=4;y=r[k>>>24]<<24^r[S>>16&255]<<16^r[_>>8&255]<<8^r[255&C]^a[A],b=r[S>>>24]<<24^r[_>>16&255]<<16^r[C>>8&255]<<8^r[255&k]^a[A+1],w=r[_>>>24]<<24^r[C>>16&255]<<16^r[k>>8&255]<<8^r[255&S]^a[A+2],x=r[C>>>24]<<24^r[k>>16&255]<<16^r[S>>8&255]<<8^r[255&_]^a[A+3],f[e]=R(y^p),f[e+1]=R(x^g),f[e+2]=R(w^u),f[e+3]=R(b^m),p=P,g=L,u=T,m=E,e+=4}return f.buffer}}class Ru{constructor(t,{removePKCS7Padding:e=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=t.enableSoftwareAES,this.removePKCS7Padding=e,e)try{const t=self.crypto;t&&(this.subtle=t.subtle||t.webkitSubtle)}catch(i){}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:t,remainderData:e}=this;if(!t||e)return this.reset(),null;const i=new Uint8Array(t);return this.reset(),this.removePKCS7Padding?function(t){const e=t.byteLength,i=e&&new DataView(t.buffer).getUint8(e-1);return i?_h(t,0,e-i):t}(i):i}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(t,e,i){return this.useSoftware?new Promise(((s,a)=>{this.softwareDecrypt(new Uint8Array(t),e,i);const r=this.flush();r?s(r.buffer):a(new Error("[softwareDecrypt] Failed to decrypt data"))})):this.webCryptoDecrypt(new Uint8Array(t),e,i)}softwareDecrypt(t,e,i){const{currentIV:s,currentResult:a,remainderData:r}=this;this.logOnce("JS AES decrypt"),r&&(t=op(r,t),this.remainderData=null);const n=this.getValidChunk(t);if(!n.length)return null;s&&(i=s);let o=this.softwareDecrypter;o||(o=this.softwareDecrypter=new Mu),o.expandKey(e);const l=a;return this.currentResult=o.decrypt(n.buffer,0,i),this.currentIV=_h(n,-16).buffer,l||null}webCryptoDecrypt(t,e,i){if(this.key!==e||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(t,e,i));this.key=e,this.fastAesKey=new Au(this.subtle,e)}return this.fastAesKey.expandKey().then((e=>{if(!this.subtle)return Promise.reject(new Error("web crypto not initialized"));this.logOnce("WebCrypto AES decrypt");return new Eu(this.subtle,new Uint8Array(i)).decrypt(t.buffer,e)})).catch((s=>(Gc.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${s.name}: ${s.message}`),this.onWebCryptoError(t,e,i))))}onWebCryptoError(t,e,i){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(t,e,i);const s=this.flush();if(s)return s.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")}getValidChunk(t){let e=t;const i=t.length-t.length%16;return i!==t.length&&(e=_h(t,0,i),this.remainderData=_h(t,i)),e}logOnce(t){this.logEnabled&&(Gc.log(`[decrypter]: ${t}`),this.logEnabled=!1)}}const Du=function(t){let e="";const i=t.length;for(let s=0;s<i;s++)e+=`[${t.start(s).toFixed(3)}-${t.end(s).toFixed(3)}]`;return e},Iu="STOPPED",Ou="IDLE",$u="KEY_LOADING",Uu="FRAG_LOADING",Fu="FRAG_LOADING_WAITING_RETRY",zu="WAITING_TRACK",Nu="PARSING",ju="PARSED",Bu="ENDED",Hu="ERROR",Vu="WAITING_INIT_PTS",Gu="WAITING_LEVEL";class qu extends lu{constructor(t,e,i,s,a){super(),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=Iu,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.loadedmetadata=!1,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.onvseeking=null,this.onvended=null,this.logPrefix="",this.log=void 0,this.warn=void 0,this.playlistType=a,this.logPrefix=s,this.log=Gc.log.bind(Gc,`${s}:`),this.warn=Gc.warn.bind(Gc,`${s}:`),this.hls=t,this.fragmentLoader=new Cu(t.config),this.keyLoader=i,this.fragmentTracker=e,this.config=t.config,this.decrypter=new Ru(t.config),t.on(Fc.MANIFEST_LOADED,this.onManifestLoaded,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(t){}stopLoad(){this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const t=this.fragCurrent;null!=t&&t.loader&&(t.abortRequests(),this.fragmentTracker.removeFragment(t)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=Iu}_streamEnded(t,e){if(e.live||t.nextStart||!t.end||!this.media)return!1;const i=e.partList;if(null!=i&&i.length){const t=i[i.length-1];return fu.isBuffered(this.media,t.start+t.duration/2)}const s=e.fragments[e.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(s)}getLevelDetails(){var t;if(this.levels&&null!==this.levelLastLoaded)return null==(t=this.levelLastLoaded)?void 0:t.details}onMediaAttached(t,e){const i=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),i.addEventListener("seeking",this.onvseeking),i.addEventListener("ended",this.onvended);const s=this.config;this.levels&&s.autoStartLoad&&this.state===Iu&&this.startLoad(s.startPosition)}onMediaDetaching(){const t=this.media;null!=t&&t.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),t&&this.onvseeking&&this.onvended&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}onMediaSeeking(){const{config:t,fragCurrent:e,media:i,mediaBuffer:s,state:a}=this,r=i?i.currentTime:0,n=fu.bufferInfo(s||i,r,t.maxBufferHole);if(this.log(`media seeking to ${Oc(r)?r.toFixed(3):r}, state: ${a}`),this.state===Bu)this.resetLoadingState();else if(e){const i=t.maxFragLookUpTolerance,s=e.start-i,a=e.start+e.duration+i;if(!n.len||a<n.start||s>n.end){const t=r>a;(r<s||t)&&(t&&e.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),e.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}i&&(this.fragmentTracker.removeFragmentsInRange(r,1/0,this.playlistType,!0),this.lastCurrentTime=r),this.loadedmetadata||n.len||(this.nextLoadPosition=this.startPosition=r),this.tickImmediate()}onMediaEnded(){this.startPosition=this.lastCurrentTime=0}onManifestLoaded(t,e){this.startTimeOffset=e.startTimeOffset,this.initPTS=[]}onHandlerDestroying(){this.hls.off(Fc.MANIFEST_LOADED,this.onManifestLoaded,this),this.stopLoad(),super.onHandlerDestroying(),this.hls=null}onHandlerDestroyed(){this.state=Iu,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(t,e,i){this._loadFragForPlayback(t,e,i)}_loadFragForPlayback(t,e,i){this._doFragLoad(t,e,i,(e=>{if(this.fragContextChanged(t))return this.warn(`Fragment ${t.sn}${e.part?" p: "+e.part.index:""} of level ${t.level} was dropped during download.`),void this.fragmentTracker.removeFragment(t);t.stats.chunkCount++,this._handleFragmentLoadProgress(e)})).then((e=>{if(!e)return;const i=this.state;this.fragContextChanged(t)?(i===Uu||!this.fragCurrent&&i===Nu)&&(this.fragmentTracker.removeFragment(t),this.state=Ou):("payload"in e&&(this.log(`Loaded fragment ${t.sn} of level ${t.level}`),this.hls.trigger(Fc.FRAG_LOADED,e)),this._handleFragmentLoadComplete(e))})).catch((e=>{this.state!==Iu&&this.state!==Hu&&(this.warn(`Frag error: ${(null==e?void 0:e.message)||e}`),this.resetFragmentLoading(t))}))}clearTrackerIfNeeded(t){var e;const{fragmentTracker:i}=this;if(i.getState(t)===cu){const e=t.type,s=this.getFwdBufferInfo(this.mediaBuffer,e),a=Math.max(t.duration,s?s.len:this.config.maxBufferLength),r=this.backtrackFragment;(1===(r?t.sn-r.sn:0)||this.reduceMaxBufferLength(a,t.duration))&&i.removeFragment(t)}else 0===(null==(e=this.mediaBuffer)?void 0:e.buffered.length)?i.removeAllFragments():i.hasParts(t.type)&&(i.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type}),i.getState(t)===hu&&i.removeFragment(t))}checkLiveUpdate(t){if(t.updated&&!t.live){const e=t.fragments[t.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type})}t.fragments[0]||(t.deltaUpdateFailed=!0)}flushMainBuffer(t,e,i=null){if(!(t-e))return;const s={startOffset:t,endOffset:e,type:i};this.hls.trigger(Fc.BUFFER_FLUSHING,s)}_loadInitSegment(t,e){this._doFragLoad(t,e).then((e=>{if(!e||this.fragContextChanged(t)||!this.levels)throw new Error("init load aborted");return e})).then((e=>{const{hls:i}=this,{payload:s}=e,a=t.decryptdata;if(s&&s.byteLength>0&&null!=a&&a.key&&a.iv&&"AES-128"===a.method){const r=self.performance.now();return this.decrypter.decrypt(new Uint8Array(s),a.key.buffer,a.iv.buffer).catch((e=>{throw i.trigger(Fc.ERROR,{type:zc.MEDIA_ERROR,details:Nc.FRAG_DECRYPT_ERROR,fatal:!1,error:e,reason:e.message,frag:t}),e})).then((s=>{const a=self.performance.now();return i.trigger(Fc.FRAG_DECRYPTED,{frag:t,payload:s,stats:{tstart:r,tdecrypt:a}}),e.payload=s,this.completeInitSegmentLoad(e)}))}return this.completeInitSegmentLoad(e)})).catch((e=>{this.state!==Iu&&this.state!==Hu&&(this.warn(e),this.resetFragmentLoading(t))}))}completeInitSegmentLoad(t){const{levels:e}=this;if(!e)throw new Error("init load aborted, missing levels");const i=t.frag.stats;this.state=Ou,t.frag.data=new Uint8Array(t.payload),i.parsing.start=i.buffering.start=self.performance.now(),i.parsing.end=i.buffering.end=self.performance.now(),this.tick()}fragContextChanged(t){const{fragCurrent:e}=this;return!t||!e||t.sn!==e.sn||t.level!==e.level}fragBufferedComplete(t,e){var i,s,a,r;const n=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${t.type} sn: ${t.sn}${e?" part: "+e.index:""} of ${this.playlistType===Yp?"level":"track"} ${t.level} (frag:[${(null!=(i=t.startPTS)?i:NaN).toFixed(3)}-${(null!=(s=t.endPTS)?s:NaN).toFixed(3)}] > buffer:${n?Du(fu.getBuffered(n)):"(detached)"})`),"initSegment"!==t.sn){var o;if(t.type!==Jp){const e=t.elementaryStreams;if(!Object.keys(e).some((t=>!!e[t])))return void(this.state=Ou)}const e=null==(o=this.levels)?void 0:o[t.level];null!=e&&e.fragmentError&&(this.log(`Resetting level fragment error count of ${e.fragmentError} on frag buffered`),e.fragmentError=0)}this.state=Ou,n&&(!this.loadedmetadata&&t.type==Yp&&n.buffered.length&&(null==(a=this.fragCurrent)?void 0:a.sn)===(null==(r=this.fragPrevious)?void 0:r.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())}seekToStartPos(){}_handleFragmentLoadComplete(t){const{transmuxer:e}=this;if(!e)return;const{frag:i,part:s,partsLoaded:a}=t,r=!a||0===a.length||a.some((t=>!t)),n=new yu(i.level,i.sn,i.stats.chunkCount+1,0,s?s.index:-1,!r);e.flush(n)}_handleFragmentLoadProgress(t){}_doFragLoad(t,e,i=null,s){var a;const r=null==e?void 0:e.details;if(!this.levels||!r)throw new Error(`frag load aborted, missing level${r?"":" detail"}s`);let n=null;if(!t.encrypted||null!=(a=t.decryptdata)&&a.key?!t.encrypted&&r.encryptedFragments.length&&this.keyLoader.loadClear(t,r.encryptedFragments):(this.log(`Loading key for ${t.sn} of [${r.startSN}-${r.endSN}], ${"[stream-controller]"===this.logPrefix?"level":"track"} ${t.level}`),this.state=$u,this.fragCurrent=t,n=this.keyLoader.load(t).then((t=>{if(!this.fragContextChanged(t.frag))return this.hls.trigger(Fc.KEY_LOADED,t),this.state===$u&&(this.state=Ou),t})),this.hls.trigger(Fc.KEY_LOADING,{frag:t}),null===this.fragCurrent&&(n=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))),i=Math.max(t.start,i||0),this.config.lowLatencyMode&&"initSegment"!==t.sn){const a=r.partList;if(a&&s){i>t.end&&r.fragmentHint&&(t=r.fragmentHint);const o=this.getNextPart(a,t,i);if(o>-1){const l=a[o];let d;return this.log(`Loading part sn: ${t.sn} p: ${l.index} cc: ${t.cc} of playlist [${r.startSN}-${r.endSN}] parts [0-${o}-${a.length-1}] ${"[stream-controller]"===this.logPrefix?"level":"track"}: ${t.level}, target: ${parseFloat(i.toFixed(3))}`),this.nextLoadPosition=l.start+l.duration,this.state=Uu,d=n?n.then((i=>!i||this.fragContextChanged(i.frag)?null:this.doFragPartsLoad(t,l,e,s))).catch((t=>this.handleFragLoadError(t))):this.doFragPartsLoad(t,l,e,s).catch((t=>this.handleFragLoadError(t))),this.hls.trigger(Fc.FRAG_LOADING,{frag:t,part:l,targetBufferTime:i}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):d}if(!t.url||this.loadedEndOfParts(a,i))return Promise.resolve(null)}}this.log(`Loading fragment ${t.sn} cc: ${t.cc} ${r?"of ["+r.startSN+"-"+r.endSN+"] ":""}${"[stream-controller]"===this.logPrefix?"level":"track"}: ${t.level}, target: ${parseFloat(i.toFixed(3))}`),Oc(t.sn)&&!this.bitrateTest&&(this.nextLoadPosition=t.start+t.duration),this.state=Uu;const o=this.config.progressive;let l;return l=o&&n?n.then((e=>!e||this.fragContextChanged(null==e?void 0:e.frag)?null:this.fragmentLoader.load(t,s))).catch((t=>this.handleFragLoadError(t))):Promise.all([this.fragmentLoader.load(t,o?s:void 0),n]).then((([t])=>(!o&&t&&s&&s(t),t))).catch((t=>this.handleFragLoadError(t))),this.hls.trigger(Fc.FRAG_LOADING,{frag:t,targetBufferTime:i}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):l}doFragPartsLoad(t,e,i,s){return new Promise(((a,r)=>{var n;const o=[],l=null==(n=i.details)?void 0:n.partList,d=e=>{this.fragmentLoader.loadPart(t,e,s).then((s=>{o[e.index]=s;const r=s.part;this.hls.trigger(Fc.FRAG_LOADED,s);const n=Ag(i,t.sn,e.index+1)||Mg(l,t.sn,e.index+1);if(!n)return a({frag:t,part:r,partsLoaded:o});d(n)})).catch(r)};d(e)}))}handleFragLoadError(t){if("data"in t){const e=t.data;t.data&&e.details===Nc.INTERNAL_ABORTED?this.handleFragLoadAborted(e.frag,e.part):this.hls.trigger(Fc.ERROR,e)}else this.hls.trigger(Fc.ERROR,{type:zc.OTHER_ERROR,details:Nc.INTERNAL_EXCEPTION,err:t,error:t,fatal:!0});return null}_handleTransmuxerFlush(t){const e=this.getCurrentContext(t);if(!e||this.state!==Nu)return void(this.fragCurrent||this.state===Iu||this.state===Hu||(this.state=Ou));const{frag:i,part:s,level:a}=e,r=self.performance.now();i.stats.parsing.end=r,s&&(s.stats.parsing.end=r),this.updateLevelTiming(i,s,a,t.partial)}getCurrentContext(t){const{levels:e,fragCurrent:i}=this,{level:s,sn:a,part:r}=t;if(null==e||!e[s])return this.warn(`Levels object was unset while buffering fragment ${a} of level ${s}. The current chunk will not be buffered.`),null;const n=e[s],o=r>-1?Ag(n,a,r):null,l=o?o.fragment:function(t,e,i){if(null==t||!t.details)return null;const s=t.details;let a=s.fragments[e-s.startSN];return a||(a=s.fragmentHint,a&&a.sn===e?a:e<s.startSN&&i&&i.sn===e?i:null)}(n,a,i);return l?(i&&i!==l&&(l.stats=i.stats),{frag:l,part:o,level:n}):null}bufferFragmentData(t,e,i,s,a){var r;if(!t||this.state!==Nu)return;const{data1:n,data2:o}=t;let l=n;if(n&&o&&(l=op(n,o)),null==(r=l)||!r.length)return;const d={type:t.type,frag:e,part:i,chunkMeta:s,parent:e.type,data:l};if(this.hls.trigger(Fc.BUFFER_APPENDING,d),t.dropped&&t.independent&&!i){if(a)return;this.flushBufferGap(e)}}flushBufferGap(t){const e=this.media;if(!e)return;if(!fu.isBuffered(e,e.currentTime))return void this.flushMainBuffer(0,t.start);const i=e.currentTime,s=fu.bufferInfo(e,i,0),a=t.duration,r=Math.min(2*this.config.maxFragLookUpTolerance,.25*a),n=Math.max(Math.min(t.start-r,s.end-r),i+r);t.start-n>r&&this.flushMainBuffer(n,t.start)}getFwdBufferInfo(t,e){const i=this.getLoadPosition();return Oc(i)?this.getFwdBufferInfoAtPos(t,i,e):null}getFwdBufferInfoAtPos(t,e,i){const{config:{maxBufferHole:s}}=this,a=fu.bufferInfo(t,e,s);if(0===a.len&&void 0!==a.nextStart){const r=this.fragmentTracker.getBufferedFrag(e,i);if(r&&a.nextStart<r.end)return fu.bufferInfo(t,e,Math.max(a.nextStart,s))}return a}getMaxBufferLength(t){const{config:e}=this;let i;return i=t?Math.max(8*e.maxBufferSize/t,e.maxBufferLength):e.maxBufferLength,Math.min(i,e.maxMaxBufferLength)}reduceMaxBufferLength(t,e){const i=this.config,s=Math.max(Math.min(t-e,i.maxBufferLength),e),a=Math.max(t-3*e,i.maxMaxBufferLength/2,s);return a>=s&&(i.maxMaxBufferLength=a,this.warn(`Reduce max buffer length to ${a}s`),!0)}getAppendedFrag(t,e=Yp){const i=this.fragmentTracker.getAppendedFrag(t,Yp);return i&&"fragment"in i?i.fragment:i}getNextFragment(t,e){const i=e.fragments,s=i.length;if(!s)return null;const{config:a}=this,r=i[0].start;let n;if(e.live){const o=a.initialLiveManifestSize;if(s<o)return this.warn(`Not enough fragments to start playback (have: ${s}, need: ${o})`),null;(!e.PTSKnown&&!this.startFragRequested&&-1===this.startPosition||t<r)&&(n=this.getInitialLiveFragment(e,i),this.startPosition=this.nextLoadPosition=n?this.hls.liveSyncPosition||n.start:t)}else t<=r&&(n=i[0]);if(!n){const i=a.lowLatencyMode?e.partEnd:e.fragmentEnd;n=this.getFragmentAtPosition(t,i,e)}return this.mapToInitFragWhenRequired(n)}isLoopLoading(t,e){const i=this.fragmentTracker.getState(t);return(i===pu||i===hu&&!!t.gap)&&this.nextLoadPosition>e}getNextFragmentLoopLoading(t,e,i,s,a){const r=t.gap,n=this.getNextFragment(this.nextLoadPosition,e);if(null===n)return n;if(t=n,r&&t&&!t.gap&&i.nextStart){const e=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,i.nextStart,s);if(null!==e&&i.len+e.len>=a)return this.log(`buffer full after gaps in "${s}" playlist starting at sn: ${t.sn}`),null}return t}mapToInitFragWhenRequired(t){return null==t||!t.initSegment||null!=t&&t.initSegment.data||this.bitrateTest?t:t.initSegment}getNextPart(t,e,i){let s=-1,a=!1,r=!0;for(let n=0,o=t.length;n<o;n++){const o=t[n];if(r=r&&!o.independent,s>-1&&i<o.start)break;const l=o.loaded;l?s=-1:(a||o.independent||r)&&o.fragment===e&&(s=n),a=l}return s}loadedEndOfParts(t,e){const i=t[t.length-1];return i&&e>i.start&&i.loaded}getInitialLiveFragment(t,e){const i=this.fragPrevious;let s=null;if(i){if(t.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${i.programDateTime}`),s=function(t,e,i){if(null===e||!Array.isArray(t)||!t.length||!Oc(e))return null;if(e<(t[0].programDateTime||0))return null;if(e>=(t[t.length-1].endProgramDateTime||0))return null;i=i||0;for(let s=0;s<t.length;++s){const a=t[s];if(jg(e,i,a))return a}return null}(e,i.endProgramDateTime,this.config.maxFragLookUpTolerance)),!s){const a=i.sn+1;if(a>=t.startSN&&a<=t.endSN){const r=e[a-t.startSN];i.cc===r.cc&&(s=r,this.log(`Live playlist, switching playlist, load frag with next SN: ${s.sn}`))}s||(s=function(t,e){return Fg(t,(t=>t.cc<e?1:t.cc>e?-1:0))}(e,i.cc),s&&this.log(`Live playlist, switching playlist, load frag with same CC: ${s.sn}`))}}else{const e=this.hls.liveSyncPosition;null!==e&&(s=this.getFragmentAtPosition(e,this.bitrateTest?t.fragmentEnd:t.edge,t))}return s}getFragmentAtPosition(t,e,i){const{config:s}=this;let{fragPrevious:a}=this,{fragments:r,endSN:n}=i;const{fragmentHint:o}=i,{maxFragLookUpTolerance:l}=s,d=i.partList,c=!!(s.lowLatencyMode&&null!=d&&d.length&&o);let h;if(c&&o&&!this.bitrateTest&&(r=r.concat(o),n=o.sn),t<e){h=zg(a,r,t,t>e-l?0:l)}else h=r[r.length-1];if(h){const t=h.sn-i.startSN,e=this.fragmentTracker.getState(h);if((e===pu||e===hu&&h.gap)&&(a=h),a&&h.sn===a.sn&&(!c||d[0].fragment.sn>h.sn)){if(a&&h.level===a.level){const e=r[t+1];h=h.sn<n&&this.fragmentTracker.getState(e)!==pu?e:null}}}return h}synchronizeToLiveEdge(t){const{config:e,media:i}=this;if(!i)return;const s=this.hls.liveSyncPosition,a=i.currentTime,r=t.fragments[0].start,n=t.edge,o=a>=r-e.maxFragLookUpTolerance&&a<=n;if(null!==s&&i.duration>s&&(a<s||!o)){const r=void 0!==e.liveMaxLatencyDuration?e.liveMaxLatencyDuration:e.liveMaxLatencyDurationCount*t.targetduration;(!o&&i.readyState<4||a<n-r)&&(this.loadedmetadata||(this.nextLoadPosition=s),i.readyState&&(this.warn(`Playback: ${a.toFixed(3)} is located too far from the end of live sliding playlist: ${n}, reset currentTime to : ${s.toFixed(3)}`),i.currentTime=s))}}alignPlaylists(t,e,i){const s=t.fragments.length;if(!s)return this.warn("No fragments in live playlist"),0;const a=t.fragments[0].start,r=!e,n=t.alignedSliding&&Oc(a);if(r||!n&&!a){const{fragPrevious:a}=this;ku(a,i,t);const r=t.fragments[0].start;return this.log(`Live playlist sliding: ${r.toFixed(2)} start-sn: ${e?e.startSN:"na"}->${t.startSN} prev-sn: ${a?a.sn:"na"} fragments: ${s}`),r}return a}waitForCdnTuneIn(t){return t.live&&t.canBlockReload&&t.partTarget&&t.tuneInGoal>Math.max(t.partHoldBack,3*t.partTarget)}setStartPosition(t,e){let i=this.startPosition;if(i<e&&(i=-1),-1===i||-1===this.lastCurrentTime){const s=null!==this.startTimeOffset,a=s?this.startTimeOffset:t.startTimeOffset;null!==a&&Oc(a)?(i=e+a,a<0&&(i+=t.totalduration),i=Math.min(Math.max(e,i),e+t.totalduration),this.log(`Start time offset ${a} found in ${s?"multivariant":"media"} playlist, adjust startPosition to ${i}`),this.startPosition=i):t.live?i=this.hls.liveSyncPosition||e:this.startPosition=i=0,this.lastCurrentTime=i}this.nextLoadPosition=i}getLoadPosition(){const{media:t}=this;let e=0;return this.loadedmetadata&&t?e=t.currentTime:this.nextLoadPosition&&(e=this.nextLoadPosition),e}handleFragLoadAborted(t,e){this.transmuxer&&"initSegment"!==t.sn&&t.stats.aborted&&(this.warn(`Fragment ${t.sn}${e?" part "+e.index:""} of level ${t.level} was aborted`),this.resetFragmentLoading(t))}resetFragmentLoading(t){this.fragCurrent&&(this.fragContextChanged(t)||this.state===Fu)||(this.state=Ou)}onFragmentOrKeyLoadError(t,e){if(e.chunkMeta&&!e.frag){const t=this.getCurrentContext(e.chunkMeta);t&&(e.frag=t.frag)}const i=e.frag;if(!i||i.type!==t||!this.levels)return;var s;if(this.fragContextChanged(i))return void this.warn(`Frag load error must match current frag to retry ${i.url} > ${null==(s=this.fragCurrent)?void 0:s.url}`);const a=e.details===Nc.FRAG_GAP;a&&this.fragmentTracker.fragBuffered(i,!0);const r=e.errorAction,{action:n,retryCount:o=0,retryConfig:l}=r||{};if(r&&n===Gg&&l){this.resetStartWhenNotLoaded(this.levelLastLoaded);const s=Og(l,o);this.warn(`Fragment ${i.sn} of ${t} ${i.level} errored with ${e.details}, retrying loading ${o+1}/${l.maxNumRetry} in ${s}ms`),r.resolved=!0,this.retryDate=self.performance.now()+s,this.state=Fu}else if(l&&r){if(this.resetFragmentErrors(t),!(o<l.maxNumRetry))return void Gc.warn(`${e.details} reached or exceeded max retry (${o})`);a||n===Vg||(r.resolved=!0)}else(null==r?void 0:r.action)===Hg?this.state=Gu:this.state=Hu;this.tickImmediate()}reduceLengthAndFlushBuffer(t){if(this.state===Nu||this.state===ju){const e=t.frag,i=t.parent,s=this.getFwdBufferInfo(this.mediaBuffer,i),a=s&&s.len>.5;a&&this.reduceMaxBufferLength(s.len,(null==e?void 0:e.duration)||10);const r=!a;return r&&this.warn(`Buffer full error while media.currentTime is not buffered, flush ${i} buffer`),e&&(this.fragmentTracker.removeFragment(e),this.nextLoadPosition=e.start),this.resetLoadingState(),r}return!1}resetFragmentErrors(t){t===Qp&&(this.fragCurrent=null),this.loadedmetadata||(this.startFragRequested=!1),this.state!==Iu&&(this.state=Ou)}afterBufferFlushed(t,e,i){if(!t)return;const s=fu.getBuffered(t);this.fragmentTracker.detectEvictedFragments(e,s,i),this.state===Bu&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=Ou}resetStartWhenNotLoaded(t){if(!this.loadedmetadata){this.startFragRequested=!1;const e=t?t.details:null;null!=e&&e.live?(this.startPosition=-1,this.setStartPosition(e,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(t){this.warn(`The loading context changed while buffering fragment ${t.sn} of level ${t.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState()}removeUnbufferedFrags(t=0){this.fragmentTracker.removeFragmentsInRange(t,1/0,this.playlistType,!1,!0)}updateLevelTiming(t,e,i,s){var a;const r=i.details;if(!r)return void this.warn("level.details undefined");if(!Object.keys(t.elementaryStreams).reduce(((e,a)=>{const n=t.elementaryStreams[a];if(n){const o=n.endPTS-n.startPTS;if(o<=0)return this.warn(`Could not parse fragment ${t.sn} ${a} duration reliably (${o})`),e||!1;const l=s?0:Pg(r,t,n.startPTS,n.endPTS,n.startDTS,n.endDTS);return this.hls.trigger(Fc.LEVEL_PTS_UPDATED,{details:r,level:i,drift:l,type:a,frag:t,start:n.startPTS,end:n.endPTS}),!0}return e}),!1)&&null===(null==(a=this.transmuxer)?void 0:a.error)){const e=new Error(`Found no media in fragment ${t.sn} of level ${t.level} resetting transmuxer to fallback to playlist timing`);if(0===i.fragmentError&&(i.fragmentError++,t.gap=!0,this.fragmentTracker.removeFragment(t),this.fragmentTracker.fragBuffered(t,!0)),this.warn(e.message),this.hls.trigger(Fc.ERROR,{type:zc.MEDIA_ERROR,details:Nc.FRAG_PARSING_ERROR,fatal:!1,error:e,frag:t,reason:`Found no media in msn ${t.sn} of level "${i.url}"`}),!this.hls)return;this.resetTransmuxer()}this.state=ju,this.hls.trigger(Fc.FRAG_PARSED,{frag:t,part:e})}resetTransmuxer(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)}recoverWorkerError(t){"demuxerWorker"===t.event&&(this.fragmentTracker.removeAllFragments(),this.resetTransmuxer(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState())}set state(t){const e=this._state;e!==t&&(this._state=t,this.log(`${e}->${t}`))}get state(){return this._state}}class Zu{constructor(){this.chunks=[],this.dataLength=0}push(t){this.chunks.push(t),this.dataLength+=t.length}flush(){const{chunks:t,dataLength:e}=this;let i;return t.length?(i=1===t.length?t[0]:function(t,e){const i=new Uint8Array(e);let s=0;for(let a=0;a<t.length;a++){const e=t[a];i.set(e,s),s+=e.length}return i}(t,e),this.reset(),i):new Uint8Array(0)}reset(){this.chunks.length=0,this.dataLength=0}}function Ku(t="",e=9e4){return{type:t,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}class Wu{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(t,e,i,s){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(t){this.initPTS=t,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(t,e){return!1}appendFrame(t,e,i){}demux(t,e){this.cachedData&&(t=op(this.cachedData,t),this.cachedData=null);let i,s=Lh(t,0),a=s?s.length:0;const r=this._audioTrack,n=this._id3Track,o=s?Ah(s):void 0,l=t.length;for((null===this.basePTS||0===this.frameIndex&&Oc(o))&&(this.basePTS=Yu(o,e,this.initPTS),this.lastPTS=this.basePTS),null===this.lastPTS&&(this.lastPTS=this.basePTS),s&&s.length>0&&n.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:s,type:og,duration:Number.POSITIVE_INFINITY});a<l;){if(this.canParse(t,a)){const e=this.appendFrame(r,t,a);e?(this.frameIndex++,this.lastPTS=e.sample.pts,a+=e.length,i=a):a=l}else Eh(t,a)?(s=Lh(t,a),n.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:s,type:og,duration:Number.POSITIVE_INFINITY}),a+=s.length,i=a):a++;if(a===l&&i!==l){const e=_h(t,i);this.cachedData?this.cachedData=op(this.cachedData,e):this.cachedData=e}}return{audioTrack:r,videoTrack:Ku(),id3Track:n,textTrack:Ku()}}demuxSampleAes(t,e,i){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(t){const e=this.cachedData;return e&&(this.cachedData=null,this.demux(e,0)),{audioTrack:this._audioTrack,videoTrack:Ku(),id3Track:this._id3Track,textTrack:Ku()}}destroy(){}}const Yu=(t,e,i)=>{if(Oc(t))return 90*t;return 9e4*e+(i?9e4*i.baseTime/i.timescale:0)};function Qu(t,e){return 255===t[e]&&240==(246&t[e+1])}function Ju(t,e){return 1&t[e+1]?7:9}function Xu(t,e){return(3&t[e+3])<<11|t[e+4]<<3|(224&t[e+5])>>>5}function tm(t,e){return e+1<t.length&&Qu(t,e)}function em(t,e){if(tm(t,e)){const i=Ju(t,e);if(e+i>=t.length)return!1;const s=Xu(t,e);if(s<=i)return!1;const a=e+s;return a===t.length||tm(t,a)}return!1}function im(t,e,i,s,a){if(!t.samplerate){const r=function(t,e,i,s){let a,r,n,o;const l=navigator.userAgent.toLowerCase(),d=s,c=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];a=1+((192&e[i+2])>>>6);const h=(60&e[i+2])>>>2;if(!(h>c.length-1))return n=(1&e[i+2])<<2,n|=(192&e[i+3])>>>6,Gc.log(`manifest codec:${s}, ADTS type:${a}, samplingIndex:${h}`),/firefox/i.test(l)?h>=6?(a=5,o=new Array(4),r=h-3):(a=2,o=new Array(2),r=h):-1!==l.indexOf("android")?(a=2,o=new Array(2),r=h):(a=5,o=new Array(4),s&&(-1!==s.indexOf("mp4a.40.29")||-1!==s.indexOf("mp4a.40.5"))||!s&&h>=6?r=h-3:((s&&-1!==s.indexOf("mp4a.40.2")&&(h>=6&&1===n||/vivaldi/i.test(l))||!s&&1===n)&&(a=2,o=new Array(2)),r=h)),o[0]=a<<3,o[0]|=(14&h)>>1,o[1]|=(1&h)<<7,o[1]|=n<<3,5===a&&(o[1]|=(14&r)>>1,o[2]=(1&r)<<7,o[2]|=8,o[3]=0),{config:o,samplerate:c[h],channelCount:n,codec:"mp4a.40."+a,manifestCodec:d};{const e=new Error(`invalid ADTS sampling index:${h}`);t.emit(Fc.ERROR,Fc.ERROR,{type:zc.MEDIA_ERROR,details:Nc.FRAG_PARSING_ERROR,fatal:!0,error:e,reason:e.message})}}(e,i,s,a);if(!r)return;t.config=r.config,t.samplerate=r.samplerate,t.channelCount=r.channelCount,t.codec=r.codec,t.manifestCodec=r.manifestCodec,Gc.log(`parsed codec:${t.codec}, rate:${r.samplerate}, channels:${r.channelCount}`)}}function sm(t){return 9216e4/t}function am(t,e,i,s,a){const r=s+a*sm(t.samplerate),n=function(t,e){const i=Ju(t,e);if(e+i<=t.length){const s=Xu(t,e)-i;if(s>0)return{headerLength:i,frameLength:s}}}(e,i);let o;if(n){const{frameLength:s,headerLength:a}=n,l=a+s,d=Math.max(0,i+l-e.length);d?(o=new Uint8Array(l-a),o.set(e.subarray(i+a,e.length),0)):o=e.subarray(i+a,i+l);const c={unit:o,pts:r};return d||t.samples.push(c),{sample:c,length:l,missing:d}}const l=e.length-i;o=new Uint8Array(l),o.set(e.subarray(i,e.length),0);return{sample:{unit:o,pts:r},length:l,missing:-1}}let rm=null;const nm=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],om=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],lm=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],dm=[0,1,1,4];function cm(t,e,i,s,a){if(i+24>e.length)return;const r=hm(e,i);if(r&&i+r.frameLength<=e.length){const n=s+a*(9e4*r.samplesPerFrame/r.sampleRate),o={unit:e.subarray(i,i+r.frameLength),pts:n,dts:n};return t.config=[],t.channelCount=r.channelCount,t.samplerate=r.sampleRate,t.samples.push(o),{sample:o,length:r.frameLength,missing:0}}}function hm(t,e){const i=t[e+1]>>3&3,s=t[e+1]>>1&3,a=t[e+2]>>4&15,r=t[e+2]>>2&3;if(1!==i&&0!==a&&15!==a&&3!==r){const n=t[e+2]>>1&1,o=t[e+3]>>6,l=1e3*nm[14*(3===i?3-s:3===s?3:4)+a-1],d=om[3*(3===i?0:2===i?1:2)+r],c=3===o?1:2,h=lm[i][s],p=dm[s],g=8*h*p,u=Math.floor(h*l/d+n)*p;if(null===rm){const t=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);rm=t?parseInt(t[1]):0}return!!rm&&rm<=87&&2===s&&l>=224e3&&0===o&&(t[e+3]=128|t[e+3]),{sampleRate:d,channelCount:c,frameLength:u,samplesPerFrame:g}}}function pm(t,e){return!(255!==t[e]||224&~t[e+1]||!(6&t[e+1]))}function gm(t,e){return e+1<t.length&&pm(t,e)}function um(t,e){if(e+1<t.length&&pm(t,e)){const i=4,s=hm(t,e);let a=i;null!=s&&s.frameLength&&(a=s.frameLength);const r=e+a;return r===t.length||gm(t,r)}return!1}const mm=/\/emsg[-/]ID3/i;const vm=(t,e)=>{let i=0,s=5;e+=s;const a=new Uint32Array(1),r=new Uint32Array(1),n=new Uint8Array(1);for(;s>0;){n[0]=t[e];const o=Math.min(s,8),l=8-o;r[0]=4278190080>>>24+l<<l,a[0]=(n[0]&r[0])>>l,i=i?i<<o|a[0]:a[0],e+=1,s-=o}return i};class fm extends Wu{constructor(t){super(),this.observer=void 0,this.observer=t}resetInitSegment(t,e,i,s){super.resetInitSegment(t,e,i,s),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:e,duration:s,inputTimeScale:9e4,dropped:0}}canParse(t,e){return e+64<t.length}appendFrame(t,e,i){const s=ym(t,e,i,this.basePTS,this.frameIndex);if(-1!==s){return{sample:t.samples[t.samples.length-1],length:s,missing:0}}}static probe(t){if(!t)return!1;const e=Lh(t,0);if(!e)return!1;const i=e.length;return 11===t[i]&&119===t[i+1]&&void 0!==Ah(e)&&vm(t,i)<16}}function ym(t,e,i,s,a){if(i+8>e.length)return-1;if(11!==e[i]||119!==e[i+1])return-1;const r=e[i+4]>>6;if(r>=3)return-1;const n=[48e3,44100,32e3][r],o=63&e[i+4],l=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*o+r];if(i+l>e.length)return-1;const d=e[i+6]>>5;let c=0;2===d?c+=2:(1&d&&1!==d&&(c+=2),4&d&&(c+=2));const h=(e[i+6]<<8|e[i+7])>>12-c&1,p=[2,1,2,3,3,4,4,5][d]+h,g=e[i+5]>>3,u=7&e[i+5],m=new Uint8Array([r<<6|g<<1|u>>2,(3&u)<<6|d<<3|h<<2|o>>4,o<<4&224]),v=s+a*(1536/n*9e4),f=e.subarray(i,i+l);return t.config=m,t.channelCount=p,t.samplerate=n,t.samples.push({unit:f,pts:v}),l}class bm{constructor(){this.VideoSample=null}createVideoSample(t,e,i,s){return{key:t,frame:!1,pts:e,dts:i,units:[],debug:s,length:0}}getLastNalUnit(t){var e;let i,s=this.VideoSample;if(s&&0!==s.units.length||(s=t[t.length-1]),null!=(e=s)&&e.units){const t=s.units;i=t[t.length-1]}return i}pushAccessUnit(t,e){if(t.units.length&&t.frame){if(void 0===t.pts){const i=e.samples,s=i.length;if(!s)return void e.dropped++;{const e=i[s-1];t.pts=e.pts,t.dts=e.dts}}e.samples.push(t)}t.debug.length&&Gc.log(t.pts+"/"+t.dts+":"+t.debug)}}class wm{constructor(t){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const t=this.data,e=this.bytesAvailable,i=t.byteLength-e,s=new Uint8Array(4),a=Math.min(4,e);if(0===a)throw new Error("no bytes available");s.set(t.subarray(i,i+a)),this.word=new DataView(s.buffer).getUint32(0),this.bitsAvailable=8*a,this.bytesAvailable-=a}skipBits(t){let e;t=Math.min(t,8*this.bytesAvailable+this.bitsAvailable),this.bitsAvailable>t?(this.word<<=t,this.bitsAvailable-=t):(e=(t-=this.bitsAvailable)>>3,t-=e<<3,this.bytesAvailable-=e,this.loadWord(),this.word<<=t,this.bitsAvailable-=t)}readBits(t){let e=Math.min(this.bitsAvailable,t);const i=this.word>>>32-e;if(t>32&&Gc.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=e,this.bitsAvailable>0)this.word<<=e;else{if(!(this.bytesAvailable>0))throw new Error("no bits available");this.loadWord()}return e=t-e,e>0&&this.bitsAvailable?i<<e|this.readBits(e):i}skipLZ(){let t;for(t=0;t<this.bitsAvailable;++t)if(this.word&2147483648>>>t)return this.word<<=t,this.bitsAvailable-=t,t;return this.loadWord(),t+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const t=this.skipLZ();return this.readBits(t+1)-1}readEG(){const t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)}readBoolean(){return 1===this.readBits(1)}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}skipScalingList(t){let e,i=8,s=8;for(let a=0;a<t;a++)0!==s&&(e=this.readEG(),s=(i+e+256)%256),i=0===s?i:s}readSPS(){let t,e,i,s=0,a=0,r=0,n=0;const o=this.readUByte.bind(this),l=this.readBits.bind(this),d=this.readUEG.bind(this),c=this.readBoolean.bind(this),h=this.skipBits.bind(this),p=this.skipEG.bind(this),g=this.skipUEG.bind(this),u=this.skipScalingList.bind(this);o();const m=o();if(l(5),h(3),o(),g(),100===m||110===m||122===m||244===m||44===m||83===m||86===m||118===m||128===m){const t=d();if(3===t&&h(1),g(),g(),h(1),c())for(e=3!==t?8:12,i=0;i<e;i++)c()&&u(i<6?16:64)}g();const v=d();if(0===v)d();else if(1===v)for(h(1),p(),p(),t=d(),i=0;i<t;i++)p();g(),h(1);const f=d(),y=d(),b=l(1);0===b&&h(1),h(1),c()&&(s=d(),a=d(),r=d(),n=d());let w=[1,1];if(c()&&c()){switch(o()){case 1:w=[1,1];break;case 2:w=[12,11];break;case 3:w=[10,11];break;case 4:w=[16,11];break;case 5:w=[40,33];break;case 6:w=[24,11];break;case 7:w=[20,11];break;case 8:w=[32,11];break;case 9:w=[80,33];break;case 10:w=[18,11];break;case 11:w=[15,11];break;case 12:w=[64,33];break;case 13:w=[160,99];break;case 14:w=[4,3];break;case 15:w=[3,2];break;case 16:w=[2,1];break;case 255:w=[o()<<8|o(),o()<<8|o()]}}return{width:Math.ceil(16*(f+1)-2*s-2*a),height:(2-b)*(y+1)*16-(b?2:4)*(r+n),pixelRatio:w}}readSliceType(){return this.readUByte(),this.readUEG(),this.readUEG()}}class xm extends bm{parseAVCPES(t,e,i,s,a){const r=this.parseAVCNALu(t,i.data);let n,o=this.VideoSample,l=!1;i.data=null,o&&r.length&&!t.audFound&&(this.pushAccessUnit(o,t),o=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts,"")),r.forEach((s=>{var r;switch(s.type){case 1:{let e=!1;n=!0;const a=s.data;if(l&&a.length>4){const t=new wm(a).readSliceType();2!==t&&4!==t&&7!==t&&9!==t||(e=!0)}var d;if(e)null!=(d=o)&&d.frame&&!o.key&&(this.pushAccessUnit(o,t),o=this.VideoSample=null);o||(o=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts,"")),o.frame=!0,o.key=e;break}case 5:n=!0,null!=(r=o)&&r.frame&&!o.key&&(this.pushAccessUnit(o,t),o=this.VideoSample=null),o||(o=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts,"")),o.key=!0,o.frame=!0;break;case 6:n=!0,cp(s.data,1,i.pts,e.samples);break;case 7:{var c,h;n=!0,l=!0;const e=s.data,i=new wm(e).readSPS();if(!t.sps||t.width!==i.width||t.height!==i.height||(null==(c=t.pixelRatio)?void 0:c[0])!==i.pixelRatio[0]||(null==(h=t.pixelRatio)?void 0:h[1])!==i.pixelRatio[1]){t.width=i.width,t.height=i.height,t.pixelRatio=i.pixelRatio,t.sps=[e],t.duration=a;const s=e.subarray(1,4);let r="avc1.";for(let t=0;t<3;t++){let e=s[t].toString(16);e.length<2&&(e="0"+e),r+=e}t.codec=r}break}case 8:n=!0,t.pps=[s.data];break;case 9:n=!0,t.audFound=!0,o&&this.pushAccessUnit(o,t),o=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts,"");break;case 12:n=!0;break;default:n=!1,o&&(o.debug+="unknown NAL "+s.type+" ")}if(o&&n){o.units.push(s)}})),s&&o&&(this.pushAccessUnit(o,t),this.VideoSample=null)}parseAVCNALu(t,e){const i=e.byteLength;let s=t.naluState||0;const a=s,r=[];let n,o,l,d=0,c=-1,h=0;for(-1===s&&(c=0,h=31&e[0],s=0,d=1);d<i;)if(n=e[d++],s)if(1!==s)if(n)if(1===n){if(o=d-s-1,c>=0){const t={data:e.subarray(c,o),type:h};r.push(t)}else{const i=this.getLastNalUnit(t.samples);i&&(a&&d<=4-a&&i.state&&(i.data=i.data.subarray(0,i.data.byteLength-a)),o>0&&(i.data=op(i.data,e.subarray(0,o)),i.state=0))}d<i?(l=31&e[d],c=d,h=l,s=0):s=-1}else s=0;else s=3;else s=n?0:2;else s=n?0:1;if(c>=0&&s>=0){const t={data:e.subarray(c,i),type:h,state:s};r.push(t)}if(0===r.length){const i=this.getLastNalUnit(t.samples);i&&(i.data=op(i.data,e))}return t.naluState=s,r}}class km{constructor(t,e,i){this.keyData=void 0,this.decrypter=void 0,this.keyData=i,this.decrypter=new Ru(e,{removePKCS7Padding:!1})}decryptBuffer(t){return this.decrypter.decrypt(t,this.keyData.key.buffer,this.keyData.iv.buffer)}decryptAacSample(t,e,i){const s=t[e].unit;if(s.length<=16)return;const a=s.subarray(16,s.length-s.length%16),r=a.buffer.slice(a.byteOffset,a.byteOffset+a.length);this.decryptBuffer(r).then((a=>{const r=new Uint8Array(a);s.set(r,16),this.decrypter.isSync()||this.decryptAacSamples(t,e+1,i)}))}decryptAacSamples(t,e,i){for(;;e++){if(e>=t.length)return void i();if(!(t[e].unit.length<32)&&(this.decryptAacSample(t,e,i),!this.decrypter.isSync()))return}}getAvcEncryptedData(t){const e=16*Math.floor((t.length-48)/160)+16,i=new Int8Array(e);let s=0;for(let a=32;a<t.length-16;a+=160,s+=16)i.set(t.subarray(a,a+16),s);return i}getAvcDecryptedUnit(t,e){const i=new Uint8Array(e);let s=0;for(let a=32;a<t.length-16;a+=160,s+=16)t.set(i.subarray(s,s+16),a);return t}decryptAvcSample(t,e,i,s,a){const r=hp(a.data),n=this.getAvcEncryptedData(r);this.decryptBuffer(n.buffer).then((n=>{a.data=this.getAvcDecryptedUnit(r,n),this.decrypter.isSync()||this.decryptAvcSamples(t,e,i+1,s)}))}decryptAvcSamples(t,e,i,s){if(t instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;e++,i=0){if(e>=t.length)return void s();const a=t[e].units;for(;!(i>=a.length);i++){const r=a[i];if(!(r.data.length<=48||1!==r.type&&5!==r.type||(this.decryptAvcSample(t,e,i,s,r),this.decrypter.isSync())))return}}}}const Sm=188;class _m{constructor(t,e,i){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=t,this.config=e,this.typeSupported=i,this.videoParser=new xm}static probe(t){const e=_m.syncOffset(t);return e>0&&Gc.warn(`MPEG2-TS detected but first sync word found @ offset ${e}`),-1!==e}static syncOffset(t){const e=t.length;let i=Math.min(940,e-Sm)+1,s=0;for(;s<i;){let a=!1,r=-1,n=0;for(let o=s;o<e;o+=Sm){if(71!==t[o]||e-o!==Sm&&71!==t[o+Sm]){if(n)return-1;break}if(n++,-1===r&&(r=o,0!==r&&(i=Math.min(r+18612,t.length-Sm)+1)),a||(a=0===Cm(t,o)),a&&n>1&&(0===r&&n>2||o+Sm>i))return r}s++}return-1}static createTrack(t,e){return{container:"video"===t||"audio"===t?"video/mp2t":void 0,type:t,id:Gh[t],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===t?e:void 0}}resetInitSegment(t,e,i,s){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=_m.createTrack("video"),this._audioTrack=_m.createTrack("audio",s),this._id3Track=_m.createTrack("id3"),this._txtTrack=_m.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.remainderData=null,this.audioCodec=e,this.videoCodec=i,this._duration=s}resetTimeStamp(){}resetContiguity(){const{_audioTrack:t,_videoTrack:e,_id3Track:i}=this;t&&(t.pesData=null),e&&(e.pesData=null),i&&(i.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(t,e,i=!1,s=!1){let a;i||(this.sampleAes=null);const r=this._videoTrack,n=this._audioTrack,o=this._id3Track,l=this._txtTrack;let d=r.pid,c=r.pesData,h=n.pid,p=o.pid,g=n.pesData,u=o.pesData,m=null,v=this.pmtParsed,f=this._pmtId,y=t.length;if(this.remainderData&&(y=(t=op(this.remainderData,t)).length,this.remainderData=null),y<Sm&&!s)return this.remainderData=t,{audioTrack:n,videoTrack:r,id3Track:o,textTrack:l};const b=Math.max(0,_m.syncOffset(t));y-=(y-b)%Sm,y<t.byteLength&&!s&&(this.remainderData=new Uint8Array(t.buffer,y,t.buffer.byteLength-y));let w=0;for(let k=b;k<y;k+=Sm)if(71===t[k]){const e=!!(64&t[k+1]),s=Cm(t,k);let y;if((48&t[k+3])>>4>1){if(y=k+5+t[k+4],y===k+Sm)continue}else y=k+4;switch(s){case d:e&&(c&&(a=Am(c))&&this.videoParser.parseAVCPES(r,l,a,!1,this._duration),c={data:[],size:0}),c&&(c.data.push(t.subarray(y,k+Sm)),c.size+=k+Sm-y);break;case h:if(e){if(g&&(a=Am(g)))switch(n.segmentCodec){case"aac":this.parseAACPES(n,a);break;case"mp3":this.parseMPEGPES(n,a);break;case"ac3":this.parseAC3PES(n,a)}g={data:[],size:0}}g&&(g.data.push(t.subarray(y,k+Sm)),g.size+=k+Sm-y);break;case p:e&&(u&&(a=Am(u))&&this.parseID3PES(o,a),u={data:[],size:0}),u&&(u.data.push(t.subarray(y,k+Sm)),u.size+=k+Sm-y);break;case 0:e&&(y+=t[y]+1),f=this._pmtId=Pm(t,y);break;case f:{e&&(y+=t[y]+1);const s=Lm(t,y,this.typeSupported,i,this.observer);d=s.videoPid,d>0&&(r.pid=d,r.segmentCodec=s.segmentVideoCodec),h=s.audioPid,h>0&&(n.pid=h,n.segmentCodec=s.segmentAudioCodec),p=s.id3Pid,p>0&&(o.pid=p),null===m||v||(Gc.warn(`MPEG-TS PMT found at ${k} after unknown PID '${m}'. Backtracking to sync byte @${b} to parse all TS packets.`),m=null,k=b-188),v=this.pmtParsed=!0;break}case 17:case 8191:break;default:m=s}}else w++;w>0&&Tm(this.observer,new Error(`Found ${w} TS packet/s that do not start with 0x47`)),r.pesData=c,n.pesData=g,o.pesData=u;const x={audioTrack:n,videoTrack:r,id3Track:o,textTrack:l};return s&&this.extractRemainingSamples(x),x}flush(){const{remainderData:t}=this;let e;return this.remainderData=null,e=t?this.demux(t,-1,!1,!0):{videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(e),this.sampleAes?this.decrypt(e,this.sampleAes):e}extractRemainingSamples(t){const{audioTrack:e,videoTrack:i,id3Track:s,textTrack:a}=t,r=i.pesData,n=e.pesData,o=s.pesData;let l;if(r&&(l=Am(r))?(this.videoParser.parseAVCPES(i,a,l,!0,this._duration),i.pesData=null):i.pesData=r,n&&(l=Am(n))){switch(e.segmentCodec){case"aac":this.parseAACPES(e,l);break;case"mp3":this.parseMPEGPES(e,l);break;case"ac3":this.parseAC3PES(e,l)}e.pesData=null}else null!=n&&n.size&&Gc.log("last AAC PES packet truncated,might overlap between fragments"),e.pesData=n;o&&(l=Am(o))?(this.parseID3PES(s,l),s.pesData=null):s.pesData=o}demuxSampleAes(t,e,i){const s=this.demux(t,i,!0,!this.config.progressive),a=this.sampleAes=new km(this.observer,this.config,e);return this.decrypt(s,a)}decrypt(t,e){return new Promise((i=>{const{audioTrack:s,videoTrack:a}=t;s.samples&&"aac"===s.segmentCodec?e.decryptAacSamples(s.samples,0,(()=>{a.samples?e.decryptAvcSamples(a.samples,0,0,(()=>{i(t)})):i(t)})):a.samples&&e.decryptAvcSamples(a.samples,0,0,(()=>{i(t)}))}))}destroy(){this._duration=0}parseAACPES(t,e){let i=0;const s=this.aacOverFlow;let a,r,n,o=e.data;if(s){this.aacOverFlow=null;const e=s.missing,a=s.sample.unit.byteLength;if(-1===e)o=op(s.sample.unit,o);else{const r=a-e;s.sample.unit.set(o.subarray(0,e),r),t.samples.push(s.sample),i=s.missing}}for(a=i,r=o.length;a<r-1&&!tm(o,a);a++);if(a!==i){let t;const e=a<r-1;if(t=e?`AAC PES did not start with ADTS header,offset:${a}`:"No ADTS header found in AAC PES",Tm(this.observer,new Error(t),e),!e)return}if(im(t,this.observer,o,a,this.audioCodec),void 0!==e.pts)n=e.pts;else{if(!s)return void Gc.warn("[tsdemuxer]: AAC PES unknown PTS");{const e=sm(t.samplerate);n=s.sample.pts+e}}let l,d=0;for(;a<r;){if(l=am(t,o,a,n,d),a+=l.length,l.missing){this.aacOverFlow=l;break}for(d++;a<r-1&&!tm(o,a);a++);}}parseMPEGPES(t,e){const i=e.data,s=i.length;let a=0,r=0;const n=e.pts;if(void 0!==n)for(;r<s;)if(gm(i,r)){const e=cm(t,i,r,n,a);if(!e)break;r+=e.length,a++}else r++;else Gc.warn("[tsdemuxer]: MPEG PES unknown PTS")}parseAC3PES(t,e){{const i=e.data,s=e.pts;if(void 0===s)return void Gc.warn("[tsdemuxer]: AC3 PES unknown PTS");const a=i.length;let r,n=0,o=0;for(;o<a&&(r=ym(t,i,o,s,n++))>0;)o+=r}}parseID3PES(t,e){if(void 0===e.pts)return void Gc.warn("[tsdemuxer]: ID3 PES unknown PTS");const i=Ic({},e,{type:this._videoTrack?dg:og,duration:Number.POSITIVE_INFINITY});t.samples.push(i)}}function Cm(t,e){return((31&t[e+1])<<8)+t[e+2]}function Pm(t,e){return(31&t[e+10])<<8|t[e+11]}function Lm(t,e,i,s,a){const r={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},n=e+3+((15&t[e+1])<<8|t[e+2])-4;for(e+=12+((15&t[e+10])<<8|t[e+11]);e<n;){const n=Cm(t,e),o=(15&t[e+3])<<8|t[e+4];switch(t[e]){case 207:if(!s){Em("ADTS AAC");break}case 15:-1===r.audioPid&&(r.audioPid=n);break;case 21:-1===r.id3Pid&&(r.id3Pid=n);break;case 219:if(!s){Em("H.264");break}case 27:-1===r.videoPid&&(r.videoPid=n,r.segmentVideoCodec="avc");break;case 3:case 4:i.mpeg||i.mp3?-1===r.audioPid&&(r.audioPid=n,r.segmentAudioCodec="mp3"):Gc.log("MPEG audio found, not supported in this browser");break;case 193:if(!s){Em("AC-3");break}case 129:i.ac3?-1===r.audioPid&&(r.audioPid=n,r.segmentAudioCodec="ac3"):Gc.log("AC-3 audio found, not supported in this browser");break;case 6:if(-1===r.audioPid&&o>0){let s=e+5,a=o;for(;a>2;){if(106===t[s])!0!==i.ac3?Gc.log("AC-3 audio found, not supported in this browser for now"):(r.audioPid=n,r.segmentAudioCodec="ac3");const e=t[s+1]+2;s+=e,a-=e}}break;case 194:case 135:return Tm(a,new Error("Unsupported EC-3 in M2TS found")),r;case 36:return Tm(a,new Error("Unsupported HEVC in M2TS found")),r}e+=o+5}return r}function Tm(t,e,i){Gc.warn(`parsing error: ${e.message}`),t.emit(Fc.ERROR,Fc.ERROR,{type:zc.MEDIA_ERROR,details:Nc.FRAG_PARSING_ERROR,fatal:!1,levelRetry:i,error:e,reason:e.message})}function Em(t){Gc.log(`${t} with AES-128-CBC encryption found in unencrypted stream`)}function Am(t){let e,i,s,a,r,n=0;const o=t.data;if(!t||0===t.size)return null;for(;o[0].length<19&&o.length>1;)o[0]=op(o[0],o[1]),o.splice(1,1);e=o[0];if(1===(e[0]<<16)+(e[1]<<8)+e[2]){if(i=(e[4]<<8)+e[5],i&&i>t.size-6)return null;const l=e[7];192&l&&(a=536870912*(14&e[9])+4194304*(255&e[10])+16384*(254&e[11])+128*(255&e[12])+(254&e[13])/2,64&l?(r=536870912*(14&e[14])+4194304*(255&e[15])+16384*(254&e[16])+128*(255&e[17])+(254&e[18])/2,a-r>54e5&&(Gc.warn(`${Math.round((a-r)/9e4)}s delta between PTS and DTS, align them`),a=r)):r=a),s=e[8];let d=s+9;if(t.size<=d)return null;t.size-=d;const c=new Uint8Array(t.size);for(let t=0,i=o.length;t<i;t++){e=o[t];let i=e.byteLength;if(d){if(d>i){d-=i;continue}e=e.subarray(d),i-=d,d=0}c.set(e,n),n+=i}return i&&(i-=s+3),{data:c,pts:a,dts:r,len:i}}return null}class Mm{static getSilentFrame(t,e){if("mp4a.40.2"===t){if(1===e)return new Uint8Array([0,200,0,128,35,128]);if(2===e)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===e)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}}}const Rm=Math.pow(2,32)-1;class Dm{static init(){let t;for(t in Dm.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},Dm.types)Dm.types.hasOwnProperty(t)&&(Dm.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);const e=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);Dm.HDLR_TYPES={video:e,audio:i};const s=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);Dm.STTS=Dm.STSC=Dm.STCO=a,Dm.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Dm.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),Dm.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),Dm.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const r=new Uint8Array([105,115,111,109]),n=new Uint8Array([97,118,99,49]),o=new Uint8Array([0,0,0,1]);Dm.FTYP=Dm.box(Dm.types.ftyp,r,o,r,n),Dm.DINF=Dm.box(Dm.types.dinf,Dm.box(Dm.types.dref,s))}static box(t,...e){let i=8,s=e.length;const a=s;for(;s--;)i+=e[s].byteLength;const r=new Uint8Array(i);for(r[0]=i>>24&255,r[1]=i>>16&255,r[2]=i>>8&255,r[3]=255&i,r.set(t,4),s=0,i=8;s<a;s++)r.set(e[s],i),i+=e[s].byteLength;return r}static hdlr(t){return Dm.box(Dm.types.hdlr,Dm.HDLR_TYPES[t])}static mdat(t){return Dm.box(Dm.types.mdat,t)}static mdhd(t,e){e*=t;const i=Math.floor(e/(Rm+1)),s=Math.floor(e%(Rm+1));return Dm.box(Dm.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,s>>24,s>>16&255,s>>8&255,255&s,85,196,0,0]))}static mdia(t){return Dm.box(Dm.types.mdia,Dm.mdhd(t.timescale,t.duration),Dm.hdlr(t.type),Dm.minf(t))}static mfhd(t){return Dm.box(Dm.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))}static minf(t){return"audio"===t.type?Dm.box(Dm.types.minf,Dm.box(Dm.types.smhd,Dm.SMHD),Dm.DINF,Dm.stbl(t)):Dm.box(Dm.types.minf,Dm.box(Dm.types.vmhd,Dm.VMHD),Dm.DINF,Dm.stbl(t))}static moof(t,e,i){return Dm.box(Dm.types.moof,Dm.mfhd(t),Dm.traf(i,e))}static moov(t){let e=t.length;const i=[];for(;e--;)i[e]=Dm.trak(t[e]);return Dm.box.apply(null,[Dm.types.moov,Dm.mvhd(t[0].timescale,t[0].duration)].concat(i).concat(Dm.mvex(t)))}static mvex(t){let e=t.length;const i=[];for(;e--;)i[e]=Dm.trex(t[e]);return Dm.box.apply(null,[Dm.types.mvex,...i])}static mvhd(t,e){e*=t;const i=Math.floor(e/(Rm+1)),s=Math.floor(e%(Rm+1)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,s>>24,s>>16&255,s>>8&255,255&s,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return Dm.box(Dm.types.mvhd,a)}static sdtp(t){const e=t.samples||[],i=new Uint8Array(4+e.length);let s,a;for(s=0;s<e.length;s++)a=e[s].flags,i[s+4]=a.dependsOn<<4|a.isDependedOn<<2|a.hasRedundancy;return Dm.box(Dm.types.sdtp,i)}static stbl(t){return Dm.box(Dm.types.stbl,Dm.stsd(t),Dm.box(Dm.types.stts,Dm.STTS),Dm.box(Dm.types.stsc,Dm.STSC),Dm.box(Dm.types.stsz,Dm.STSZ),Dm.box(Dm.types.stco,Dm.STCO))}static avc1(t){let e,i,s,a=[],r=[];for(e=0;e<t.sps.length;e++)i=t.sps[e],s=i.byteLength,a.push(s>>>8&255),a.push(255&s),a=a.concat(Array.prototype.slice.call(i));for(e=0;e<t.pps.length;e++)i=t.pps[e],s=i.byteLength,r.push(s>>>8&255),r.push(255&s),r=r.concat(Array.prototype.slice.call(i));const n=Dm.box(Dm.types.avcC,new Uint8Array([1,a[3],a[4],a[5],255,224|t.sps.length].concat(a).concat([t.pps.length]).concat(r))),o=t.width,l=t.height,d=t.pixelRatio[0],c=t.pixelRatio[1];return Dm.box(Dm.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,o>>8&255,255&o,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),n,Dm.box(Dm.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),Dm.box(Dm.types.pasp,new Uint8Array([d>>24,d>>16&255,d>>8&255,255&d,c>>24,c>>16&255,c>>8&255,255&c])))}static esds(t){const e=t.config.length;return new Uint8Array([0,0,0,0,3,23+e,0,1,0,4,15+e,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([e]).concat(t.config).concat([6,1,2]))}static audioStsd(t){const e=t.samplerate;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,e>>8&255,255&e,0,0])}static mp4a(t){return Dm.box(Dm.types.mp4a,Dm.audioStsd(t),Dm.box(Dm.types.esds,Dm.esds(t)))}static mp3(t){return Dm.box(Dm.types[".mp3"],Dm.audioStsd(t))}static ac3(t){return Dm.box(Dm.types["ac-3"],Dm.audioStsd(t),Dm.box(Dm.types.dac3,t.config))}static stsd(t){return"audio"===t.type?"mp3"===t.segmentCodec&&"mp3"===t.codec?Dm.box(Dm.types.stsd,Dm.STSD,Dm.mp3(t)):"ac3"===t.segmentCodec?Dm.box(Dm.types.stsd,Dm.STSD,Dm.ac3(t)):Dm.box(Dm.types.stsd,Dm.STSD,Dm.mp4a(t)):Dm.box(Dm.types.stsd,Dm.STSD,Dm.avc1(t))}static tkhd(t){const e=t.id,i=t.duration*t.timescale,s=t.width,a=t.height,r=Math.floor(i/(Rm+1)),n=Math.floor(i%(Rm+1));return Dm.box(Dm.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,n>>24,n>>16&255,n>>8&255,255&n,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,s>>8&255,255&s,0,0,a>>8&255,255&a,0,0]))}static traf(t,e){const i=Dm.sdtp(t),s=t.id,a=Math.floor(e/(Rm+1)),r=Math.floor(e%(Rm+1));return Dm.box(Dm.types.traf,Dm.box(Dm.types.tfhd,new Uint8Array([0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s])),Dm.box(Dm.types.tfdt,new Uint8Array([1,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,r>>24,r>>16&255,r>>8&255,255&r])),Dm.trun(t,i.length+16+20+8+16+8+8),i)}static trak(t){return t.duration=t.duration||4294967295,Dm.box(Dm.types.trak,Dm.tkhd(t),Dm.mdia(t))}static trex(t){const e=t.id;return Dm.box(Dm.types.trex,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(t,e){const i=t.samples||[],s=i.length,a=12+16*s,r=new Uint8Array(a);let n,o,l,d,c,h;for(e+=8+a,r.set(["video"===t.type?1:0,0,15,1,s>>>24&255,s>>>16&255,s>>>8&255,255&s,e>>>24&255,e>>>16&255,e>>>8&255,255&e],0),n=0;n<s;n++)o=i[n],l=o.duration,d=o.size,c=o.flags,h=o.cts,r.set([l>>>24&255,l>>>16&255,l>>>8&255,255&l,d>>>24&255,d>>>16&255,d>>>8&255,255&d,c.isLeading<<2|c.dependsOn,c.isDependedOn<<6|c.hasRedundancy<<4|c.paddingValue<<1|c.isNonSync,61440&c.degradPrio,15&c.degradPrio,h>>>24&255,h>>>16&255,h>>>8&255,255&h],12+16*n);return Dm.box(Dm.types.trun,r)}static initSegment(t){Dm.types||Dm.init();const e=Dm.moov(t);return op(Dm.FTYP,e)}}Dm.types=void 0,Dm.HDLR_TYPES=void 0,Dm.STTS=void 0,Dm.STSC=void 0,Dm.STCO=void 0,Dm.STSZ=void 0,Dm.VMHD=void 0,Dm.SMHD=void 0,Dm.STSD=void 0,Dm.FTYP=void 0,Dm.DINF=void 0;function Im(t,e,i=1,s=!1){const a=t*e*i;return s?Math.round(a):a}function Om(t,e=!1){return Im(t,1e3,1/9e4,e)}let $m,Um=null,Fm=null;class zm{constructor(t,e,i,s=""){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=t,this.config=e,this.typeSupported=i,this.ISGenerated=!1,null===Um){const t=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Um=t?parseInt(t[1]):0}if(null===Fm){const t=navigator.userAgent.match(/Safari\/(\d+)/i);Fm=t?parseInt(t[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(t){Gc.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=t}resetNextTimestamp(){Gc.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){Gc.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(t){let e=!1;const i=t.reduce(((t,i)=>{const s=i.pts-t;return s<-4294967296?(e=!0,Nm(t,i.pts)):s>0?t:i.pts}),t[0].pts);return e&&Gc.debug("PTS rollover detected"),i}remux(t,e,i,s,a,r,n,o){let l,d,c,h,p,g,u=a,m=a;const v=t.pid>-1,f=e.pid>-1,y=e.samples.length,b=t.samples.length>0,w=n&&y>0||y>1;if((!v||b)&&(!f||w)||this.ISGenerated||n){if(this.ISGenerated){var x,k,S,_;const t=this.videoTrackConfig;!t||e.width===t.width&&e.height===t.height&&(null==(x=e.pixelRatio)?void 0:x[0])===(null==(k=t.pixelRatio)?void 0:k[0])&&(null==(S=e.pixelRatio)?void 0:S[1])===(null==(_=t.pixelRatio)?void 0:_[1])||this.resetInitSegment()}else c=this.generateIS(t,e,a,r);const i=this.isVideoContiguous;let s,n=-1;if(w&&(n=function(t){for(let e=0;e<t.length;e++)if(t[e].key)return e;return-1}(e.samples),!i&&this.config.forceKeyFrameOnDiscontinuity))if(g=!0,n>0){Gc.warn(`[mp4-remuxer]: Dropped ${n} out of ${y} video samples due to a missing keyframe`);const t=this.getVideoStartPts(e.samples);e.samples=e.samples.slice(n),e.dropped+=n,m+=(e.samples[0].pts-t)/e.inputTimeScale,s=m}else-1===n&&(Gc.warn(`[mp4-remuxer]: No keyframe found out of ${y} video samples`),g=!1);if(this.ISGenerated){if(b&&w){const i=this.getVideoStartPts(e.samples),s=(Nm(t.samples[0].pts,i)-i)/e.inputTimeScale;u+=Math.max(0,s),m+=Math.max(0,-s)}if(b){if(t.samplerate||(Gc.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),c=this.generateIS(t,e,a,r)),d=this.remuxAudio(t,u,this.isAudioContiguous,r,f||w||o===Qp?m:void 0),w){const s=d?d.endPTS-d.startPTS:0;e.inputTimeScale||(Gc.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),c=this.generateIS(t,e,a,r)),l=this.remuxVideo(e,m,i,s)}}else w&&(l=this.remuxVideo(e,m,i,0));l&&(l.firstKeyFrame=n,l.independent=-1!==n,l.firstKeyFramePTS=s)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(i.samples.length&&(p=jm(i,a,this._initPTS,this._initDTS)),s.samples.length&&(h=Bm(s,a,this._initPTS))),{audio:d,video:l,initSegment:c,independent:g,text:h,id3:p}}generateIS(t,e,i,s){const a=t.samples,r=e.samples,n=this.typeSupported,o={},l=this._initPTS;let d,c,h,p=!l||s,g="audio/mp4";if(p&&(d=c=1/0),t.config&&a.length){switch(t.timescale=t.samplerate,t.segmentCodec){case"mp3":n.mpeg?(g="audio/mpeg",t.codec=""):n.mp3&&(t.codec="mp3");break;case"ac3":t.codec="ac-3"}o.audio={id:"audio",container:g,codec:t.codec,initSegment:"mp3"===t.segmentCodec&&n.mpeg?new Uint8Array(0):Dm.initSegment([t]),metadata:{channelCount:t.channelCount}},p&&(h=t.inputTimeScale,l&&h===l.timescale?p=!1:d=c=a[0].pts-Math.round(h*i))}if(e.sps&&e.pps&&r.length){if(e.timescale=e.inputTimeScale,o.video={id:"main",container:"video/mp4",codec:e.codec,initSegment:Dm.initSegment([e]),metadata:{width:e.width,height:e.height}},p)if(h=e.inputTimeScale,l&&h===l.timescale)p=!1;else{const t=this.getVideoStartPts(r),e=Math.round(h*i);c=Math.min(c,Nm(r[0].dts,t)-e),d=Math.min(d,t-e)}this.videoTrackConfig={width:e.width,height:e.height,pixelRatio:e.pixelRatio}}if(Object.keys(o).length)return this.ISGenerated=!0,p?(this._initPTS={baseTime:d,timescale:h},this._initDTS={baseTime:c,timescale:h}):d=h=void 0,{tracks:o,initPTS:d,timescale:h}}remuxVideo(t,e,i,s){const a=t.inputTimeScale,r=t.samples,n=[],o=r.length,l=this._initPTS;let d,c,h=this.nextAvcDts,p=8,g=this.videoSampleDuration,u=Number.POSITIVE_INFINITY,m=Number.NEGATIVE_INFINITY,v=!1;if(!i||null===h){const t=e*a,s=r[0].pts-Nm(r[0].dts,r[0].pts);Um&&null!==h&&Math.abs(t-s-h)<15e3?i=!0:h=t-s}const f=l.baseTime*a/l.timescale;for(let D=0;D<o;D++){const t=r[D];t.pts=Nm(t.pts-f,h),t.dts=Nm(t.dts-f,h),t.dts<r[D>0?D-1:D].dts&&(v=!0)}v&&r.sort((function(t,e){const i=t.dts-e.dts,s=t.pts-e.pts;return i||s})),d=r[0].dts,c=r[r.length-1].dts;const y=c-d,b=y?Math.round(y/(o-1)):g||t.inputTimeScale/30;if(i){const t=d-h,i=t>b,s=t<-1;if((i||s)&&(i?Gc.warn(`AVC: ${Om(t,!0)} ms (${t}dts) hole between fragments detected at ${e.toFixed(3)}`):Gc.warn(`AVC: ${Om(-t,!0)} ms (${t}dts) overlapping between fragments detected at ${e.toFixed(3)}`),!s||h>=r[0].pts||Um)){d=h;const e=r[0].pts-t;if(i)r[0].dts=d,r[0].pts=e;else for(let i=0;i<r.length&&!(r[i].dts>e);i++)r[i].dts-=t,r[i].pts-=t;Gc.log(`Video: Initial PTS/DTS adjusted: ${Om(e,!0)}/${Om(d,!0)}, delta: ${Om(t,!0)} ms`)}}d=Math.max(0,d);let w=0,x=0,k=d;for(let D=0;D<o;D++){const t=r[D],e=t.units,i=e.length;let s=0;for(let a=0;a<i;a++)s+=e[a].data.length;x+=s,w+=i,t.length=s,t.dts<k?(t.dts=k,k+=b/4|0||1):k=t.dts,u=Math.min(t.pts,u),m=Math.max(t.pts,m)}c=r[o-1].dts;const S=x+4*w+8;let _;try{_=new Uint8Array(S)}catch(R){return void this.observer.emit(Fc.ERROR,Fc.ERROR,{type:zc.MUX_ERROR,details:Nc.REMUX_ALLOC_ERROR,fatal:!1,error:R,bytes:S,reason:`fail allocating video mdat ${S}`})}const C=new DataView(_.buffer);C.setUint32(0,S),_.set(Dm.types.mdat,4);let P=!1,L=Number.POSITIVE_INFINITY,T=Number.POSITIVE_INFINITY,E=Number.NEGATIVE_INFINITY,A=Number.NEGATIVE_INFINITY;for(let D=0;D<o;D++){const t=r[D],e=t.units;let i,l=0;for(let s=0,a=e.length;s<a;s++){const t=e[s],i=t.data,a=t.data.byteLength;C.setUint32(p,a),p+=4,_.set(i,p),p+=a,l+=4+a}if(D<o-1)g=r[D+1].dts-t.dts,i=r[D+1].pts-t.pts;else{const e=this.config,n=D>0?t.dts-r[D-1].dts:b;if(i=D>0?t.pts-r[D-1].pts:b,e.stretchShortVideoTrack&&null!==this.nextAudioPts){const i=Math.floor(e.maxBufferHole*a),r=(s?u+s*a:this.nextAudioPts)-t.pts;r>i?(g=r-n,g<0?g=n:P=!0,Gc.log(`[mp4-remuxer]: It is approximately ${r/90} ms to the next segment; using duration ${g/90} ms for the last video frame.`)):g=n}else g=n}const d=Math.round(t.pts-t.dts);L=Math.min(L,g),E=Math.max(E,g),T=Math.min(T,i),A=Math.max(A,i),n.push(new Hm(t.key,g,l,d))}if(n.length)if(Um){if(Um<70){const t=n[0].flags;t.dependsOn=2,t.isNonSync=0}}else if(Fm&&A-T<E-L&&b/E<.025&&0===n[0].cts){Gc.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let t=d;for(let e=0,i=n.length;e<i;e++){const s=t+n[e].duration,a=t+n[e].cts;if(e<i-1){const t=s+n[e+1].cts;n[e].duration=t-a}else n[e].duration=e?n[e-1].duration:b;n[e].cts=0,t=s}}g=P||!g?b:g,this.nextAvcDts=h=c+g,this.videoSampleDuration=g,this.isVideoContiguous=!0;const M={data1:Dm.moof(t.sequenceNumber++,d,Ic({},t,{samples:n})),data2:_,startPTS:u/a,endPTS:(m+g)/a,startDTS:d/a,endDTS:h/a,type:"video",hasAudio:!1,hasVideo:!0,nb:n.length,dropped:t.dropped};return t.samples=[],t.dropped=0,M}getSamplesPerFrame(t){switch(t.segmentCodec){case"mp3":return 1152;case"ac3":return 1536;default:return 1024}}remuxAudio(t,e,i,s,a){const r=t.inputTimeScale,n=r/(t.samplerate?t.samplerate:r),o=this.getSamplesPerFrame(t),l=o*n,d=this._initPTS,c="mp3"===t.segmentCodec&&this.typeSupported.mpeg,h=[],p=void 0!==a;let g=t.samples,u=c?0:8,m=this.nextAudioPts||-1;const v=e*r,f=d.baseTime*r/d.timescale;if(this.isAudioContiguous=i=i||g.length&&m>0&&(s&&Math.abs(v-m)<9e3||Math.abs(Nm(g[0].pts-f,v)-m)<20*l),g.forEach((function(t){t.pts=Nm(t.pts-f,v)})),!i||m<0){if(g=g.filter((t=>t.pts>=0)),!g.length)return;m=0===a?0:s&&!p?Math.max(0,v):g[0].pts}if("aac"===t.segmentCodec){const e=this.config.maxAudioFramesDrift;for(let i=0,s=m;i<g.length;i++){const a=g[i],n=a.pts,o=n-s,d=Math.abs(1e3*o/r);if(o<=-e*l&&p)0===i&&(Gc.warn(`Audio frame @ ${(n/r).toFixed(3)}s overlaps nextAudioPts by ${Math.round(1e3*o/r)} ms.`),this.nextAudioPts=m=s=n);else if(o>=e*l&&d<1e4&&p){let e=Math.round(o/l);s=n-e*l,s<0&&(e--,s+=l),0===i&&(this.nextAudioPts=m=s),Gc.warn(`[mp4-remuxer]: Injecting ${e} audio frame @ ${(s/r).toFixed(3)}s due to ${Math.round(1e3*o/r)} ms gap.`);for(let r=0;r<e;r++){const e=Math.max(s,0);let r=Mm.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);r||(Gc.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),r=a.unit.subarray()),g.splice(i,0,{unit:r,pts:e}),s+=l,i++}}a.pts=s,s+=l}}let y,b=null,w=null,x=0,k=g.length;for(;k--;)x+=g[k].unit.byteLength;for(let A=0,M=g.length;A<M;A++){const e=g[A],s=e.unit;let a=e.pts;if(null!==w){h[A-1].duration=Math.round((a-w)/n)}else{if(i&&"aac"===t.segmentCodec&&(a=m),b=a,!(x>0))return;x+=u;try{y=new Uint8Array(x)}catch(E){return void this.observer.emit(Fc.ERROR,Fc.ERROR,{type:zc.MUX_ERROR,details:Nc.REMUX_ALLOC_ERROR,fatal:!1,error:E,bytes:x,reason:`fail allocating audio mdat ${x}`})}if(!c){new DataView(y.buffer).setUint32(0,x),y.set(Dm.types.mdat,4)}}y.set(s,u);const r=s.byteLength;u+=r,h.push(new Hm(!0,o,r,0)),w=a}const S=h.length;if(!S)return;const _=h[h.length-1];this.nextAudioPts=m=w+n*_.duration;const C=c?new Uint8Array(0):Dm.moof(t.sequenceNumber++,b/n,Ic({},t,{samples:h}));t.samples=[];const P=b/r,L=m/r,T={data1:C,data2:y,startPTS:P,endPTS:L,startDTS:P,endDTS:L,type:"audio",hasAudio:!0,hasVideo:!1,nb:S};return this.isAudioContiguous=!0,T}remuxEmptyAudio(t,e,i,s){const a=t.inputTimeScale,r=a/(t.samplerate?t.samplerate:a),n=this.nextAudioPts,o=this._initDTS,l=9e4*o.baseTime/o.timescale,d=(null!==n?n:s.startDTS*a)+l,c=s.endDTS*a+l,h=1024*r,p=Math.ceil((c-d)/h),g=Mm.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);if(Gc.warn("[mp4-remuxer]: remux empty Audio"),!g)return void Gc.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec");const u=[];for(let m=0;m<p;m++){const t=d+m*h;u.push({unit:g,pts:t,dts:t})}return t.samples=u,this.remuxAudio(t,e,i,!1)}}function Nm(t,e){let i;if(null===e)return t;for(i=e<t?-8589934592:8589934592;Math.abs(t-e)>4294967296;)t+=i;return t}function jm(t,e,i,s){const a=t.samples.length;if(!a)return;const r=t.inputTimeScale;for(let o=0;o<a;o++){const a=t.samples[o];a.pts=Nm(a.pts-i.baseTime*r/i.timescale,e*r)/r,a.dts=Nm(a.dts-s.baseTime*r/s.timescale,e*r)/r}const n=t.samples;return t.samples=[],{samples:n}}function Bm(t,e,i){const s=t.samples.length;if(!s)return;const a=t.inputTimeScale;for(let n=0;n<s;n++){const s=t.samples[n];s.pts=Nm(s.pts-i.baseTime*a/i.timescale,e*a)/a}t.samples.sort(((t,e)=>t.pts-e.pts));const r=t.samples;return t.samples=[],{samples:r}}class Hm{constructor(t,e,i,s){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=e,this.size=i,this.cts=s,this.flags={isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:t?2:1,isNonSync:t?0:1}}}function Vm(t,e){const i=null==t?void 0:t.codec;if(i&&i.length>4)return i;if(e===Jc){if("ec-3"===i||"ac-3"===i||"alac"===i)return i;if("fLaC"===i||"Opus"===i){return Mp(i,!1)}const t="mp4a.40.5";return Gc.info(`Parsed audio codec "${i}" or audio object type not handled. Using "${t}"`),t}return Gc.warn(`Unhandled video codec "${i}"`),"hvc1"===i||"hev1"===i?"hvc1.1.6.L120.90":"av01"===i?"av01.0.04M.08":"avc1.42e01e"}try{$m=self.performance.now.bind(self.performance)}catch(Dw){Gc.debug("Unable to use Performance API on this environment"),$m=null==lh?void 0:lh.Date.now}const Gm=[{demux:class{constructor(t,e){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=e}resetTimeStamp(){}resetInitSegment(t,e,i,s){const a=this.videoTrack=Ku("video",1),r=this.audioTrack=Ku("audio",1),n=this.txtTrack=Ku("text",1);if(this.id3Track=Ku("id3",1),this.timeOffset=0,null==t||!t.byteLength)return;const o=tp(t);if(o.video){const{id:t,timescale:e,codec:i}=o.video;a.id=t,a.timescale=n.timescale=e,a.codec=i}if(o.audio){const{id:t,timescale:e,codec:i}=o.audio;r.id=t,r.timescale=e,r.codec=i}n.id=Gh.text,a.sampleDuration=0,a.duration=r.duration=s}resetContiguity(){this.remainderData=null}static probe(t){return function(t){const e=t.byteLength;for(let i=0;i<e;){const s=Kh(t,i);if(s>8&&109===t[i+4]&&111===t[i+5]&&111===t[i+6]&&102===t[i+7])return!0;i=s>1?i+s:e}return!1}(t)}demux(t,e){this.timeOffset=e;let i=t;const s=this.videoTrack,a=this.txtTrack;if(this.config.progressive){this.remainderData&&(i=op(this.remainderData,t));const e=function(t){const e={valid:null,remainder:null},i=Jh(t,["moof"]);if(i.length<2)return e.remainder=t,e;const s=i[i.length-1];return e.valid=_h(t,0,s.byteOffset-8),e.remainder=_h(t,s.byteOffset-8),e}(i);this.remainderData=e.remainder,s.samples=e.valid||new Uint8Array}else s.samples=i;const r=this.extractID3Track(s,e);return a.samples=lp(e,s),{videoTrack:s,audioTrack:this.audioTrack,id3Track:r,textTrack:this.txtTrack}}flush(){const t=this.timeOffset,e=this.videoTrack,i=this.txtTrack;e.samples=this.remainderData||new Uint8Array,this.remainderData=null;const s=this.extractID3Track(e,this.timeOffset);return i.samples=lp(t,e),{videoTrack:e,audioTrack:Ku(),id3Track:s,textTrack:Ku()}}extractID3Track(t,e){const i=this.id3Track;if(t.samples.length){const s=Jh(t.samples,["emsg"]);s&&s.forEach((t=>{const s=function(t){const e=t[0];let i="",s="",a=0,r=0,n=0,o=0,l=0,d=0;if(0===e){for(;"\0"!==qh(t.subarray(d,d+1));)i+=qh(t.subarray(d,d+1)),d+=1;for(i+=qh(t.subarray(d,d+1)),d+=1;"\0"!==qh(t.subarray(d,d+1));)s+=qh(t.subarray(d,d+1)),d+=1;s+=qh(t.subarray(d,d+1)),d+=1,a=Kh(t,12),r=Kh(t,16),o=Kh(t,20),l=Kh(t,24),d=28}else if(1===e){d+=4,a=Kh(t,d),d+=4;const e=Kh(t,d);d+=4;const r=Kh(t,d);for(d+=4,n=2**32*e+r,$c(n)||(n=Number.MAX_SAFE_INTEGER,Gc.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),o=Kh(t,d),d+=4,l=Kh(t,d),d+=4;"\0"!==qh(t.subarray(d,d+1));)i+=qh(t.subarray(d,d+1)),d+=1;for(i+=qh(t.subarray(d,d+1)),d+=1;"\0"!==qh(t.subarray(d,d+1));)s+=qh(t.subarray(d,d+1)),d+=1;s+=qh(t.subarray(d,d+1)),d+=1}return{schemeIdUri:i,value:s,timeScale:a,presentationTime:n,presentationTimeDelta:r,eventDuration:o,id:l,payload:t.subarray(d,t.byteLength)}}(t);if(mm.test(s.schemeIdUri)){const t=Oc(s.presentationTime)?s.presentationTime/s.timeScale:e+s.presentationTimeDelta/s.timeScale;let a=4294967295===s.eventDuration?Number.POSITIVE_INFINITY:s.eventDuration/s.timeScale;a<=.001&&(a=Number.POSITIVE_INFINITY);const r=s.payload;i.samples.push({data:r,len:r.byteLength,dts:t,pts:t,type:dg,duration:a})}}))}return i}demuxSampleAes(t,e,i){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){}},remux:class{constructor(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null}destroy(){}resetTimeStamp(t){this.initPTS=t,this.lastEndTime=null}resetNextTimestamp(){this.lastEndTime=null}resetInitSegment(t,e,i,s){this.audioCodec=e,this.videoCodec=i,this.generateInitSegment(function(t,e){if(!t||!e)return t;const i=e.keyId;i&&e.isCommonEncryption&&Jh(t,["moov","trak"]).forEach((t=>{const e=Jh(t,["mdia","minf","stbl","stsd"])[0].subarray(8);let s=Jh(e,["enca"]);const a=s.length>0;a||(s=Jh(e,["encv"])),s.forEach((t=>{Jh(a?t.subarray(28):t.subarray(78),["sinf"]).forEach((t=>{const e=rp(t);if(e){const t=e.subarray(8,24);t.some((t=>0!==t))||(Gc.log(`[eme] Patching keyId in 'enc${a?"a":"v"}>sinf>>tenc' box: ${Bh(t)} -> ${Bh(i)}`),e.set(i,8))}}))}))}));return t}(t,s)),this.emitInitSegment=!0}generateInitSegment(t){let{audioCodec:e,videoCodec:i}=this;if(null==t||!t.byteLength)return this.initTracks=void 0,void(this.initData=void 0);const s=this.initData=tp(t);s.audio&&(e=Vm(s.audio,Jc)),s.video&&(i=Vm(s.video,Xc));const a={};s.audio&&s.video?a.audiovideo={container:"video/mp4",codec:e+","+i,initSegment:t,id:"main"}:s.audio?a.audio={container:"audio/mp4",codec:e,initSegment:t,id:"audio"}:s.video?a.video={container:"video/mp4",codec:i,initSegment:t,id:"main"}:Gc.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=a}remux(t,e,i,s,a,r){var n,o;let{initPTS:l,lastEndTime:d}=this;const c={audio:void 0,video:void 0,text:s,id3:i,initSegment:void 0};Oc(d)||(d=this.lastEndTime=a||0);const h=e.samples;if(null==h||!h.length)return c;const p={initPTS:void 0,timescale:1};let g=this.initData;if(null!=(n=g)&&n.length||(this.generateInitSegment(h),g=this.initData),null==(o=g)||!o.length)return Gc.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),c;this.emitInitSegment&&(p.tracks=this.initTracks,this.emitInitSegment=!1);const u=function(t,e){let i=0,s=0,a=0;const r=Jh(t,["moof","traf"]);for(let n=0;n<r.length;n++){const t=r[n],o=Jh(t,["tfhd"])[0],l=e[Kh(o,4)];if(!l)continue;const d=l.default,c=Kh(o,0)|(null==d?void 0:d.flags);let h=null==d?void 0:d.duration;8&c&&(h=Kh(o,2&c?12:8));const p=l.timescale||9e4,g=Jh(t,["trun"]);for(let e=0;e<g.length;e++)i=np(g[e]),!i&&h&&(i=h*Kh(g[e],4)),l.type===Xc?s+=i/p:l.type===Jc&&(a+=i/p)}if(0===s&&0===a){let e=1/0,i=0,s=0;const a=Jh(t,["sidx"]);for(let t=0;t<a.length;t++){const r=Xh(a[t]);if(null!=r&&r.references){e=Math.min(e,r.earliestPresentationTime/r.timescale);const t=r.references.reduce(((t,e)=>t+e.info.duration||0),0);i=Math.max(i,t+r.earliestPresentationTime/r.timescale),s=i-e}}if(s&&Oc(s))return s}return s||a}(h,g),m=function(t,e){return Jh(e,["moof","traf"]).reduce(((e,i)=>{const s=Jh(i,["tfdt"])[0],a=s[0],r=Jh(i,["tfhd"]).reduce(((e,i)=>{const r=Kh(i,4),n=t[r];if(n){let t=Kh(s,4);if(1===a){if(t===Hh)return Gc.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),e;t*=Hh+1,t+=Kh(s,8)}const i=t/(n.timescale||9e4);if(Oc(i)&&(null===e||i<e))return i}return e}),null);return null!==r&&Oc(r)&&(null===e||r<e)?r:e}),null)}(g,h),v=null===m?a:m;(function(t,e,i,s){if(null===t)return!0;const a=Math.max(s,1),r=e-t.baseTime/t.timescale;return Math.abs(r-i)>a}(l,v,a,u)||p.timescale!==l.timescale&&r)&&(p.initPTS=v-a,l&&1===l.timescale&&Gc.warn("Adjusting initPTS by "+(p.initPTS-l.baseTime)),this.initPTS=l={baseTime:p.initPTS,timescale:1});const f=t?v-l.baseTime/l.timescale:d,y=f+u;!function(t,e,i){Jh(e,["moof","traf"]).forEach((e=>{Jh(e,["tfhd"]).forEach((s=>{const a=Kh(s,4),r=t[a];if(!r)return;const n=r.timescale||9e4;Jh(e,["tfdt"]).forEach((t=>{const e=t[0],s=i*n;if(s){let i=Kh(t,4);if(0===e)i-=s,i=Math.max(i,0),Qh(t,4,i);else{i*=Math.pow(2,32),i+=Kh(t,8),i-=s,i=Math.max(i,0);const e=Math.floor(i/(Hh+1)),a=Math.floor(i%(Hh+1));Qh(t,4,e),Qh(t,8,a)}}}))}))}))}(g,h,l.baseTime/l.timescale),u>0?this.lastEndTime=y:(Gc.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const b=!!g.audio,w=!!g.video;let x="";b&&(x+="audio"),w&&(x+="video");const k={data1:h,startPTS:f,startDTS:f,endPTS:y,endDTS:y,type:x,hasAudio:b,hasVideo:w,nb:1,dropped:0};return c.audio="audio"===k.type?k:void 0,c.video="audio"!==k.type?k:void 0,c.initSegment=p,c.id3=jm(i,a,l,l),s.samples.length&&(c.text=Bm(s,a,l)),c}}},{demux:_m,remux:zm},{demux:class extends Wu{constructor(t,e){super(),this.observer=void 0,this.config=void 0,this.observer=t,this.config=e}resetInitSegment(t,e,i,s){super.resetInitSegment(t,e,i,s),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:e,duration:s,inputTimeScale:9e4,dropped:0}}static probe(t){if(!t)return!1;const e=Lh(t,0);let i=(null==e?void 0:e.length)||0;if(um(t,i))return!1;for(let s=t.length;i<s;i++)if(em(t,i))return Gc.log("ADTS sync word found !"),!0;return!1}canParse(t,e){return function(t,e){return function(t,e){return e+5<t.length}(t,e)&&Qu(t,e)&&Xu(t,e)<=t.length-e}(t,e)}appendFrame(t,e,i){im(t,this.observer,e,i,t.manifestCodec);const s=am(t,e,i,this.basePTS,this.frameIndex);if(s&&0===s.missing)return s}},remux:zm},{demux:class extends Wu{resetInitSegment(t,e,i,s){super.resetInitSegment(t,e,i,s),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:e,duration:s,inputTimeScale:9e4,dropped:0}}static probe(t){if(!t)return!1;const e=Lh(t,0);let i=(null==e?void 0:e.length)||0;if(e&&11===t[i]&&119===t[i+1]&&void 0!==Ah(e)&&vm(t,i)<=16)return!1;for(let s=t.length;i<s;i++)if(um(t,i))return Gc.log("MPEG Audio sync word found !"),!0;return!1}canParse(t,e){return function(t,e){return pm(t,e)&&4<=t.length-e}(t,e)}appendFrame(t,e,i){if(null!==this.basePTS)return cm(t,e,i,this.basePTS,this.frameIndex)}},remux:zm}];Gm.splice(2,0,{demux:fm,remux:zm});class qm{constructor(t,e,i,s,a){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=t,this.typeSupported=e,this.config=i,this.vendor=s,this.id=a}configure(t){this.transmuxConfig=t,this.decrypter&&this.decrypter.reset()}push(t,e,i,s){const a=i.transmuxing;a.executeStart=$m();let r=new Uint8Array(t);const{currentTransmuxState:n,transmuxConfig:o}=this;s&&(this.currentTransmuxState=s);const{contiguous:l,discontinuity:d,trackSwitch:c,accurateTimeOffset:h,timeOffset:p,initSegmentChange:g}=s||n,{audioCodec:u,videoCodec:m,defaultInitPts:v,duration:f,initSegmentData:y}=o,b=function(t,e){let i=null;t.byteLength>0&&null!=(null==e?void 0:e.key)&&null!==e.iv&&null!=e.method&&(i=e);return i}(r,e);if(b&&"AES-128"===b.method){const t=this.getDecrypter();if(!t.isSync())return this.decryptionPromise=t.webCryptoDecrypt(r,b.key.buffer,b.iv.buffer).then((t=>{const e=this.push(t,null,i);return this.decryptionPromise=null,e})),this.decryptionPromise;{let e=t.softwareDecrypt(r,b.key.buffer,b.iv.buffer);if(i.part>-1&&(e=t.flush()),!e)return a.executeEnd=$m(),Zm(i);r=new Uint8Array(e)}}const w=this.needsProbing(d,c);if(w){const t=this.configureTransmuxer(r);if(t)return Gc.warn(`[transmuxer] ${t.message}`),this.observer.emit(Fc.ERROR,Fc.ERROR,{type:zc.MEDIA_ERROR,details:Nc.FRAG_PARSING_ERROR,fatal:!1,error:t,reason:t.message}),a.executeEnd=$m(),Zm(i)}(d||c||g||w)&&this.resetInitSegment(y,u,m,f,e),(d||g||w)&&this.resetInitialTimestamp(v),l||this.resetContiguity();const x=this.transmux(r,b,p,h,i),k=this.currentTransmuxState;return k.contiguous=!0,k.discontinuity=!1,k.trackSwitch=!1,a.executeEnd=$m(),x}flush(t){const e=t.transmuxing;e.executeStart=$m();const{decrypter:i,currentTransmuxState:s,decryptionPromise:a}=this;if(a)return a.then((()=>this.flush(t)));const r=[],{timeOffset:n}=s;if(i){const e=i.flush();e&&r.push(this.push(e,null,t))}const{demuxer:o,remuxer:l}=this;if(!o||!l)return e.executeEnd=$m(),[Zm(t)];const d=o.flush(n);return Km(d)?d.then((e=>(this.flushRemux(r,e,t),r))):(this.flushRemux(r,d,t),r)}flushRemux(t,e,i){const{audioTrack:s,videoTrack:a,id3Track:r,textTrack:n}=e,{accurateTimeOffset:o,timeOffset:l}=this.currentTransmuxState;Gc.log(`[transmuxer.ts]: Flushed fragment ${i.sn}${i.part>-1?" p: "+i.part:""} of level ${i.level}`);const d=this.remuxer.remux(s,a,r,n,l,o,!0,this.id);t.push({remuxResult:d,chunkMeta:i}),i.transmuxing.executeEnd=$m()}resetInitialTimestamp(t){const{demuxer:e,remuxer:i}=this;e&&i&&(e.resetTimeStamp(t),i.resetTimeStamp(t))}resetContiguity(){const{demuxer:t,remuxer:e}=this;t&&e&&(t.resetContiguity(),e.resetNextTimestamp())}resetInitSegment(t,e,i,s,a){const{demuxer:r,remuxer:n}=this;r&&n&&(r.resetInitSegment(t,e,i,s),n.resetInitSegment(t,e,i,a))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(t,e,i,s,a){let r;return r=e&&"SAMPLE-AES"===e.method?this.transmuxSampleAes(t,e,i,s,a):this.transmuxUnencrypted(t,i,s,a),r}transmuxUnencrypted(t,e,i,s){const{audioTrack:a,videoTrack:r,id3Track:n,textTrack:o}=this.demuxer.demux(t,e,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(a,r,n,o,e,i,!1,this.id),chunkMeta:s}}transmuxSampleAes(t,e,i,s,a){return this.demuxer.demuxSampleAes(t,e,i).then((t=>({remuxResult:this.remuxer.remux(t.audioTrack,t.videoTrack,t.id3Track,t.textTrack,i,s,!1,this.id),chunkMeta:a})))}configureTransmuxer(t){const{config:e,observer:i,typeSupported:s,vendor:a}=this;let r;for(let h=0,p=Gm.length;h<p;h++){var n;if(null!=(n=Gm[h].demux)&&n.probe(t)){r=Gm[h];break}}if(!r)return new Error("Failed to find demuxer by probing fragment data");const o=this.demuxer,l=this.remuxer,d=r.remux,c=r.demux;l&&l instanceof d||(this.remuxer=new d(i,e,s,a)),o&&o instanceof c||(this.demuxer=new c(i,e,s),this.probe=c.probe)}needsProbing(t,e){return!this.demuxer||!this.remuxer||t||e}getDecrypter(){let t=this.decrypter;return t||(t=this.decrypter=new Ru(this.config)),t}}const Zm=t=>({remuxResult:{},chunkMeta:t});function Km(t){return"then"in t&&t.then instanceof Function}class Wm{constructor(t,e,i,s,a){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=t,this.videoCodec=e,this.initSegmentData=i,this.duration=s,this.defaultInitPts=a||null}}class Ym{constructor(t,e,i,s,a,r){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=t,this.contiguous=e,this.accurateTimeOffset=i,this.trackSwitch=s,this.timeOffset=a,this.initSegmentChange=r}}var Qm={exports:{}};!function(t){var e=Object.prototype.hasOwnProperty,i="~";function s(){}function a(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function r(t,e,s,r,n){if("function"!=typeof s)throw new TypeError("The listener must be a function");var o=new a(s,r||t,n),l=i?i+e:e;return t._events[l]?t._events[l].fn?t._events[l]=[t._events[l],o]:t._events[l].push(o):(t._events[l]=o,t._eventsCount++),t}function n(t,e){0==--t._eventsCount?t._events=new s:delete t._events[e]}function o(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),(new s).__proto__||(i=!1)),o.prototype.eventNames=function(){var t,s,a=[];if(0===this._eventsCount)return a;for(s in t=this._events)e.call(t,s)&&a.push(i?s.slice(1):s);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(t)):a},o.prototype.listeners=function(t){var e=i?i+t:t,s=this._events[e];if(!s)return[];if(s.fn)return[s.fn];for(var a=0,r=s.length,n=new Array(r);a<r;a++)n[a]=s[a].fn;return n},o.prototype.listenerCount=function(t){var e=i?i+t:t,s=this._events[e];return s?s.fn?1:s.length:0},o.prototype.emit=function(t,e,s,a,r,n){var o=i?i+t:t;if(!this._events[o])return!1;var l,d,c=this._events[o],h=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),h){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,s),!0;case 4:return c.fn.call(c.context,e,s,a),!0;case 5:return c.fn.call(c.context,e,s,a,r),!0;case 6:return c.fn.call(c.context,e,s,a,r,n),!0}for(d=1,l=new Array(h-1);d<h;d++)l[d-1]=arguments[d];c.fn.apply(c.context,l)}else{var p,g=c.length;for(d=0;d<g;d++)switch(c[d].once&&this.removeListener(t,c[d].fn,void 0,!0),h){case 1:c[d].fn.call(c[d].context);break;case 2:c[d].fn.call(c[d].context,e);break;case 3:c[d].fn.call(c[d].context,e,s);break;case 4:c[d].fn.call(c[d].context,e,s,a);break;default:if(!l)for(p=1,l=new Array(h-1);p<h;p++)l[p-1]=arguments[p];c[d].fn.apply(c[d].context,l)}}return!0},o.prototype.on=function(t,e,i){return r(this,t,e,i,!1)},o.prototype.once=function(t,e,i){return r(this,t,e,i,!0)},o.prototype.removeListener=function(t,e,s,a){var r=i?i+t:t;if(!this._events[r])return this;if(!e)return n(this,r),this;var o=this._events[r];if(o.fn)o.fn!==e||a&&!o.once||s&&o.context!==s||n(this,r);else{for(var l=0,d=[],c=o.length;l<c;l++)(o[l].fn!==e||a&&!o[l].once||s&&o[l].context!==s)&&d.push(o[l]);d.length?this._events[r]=1===d.length?d[0]:d:n(this,r)}return this},o.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&n(this,e)):(this._events=new s,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=i,o.EventEmitter=o,t.exports=o}(Qm);var Jm=Lc(Qm.exports);class Xm{constructor(t,e,i,s){this.error=null,this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;const a=t.config;this.hls=t,this.id=e,this.useWorker=!!a.enableWorker,this.onTransmuxComplete=i,this.onFlush=s;const r=(t,e)=>{(e=e||{}).frag=this.frag,e.id=this.id,t===Fc.ERROR&&(this.error=e.error),this.hls.trigger(t,e)};this.observer=new Jm,this.observer.on(Fc.FRAG_DECRYPTED,r),this.observer.on(Fc.ERROR,r);const n=kp(a.preferManagedMediaSource)||{isTypeSupported:()=>!1},o={mpeg:n.isTypeSupported("audio/mpeg"),mp3:n.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:n.isTypeSupported('audio/mp4; codecs="ac-3"')};if(this.useWorker&&"undefined"!=typeof Worker){if(a.workerPath||"function"==typeof __HLS_WORKER_BUNDLE__){try{a.workerPath?(Gc.log(`loading Web Worker ${a.workerPath} for "${e}"`),this.workerContext=function(t){const e=new self.URL(t,self.location.href).href;return{worker:new self.Worker(e),scriptURL:e}}(a.workerPath)):(Gc.log(`injecting Web Worker for "${e}"`),this.workerContext=function(){const t=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),e=self.URL.createObjectURL(t);return{worker:new self.Worker(e),objectURL:e}}()),this.onwmsg=t=>this.onWorkerMessage(t);const{worker:t}=this.workerContext;t.addEventListener("message",this.onwmsg),t.onerror=t=>{const i=new Error(`${t.message}  (${t.filename}:${t.lineno})`);a.enableWorker=!1,Gc.warn(`Error in "${e}" Web Worker, fallback to inline`),this.hls.trigger(Fc.ERROR,{type:zc.OTHER_ERROR,details:Nc.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:i})},t.postMessage({cmd:"init",typeSupported:o,vendor:"",id:e,config:JSON.stringify(a)})}catch(Dw){Gc.warn(`Error setting up "${e}" Web Worker, fallback to inline`,Dw),this.resetWorker(),this.error=null,this.transmuxer=new qm(this.observer,o,a,"",e)}return}}this.transmuxer=new qm(this.observer,o,a,"",e)}resetWorker(){if(this.workerContext){const{worker:t,objectURL:e}=this.workerContext;e&&self.URL.revokeObjectURL(e),t.removeEventListener("message",this.onwmsg),t.onerror=null,t.terminate(),this.workerContext=null}}destroy(){if(this.workerContext)this.resetWorker(),this.onwmsg=void 0;else{const t=this.transmuxer;t&&(t.destroy(),this.transmuxer=null)}const t=this.observer;t&&t.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null}push(t,e,i,s,a,r,n,o,l,d){var c,h;l.transmuxing.start=self.performance.now();const{transmuxer:p}=this,g=r?r.start:a.start,u=a.decryptdata,m=this.frag,v=!(m&&a.cc===m.cc),f=!(m&&l.level===m.level),y=m?l.sn-m.sn:-1,b=this.part?l.part-this.part.index:-1,w=0===y&&l.id>1&&l.id===(null==m?void 0:m.stats.chunkCount),x=!f&&(1===y||0===y&&(1===b||w&&b<=0)),k=self.performance.now();(f||y||0===a.stats.parsing.start)&&(a.stats.parsing.start=k),!r||!b&&x||(r.stats.parsing.start=k);const S=!(m&&(null==(c=a.initSegment)?void 0:c.url)===(null==(h=m.initSegment)?void 0:h.url)),_=new Ym(v,x,o,f,g,S);if(!x||v||S){Gc.log(`[transmuxer-interface, ${a.type}]: Starting new transmux session for sn: ${l.sn} p: ${l.part} level: ${l.level} id: ${l.id}\n        discontinuity: ${v}\n        trackSwitch: ${f}\n        contiguous: ${x}\n        accurateTimeOffset: ${o}\n        timeOffset: ${g}\n        initSegmentChange: ${S}`);const t=new Wm(i,s,e,n,d);this.configureTransmuxer(t)}if(this.frag=a,this.part=r,this.workerContext)this.workerContext.worker.postMessage({cmd:"demux",data:t,decryptdata:u,chunkMeta:l,state:_},t instanceof ArrayBuffer?[t]:[]);else if(p){const e=p.push(t,u,l,_);Km(e)?(p.async=!0,e.then((t=>{this.handleTransmuxComplete(t)})).catch((t=>{this.transmuxerError(t,l,"transmuxer-interface push error")}))):(p.async=!1,this.handleTransmuxComplete(e))}}flush(t){t.transmuxing.start=self.performance.now();const{transmuxer:e}=this;if(this.workerContext)this.workerContext.worker.postMessage({cmd:"flush",chunkMeta:t});else if(e){let i=e.flush(t);Km(i)||e.async?(Km(i)||(i=Promise.resolve(i)),i.then((e=>{this.handleFlushResult(e,t)})).catch((e=>{this.transmuxerError(e,t,"transmuxer-interface flush error")}))):this.handleFlushResult(i,t)}}transmuxerError(t,e,i){this.hls&&(this.error=t,this.hls.trigger(Fc.ERROR,{type:zc.MEDIA_ERROR,details:Nc.FRAG_PARSING_ERROR,chunkMeta:e,frag:this.frag||void 0,fatal:!1,error:t,err:t,reason:i}))}handleFlushResult(t,e){t.forEach((t=>{this.handleTransmuxComplete(t)})),this.onFlush(e)}onWorkerMessage(t){const e=t.data;if(null==e||!e.event)return void Gc.warn("worker message received with no "+(e?"event name":"data"));const i=this.hls;if(this.hls)switch(e.event){case"init":{var s;const t=null==(s=this.workerContext)?void 0:s.objectURL;t&&self.URL.revokeObjectURL(t);break}case"transmuxComplete":this.handleTransmuxComplete(e.data);break;case"flush":this.onFlush(e.data);break;case"workerLog":Gc[e.data.logType]&&Gc[e.data.logType](e.data.message);break;default:e.data=e.data||{},e.data.frag=this.frag,e.data.id=this.id,i.trigger(e.event,e.data)}}configureTransmuxer(t){const{transmuxer:e}=this;this.workerContext?this.workerContext.worker.postMessage({cmd:"configure",config:t}):e&&e.configure(t)}handleTransmuxComplete(t){t.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(t)}}function tv(t,e){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(!ev(t[i].attrs,e[i].attrs))return!1;return!0}function ev(t,e,i){const s=t["STABLE-RENDITION-ID"];return s&&!i?s===e["STABLE-RENDITION-ID"]:!(i||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some((i=>t[i]!==e[i]))}function iv(t,e){return e.label.toLowerCase()===t.name.toLowerCase()&&(!e.language||e.language.toLowerCase()===(t.lang||"").toLowerCase())}class sv{constructor(t){this.buffered=void 0;const e=(e,i,s)=>{if((i>>>=0)>s-1)throw new DOMException(`Failed to execute '${e}' on 'TimeRanges': The index provided (${i}) is greater than the maximum bound (${s})`);return t[i][e]};this.buffered={get length(){return t.length},end:i=>e("end",i,t.length),start:i=>e("start",i,t.length)}}}class av{constructor(t){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=t}append(t,e,i){const s=this.queues[e];s.push(t),1!==s.length||i||this.executeNext(e)}insertAbort(t,e){this.queues[e].unshift(t),this.executeNext(e)}appendBlocker(t){let e;const i=new Promise((t=>{e=t})),s={execute:e,onStart:()=>{},onComplete:()=>{},onError:()=>{}};return this.append(s,t),i}executeNext(t){const e=this.queues[t];if(e.length){const s=e[0];try{s.execute()}catch(i){Gc.warn(`[buffer-operation-queue]: Exception executing "${t}" SourceBuffer operation: ${i}`),s.onError(i);const e=this.buffers[t];null!=e&&e.updating||this.shiftAndExecuteNext(t)}}}shiftAndExecuteNext(t){this.queues[t].shift(),this.executeNext(t)}current(t){return this.queues[t][0]}}const rv=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/;function nv(t){const e=t.querySelectorAll("source");[].slice.call(e).forEach((e=>{t.removeChild(e)}))}const ov={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},lv=t=>String.fromCharCode(ov[t]||t),dv=15,cv=100,hv={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},pv={17:2,18:4,21:6,22:8,23:10,19:13,20:15},gv={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},uv={25:2,26:4,29:6,30:8,31:10,27:13,28:15},mv=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class vv{constructor(){this.time=null,this.verboseLevel=0}log(t,e){if(this.verboseLevel>=t){const i="function"==typeof e?e():e;Gc.log(`${this.time} [${t}] ${i}`)}}}const fv=function(t){const e=[];for(let i=0;i<t.length;i++)e.push(t[i].toString(16));return e};class yv{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(t){const e=["foreground","underline","italics","background","flash"];for(let i=0;i<e.length;i++){const s=e[i];t.hasOwnProperty(s)&&(this[s]=t[s])}}isDefault(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash}equals(t){return this.foreground===t.foreground&&this.underline===t.underline&&this.italics===t.italics&&this.background===t.background&&this.flash===t.flash}copy(t){this.foreground=t.foreground,this.underline=t.underline,this.italics=t.italics,this.background=t.background,this.flash=t.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class bv{constructor(){this.uchar=" ",this.penState=new yv}reset(){this.uchar=" ",this.penState.reset()}setChar(t,e){this.uchar=t,this.penState.copy(e)}setPenState(t){this.penState.copy(t)}equals(t){return this.uchar===t.uchar&&this.penState.equals(t.penState)}copy(t){this.uchar=t.uchar,this.penState.copy(t.penState)}isEmpty(){return" "===this.uchar&&this.penState.isDefault()}}class wv{constructor(t){this.chars=[],this.pos=0,this.currPenState=new yv,this.cueStartTime=null,this.logger=void 0;for(let e=0;e<cv;e++)this.chars.push(new bv);this.logger=t}equals(t){for(let e=0;e<cv;e++)if(!this.chars[e].equals(t.chars[e]))return!1;return!0}copy(t){for(let e=0;e<cv;e++)this.chars[e].copy(t.chars[e])}isEmpty(){let t=!0;for(let e=0;e<cv;e++)if(!this.chars[e].isEmpty()){t=!1;break}return t}setCursor(t){this.pos!==t&&(this.pos=t),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>cv&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=cv)}moveCursor(t){const e=this.pos+t;if(t>1)for(let i=this.pos+1;i<e+1;i++)this.chars[i].setPenState(this.currPenState);this.setCursor(e)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(t){t>=144&&this.backSpace();const e=lv(t);this.pos>=cv?this.logger.log(0,(()=>"Cannot insert "+t.toString(16)+" ("+e+") at position "+this.pos+". Skipping it!")):(this.chars[this.pos].setChar(e,this.currPenState),this.moveCursor(1))}clearFromPos(t){let e;for(e=t;e<cv;e++)this.chars[e].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const t=[];let e=!0;for(let i=0;i<cv;i++){const s=this.chars[i].uchar;" "!==s&&(e=!1),t.push(s)}return e?"":t.join("")}setPenStyles(t){this.currPenState.setStyles(t);this.chars[this.pos].setPenState(this.currPenState)}}class xv{constructor(t){this.rows=[],this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let e=0;e<dv;e++)this.rows.push(new wv(t));this.logger=t}reset(){for(let t=0;t<dv;t++)this.rows[t].clear();this.currRow=14}equals(t){let e=!0;for(let i=0;i<dv;i++)if(!this.rows[i].equals(t.rows[i])){e=!1;break}return e}copy(t){for(let e=0;e<dv;e++)this.rows[e].copy(t.rows[e])}isEmpty(){let t=!0;for(let e=0;e<dv;e++)if(!this.rows[e].isEmpty()){t=!1;break}return t}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(t){this.rows[this.currRow].insertChar(t)}setPen(t){this.rows[this.currRow].setPenStyles(t)}moveCursor(t){this.rows[this.currRow].moveCursor(t)}setCursor(t){this.logger.log(2,"setCursor: "+t);this.rows[this.currRow].setCursor(t)}setPAC(t){this.logger.log(2,(()=>"pacData = "+JSON.stringify(t)));let e=t.row-1;if(this.nrRollUpRows&&e<this.nrRollUpRows-1&&(e=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==e){for(let e=0;e<dv;e++)this.rows[e].clear();const t=this.currRow+1-this.nrRollUpRows,i=this.lastOutputScreen;if(i){const s=i.rows[t].cueStartTime,a=this.logger.time;if(null!==s&&null!==a&&s<a)for(let r=0;r<this.nrRollUpRows;r++)this.rows[e-this.nrRollUpRows+r+1].copy(i.rows[t+r])}}this.currRow=e;const i=this.rows[this.currRow];if(null!==t.indent){const e=t.indent,s=Math.max(e-1,0);i.setCursor(t.indent),t.color=i.chars[s].penState.foreground}const s={foreground:t.color,underline:t.underline,italics:t.italics,background:"black",flash:!1};this.setPen(s)}setBkgData(t){this.logger.log(2,(()=>"bkgData = "+JSON.stringify(t))),this.backSpace(),this.setPen(t),this.insertChar(32)}setRollUpRows(t){this.nrRollUpRows=t}rollUp(){if(null===this.nrRollUpRows)return void this.logger.log(3,"roll_up but nrRollUpRows not set yet");this.logger.log(1,(()=>this.getDisplayText()));const t=this.currRow+1-this.nrRollUpRows,e=this.rows.splice(t,1)[0];e.clear(),this.rows.splice(this.currRow,0,e),this.logger.log(2,"Rolling up")}getDisplayText(t){t=t||!1;const e=[];let i="",s=-1;for(let a=0;a<dv;a++){const i=this.rows[a].getTextString();i&&(s=a+1,t?e.push("Row "+s+": '"+i+"'"):e.push(i.trim()))}return e.length>0&&(i=t?"["+e.join(" | ")+"]":e.join("\n")),i}getTextAndFormat(){return this.rows}}class kv{constructor(t,e,i){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=t,this.outputFilter=e,this.mode=null,this.verbose=0,this.displayedMemory=new xv(i),this.nonDisplayedMemory=new xv(i),this.lastOutputScreen=new xv(i),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=i}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(t){this.outputFilter=t}setPAC(t){this.writeScreen.setPAC(t)}setBkgData(t){this.writeScreen.setBkgData(t)}setMode(t){t!==this.mode&&(this.mode=t,this.logger.log(2,(()=>"MODE="+t)),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=t)}insertChars(t){for(let i=0;i<t.length;i++)this.writeScreen.insertChar(t[i]);const e=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,(()=>e+": "+this.writeScreen.getDisplayText(!0))),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(1,(()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0))),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(t){this.logger.log(2,"RU("+t+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(t)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){const t=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=t,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,(()=>"DISP: "+this.displayedMemory.getDisplayText()))}this.outputDataUpdate(!0)}ccTO(t){this.logger.log(2,"TO("+t+") - Tab Offset"),this.writeScreen.moveCursor(t)}ccMIDROW(t){const e={flash:!1};if(e.underline=t%2==1,e.italics=t>=46,e.italics)e.foreground="white";else{const i=Math.floor(t/2)-16,s=["white","green","blue","cyan","red","yellow","magenta"];e.foreground=s[i]}this.logger.log(2,"MIDROW: "+JSON.stringify(e)),this.writeScreen.setPen(e)}outputDataUpdate(t=!1){const e=this.logger.time;null!==e&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),t&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(t){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.displayedMemory),this.cueStartTime=t))}}class Sv{constructor(t,e,i){this.channels=void 0,this.currentChannel=0,this.cmdHistory={a:null,b:null},this.logger=void 0;const s=this.logger=new vv;this.channels=[null,new kv(t,e,s),new kv(t+1,i,s)]}getHandler(t){return this.channels[t].getHandler()}setHandler(t,e){this.channels[t].setHandler(e)}addData(t,e){this.logger.time=t;for(let i=0;i<e.length;i+=2){const t=127&e[i],s=127&e[i+1];let a=!1,r=null;if(0===t&&0===s)continue;this.logger.log(3,(()=>"["+fv([e[i],e[i+1]])+"] -> ("+fv([t,s])+")"));const n=this.cmdHistory;if(t>=16&&t<=31){if(Cv(t,s,n)){_v(null,null,n),this.logger.log(3,(()=>"Repeated command ("+fv([t,s])+") is dropped"));continue}_v(t,s,this.cmdHistory),a=this.parseCmd(t,s),a||(a=this.parseMidrow(t,s)),a||(a=this.parsePAC(t,s)),a||(a=this.parseBackgroundAttributes(t,s))}else _v(null,null,n);if(!a&&(r=this.parseChars(t,s),r)){const t=this.currentChannel;if(t&&t>0){this.channels[t].insertChars(r)}else this.logger.log(2,"No channel found yet. TEXT-MODE?")}a||r||this.logger.log(2,(()=>"Couldn't parse cleaned data "+fv([t,s])+" orig: "+fv([e[i],e[i+1]])))}}parseCmd(t,e){if(!((20===t||28===t||21===t||29===t)&&e>=32&&e<=47)&&!((23===t||31===t)&&e>=33&&e<=35))return!1;const i=20===t||21===t||23===t?1:2,s=this.channels[i];return 20===t||21===t||28===t||29===t?32===e?s.ccRCL():33===e?s.ccBS():34===e?s.ccAOF():35===e?s.ccAON():36===e?s.ccDER():37===e?s.ccRU(2):38===e?s.ccRU(3):39===e?s.ccRU(4):40===e?s.ccFON():41===e?s.ccRDC():42===e?s.ccTR():43===e?s.ccRTD():44===e?s.ccEDM():45===e?s.ccCR():46===e?s.ccENM():47===e&&s.ccEOC():s.ccTO(e-32),this.currentChannel=i,!0}parseMidrow(t,e){let i=0;if((17===t||25===t)&&e>=32&&e<=47){if(i=17===t?1:2,i!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const s=this.channels[i];return!!s&&(s.ccMIDROW(e),this.logger.log(3,(()=>"MIDROW ("+fv([t,e])+")")),!0)}return!1}parsePAC(t,e){let i;if(!((t>=17&&t<=23||t>=25&&t<=31)&&e>=64&&e<=127)&&!((16===t||24===t)&&e>=64&&e<=95))return!1;const s=t<=23?1:2;i=e>=64&&e<=95?1===s?hv[t]:gv[t]:1===s?pv[t]:uv[t];const a=this.channels[s];return!!a&&(a.setPAC(this.interpretPAC(i,e)),this.currentChannel=s,!0)}interpretPAC(t,e){let i;const s={color:null,italics:!1,indent:null,underline:!1,row:t};return i=e>95?e-96:e-64,s.underline=!(1&~i),i<=13?s.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(i/2)]:i<=15?(s.italics=!0,s.color="white"):s.indent=4*Math.floor((i-16)/2),s}parseChars(t,e){let i,s=null,a=null;if(t>=25?(i=2,a=t-8):(i=1,a=t),a>=17&&a<=19){let t;t=17===a?e+80:18===a?e+112:e+144,this.logger.log(2,(()=>"Special char '"+lv(t)+"' in channel "+i)),s=[t]}else t>=32&&t<=127&&(s=0===e?[t]:[t,e]);return s&&this.logger.log(3,(()=>"Char codes =  "+fv(s).join(","))),s}parseBackgroundAttributes(t,e){if(!((16===t||24===t)&&e>=32&&e<=47)&&!((23===t||31===t)&&e>=45&&e<=47))return!1;let i;const s={};16===t||24===t?(i=Math.floor((e-32)/2),s.background=mv[i],e%2==1&&(s.background=s.background+"_semi")):45===e?s.background="transparent":(s.foreground="black",47===e&&(s.underline=!0));const a=t<=23?1:2;return this.channels[a].setBkgData(s),!0}reset(){for(let t=0;t<Object.keys(this.channels).length;t++){const e=this.channels[t];e&&e.reset()}_v(null,null,this.cmdHistory)}cueSplitAtTime(t){for(let e=0;e<this.channels.length;e++){const i=this.channels[e];i&&i.cueSplitAtTime(t)}}}function _v(t,e,i){i.a=t,i.b=e}function Cv(t,e,i){return i.a===t&&i.b===e}class Pv{constructor(t,e){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=t,this.trackName=e}dispatchCue(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(t,e,i){(null===this.startTime||this.startTime>t)&&(this.startTime=t),this.endTime=e,this.screen=i,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}var Lv=function(){if(null!=lh&&lh.VTTCue)return self.VTTCue;const t=["","lr","rl"],e=["start","middle","end","left","right"];function i(t,e){if("string"!=typeof e)return!1;if(!Array.isArray(t))return!1;const i=e.toLowerCase();return!!~t.indexOf(i)&&i}function s(t){return i(e,t)}function a(t,...e){let i=1;for(;i<arguments.length;i++){const e=arguments[i];for(const i in e)t[i]=e[i]}return t}function r(e,r,n){const o=this,l={enumerable:!0};o.hasBeenReset=!1;let d="",c=!1,h=e,p=r,g=n,u=null,m="",v=!0,f="auto",y="start",b=50,w="middle",x=50,k="middle";Object.defineProperty(o,"id",a({},l,{get:function(){return d},set:function(t){d=""+t}})),Object.defineProperty(o,"pauseOnExit",a({},l,{get:function(){return c},set:function(t){c=!!t}})),Object.defineProperty(o,"startTime",a({},l,{get:function(){return h},set:function(t){if("number"!=typeof t)throw new TypeError("Start time must be set to a number.");h=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"endTime",a({},l,{get:function(){return p},set:function(t){if("number"!=typeof t)throw new TypeError("End time must be set to a number.");p=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"text",a({},l,{get:function(){return g},set:function(t){g=""+t,this.hasBeenReset=!0}})),Object.defineProperty(o,"region",a({},l,{get:function(){return u},set:function(t){u=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"vertical",a({},l,{get:function(){return m},set:function(e){const s=function(e){return i(t,e)}(e);if(!1===s)throw new SyntaxError("An invalid or illegal string was specified.");m=s,this.hasBeenReset=!0}})),Object.defineProperty(o,"snapToLines",a({},l,{get:function(){return v},set:function(t){v=!!t,this.hasBeenReset=!0}})),Object.defineProperty(o,"line",a({},l,{get:function(){return f},set:function(t){if("number"!=typeof t&&"auto"!==t)throw new SyntaxError("An invalid number or illegal string was specified.");f=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"lineAlign",a({},l,{get:function(){return y},set:function(t){const e=s(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");y=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"position",a({},l,{get:function(){return b},set:function(t){if(t<0||t>100)throw new Error("Position must be between 0 and 100.");b=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"positionAlign",a({},l,{get:function(){return w},set:function(t){const e=s(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");w=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"size",a({},l,{get:function(){return x},set:function(t){if(t<0||t>100)throw new Error("Size must be between 0 and 100.");x=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"align",a({},l,{get:function(){return k},set:function(t){const e=s(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");k=e,this.hasBeenReset=!0}})),o.displayState=void 0}return r.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},r}();class Tv{decode(t,e){if(!t)return"";if("string"!=typeof t)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}function Ev(t){function e(t,e,i,s){return 3600*(0|t)+60*(0|e)+(0|i)+parseFloat(s||0)}const i=t.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return i?parseFloat(i[2])>59?e(i[2],i[3],0,i[4]):e(i[1],i[2],i[3],i[4]):null}class Av{constructor(){this.values=Object.create(null)}set(t,e){this.get(t)||""===e||(this.values[t]=e)}get(t,e,i){return i?this.has(t)?this.values[t]:e[i]:this.has(t)?this.values[t]:e}has(t){return t in this.values}alt(t,e,i){for(let s=0;s<i.length;++s)if(e===i[s]){this.set(t,e);break}}integer(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))}percent(t,e){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(e)){const i=parseFloat(e);if(i>=0&&i<=100)return this.set(t,i),!0}return!1}}function Mv(t,e,i,s){const a=s?t.split(s):[t];for(const r in a){if("string"!=typeof a[r])continue;const t=a[r].split(i);if(2!==t.length)continue;e(t[0],t[1])}}const Rv=new Lv(0,0,""),Dv="middle"===Rv.align?"middle":"center";function Iv(t,e,i){const s=t;function a(){const e=Ev(t);if(null===e)throw new Error("Malformed timestamp: "+s);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function r(){t=t.replace(/^\s+/,"")}if(r(),e.startTime=a(),r(),"--\x3e"!==t.slice(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+s);t=t.slice(3),r(),e.endTime=a(),r(),function(t,e){const s=new Av;Mv(t,(function(t,e){let a;switch(t){case"region":for(let a=i.length-1;a>=0;a--)if(i[a].id===e){s.set(t,i[a].region);break}break;case"vertical":s.alt(t,e,["rl","lr"]);break;case"line":a=e.split(","),s.integer(t,a[0]),s.percent(t,a[0])&&s.set("snapToLines",!1),s.alt(t,a[0],["auto"]),2===a.length&&s.alt("lineAlign",a[1],["start",Dv,"end"]);break;case"position":a=e.split(","),s.percent(t,a[0]),2===a.length&&s.alt("positionAlign",a[1],["start",Dv,"end","line-left","line-right","auto"]);break;case"size":s.percent(t,e);break;case"align":s.alt(t,e,["start",Dv,"end","left","right"])}}),/:/,/\s/),e.region=s.get("region",null),e.vertical=s.get("vertical","");let a=s.get("line","auto");"auto"===a&&-1===Rv.line&&(a=-1),e.line=a,e.lineAlign=s.get("lineAlign","start"),e.snapToLines=s.get("snapToLines",!0),e.size=s.get("size",100),e.align=s.get("align",Dv);let r=s.get("position","auto");"auto"===r&&50===Rv.position&&(r="start"===e.align||"left"===e.align?0:"end"===e.align||"right"===e.align?100:50),e.position=r}(t,e)}function Ov(t){return t.replace(/<br(?: \/)?>/gi,"\n")}class $v{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new Tv,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(t){const e=this;function i(){let t=e.buffer,i=0;for(t=Ov(t);i<t.length&&"\r"!==t[i]&&"\n"!==t[i];)++i;const s=t.slice(0,i);return"\r"===t[i]&&++i,"\n"===t[i]&&++i,e.buffer=t.slice(i),s}t&&(e.buffer+=e.decoder.decode(t,{stream:!0}));try{let t="";if("INITIAL"===e.state){if(!/\r\n|\n/.test(e.buffer))return this;t=i();const s=t.match(/^(\xef\xbb\xbf)?WEBVTT([ \t].*)?$/);if(null==s||!s[0])throw new Error("Malformed WebVTT signature.");e.state="HEADER"}let a=!1;for(;e.buffer;){if(!/\r\n|\n/.test(e.buffer))return this;switch(a?a=!1:t=i(),e.state){case"HEADER":/:/.test(t)?Mv(t,(function(t,e){}),/:/):t||(e.state="ID");continue;case"NOTE":t||(e.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(t)){e.state="NOTE";break}if(!t)continue;if(e.cue=new Lv(0,0,""),e.state="CUE",-1===t.indexOf("--\x3e")){e.cue.id=t;continue}case"CUE":if(!e.cue){e.state="BADCUE";continue}try{Iv(t,e.cue,e.regionList)}catch(s){e.cue=null,e.state="BADCUE";continue}e.state="CUETEXT";continue;case"CUETEXT":{const i=-1!==t.indexOf("--\x3e");if(!t||i&&(a=!0)){e.oncue&&e.cue&&e.oncue(e.cue),e.cue=null,e.state="ID";continue}if(null===e.cue)continue;e.cue.text&&(e.cue.text+="\n"),e.cue.text+=t}continue;case"BADCUE":t||(e.state="ID")}}}catch(s){"CUETEXT"===e.state&&e.cue&&e.oncue&&e.oncue(e.cue),e.cue=null,e.state="INITIAL"===e.state?"BADWEBVTT":"BADCUE"}return this}flush(){const t=this;try{if((t.cue||"HEADER"===t.state)&&(t.buffer+="\n\n",t.parse()),"INITIAL"===t.state||"BADWEBVTT"===t.state)throw new Error("Malformed WebVTT signature.")}catch(e){t.onparsingerror&&t.onparsingerror(e)}return t.onflush&&t.onflush(),this}}const Uv=/\r\n|\n\r|\n|\r/g,Fv=function(t,e,i=0){return t.slice(i,i+e.length)===e},zv=function(t){let e=5381,i=t.length;for(;i;)e=33*e^t.charCodeAt(--i);return(e>>>0).toString()};function Nv(t,e,i){return zv(t.toString())+zv(e.toString())+zv(i)}function jv(t,e,i,s,a,r,n){const o=new $v,l=zh(new Uint8Array(t)).trim().replace(Uv,"\n").split("\n"),d=[],c=e?function(t,e=1){return Im(t,9e4,1/e)}(e.baseTime,e.timescale):0;let h,p="00:00.000",g=0,u=0,m=!0;o.oncue=function(t){const r=i[s];let n=i.ccOffset;const o=(g-c)/9e4;if(null!=r&&r.new&&(void 0!==u?n=i.ccOffset=r.start:function(t,e,i){let s=t[e],a=t[s.prevCC];if(!a||!a.new&&s.new)return t.ccOffset=t.presentationOffset=s.start,void(s.new=!1);for(;null!=(r=a)&&r.new;){var r;t.ccOffset+=s.start-a.start,s.new=!1,s=a,a=t[s.prevCC]}t.presentationOffset=i}(i,s,o)),o){if(!e)return void(h=new Error("Missing initPTS for VTT MPEGTS"));n=o-i.presentationOffset}const l=t.endTime-t.startTime,p=Nm(9e4*(t.startTime+n-u),9e4*a)/9e4;t.startTime=Math.max(p,0),t.endTime=Math.max(p+l,0);const m=t.text.trim();t.text=decodeURIComponent(encodeURIComponent(m)),t.id||(t.id=Nv(t.startTime,t.endTime,m)),t.endTime>0&&d.push(t)},o.onparsingerror=function(t){h=t},o.onflush=function(){h?n(h):r(d)},l.forEach((t=>{if(m){if(Fv(t,"X-TIMESTAMP-MAP=")){m=!1,t.slice(16).split(",").forEach((t=>{Fv(t,"LOCAL:")?p=t.slice(6):Fv(t,"MPEGTS:")&&(g=parseInt(t.slice(7)))}));try{u=function(t){let e=parseInt(t.slice(-3));const i=parseInt(t.slice(-6,-4)),s=parseInt(t.slice(-9,-7)),a=t.length>9?parseInt(t.substring(0,t.indexOf(":"))):0;if(!(Oc(e)&&Oc(i)&&Oc(s)&&Oc(a)))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${t}`);return e+=1e3*i,e+=6e4*s,e+=36e5*a,e}(p)/1e3}catch(e){h=e}return}""===t&&(m=!1)}o.parse(t+"\n")})),o.flush()}const Bv="stpp.ttml.im1t",Hv=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Vv=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,Gv={left:"start",center:"center",right:"end",start:"start",end:"end"};function qv(t,e,i,s){const a=Jh(new Uint8Array(t),["mdat"]);if(0===a.length)return void s(new Error("Could not parse IMSC1 mdat"));const r=a.map((t=>zh(t))),n=function(t,e,i=1,s=!1){return Im(t,e,1/i,s)}(e.baseTime,1,e.timescale);try{r.forEach((t=>i(function(t,e){const i=(new DOMParser).parseFromString(t,"text/xml"),s=i.getElementsByTagName("tt")[0];if(!s)throw new Error("Invalid ttml");const a={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},r=Object.keys(a).reduce(((t,e)=>(t[e]=s.getAttribute(`ttp:${e}`)||a[e],t)),{}),n="preserve"!==s.getAttribute("xml:space"),o=Kv(Zv(s,"styling","style")),l=Kv(Zv(s,"layout","region")),d=Zv(s,"body","[begin]");return[].map.call(d,(t=>{const i=Wv(t,n);if(!i||!t.hasAttribute("begin"))return null;const s=Jv(t.getAttribute("begin"),r),a=Jv(t.getAttribute("dur"),r);let d=Jv(t.getAttribute("end"),r);if(null===s)throw Qv(t);if(null===d){if(null===a)throw Qv(t);d=s+a}const c=new Lv(s-e,d-e,i);c.id=Nv(c.startTime,c.endTime,c.text);const h=function(t,e,i){const s="http://www.w3.org/ns/ttml#styling";let a=null;const r=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],n=null!=t&&t.hasAttribute("style")?t.getAttribute("style"):null;n&&i.hasOwnProperty(n)&&(a=i[n]);return r.reduce(((i,r)=>{const n=Yv(e,s,r)||Yv(t,s,r)||Yv(a,s,r);return n&&(i[r]=n),i}),{})}(l[t.getAttribute("region")],o[t.getAttribute("style")],o),{textAlign:p}=h;if(p){const t=Gv[p];t&&(c.lineAlign=t),c.align=p}return Ic(c,h),c})).filter((t=>null!==t))}(t,n))))}catch(o){s(o)}}function Zv(t,e,i){const s=t.getElementsByTagName(e)[0];return s?[].slice.call(s.querySelectorAll(i)):[]}function Kv(t){return t.reduce(((t,e)=>{const i=e.getAttribute("xml:id");return i&&(t[i]=e),t}),{})}function Wv(t,e){return[].slice.call(t.childNodes).reduce(((t,i,s)=>{var a;return"br"===i.nodeName&&s?t+"\n":null!=(a=i.childNodes)&&a.length?Wv(i,e):e?t+i.textContent.trim().replace(/\s+/g," "):t+i.textContent}),"")}function Yv(t,e,i){return t&&t.hasAttributeNS(e,i)?t.getAttributeNS(e,i):null}function Qv(t){return new Error(`Could not parse ttml timestamp ${t}`)}function Jv(t,e){if(!t)return null;let i=Ev(t);return null===i&&(Hv.test(t)?i=function(t,e){const i=Hv.exec(t),s=(0|i[4])+(0|i[5])/e.subFrameRate;return 3600*(0|i[1])+60*(0|i[2])+(0|i[3])+s/e.frameRate}(t,e):Vv.test(t)&&(i=function(t,e){const i=Vv.exec(t),s=Number(i[1]);switch(i[2]){case"h":return 3600*s;case"m":return 60*s;case"ms":return 1e3*s;case"f":return s/e.frameRate;case"t":return s/e.tickRate}return s}(t,e))),i}function Xv(t){return t.characteristics&&/transcribes-spoken-dialog/gi.test(t.characteristics)&&/describes-music-and-sound/gi.test(t.characteristics)?"captions":"subtitles"}function tf(t,e){return!!t&&t.kind===Xv(e)&&iv(e,t)}class ef{constructor(t){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=t,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(t){this.streamController=t}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:t}=this;t.on(Fc.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),t.on(Fc.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(Fc.MANIFEST_PARSED,this.onManifestParsed,this),t.on(Fc.LEVELS_UPDATED,this.onLevelsUpdated,this),t.on(Fc.BUFFER_CODECS,this.onBufferCodecs,this),t.on(Fc.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:t}=this;t.off(Fc.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),t.off(Fc.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(Fc.MANIFEST_PARSED,this.onManifestParsed,this),t.off(Fc.LEVELS_UPDATED,this.onLevelsUpdated,this),t.off(Fc.BUFFER_CODECS,this.onBufferCodecs,this),t.off(Fc.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(t,e){const i=this.hls.levels[e.droppedLevel];this.isLevelAllowed(i)&&this.restrictedLevels.push({bitrate:i.bitrate,height:i.height,width:i.width})}onMediaAttaching(t,e){this.media=e.media instanceof HTMLVideoElement?e.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(t,e){const i=this.hls;this.restrictedLevels=[],this.firstLevel=e.firstLevel,i.config.capLevelToPlayerSize&&e.video&&this.startCapping()}onLevelsUpdated(t,e){this.timer&&Oc(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(t,e){this.hls.config.capLevelToPlayerSize&&e.video&&this.startCapping()}onMediaDetaching(){this.stopCapping()}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0)return void(this.clientRect=null);const t=this.hls.levels;if(t.length){const e=this.hls,i=this.getMaxLevel(t.length-1);i!==this.autoLevelCapping&&Gc.log(`Setting autoLevelCapping to ${i}: ${t[i].height}p@${t[i].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),e.autoLevelCapping=i,e.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=e.autoLevelCapping}}}getMaxLevel(t){const e=this.hls.levels;if(!e.length)return-1;const i=e.filter(((e,i)=>this.isLevelAllowed(e)&&i<=t));return this.clientRect=null,ef.getMaxLevelByMediaSize(i,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const t=this.media,e={width:0,height:0};if(t){const i=t.getBoundingClientRect();e.width=i.width,e.height=i.height,e.width||e.height||(e.width=i.right-i.left||t.width||0,e.height=i.bottom-i.top||t.height||0)}return this.clientRect=e,e}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let t=1;if(!this.hls.config.ignoreDevicePixelRatio)try{t=self.devicePixelRatio}catch(e){}return t}isLevelAllowed(t){return!this.restrictedLevels.some((e=>t.bitrate===e.bitrate&&t.width===e.width&&t.height===e.height))}static getMaxLevelByMediaSize(t,e,i){if(null==t||!t.length)return-1;let s=t.length-1;const a=Math.max(e,i);for(let o=0;o<t.length;o+=1){const e=t[o];if((e.width>=a||e.height>=a)&&(r=e,!(n=t[o+1])||r.width!==n.width||r.height!==n.height)){s=o;break}}var r,n;return s}}const sf="[eme]";class af{constructor(t){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=af.CDMCleanupPromise?[af.CDMCleanupPromise]:[],this.onMediaEncrypted=this._onMediaEncrypted.bind(this),this.onWaitingForKey=this._onWaitingForKey.bind(this),this.debug=Gc.debug.bind(Gc,sf),this.log=Gc.log.bind(Gc,sf),this.warn=Gc.warn.bind(Gc,sf),this.error=Gc.error.bind(Gc,sf),this.hls=t,this.config=t.config,this.registerListeners()}destroy(){this.unregisterListeners(),this.onMediaDetached();const t=this.config;t.requestMediaKeySystemAccessFunc=null,t.licenseXhrSetup=t.licenseResponseCallback=void 0,t.drmSystems=t.drmSystemOptions={},this.hls=this.onMediaEncrypted=this.onWaitingForKey=this.keyIdToKeySessionPromise=null,this.config=null}registerListeners(){this.hls.on(Fc.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(Fc.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(Fc.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(Fc.MANIFEST_LOADED,this.onManifestLoaded,this)}unregisterListeners(){this.hls.off(Fc.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(Fc.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(Fc.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(Fc.MANIFEST_LOADED,this.onManifestLoaded,this)}getLicenseServerUrl(t){const{drmSystems:e,widevineLicenseUrl:i}=this.config,s=e[t];if(s)return s.licenseUrl;if(t===dh.WIDEVINE&&i)return i;throw new Error(`no license server URL configured for key-system "${t}"`)}getServerCertificateUrl(t){const{drmSystems:e}=this.config,i=e[t];if(i)return i.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${t}"]`)}attemptKeySystemAccess(t){const e=this.hls.levels,i=(t,e,i)=>!!t&&i.indexOf(t)===e,s=e.map((t=>t.audioCodec)).filter(i),a=e.map((t=>t.videoCodec)).filter(i);return s.length+a.length===0&&a.push("avc1.42e01e"),new Promise(((e,i)=>{const r=t=>{const n=t.shift();this.getMediaKeysPromise(n,s,a).then((t=>e({keySystem:n,mediaKeys:t}))).catch((e=>{t.length?r(t):i(e instanceof rf?e:new rf({type:zc.KEY_SYSTEM_ERROR,details:Nc.KEY_SYSTEM_NO_ACCESS,error:e,fatal:!0},e.message))}))};r(t)}))}requestMediaKeySystemAccess(t,e){const{requestMediaKeySystemAccessFunc:i}=this.config;if("function"!=typeof i){let t=`Configured requestMediaKeySystemAccess is not a function ${i}`;return null===kh&&"http:"===self.location.protocol&&(t=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(t))}return i(t,e)}getMediaKeysPromise(t,e,i){const s=function(t,e,i,s){let a;switch(t){case dh.FAIRPLAY:a=["cenc","sinf"];break;case dh.WIDEVINE:case dh.PLAYREADY:a=["cenc"];break;case dh.CLEARKEY:a=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${t}`)}return function(t,e,i,s){return[{initDataTypes:t,persistentState:s.persistentState||"optional",distinctiveIdentifier:s.distinctiveIdentifier||"optional",sessionTypes:s.sessionTypes||[s.sessionType||"temporary"],audioCapabilities:e.map((t=>({contentType:`audio/mp4; codecs="${t}"`,robustness:s.audioRobustness||"",encryptionScheme:s.audioEncryptionScheme||null}))),videoCapabilities:i.map((t=>({contentType:`video/mp4; codecs="${t}"`,robustness:s.videoRobustness||"",encryptionScheme:s.videoEncryptionScheme||null})))}]}(a,e,i,s)}(t,e,i,this.config.drmSystemOptions),a=this.keySystemAccessPromises[t];let r=null==a?void 0:a.keySystemAccess;if(!r){this.log(`Requesting encrypted media "${t}" key-system access with config: ${JSON.stringify(s)}`),r=this.requestMediaKeySystemAccess(t,s);const e=this.keySystemAccessPromises[t]={keySystemAccess:r};return r.catch((e=>{this.log(`Failed to obtain access to key-system "${t}": ${e}`)})),r.then((i=>{this.log(`Access for key-system "${i.keySystem}" obtained`);const s=this.fetchServerCertificate(t);return this.log(`Create media-keys for "${t}"`),e.mediaKeys=i.createMediaKeys().then((e=>(this.log(`Media-keys created for "${t}"`),s.then((i=>i?this.setMediaKeysServerCertificate(e,t,i):e))))),e.mediaKeys.catch((e=>{this.error(`Failed to create media-keys for "${t}"}: ${e}`)})),e.mediaKeys}))}return r.then((()=>a.mediaKeys))}createMediaKeySessionContext({decryptdata:t,keySystem:e,mediaKeys:i}){this.log(`Creating key-system session "${e}" keyId: ${Bh(t.keyId||[])}`);const s=i.createSession(),a={decryptdata:t,keySystem:e,mediaKeys:i,mediaKeysSession:s,keyStatus:"status-pending"};return this.mediaKeySessions.push(a),a}renewKeySession(t){const e=t.decryptdata;if(e.pssh){const i=this.createMediaKeySessionContext(t),s=this.getKeyIdString(e),a="cenc";this.keyIdToKeySessionPromise[s]=this.generateRequestWithPreferredKeySession(i,a,e.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(t)}getKeyIdString(t){if(!t)throw new Error("Could not read keyId of undefined decryptdata");if(null===t.keyId)throw new Error("keyId is null");return Bh(t.keyId)}updateKeySession(t,e){var i;const s=t.mediaKeysSession;return this.log(`Updating key-session "${s.sessionId}" for keyID ${Bh((null==(i=t.decryptdata)?void 0:i.keyId)||[])}\n      } (data length: ${e?e.byteLength:e})`),s.update(e)}selectKeySystemFormat(t){const e=Object.keys(t.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${t.sn} ${t.type}: ${t.level}) key formats ${e.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(e)),this.keyFormatPromise}getKeyFormatPromise(t){return new Promise(((e,i)=>{const s=xh(this.config),a=t.map(uh).filter((t=>!!t&&-1!==s.indexOf(t)));return this.getKeySystemSelectionPromise(a).then((({keySystem:t})=>{const s=wh(t);s?e(s):i(new Error(`Unable to find format for key-system "${t}"`))})).catch(i)}))}loadKey(t){const e=t.keyInfo.decryptdata,i=this.getKeyIdString(e),s=`(keyId: ${i} format: "${e.keyFormat}" method: ${e.method} uri: ${e.uri})`;this.log(`Starting session for key ${s}`);let a=this.keyIdToKeySessionPromise[i];return a||(a=this.keyIdToKeySessionPromise[i]=this.getKeySystemForKeyPromise(e).then((({keySystem:i,mediaKeys:a})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${t.frag.sn} ${t.frag.type}: ${t.frag.level} using key ${s}`),this.attemptSetMediaKeys(i,a).then((()=>{this.throwIfDestroyed();const t=this.createMediaKeySessionContext({keySystem:i,mediaKeys:a,decryptdata:e});return this.generateRequestWithPreferredKeySession(t,"cenc",e.pssh,"playlist-key")}))))),a.catch((t=>this.handleError(t)))),a}throwIfDestroyed(t="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(t){this.hls&&(this.error(t.message),t instanceof rf?this.hls.trigger(Fc.ERROR,t.data):this.hls.trigger(Fc.ERROR,{type:zc.KEY_SYSTEM_ERROR,details:Nc.KEY_SYSTEM_NO_KEYS,error:t,fatal:!0}))}getKeySystemForKeyPromise(t){const e=this.getKeyIdString(t),i=this.keyIdToKeySessionPromise[e];if(!i){const e=uh(t.keyFormat),i=e?[e]:xh(this.config);return this.attemptKeySystemAccess(i)}return i}getKeySystemSelectionPromise(t){if(t.length||(t=xh(this.config)),0===t.length)throw new rf({type:zc.KEY_SYSTEM_ERROR,details:Nc.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${JSON.stringify({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(t)}_onMediaEncrypted(t){const{initDataType:e,initData:i}=t,s=`"${t.type}" event: init data type: "${e}"`;if(this.debug(s),null===i)return;let a,r;if("sinf"===e&&this.config.drmSystems[dh.FAIRPLAY]){const t=qh(new Uint8Array(i));try{const e=rh(JSON.parse(t).sinf),i=rp(new Uint8Array(e));if(!i)throw new Error("'schm' box missing or not cbcs/cenc with schi > tenc");a=i.subarray(8,24),r=dh.FAIRPLAY}catch(c){return void this.warn(`${s} Failed to parse sinf: ${c}`)}}else{const t=function(t){const e=[];if(t instanceof ArrayBuffer){const i=t.byteLength;let s=0;for(;s+32<i;){const i=gp(new DataView(t,s));e.push(i),s+=i.size}}return e}(i),e=t.filter((t=>t.systemId===yh))[0];if(!e)return void(0===t.length||t.some((t=>!t.systemId))?this.warn(`${s} contains incomplete or invalid pssh data`):this.log(`ignoring ${s} for ${t.map((t=>bh(t.systemId))).join(",")} pssh data in favor of playlist keys`));if(r=bh(e.systemId),0===e.version&&e.data){const t=e.data.length-22;a=e.data.subarray(t,t+16)}}if(!r||!a)return;const n=Bh(a),{keyIdToKeySessionPromise:o,mediaKeySessions:l}=this;let d=o[n];for(let h=0;h<l.length;h++){const t=l[h],s=t.decryptdata;if(!s.keyId)continue;const r=Bh(s.keyId);if(n===r||-1!==s.uri.replace(/-/g,"").indexOf(n)){if(d=o[r],s.pssh)break;delete o[r],s.pssh=new Uint8Array(i),s.keyId=a,d=o[n]=d.then((()=>this.generateRequestWithPreferredKeySession(t,e,i,"encrypted-event-key-match")));break}}d||(d=o[n]=this.getKeySystemSelectionPromise([r]).then((({keySystem:t,mediaKeys:s})=>{var r;this.throwIfDestroyed();const o=new mp("ISO-23001-7",n,null!=(r=wh(t))?r:"");return o.pssh=new Uint8Array(i),o.keyId=a,this.attemptSetMediaKeys(t,s).then((()=>{this.throwIfDestroyed();const a=this.createMediaKeySessionContext({decryptdata:o,keySystem:t,mediaKeys:s});return this.generateRequestWithPreferredKeySession(a,e,i,"encrypted-event-no-match")}))}))),d.catch((t=>this.handleError(t)))}_onWaitingForKey(t){this.log(`"${t.type}" event`)}attemptSetMediaKeys(t,e){const i=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${t}"`);const s=Promise.all(i).then((()=>{if(!this.media)throw new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(e)}));return this.setMediaKeysQueue.push(s),s.then((()=>{this.log(`Media-keys set for "${t}"`),i.push(s),this.setMediaKeysQueue=this.setMediaKeysQueue.filter((t=>-1===i.indexOf(t)))}))}generateRequestWithPreferredKeySession(t,e,i,s){var a,r;const n=null==(a=this.config.drmSystems)||null==(r=a[t.keySystem])?void 0:r.generateRequest;if(n)try{const s=n.call(this.hls,e,i,t);if(!s)throw new Error("Invalid response from configured generateRequest filter");e=s.initDataType,i=t.decryptdata.pssh=s.initData?new Uint8Array(s.initData):null}catch(g){var o;if(this.warn(g.message),null!=(o=this.hls)&&o.config.debug)throw g}if(null===i)return this.log(`Skipping key-session request for "${s}" (no initData)`),Promise.resolve(t);const l=this.getKeyIdString(t.decryptdata);this.log(`Generating key-session request for "${s}": ${l} (init data type: ${e} length: ${i?i.byteLength:null})`);const d=new Jm,c=t._onmessage=e=>{const i=t.mediaKeysSession;if(!i)return void d.emit("error",new Error("invalid state"));const{messageType:s,message:a}=e;this.log(`"${s}" message event for session "${i.sessionId}" message size: ${a.byteLength}`),"license-request"===s||"license-renewal"===s?this.renewLicense(t,a).catch((t=>{this.handleError(t),d.emit("error",t)})):"license-release"===s?t.keySystem===dh.FAIRPLAY&&(this.updateKeySession(t,oh("acknowledged")),this.removeSession(t)):this.warn(`unhandled media key message type "${s}"`)},h=t._onkeystatuseschange=e=>{if(!t.mediaKeysSession)return void d.emit("error",new Error("invalid state"));this.onKeyStatusChange(t);const i=t.keyStatus;d.emit("keyStatus",i),"expired"===i&&(this.warn(`${t.keySystem} expired for key ${l}`),this.renewKeySession(t))};t.mediaKeysSession.addEventListener("message",c),t.mediaKeysSession.addEventListener("keystatuseschange",h);const p=new Promise(((t,e)=>{d.on("error",e),d.on("keyStatus",(i=>{i.startsWith("usable")?t():"output-restricted"===i?e(new rf({type:zc.KEY_SYSTEM_ERROR,details:Nc.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):"internal-error"===i?e(new rf({type:zc.KEY_SYSTEM_ERROR,details:Nc.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},`key status changed to "${i}"`)):"expired"===i?e(new Error("key expired while generating request")):this.warn(`unhandled key status change "${i}"`)}))}));return t.mediaKeysSession.generateRequest(e,i).then((()=>{var e;this.log(`Request generated for key-session "${null==(e=t.mediaKeysSession)?void 0:e.sessionId}" keyId: ${l}`)})).catch((t=>{throw new rf({type:zc.KEY_SYSTEM_ERROR,details:Nc.KEY_SYSTEM_NO_SESSION,error:t,fatal:!1},`Error generating key-session request: ${t}`)})).then((()=>p)).catch((e=>{throw d.removeAllListeners(),this.removeSession(t),e})).then((()=>(d.removeAllListeners(),t)))}onKeyStatusChange(t){t.mediaKeysSession.keyStatuses.forEach(((e,i)=>{this.log(`key status change "${e}" for keyStatuses keyId: ${Bh("buffer"in i?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):new Uint8Array(i))} session keyId: ${Bh(new Uint8Array(t.decryptdata.keyId||[]))} uri: ${t.decryptdata.uri}`),t.keyStatus=e}))}fetchServerCertificate(t){const e=this.config,i=new(0,e.loader)(e),s=this.getServerCertificateUrl(t);return s?(this.log(`Fetching server certificate for "${t}"`),new Promise(((a,r)=>{const n={responseType:"arraybuffer",url:s},o=e.certLoadPolicy.default,l={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(t,e,i,s)=>{a(t.data)},onError:(e,i,a,o)=>{r(new rf({type:zc.KEY_SYSTEM_ERROR,details:Nc.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:a,response:Mc({url:n.url,data:void 0},e)},`"${t}" certificate request failed (${s}). Status: ${e.code} (${e.text})`))},onTimeout:(e,i,a)=>{r(new rf({type:zc.KEY_SYSTEM_ERROR,details:Nc.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:a,response:{url:n.url,data:void 0}},`"${t}" certificate request timed out (${s})`))},onAbort:(t,e,i)=>{r(new Error("aborted"))}};i.load(n,l,d)}))):Promise.resolve()}setMediaKeysServerCertificate(t,e,i){return new Promise(((s,a)=>{t.setServerCertificate(i).then((a=>{this.log(`setServerCertificate ${a?"success":"not supported by CDM"} (${null==i?void 0:i.byteLength}) on "${e}"`),s(t)})).catch((t=>{a(new rf({type:zc.KEY_SYSTEM_ERROR,details:Nc.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:t,fatal:!0},t.message))}))}))}renewLicense(t,e){return this.requestLicense(t,new Uint8Array(e)).then((e=>this.updateKeySession(t,new Uint8Array(e)).catch((t=>{throw new rf({type:zc.KEY_SYSTEM_ERROR,details:Nc.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:t,fatal:!0},t.message)}))))}unpackPlayReadyKeyMessage(t,e){const i=String.fromCharCode.apply(null,new Uint16Array(e.buffer));if(!i.includes("PlayReadyKeyMessage"))return t.setRequestHeader("Content-Type","text/xml; charset=utf-8"),e;const s=(new DOMParser).parseFromString(i,"application/xml"),a=s.querySelectorAll("HttpHeader");if(a.length>0){let e;for(let i=0,s=a.length;i<s;i++){var r,n;e=a[i];const s=null==(r=e.querySelector("name"))?void 0:r.textContent,o=null==(n=e.querySelector("value"))?void 0:n.textContent;s&&o&&t.setRequestHeader(s,o)}}const o=s.querySelector("Challenge"),l=null==o?void 0:o.textContent;if(!l)throw new Error("Cannot find <Challenge> in key message");return oh(atob(l))}setupLicenseXHR(t,e,i,s){const a=this.config.licenseXhrSetup;return a?Promise.resolve().then((()=>{if(!i.decryptdata)throw new Error("Key removed");return a.call(this.hls,t,e,i,s)})).catch((r=>{if(!i.decryptdata)throw r;return t.open("POST",e,!0),a.call(this.hls,t,e,i,s)})).then((i=>{t.readyState||t.open("POST",e,!0);return{xhr:t,licenseChallenge:i||s}})):(t.open("POST",e,!0),Promise.resolve({xhr:t,licenseChallenge:s}))}requestLicense(t,e){const i=this.config.keyLoadPolicy.default;return new Promise(((s,a)=>{const r=this.getLicenseServerUrl(t.keySystem);this.log(`Sending license request to URL: ${r}`);const n=new XMLHttpRequest;n.responseType="arraybuffer",n.onreadystatechange=()=>{if(!this.hls||!t.mediaKeysSession)return a(new Error("invalid state"));if(4===n.readyState)if(200===n.status){this._requestLicenseFailureCount=0;let e=n.response;this.log(`License received ${e instanceof ArrayBuffer?e.byteLength:e}`);const i=this.config.licenseResponseCallback;if(i)try{e=i.call(this.hls,n,r,t)}catch(o){this.error(o)}s(e)}else{const o=i.errorRetry,l=o?o.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>l||n.status>=400&&n.status<500)a(new rf({type:zc.KEY_SYSTEM_ERROR,details:Nc.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:n,response:{url:r,data:void 0,code:n.status,text:n.statusText}},`License Request XHR failed (${r}). Status: ${n.status} (${n.statusText})`));else{const i=l-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${i} attempts left`),this.requestLicense(t,e).then(s,a)}}},t.licenseXhr&&t.licenseXhr.readyState!==XMLHttpRequest.DONE&&t.licenseXhr.abort(),t.licenseXhr=n,this.setupLicenseXHR(n,r,t,e).then((({xhr:e,licenseChallenge:i})=>{t.keySystem==dh.PLAYREADY&&(i=this.unpackPlayReadyKeyMessage(e,i)),e.send(i)}))}))}onMediaAttached(t,e){if(!this.config.emeEnabled)return;const i=e.media;this.media=i,i.addEventListener("encrypted",this.onMediaEncrypted),i.addEventListener("waitingforkey",this.onWaitingForKey)}onMediaDetached(){const t=this.media,e=this.mediaKeySessions;t&&(t.removeEventListener("encrypted",this.onMediaEncrypted),t.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},mp.clearKeyUriToKeyIdMap();const i=e.length;af.CDMCleanupPromise=Promise.all(e.map((t=>this.removeSession(t))).concat(null==t?void 0:t.setMediaKeys(null).catch((t=>{this.log(`Could not clear media keys: ${t}`)})))).then((()=>{i&&(this.log("finished closing key sessions and clearing media keys"),e.length=0)})).catch((t=>{this.log(`Could not close sessions and clear media keys: ${t}`)}))}onManifestLoading(){this.keyFormatPromise=null}onManifestLoaded(t,{sessionKeys:e}){if(e&&this.config.emeEnabled&&!this.keyFormatPromise){const t=e.reduce(((t,e)=>(-1===t.indexOf(e.keyFormat)&&t.push(e.keyFormat),t)),[]);this.log(`Selecting key-system from session-keys ${t.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(t)}}removeSession(t){const{mediaKeysSession:e,licenseXhr:i}=t;if(e){this.log(`Remove licenses and keys and close session ${e.sessionId}`),t._onmessage&&(e.removeEventListener("message",t._onmessage),t._onmessage=void 0),t._onkeystatuseschange&&(e.removeEventListener("keystatuseschange",t._onkeystatuseschange),t._onkeystatuseschange=void 0),i&&i.readyState!==XMLHttpRequest.DONE&&i.abort(),t.mediaKeysSession=t.decryptdata=t.licenseXhr=void 0;const s=this.mediaKeySessions.indexOf(t);return s>-1&&this.mediaKeySessions.splice(s,1),e.remove().catch((t=>{this.log(`Could not remove session: ${t}`)})).then((()=>e.close())).catch((t=>{this.log(`Could not close session: ${t}`)}))}}}af.CDMCleanupPromise=void 0;class rf extends Error{constructor(t,e){super(e),this.data=void 0,t.error||(t.error=new Error(e)),this.data=t,t.err=t.error}}var nf,of,lf;!function(t){t.MANIFEST="m",t.AUDIO="a",t.VIDEO="v",t.MUXED="av",t.INIT="i",t.CAPTION="c",t.TIMED_TEXT="tt",t.KEY="k",t.OTHER="o"}(nf||(nf={})),function(t){t.DASH="d",t.HLS="h",t.SMOOTH="s",t.OTHER="o"}(of||(of={})),function(t){t.OBJECT="CMCD-Object",t.REQUEST="CMCD-Request",t.SESSION="CMCD-Session",t.STATUS="CMCD-Status"}(lf||(lf={}));const df={[lf.OBJECT]:["br","d","ot","tb"],[lf.REQUEST]:["bl","dl","mtp","nor","nrr","su"],[lf.SESSION]:["cid","pr","sf","sid","st","v"],[lf.STATUS]:["bs","rtp"]};class cf{constructor(t,e){this.value=void 0,this.params=void 0,Array.isArray(t)&&(t=t.map((t=>t instanceof cf?t:new cf(t)))),this.value=t,this.params=e}}class hf{constructor(t){this.description=void 0,this.description=t}}function pf(t,e,i,s){return new Error(`failed to ${t} "${a=e,Array.isArray(a)?JSON.stringify(a):a instanceof Map?"Map{}":a instanceof Set?"Set{}":"object"==typeof a?JSON.stringify(a):String(a)}" as ${i}`,{cause:s});var a}const gf="Bare Item";const uf=/[\x00-\x1f\x7f]+/;function mf(t,e,i){return pf("serialize",t,e,i)}function vf(t){if(!1===ArrayBuffer.isView(t))throw mf(t,"Byte Sequence");return`:${e=t,btoa(String.fromCharCode(...e))}:`;var e}function ff(t){if(function(t){return t<-999999999999999||999999999999999<t}(t))throw mf(t,"Integer");return t.toString()}function yf(t,e){if(t<0)return-yf(-t,e);const i=Math.pow(10,e);if(Math.abs(t*i%1-.5)<Number.EPSILON){const e=Math.floor(t*i);return(e%2==0?e:e+1)/i}return Math.round(t*i)/i}function bf(t){const e=yf(t,3);if(Math.floor(Math.abs(e)).toString().length>12)throw mf(t,"Decimal");const i=e.toString();return i.includes(".")?i:`${i}.0`}function wf(t){const e=(i=t).description||i.toString().slice(7,-1);var i;if(!1===/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(e))throw mf(e,"Token");return e}function xf(t){switch(typeof t){case"number":if(!Oc(t))throw mf(t,gf);return Number.isInteger(t)?ff(t):bf(t);case"string":return function(t){if(uf.test(t))throw mf(t,"String");return`"${t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}(t);case"symbol":return wf(t);case"boolean":return function(t){if("boolean"!=typeof t)throw mf(t,"Boolean");return t?"?1":"?0"}(t);case"object":if(t instanceof Date)return function(t){return`@${ff(t.getTime()/1e3)}`}(t);if(t instanceof Uint8Array)return vf(t);if(t instanceof hf)return wf(t);default:throw mf(t,gf)}}function kf(t){if(!1===/^[a-z*][a-z0-9\-_.*]*$/.test(t))throw mf(t,"Key");return t}function Sf(t){return null==t?"":Object.entries(t).map((([t,e])=>!0===e?`;${kf(t)}`:`;${kf(t)}=${xf(e)}`)).join("")}function _f(t){return t instanceof cf?`${xf(t.value)}${Sf(t.params)}`:xf(t)}function Cf(t,e={whitespace:!0}){if("object"!=typeof t)throw mf(t,"Dict");const i=t instanceof Map?t.entries():Object.entries(t),s=null!=e&&e.whitespace?" ":"";return Array.from(i).map((([t,e])=>{e instanceof cf==!1&&(e=new cf(e));let i=kf(t);var s;return!0===e.value?i+=Sf(e.params):(i+="=",Array.isArray(e.value)?i+=`(${(s=e).value.map(_f).join(" ")})${Sf(s.params)}`:i+=_f(e)),i})).join(`,${s}`)}const Pf=t=>Math.round(t),Lf=t=>100*Pf(t/100),Tf={br:Pf,d:Pf,bl:Lf,dl:Lf,mtp:Lf,nor:(t,e)=>(null!=e&&e.baseUrl&&(t=function(t,e){const i=new URL(t),s=new URL(e);if(i.origin!==s.origin)return t;const a=i.pathname.split("/").slice(1),r=s.pathname.split("/").slice(1,-1);for(;a[0]===r[0];)a.shift(),r.shift();for(;r.length;)r.shift(),a.unshift("..");return a.join("/")}(t,e.baseUrl)),encodeURIComponent(t)),rtp:Lf,tb:Pf};function Ef(t,e){const i={};if(null==t||"object"!=typeof t)return i;const s=Object.keys(t).sort(),a=Ic({},Tf,null==e?void 0:e.formatters),r=null==e?void 0:e.filter;return s.forEach((s=>{if(null!=r&&r(s))return;let n=t[s];const o=a[s];o&&(n=o(n,e)),"v"===s&&1===n||"pr"==s&&1===n||(t=>"number"==typeof t?Oc(t):null!=t&&""!==t&&!1!==t)(n)&&((t=>"ot"===t||"sf"===t||"st"===t)(s)&&"string"==typeof n&&(n=new hf(n)),i[s]=n)})),i}function Af(t,e={}){return t?function(t,e){return Cf(t,e)}(Ef(t,e),Ic({whitespace:!1},e)):""}function Mf(t,e,i){return Ic(t,function(t,e={}){if(!t)return{};const i=Object.entries(t),s=Object.entries(df).concat(Object.entries((null==e?void 0:e.customHeaderMap)||{})),a=i.reduce(((t,e)=>{var i;const[a,r]=e,n=(null==(i=s.find((t=>t[1].includes(a))))?void 0:i[0])||lf.REQUEST;return null!=t[n]||(t[n]={}),t[n][a]=r,t}),{});return Object.entries(a).reduce(((t,[i,s])=>(t[i]=Af(s,e),t)),{})}(e,i))}const Rf=/CMCD=[^&#]+/;function Df(t,e,i){const s=function(t,e={}){if(!t)return"";const i=Af(t,e);return`CMCD=${encodeURIComponent(i)}`}(e,i);if(!s)return t;if(Rf.test(t))return t.replace(Rf,s);const a=t.includes("?")?"&":"?";return`${t}${a}${s}`}function If(t,e,i,s){t&&Object.keys(e).forEach((a=>{const r=t.filter((t=>t.groupId===a)).map((t=>{const r=Ic({},t);return r.details=void 0,r.attrs=new Kc(r.attrs),r.url=r.attrs.URI=Of(t.url,t.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",i),r.groupId=r.attrs["GROUP-ID"]=e[a],r.attrs["PATHWAY-ID"]=s,r}));t.push(...r)}))}function Of(t,e,i,s){const{HOST:a,PARAMS:r,[i]:n}=s;let o;e&&(o=null==n?void 0:n[e],o&&(t=o));const l=new self.URL(t);return a&&!o&&(l.host=a),r&&Object.keys(r).sort().forEach((t=>{t&&l.searchParams.set(t,r[t])})),l.href}const $f=/^age:\s*[\d.]+\s*$/im;class Uf{constructor(t){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=t&&t.xhrSetup||null,this.stats=new Qc,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const t=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),t&&(t.onreadystatechange=null,t.onprogress=null,4!==t.readyState&&(this.stats.aborted=!0,t.abort()))}abort(){var t;this.abortInternal(),null!=(t=this.callbacks)&&t.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(t,e,i){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=t,this.config=e,this.callbacks=i,this.loadInternal()}loadInternal(){const{config:t,context:e}=this;if(!t||!e)return;const i=this.loader=new self.XMLHttpRequest,s=this.stats;s.loading.first=0,s.loaded=0,s.aborted=!1;const a=this.xhrSetup;a?Promise.resolve().then((()=>{if(this.loader===i&&!this.stats.aborted)return a(i,e.url)})).catch((t=>{if(this.loader===i&&!this.stats.aborted)return i.open("GET",e.url,!0),a(i,e.url)})).then((()=>{this.loader!==i||this.stats.aborted||this.openAndSendXhr(i,e,t)})).catch((t=>{this.callbacks.onError({code:i.status,text:t.message},e,i,s)})):this.openAndSendXhr(i,e,t)}openAndSendXhr(t,e,i){t.readyState||t.open("GET",e.url,!0);const s=e.headers,{maxTimeToFirstByteMs:a,maxLoadTimeMs:r}=i.loadPolicy;if(s)for(const n in s)t.setRequestHeader(n,s[n]);e.rangeEnd&&t.setRequestHeader("Range","bytes="+e.rangeStart+"-"+(e.rangeEnd-1)),t.onreadystatechange=this.readystatechange.bind(this),t.onprogress=this.loadprogress.bind(this),t.responseType=e.responseType,self.clearTimeout(this.requestTimeout),i.timeout=a&&Oc(a)?a:r,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),i.timeout),t.send()}readystatechange(){const{context:t,loader:e,stats:i}=this;if(!t||!e)return;const s=e.readyState,a=this.config;if(!i.aborted&&s>=2&&(0===i.loading.first&&(i.loading.first=Math.max(self.performance.now(),i.loading.start),a.timeout!==a.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),a.timeout=a.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),a.loadPolicy.maxLoadTimeMs-(i.loading.first-i.loading.start)))),4===s)){self.clearTimeout(this.requestTimeout),e.onreadystatechange=null,e.onprogress=null;const s=e.status,r="text"!==e.responseType;if(s>=200&&s<300&&(r&&e.response||null!==e.responseText)){i.loading.end=Math.max(self.performance.now(),i.loading.first);const a=r?e.response:e.responseText,n="arraybuffer"===e.responseType?a.byteLength:a.length;if(i.loaded=i.total=n,i.bwEstimate=8e3*i.total/(i.loading.end-i.loading.first),!this.callbacks)return;const o=this.callbacks.onProgress;if(o&&o(i,t,a,e),!this.callbacks)return;const l={url:e.responseURL,data:a,code:s};this.callbacks.onSuccess(l,i,t,e)}else{const r=a.loadPolicy.errorRetry;Ug(r,i.retry,!1,{url:t.url,data:void 0,code:s})?this.retry(r):(Gc.error(`${s} while loading ${t.url}`),this.callbacks.onError({code:s,text:e.statusText},t,e,i))}}}loadtimeout(){if(!this.config)return;const t=this.config.loadPolicy.timeoutRetry;if(Ug(t,this.stats.retry,!0))this.retry(t);else{var e;Gc.warn(`timeout while loading ${null==(e=this.context)?void 0:e.url}`);const t=this.callbacks;t&&(this.abortInternal(),t.onTimeout(this.stats,this.context,this.loader))}}retry(t){const{context:e,stats:i}=this;this.retryDelay=Og(t,i.retry),i.retry++,Gc.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${null==e?void 0:e.url}, retrying ${i.retry}/${t.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(t){const e=this.stats;e.loaded=t.loaded,t.lengthComputable&&(e.total=t.total)}getCacheAge(){let t=null;if(this.loader&&$f.test(this.loader.getAllResponseHeaders())){const e=this.loader.getResponseHeader("age");t=e?parseFloat(e):null}return t}getResponseHeader(t){return this.loader&&new RegExp(`^${t}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(t):null}}const Ff=/(\d+)-(\d+)\/(\d+)/;class zf{constructor(t){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=t.fetchSetup||Nf,this.controller=new self.AbortController,this.stats=new Qc}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var t;this.abortInternal(),null!=(t=this.callbacks)&&t.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(t,e,i){const s=this.stats;if(s.loading.start)throw new Error("Loader can only be used once.");s.loading.start=self.performance.now();const a=function(t,e){const i={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(Ic({},t.headers))};t.rangeEnd&&i.headers.set("Range","bytes="+t.rangeStart+"-"+String(t.rangeEnd-1));return i}(t,this.controller.signal),r=i.onProgress,n="arraybuffer"===t.responseType,o=n?"byteLength":"length",{maxTimeToFirstByteMs:l,maxLoadTimeMs:d}=e.loadPolicy;this.context=t,this.config=e,this.callbacks=i,this.request=this.fetchSetup(t,a),self.clearTimeout(this.requestTimeout),e.timeout=l&&Oc(l)?l:d,this.requestTimeout=self.setTimeout((()=>{this.abortInternal(),i.onTimeout(s,t,this.response)}),e.timeout),self.fetch(this.request).then((a=>{this.response=this.loader=a;const o=Math.max(self.performance.now(),s.loading.start);if(self.clearTimeout(this.requestTimeout),e.timeout=d,this.requestTimeout=self.setTimeout((()=>{this.abortInternal(),i.onTimeout(s,t,this.response)}),d-(o-s.loading.start)),!a.ok){const{status:t,statusText:e}=a;throw new jf(e||"fetch, bad network response",t,a)}return s.loading.first=o,s.total=function(t){const e=t.get("Content-Range");if(e){const t=function(t){const e=Ff.exec(t);if(e)return parseInt(e[2])-parseInt(e[1])+1}(e);if(Oc(t))return t}const i=t.get("Content-Length");if(i)return parseInt(i)}(a.headers)||s.total,r&&Oc(e.highWaterMark)?this.loadProgressively(a,s,t,e.highWaterMark,r):n?a.arrayBuffer():"json"===t.responseType?a.json():a.text()})).then((a=>{const n=this.response;if(!n)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),s.loading.end=Math.max(self.performance.now(),s.loading.first);const l=a[o];l&&(s.loaded=s.total=l);const d={url:n.url,data:a,code:n.status};r&&!Oc(e.highWaterMark)&&r(s,t,a,n),i.onSuccess(d,s,t,n)})).catch((e=>{if(self.clearTimeout(this.requestTimeout),s.aborted)return;const a=e&&e.code||0,r=e?e.message:null;i.onError({code:a,text:r},t,e?e.details:null,s)}))}getCacheAge(){let t=null;if(this.response){const e=this.response.headers.get("age");t=e?parseFloat(e):null}return t}getResponseHeader(t){return this.response?this.response.headers.get(t):null}loadProgressively(t,e,i,s=0,a){const r=new Zu,n=t.body.getReader(),o=()=>n.read().then((n=>{if(n.done)return r.dataLength&&a(e,i,r.flush(),t),Promise.resolve(new ArrayBuffer(0));const l=n.value,d=l.length;return e.loaded+=d,d<s||r.dataLength?(r.push(l),r.dataLength>=s&&a(e,i,r.flush(),t)):a(e,i,l,t),o()})).catch((()=>Promise.reject()));return o()}}function Nf(t,e){return new self.Request(t.url,e)}class jf extends Error{constructor(t,e,i){super(t),this.code=void 0,this.details=void 0,this.code=e,this.details=i}}const Bf=/\s/,Hf={newCue(t,e,i,s){const a=[];let r,n,o,l,d;const c=self.VTTCue||self.TextTrackCue;for(let p=0;p<s.rows.length;p++)if(r=s.rows[p],o=!0,l=0,d="",!r.isEmpty()){var h;for(let t=0;t<r.chars.length;t++)Bf.test(r.chars[t].uchar)&&o?l++:(d+=r.chars[t].uchar,o=!1);r.cueStartTime=e,e===i&&(i+=1e-4),l>=16?l--:l++;const s=Ov(d.trim()),g=Nv(e,i,s);null!=t&&null!=(h=t.cues)&&h.getCueById(g)||(n=new c(e,i,s),n.id=g,n.line=p+1,n.align="left",n.position=10+Math.min(80,10*Math.floor(8*l/32)),a.push(n))}return t&&a.length&&(a.sort(((t,e)=>"auto"===t.line||"auto"===e.line?0:t.line>8&&e.line>8?e.line-t.line:t.line-e.line)),a.forEach((e=>sg(t,e)))),a}},Vf=Mc(Mc({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:Uf,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:class{constructor(t){this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this._abandonRulesCheck=()=>{const{fragCurrent:t,partCurrent:e,hls:i}=this,{autoLevelEnabled:s,media:a}=i;if(!t||!a)return;const r=performance.now(),n=e?e.stats:t.stats,o=e?e.duration:t.duration,l=r-n.loading.start,d=i.minAutoLevel;if(n.aborted||n.loaded&&n.loaded===n.total||t.level<=d)return this.clearTimer(),void(this._nextAutoLevel=-1);if(!s||a.paused||!a.playbackRate||!a.readyState)return;const c=i.mainForwardBufferInfo;if(null===c)return;const h=this.bwEstimator.getEstimateTTFB(),p=Math.abs(a.playbackRate);if(l<=Math.max(h,o/(2*p)*1e3))return;const g=c.len/p,u=n.loading.first?n.loading.first-n.loading.start:-1,m=n.loaded&&u>-1,v=this.getBwEstimate(),f=i.levels,y=f[t.level],b=n.total||Math.max(n.loaded,Math.round(o*y.averageBitrate/8));let w=m?l-u:l;w<1&&m&&(w=Math.min(l,8*n.loaded/v));const x=m?1e3*n.loaded/w:0,k=x?(b-n.loaded)/x:8*b/v+h/1e3;if(k<=g)return;const S=x?8*x:v;let _,C=Number.POSITIVE_INFINITY;for(_=t.level-1;_>d;_--){const t=f[_].maxBitrate;if(C=this.getTimeToLoadFrag(h/1e3,S,o*t,!f[_].details),C<g)break}if(C>=k)return;if(C>10*o)return;i.nextLoadLevel=i.nextAutoLevel=_,m?this.bwEstimator.sample(l-Math.min(h,u),n.loaded):this.bwEstimator.sampleTTFB(l);const P=f[_].maxBitrate;this.getBwEstimate()*this.hls.config.abrBandWidthUpFactor>P&&this.resetEstimator(P),this.clearTimer(),Gc.warn(`[abr] Fragment ${t.sn}${e?" part "+e.index:""} of level ${t.level} is loading too slowly;\n      Time to underbuffer: ${g.toFixed(3)} s\n      Estimated load time for current fragment: ${k.toFixed(3)} s\n      Estimated load time for down switch fragment: ${C.toFixed(3)} s\n      TTFB estimate: ${0|u} ms\n      Current BW estimate: ${Oc(v)?0|v:"Unknown"} bps\n      New BW estimate: ${0|this.getBwEstimate()} bps\n      Switching to level ${_} @ ${0|P} bps`),i.trigger(Fc.FRAG_LOAD_EMERGENCY_ABORTED,{frag:t,part:e,stats:n})},this.hls=t,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(t){t&&(Gc.log(`setting initial bwe to ${t}`),this.hls.config.abrEwmaDefaultEstimate=t),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const t=this.hls.config;return new Qg(t.abrEwmaSlowVoD,t.abrEwmaFastVoD,t.abrEwmaDefaultEstimate)}registerListeners(){const{hls:t}=this;t.on(Fc.MANIFEST_LOADING,this.onManifestLoading,this),t.on(Fc.FRAG_LOADING,this.onFragLoading,this),t.on(Fc.FRAG_LOADED,this.onFragLoaded,this),t.on(Fc.FRAG_BUFFERED,this.onFragBuffered,this),t.on(Fc.LEVEL_SWITCHING,this.onLevelSwitching,this),t.on(Fc.LEVEL_LOADED,this.onLevelLoaded,this),t.on(Fc.LEVELS_UPDATED,this.onLevelsUpdated,this),t.on(Fc.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),t.on(Fc.ERROR,this.onError,this)}unregisterListeners(){const{hls:t}=this;t&&(t.off(Fc.MANIFEST_LOADING,this.onManifestLoading,this),t.off(Fc.FRAG_LOADING,this.onFragLoading,this),t.off(Fc.FRAG_LOADED,this.onFragLoaded,this),t.off(Fc.FRAG_BUFFERED,this.onFragBuffered,this),t.off(Fc.LEVEL_SWITCHING,this.onLevelSwitching,this),t.off(Fc.LEVEL_LOADED,this.onLevelLoaded,this),t.off(Fc.LEVELS_UPDATED,this.onLevelsUpdated,this),t.off(Fc.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),t.off(Fc.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(t,e){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(t,e){const i=e.frag;if(!this.ignoreFragment(i)){var s;if(!i.bitrateTest)this.fragCurrent=i,this.partCurrent=null!=(s=e.part)?s:null;this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(t,e){this.clearTimer()}onError(t,e){if(!e.fatal)switch(e.details){case Nc.BUFFER_ADD_CODEC_ERROR:case Nc.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case Nc.FRAG_LOAD_TIMEOUT:{const t=e.frag,{fragCurrent:i,partCurrent:s}=this;if(t&&i&&t.sn===i.sn&&t.level===i.level){const e=performance.now(),i=s?s.stats:t.stats,a=e-i.loading.start,r=i.loading.first?i.loading.first-i.loading.start:-1;if(i.loaded&&r>-1){const t=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(a-Math.min(t,r),i.loaded)}else this.bwEstimator.sampleTTFB(a)}break}}}getTimeToLoadFrag(t,e,i,s){return t+i/e+(s?this.lastLevelLoadSec:0)}onLevelLoaded(t,e){const i=this.hls.config,{loading:s}=e.stats,a=s.end-s.start;Oc(a)&&(this.lastLevelLoadSec=a/1e3),e.details.live?this.bwEstimator.update(i.abrEwmaSlowLive,i.abrEwmaFastLive):this.bwEstimator.update(i.abrEwmaSlowVoD,i.abrEwmaFastVoD)}onFragLoaded(t,{frag:e,part:i}){const s=i?i.stats:e.stats;if(e.type===Yp&&this.bwEstimator.sampleTTFB(s.loading.first-s.loading.start),!this.ignoreFragment(e)){if(this.clearTimer(),e.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const t=i?i.duration:e.duration,a=this.hls.levels[e.level],r=(a.loaded?a.loaded.bytes:0)+s.loaded,n=(a.loaded?a.loaded.duration:0)+t;a.loaded={bytes:r,duration:n},a.realBitrate=Math.round(8*r/n)}if(e.bitrateTest){const t={stats:s,frag:e,part:i,id:e.type};this.onFragBuffered(Fc.FRAG_BUFFERED,t),e.bitrateTest=!1}else this.lastLoadedFragLevel=e.level}}onFragBuffered(t,e){const{frag:i,part:s}=e,a=null!=s&&s.stats.loaded?s.stats:i.stats;if(a.aborted)return;if(this.ignoreFragment(i))return;const r=a.parsing.end-a.loading.start-Math.min(a.loading.first-a.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(r,a.loaded),a.bwEstimate=this.getBwEstimate(),i.bitrateTest?this.bitrateTestDelay=r/1e3:this.bitrateTestDelay=0}ignoreFragment(t){return t.type!==Yp||"initSegment"===t.sn}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:t,minAutoLevel:e}=this.hls,i=this.getBwEstimate(),s=this.hls.config.maxStarvationDelay,a=this.findBestLevel(i,e,t,0,s,1,1);if(a>-1)return a;const r=this.hls.firstLevel,n=Math.min(Math.max(r,e),t);return Gc.warn(`[abr] Could not find best starting auto level. Defaulting to first in playlist ${r} clamped to ${n}`),n}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const t=this.forcedAutoLevel,e=this.bwEstimator.canEstimate(),i=this.lastLoadedFragLevel>-1;if(!(-1===t||e&&i&&this.nextAutoLevelKey!==this.getAutoLevelKey()))return t;const s=e&&i?this.getNextABRAutoLevel():this.firstAutoLevel;if(-1!==t){const e=this.hls.levels;if(e.length>Math.max(t,s)&&e[t].loadError<=e[s].loadError)return t}return this._nextAutoLevel=s,this.nextAutoLevelKey=this.getAutoLevelKey(),s}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:t,partCurrent:e,hls:i}=this,{maxAutoLevel:s,config:a,minAutoLevel:r}=i,n=e?e.duration:t?t.duration:0,o=this.getBwEstimate(),l=this.getStarvationDelay();let d=a.abrBandWidthFactor,c=a.abrBandWidthUpFactor;if(l){const t=this.findBestLevel(o,r,s,l,0,d,c);if(t>=0)return t}let h=n?Math.min(n,a.maxStarvationDelay):a.maxStarvationDelay;if(!l){const t=this.bitrateTestDelay;if(t){h=(n?Math.min(n,a.maxLoadingDelay):a.maxLoadingDelay)-t,Gc.info(`[abr] bitrate test took ${Math.round(1e3*t)}ms, set first fragment max fetchDuration to ${Math.round(1e3*h)} ms`),d=c=1}}const p=this.findBestLevel(o,r,s,l,h,d,c);if(Gc.info(`[abr] ${l?"rebuffering expected":"buffer is empty"}, optimal quality level ${p}`),p>-1)return p;const g=i.levels[r],u=i.levels[i.loadLevel];return(null==g?void 0:g.bitrate)<(null==u?void 0:u.bitrate)?r:i.loadLevel}getStarvationDelay(){const t=this.hls,e=t.media;if(!e)return 1/0;const i=e&&0!==e.playbackRate?Math.abs(e.playbackRate):1,s=t.mainForwardBufferInfo;return(s?s.len:0)/i}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(t,e,i,s,a,r,n){var o;const l=s+a,d=this.lastLoadedFragLevel,c=-1===d?this.hls.firstLevel:d,{fragCurrent:h,partCurrent:p}=this,{levels:g,allAudioTracks:u,loadLevel:m,config:v}=this.hls;if(1===g.length)return 0;const f=g[c],y=!(null==f||null==(o=f.details)||!o.live),b=-1===m||-1===d;let w,x="SDR",k=(null==f?void 0:f.frameRate)||0;const{audioPreference:S,videoPreference:_}=v,C=this.audioTracksByGroup||(this.audioTracksByGroup=function(t){return t.reduce(((t,e)=>{let i=t.groups[e.groupId];i||(i=t.groups[e.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),i.tracks.push(e);const s=e.channels||"2";return i.channels[s]=(i.channels[s]||0)+1,i.hasDefault=i.hasDefault||e.default,i.hasAutoSelect=i.hasAutoSelect||e.autoselect,i.hasDefault&&(t.hasDefaultAudio=!0),i.hasAutoSelect&&(t.hasAutoSelectAudio=!0),t}),{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}(u));if(b){if(-1!==this.firstSelection)return this.firstSelection;const s=this.codecTiers||(this.codecTiers=function(t,e,i,s){return t.slice(i,s+1).reduce(((t,i)=>{if(!i.codecSet)return t;const s=i.audioGroups;let a=t[i.codecSet];a||(t[i.codecSet]=a={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!s,fragmentError:0}),a.minBitrate=Math.min(a.minBitrate,i.bitrate);const r=Math.min(i.height,i.width);return a.minHeight=Math.min(a.minHeight,r),a.minFramerate=Math.min(a.minFramerate,i.frameRate),a.maxScore=Math.max(a.maxScore,i.score),a.fragmentError+=i.fragmentError,a.videoRanges[i.videoRange]=(a.videoRanges[i.videoRange]||0)+1,s&&s.forEach((t=>{if(!t)return;const i=e.groups[t];i&&(a.hasDefaultAudio=a.hasDefaultAudio||e.hasDefaultAudio?i.hasDefault:i.hasAutoSelect||!e.hasDefaultAudio&&!e.hasAutoSelectAudio,Object.keys(i.channels).forEach((t=>{a.channels[t]=(a.channels[t]||0)+i.channels[t]})))})),t}),{})}(g,C,e,i)),a=function(t,e,i,s,a){const r=Object.keys(t),n=null==s?void 0:s.channels,o=null==s?void 0:s.audioCodec,l=n&&2===parseInt(n);let d=!0,c=!1,h=1/0,p=1/0,g=1/0,u=0,m=[];const{preferHDR:v,allowedVideoRanges:f}=iu(e,a);for(let w=r.length;w--;){const e=t[r[w]];d=e.channels[2]>0,h=Math.min(h,e.minHeight),p=Math.min(p,e.minFramerate),g=Math.min(g,e.minBitrate);const i=f.filter((t=>e.videoRanges[t]>0));i.length>0&&(c=!0,m=i)}h=Oc(h)?h:0,p=Oc(p)?p:0;const y=Math.max(1080,h),b=Math.max(30,p);return g=Oc(g)?g:i,i=Math.max(g,i),c||(e=void 0,m=[]),{codecSet:r.reduce(((e,s)=>{const a=t[s];if(s===e)return e;if(a.minBitrate>i)return su(s,`min bitrate of ${a.minBitrate} > current estimate of ${i}`),e;if(!a.hasDefaultAudio)return su(s,"no renditions with default or auto-select sound found"),e;if(o&&s.indexOf(o.substring(0,4))%5!=0)return su(s,`audio codec preference "${o}" not found`),e;if(n&&!l){if(!a.channels[n])return su(s,`no renditions with ${n} channel sound found (channels options: ${Object.keys(a.channels)})`),e}else if((!o||l)&&d&&0===a.channels[2])return su(s,"no renditions with stereo sound found"),e;return a.minHeight>y?(su(s,`min resolution of ${a.minHeight} > maximum of ${y}`),e):a.minFramerate>b?(su(s,`min framerate of ${a.minFramerate} > maximum of ${b}`),e):m.some((t=>a.videoRanges[t]>0))?a.maxScore<u?(su(s,`max score of ${a.maxScore} < selected max of ${u}`),e):e&&(Tp(s)>=Tp(e)||a.fragmentError>t[e].fragmentError)?e:(u=a.maxScore,s):(su(s,`no variants with VIDEO-RANGE of ${JSON.stringify(m)} found`),e)}),void 0),videoRanges:m,preferHDR:v,minFramerate:p,minBitrate:g}}(s,x,t,S,_),{codecSet:r,videoRanges:n,minFramerate:o,minBitrate:l,preferHDR:d}=a;w=r,x=d?n[n.length-1]:n[0],k=o,t=Math.max(t,l),Gc.log(`[abr] picked start tier ${JSON.stringify(a)}`)}else w=null==f?void 0:f.codecSet,x=null==f?void 0:f.videoRange;const P=p?p.duration:h?h.duration:0,L=this.bwEstimator.getEstimateTTFB()/1e3,T=[];for(let A=i;A>=e;A--){var E;const e=g[A],o=A>c;if(!e)continue;if(v.useMediaCapabilities&&!e.supportedResult&&!e.supportedPromise){const i=navigator.mediaCapabilities;"function"==typeof(null==i?void 0:i.decodingInfo)&&tu(e,C,x,k,t,S)?(e.supportedPromise=eu(e,C,i),e.supportedPromise.then((t=>{if(!this.hls)return;e.supportedResult=t;const i=this.hls.levels,s=i.indexOf(e);t.error?Gc.warn(`[abr] MediaCapabilities decodingInfo error: "${t.error}" for level ${s} ${JSON.stringify(t)}`):t.supported||(Gc.warn(`[abr] Unsupported MediaCapabilities decodingInfo result for level ${s} ${JSON.stringify(t)}`),s>-1&&i.length>1&&(Gc.log(`[abr] Removing unsupported level ${s}`),this.hls.removeLevel(s)))}))):e.supportedResult=Jg}if(w&&e.codecSet!==w||x&&e.videoRange!==x||o&&k>e.frameRate||!o&&k>0&&k<e.frameRate||e.supportedResult&&(null==(E=e.supportedResult.decodingInfoResults)||!E[0].smooth)){T.push(A);continue}const h=e.details,u=(p?null==h?void 0:h.partTarget:null==h?void 0:h.averagetargetduration)||P;let _;_=o?n*t:r*t;const M=P&&s>=2*P&&0===a?g[A].averageBitrate:g[A].maxBitrate,R=this.getTimeToLoadFrag(L,_,M*u,void 0===h);if(_>=M&&(A===d||0===e.loadError&&0===e.fragmentError)&&(R<=L||!Oc(R)||y&&!this.bitrateTestDelay||R<l)){const t=this.forcedAutoLevel;return A===m||-1!==t&&t===m||(T.length&&Gc.trace(`[abr] Skipped level(s) ${T.join(",")} of ${i} max with CODECS and VIDEO-RANGE:"${g[T[0]].codecs}" ${g[T[0]].videoRange}; not compatible with "${f.codecs}" ${x}`),Gc.info(`[abr] switch candidate:${c}->${A} adjustedbw(${Math.round(_)})-bitrate=${Math.round(_-M)} ttfb:${L.toFixed(1)} avgDuration:${u.toFixed(1)} maxFetchDuration:${l.toFixed(1)} fetchDuration:${R.toFixed(1)} firstSelection:${b} codecSet:${w} videoRange:${x} hls.loadLevel:${m}`)),b&&(this.firstSelection=A),A}}return-1}set nextAutoLevel(t){const{maxAutoLevel:e,minAutoLevel:i}=this.hls,s=Math.min(Math.max(t,i),e);this._nextAutoLevel!==s&&(this.nextAutoLevelKey="",this._nextAutoLevel=s)}},bufferController:class{constructor(t){this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendSource=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this.log=void 0,this.warn=void 0,this.error=void 0,this._onEndStreaming=t=>{this.hls&&this.hls.pauseBuffering()},this._onStartStreaming=t=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=()=>{const{media:t,mediaSource:e}=this;this.log("Media source opened"),t&&(t.removeEventListener("emptied",this._onMediaEmptied),this.updateMediaElementDuration(),this.hls.trigger(Fc.MEDIA_ATTACHED,{media:t,mediaSource:e})),e&&e.removeEventListener("sourceopen",this._onMediaSourceOpen),this.checkPendingTracks()},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:t,_objectUrl:e}=this;t!==e&&Gc.error(`Media element src was set while attaching MediaSource (${e} > ${t})`)},this.hls=t;const e="[buffer-controller]";var i;this.appendSource=(i=kp(t.config.preferManagedMediaSource),"undefined"!=typeof self&&i===self.ManagedMediaSource),this.log=Gc.log.bind(Gc,e),this.warn=Gc.warn.bind(Gc,e),this.error=Gc.error.bind(Gc,e),this._initSourceBuffer(),this.registerListeners()}hasSourceTypes(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null,this.hls=null}registerListeners(){const{hls:t}=this;t.on(Fc.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(Fc.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(Fc.MANIFEST_LOADING,this.onManifestLoading,this),t.on(Fc.MANIFEST_PARSED,this.onManifestParsed,this),t.on(Fc.BUFFER_RESET,this.onBufferReset,this),t.on(Fc.BUFFER_APPENDING,this.onBufferAppending,this),t.on(Fc.BUFFER_CODECS,this.onBufferCodecs,this),t.on(Fc.BUFFER_EOS,this.onBufferEos,this),t.on(Fc.BUFFER_FLUSHING,this.onBufferFlushing,this),t.on(Fc.LEVEL_UPDATED,this.onLevelUpdated,this),t.on(Fc.FRAG_PARSED,this.onFragParsed,this),t.on(Fc.FRAG_CHANGED,this.onFragChanged,this)}unregisterListeners(){const{hls:t}=this;t.off(Fc.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(Fc.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(Fc.MANIFEST_LOADING,this.onManifestLoading,this),t.off(Fc.MANIFEST_PARSED,this.onManifestParsed,this),t.off(Fc.BUFFER_RESET,this.onBufferReset,this),t.off(Fc.BUFFER_APPENDING,this.onBufferAppending,this),t.off(Fc.BUFFER_CODECS,this.onBufferCodecs,this),t.off(Fc.BUFFER_EOS,this.onBufferEos,this),t.off(Fc.BUFFER_FLUSHING,this.onBufferFlushing,this),t.off(Fc.LEVEL_UPDATED,this.onLevelUpdated,this),t.off(Fc.FRAG_PARSED,this.onFragParsed,this),t.off(Fc.FRAG_CHANGED,this.onFragChanged,this)}_initSourceBuffer(){this.sourceBuffer={},this.operationQueue=new av(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.appendErrors={audio:0,video:0,audiovideo:0},this.lastMpegAudioChunk=null}onManifestLoading(){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=0,this.details=null}onManifestParsed(t,e){let i=2;(e.audio&&!e.video||!e.altAudio)&&(i=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=i,this.log(`${this.bufferCodecEventsExpected} bufferCodec event(s) expected`)}onMediaAttaching(t,e){const i=this.media=e.media,s=kp(this.appendSource);if(i&&s){var a;const t=this.mediaSource=new s;this.log(`created media source: ${null==(a=t.constructor)?void 0:a.name}`),t.addEventListener("sourceopen",this._onMediaSourceOpen),t.addEventListener("sourceended",this._onMediaSourceEnded),t.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(t.addEventListener("startstreaming",this._onStartStreaming),t.addEventListener("endstreaming",this._onEndStreaming));const e=this._objectUrl=self.URL.createObjectURL(t);if(this.appendSource)try{i.removeAttribute("src");const s=self.ManagedMediaSource;i.disableRemotePlayback=i.disableRemotePlayback||s&&t instanceof s,nv(i),function(t,e){const i=self.document.createElement("source");i.type="video/mp4",i.src=e,t.appendChild(i)}(i,e),i.load()}catch(r){i.src=e}else i.src=e;i.addEventListener("emptied",this._onMediaEmptied)}}onMediaDetaching(){const{media:t,mediaSource:e,_objectUrl:i}=this;if(e){if(this.log("media source detaching"),"open"===e.readyState)try{e.endOfStream()}catch(Dw){this.warn(`onMediaDetaching: ${Dw.message} while calling endOfStream`)}this.onBufferReset(),e.removeEventListener("sourceopen",this._onMediaSourceOpen),e.removeEventListener("sourceended",this._onMediaSourceEnded),e.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(e.removeEventListener("startstreaming",this._onStartStreaming),e.removeEventListener("endstreaming",this._onEndStreaming)),t&&(t.removeEventListener("emptied",this._onMediaEmptied),i&&self.URL.revokeObjectURL(i),this.mediaSrc===i?(t.removeAttribute("src"),this.appendSource&&nv(t),t.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(Fc.MEDIA_DETACHED,void 0)}onBufferReset(){this.getSourceBufferTypes().forEach((t=>{this.resetBuffer(t)})),this._initSourceBuffer()}resetBuffer(t){const e=this.sourceBuffer[t];try{var i;if(e)this.removeBufferListeners(t),this.sourceBuffer[t]=void 0,null!=(i=this.mediaSource)&&i.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(e)}catch(Dw){this.warn(`onBufferReset ${t}`,Dw)}}onBufferCodecs(t,e){const i=this.getSourceBufferTypes().length,s=Object.keys(e);if(s.forEach((t=>{if(i){const i=this.tracks[t];if(i&&"function"==typeof i.buffer.changeType){var s;const{id:a,codec:r,levelCodec:n,container:o,metadata:l}=e[t],d=Rp(i.codec,i.levelCodec),c=null==d?void 0:d.replace(rv,"$1");let h=Rp(r,n);const p=null==(s=h)?void 0:s.replace(rv,"$1");if(h&&c!==p){"audio"===t.slice(0,5)&&(h=Mp(h,this.appendSource));const e=`${o};codecs=${h}`;this.appendChangeType(t,e),this.log(`switching codec ${d} to ${h}`),this.tracks[t]={buffer:i.buffer,codec:r,container:o,levelCodec:n,metadata:l,id:a}}}}else this.pendingTracks[t]=e[t]})),i)return;const a=Math.max(this.bufferCodecEventsExpected-1,0);this.bufferCodecEventsExpected!==a&&(this.log(`${a} bufferCodec event(s) expected ${s.join(",")}`),this.bufferCodecEventsExpected=a),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks()}appendChangeType(t,e){const{operationQueue:i}=this,s={execute:()=>{const s=this.sourceBuffer[t];s&&(this.log(`changing ${t} sourceBuffer type to ${e}`),s.changeType(e)),i.shiftAndExecuteNext(t)},onStart:()=>{},onComplete:()=>{},onError:e=>{this.warn(`Failed to change ${t} SourceBuffer type`,e)}};i.append(s,t,!!this.pendingTracks[t])}onBufferAppending(t,e){const{hls:i,operationQueue:s,tracks:a}=this,{data:r,type:n,frag:o,part:l,chunkMeta:d}=e,c=d.buffering[n],h=self.performance.now();c.start=h;const p=o.stats.buffering,g=l?l.stats.buffering:null;0===p.start&&(p.start=h),g&&0===g.start&&(g.start=h);const u=a.audio;let m=!1;"audio"===n&&"audio/mpeg"===(null==u?void 0:u.container)&&(m=!this.lastMpegAudioChunk||1===d.id||this.lastMpegAudioChunk.sn!==d.sn,this.lastMpegAudioChunk=d);const v=o.start,f={execute:()=>{if(c.executeStart=self.performance.now(),m){const t=this.sourceBuffer[n];if(t){const e=v-t.timestampOffset;Math.abs(e)>=.1&&(this.log(`Updating audio SourceBuffer timestampOffset to ${v} (delta: ${e}) sn: ${o.sn})`),t.timestampOffset=v)}}this.appendExecutor(r,n)},onStart:()=>{},onComplete:()=>{const t=self.performance.now();c.executeEnd=c.end=t,0===p.first&&(p.first=t),g&&0===g.first&&(g.first=t);const{sourceBuffer:e}=this,i={};for(const s in e)i[s]=fu.getBuffered(e[s]);this.appendErrors[n]=0,"audio"===n||"video"===n?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(Fc.BUFFER_APPENDED,{type:n,frag:o,part:l,chunkMeta:d,parent:o.type,timeRanges:i})},onError:t=>{const e={type:zc.MEDIA_ERROR,parent:o.type,details:Nc.BUFFER_APPEND_ERROR,sourceBufferName:n,frag:o,part:l,chunkMeta:d,error:t,err:t,fatal:!1};if(t.code===DOMException.QUOTA_EXCEEDED_ERR)e.details=Nc.BUFFER_FULL_ERROR;else{const t=++this.appendErrors[n];e.details=Nc.BUFFER_APPEND_ERROR,this.warn(`Failed ${t}/${i.config.appendErrorMaxRetry} times to append segment in "${n}" sourceBuffer`),t>=i.config.appendErrorMaxRetry&&(e.fatal=!0)}i.trigger(Fc.ERROR,e)}};s.append(f,n,!!this.pendingTracks[n])}onBufferFlushing(t,e){const{operationQueue:i}=this,s=t=>({execute:this.removeExecutor.bind(this,t,e.startOffset,e.endOffset),onStart:()=>{},onComplete:()=>{this.hls.trigger(Fc.BUFFER_FLUSHED,{type:t})},onError:e=>{this.warn(`Failed to remove from ${t} SourceBuffer`,e)}});e.type?i.append(s(e.type),e.type):this.getSourceBufferTypes().forEach((t=>{i.append(s(t),t)}))}onFragParsed(t,e){const{frag:i,part:s}=e,a=[],r=s?s.elementaryStreams:i.elementaryStreams;r[th]?a.push("audiovideo"):(r[Jc]&&a.push("audio"),r[Xc]&&a.push("video"));0===a.length&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${i.type} level: ${i.level} sn: ${i.sn}`),this.blockBuffers((()=>{const t=self.performance.now();i.stats.buffering.end=t,s&&(s.stats.buffering.end=t);const e=s?s.stats:i.stats;this.hls.trigger(Fc.FRAG_BUFFERED,{frag:i,part:s,stats:e,id:i.type})}),a)}onFragChanged(t,e){this.trimBuffers()}onBufferEos(t,e){this.getSourceBufferTypes().reduce(((t,i)=>{const s=this.sourceBuffer[i];return!s||e.type&&e.type!==i||(s.ending=!0,s.ended||(s.ended=!0,this.log(`${i} sourceBuffer now EOS`))),t&&!(s&&!s.ended)}),!0)&&(this.log("Queueing mediaSource.endOfStream()"),this.blockBuffers((()=>{this.getSourceBufferTypes().forEach((t=>{const e=this.sourceBuffer[t];e&&(e.ending=!1)}));const{mediaSource:t}=this;t&&"open"===t.readyState?(this.log("Calling mediaSource.endOfStream()"),t.endOfStream()):t&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${t.readyState}`)})))}onLevelUpdated(t,{details:e}){e.fragments.length&&(this.details=e,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())}trimBuffers(){const{hls:t,details:e,media:i}=this;if(!i||null===e)return;if(!this.getSourceBufferTypes().length)return;const s=t.config,a=i.currentTime,r=e.levelTargetDuration,n=e.live&&null!==s.liveBackBufferLength?s.liveBackBufferLength:s.backBufferLength;if(Oc(n)&&n>0){const t=Math.max(n,r),e=Math.floor(a/r)*r-t;this.flushBackBuffer(a,r,e)}if(Oc(s.frontBufferFlushThreshold)&&s.frontBufferFlushThreshold>0){const t=Math.max(s.maxBufferLength,s.frontBufferFlushThreshold),e=Math.max(t,r),i=Math.floor(a/r)*r+e;this.flushFrontBuffer(a,r,i)}}flushBackBuffer(t,e,i){const{details:s,sourceBuffer:a}=this;this.getSourceBufferTypes().forEach((r=>{const n=a[r];if(n){const a=fu.getBuffered(n);if(a.length>0&&i>a.start(0)){if(this.hls.trigger(Fc.BACK_BUFFER_REACHED,{bufferEnd:i}),null!=s&&s.live)this.hls.trigger(Fc.LIVE_BACK_BUFFER_REACHED,{bufferEnd:i});else if(n.ended&&a.end(a.length-1)-t<2*e)return void this.log(`Cannot flush ${r} back buffer while SourceBuffer is in ended state`);this.hls.trigger(Fc.BUFFER_FLUSHING,{startOffset:0,endOffset:i,type:r})}}}))}flushFrontBuffer(t,e,i){const{sourceBuffer:s}=this;this.getSourceBufferTypes().forEach((a=>{const r=s[a];if(r){const s=fu.getBuffered(r),n=s.length;if(n<2)return;const o=s.start(n-1),l=s.end(n-1);if(i>o||t>=o&&t<=l)return;if(r.ended&&t-l<2*e)return void this.log(`Cannot flush ${a} front buffer while SourceBuffer is in ended state`);this.hls.trigger(Fc.BUFFER_FLUSHING,{startOffset:o,endOffset:1/0,type:a})}}))}updateMediaElementDuration(){if(!this.details||!this.media||!this.mediaSource||"open"!==this.mediaSource.readyState)return;const{details:t,hls:e,media:i,mediaSource:s}=this,a=t.fragments[0].start+t.totalduration,r=i.duration,n=Oc(s.duration)?s.duration:0;t.live&&e.config.liveDurationInfinity?(s.duration=1/0,this.updateSeekableRange(t)):(a>n&&a>r||!Oc(r))&&(this.log(`Updating Media Source duration to ${a.toFixed(3)}`),s.duration=a)}updateSeekableRange(t){const e=this.mediaSource,i=t.fragments;if(i.length&&t.live&&null!=e&&e.setLiveSeekableRange){const s=Math.max(0,i[0].start),a=Math.max(s,s+t.totalduration);this.log(`Media Source duration is set to ${e.duration}. Setting seekable range to ${s}-${a}.`),e.setLiveSeekableRange(s,a)}}checkPendingTracks(){const{bufferCodecEventsExpected:t,operationQueue:e,pendingTracks:i}=this,s=Object.keys(i).length;if(s&&(!t||2===s||"audiovideo"in i)){this.createSourceBuffers(i),this.pendingTracks={};const t=this.getSourceBufferTypes();if(t.length)this.hls.trigger(Fc.BUFFER_CREATED,{tracks:this.tracks}),t.forEach((t=>{e.executeNext(t)}));else{const t=new Error("could not create source buffer for media codec(s)");this.hls.trigger(Fc.ERROR,{type:zc.MEDIA_ERROR,details:Nc.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:t,reason:t.message})}}}createSourceBuffers(t){const{sourceBuffer:e,mediaSource:i}=this;if(!i)throw Error("createSourceBuffers called when mediaSource was null");for(const a in t)if(!e[a]){var s;const r=t[a];if(!r)throw Error(`source buffer exists for track ${a}, however track does not`);let n=-1===(null==(s=r.levelCodec)?void 0:s.indexOf(","))?r.levelCodec:r.codec;n&&"audio"===a.slice(0,5)&&(n=Mp(n,this.appendSource));const o=`${r.container};codecs=${n}`;this.log(`creating sourceBuffer(${o})`);try{const t=e[a]=i.addSourceBuffer(o),s=a;this.addBufferListener(s,"updatestart",this._onSBUpdateStart),this.addBufferListener(s,"updateend",this._onSBUpdateEnd),this.addBufferListener(s,"error",this._onSBUpdateError),this.appendSource&&this.addBufferListener(s,"bufferedchange",((t,e)=>{const i=e.removedRanges;null!=i&&i.length&&this.hls.trigger(Fc.BUFFER_FLUSHED,{type:a})})),this.tracks[a]={buffer:t,codec:n,container:r.container,levelCodec:r.levelCodec,metadata:r.metadata,id:r.id}}catch(Dw){this.error(`error while trying to add sourceBuffer: ${Dw.message}`),this.hls.trigger(Fc.ERROR,{type:zc.MEDIA_ERROR,details:Nc.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:Dw,sourceBufferName:a,mimeType:o})}}}get mediaSrc(){var t,e;const i=(null==(t=this.media)||null==(e=t.querySelector)?void 0:e.call(t,"source"))||this.media;return null==i?void 0:i.src}_onSBUpdateStart(t){const{operationQueue:e}=this;e.current(t).onStart()}_onSBUpdateEnd(t){var e;if("closed"===(null==(e=this.mediaSource)?void 0:e.readyState))return void this.resetBuffer(t);const{operationQueue:i}=this;i.current(t).onComplete(),i.shiftAndExecuteNext(t)}_onSBUpdateError(t,e){var i;const s=new Error(`${t} SourceBuffer error. MediaSource readyState: ${null==(i=this.mediaSource)?void 0:i.readyState}`);this.error(`${s}`,e),this.hls.trigger(Fc.ERROR,{type:zc.MEDIA_ERROR,details:Nc.BUFFER_APPENDING_ERROR,sourceBufferName:t,error:s,fatal:!1});const a=this.operationQueue.current(t);a&&a.onError(s)}removeExecutor(t,e,i){const{media:s,mediaSource:a,operationQueue:r,sourceBuffer:n}=this,o=n[t];if(!s||!a||!o)return this.warn(`Attempting to remove from the ${t} SourceBuffer, but it does not exist`),void r.shiftAndExecuteNext(t);const l=Oc(s.duration)?s.duration:1/0,d=Oc(a.duration)?a.duration:1/0,c=Math.max(0,e),h=Math.min(i,l,d);h>c&&(!o.ending||o.ended)?(o.ended=!1,this.log(`Removing [${c},${h}] from the ${t} SourceBuffer`),o.remove(c,h)):r.shiftAndExecuteNext(t)}appendExecutor(t,e){const i=this.sourceBuffer[e];if(i)i.ended=!1,i.appendBuffer(t);else if(!this.pendingTracks[e])throw new Error(`Attempting to append to the ${e} SourceBuffer, but it does not exist`)}blockBuffers(t,e=this.getSourceBufferTypes()){if(!e.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve().then(t);const{operationQueue:i}=this,s=e.map((t=>i.appendBlocker(t)));Promise.all(s).then((()=>{t(),e.forEach((t=>{const e=this.sourceBuffer[t];null!=e&&e.updating||i.shiftAndExecuteNext(t)}))}))}getSourceBufferTypes(){return Object.keys(this.sourceBuffer)}addBufferListener(t,e,i){const s=this.sourceBuffer[t];if(!s)return;const a=i.bind(this,t);this.listeners[t].push({event:e,listener:a}),s.addEventListener(e,a)}removeBufferListeners(t){const e=this.sourceBuffer[t];e&&this.listeners[t].forEach((t=>{e.removeEventListener(t.event,t.listener)}))}},capLevelController:ef,errorController:class{constructor(t){this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.log=void 0,this.warn=void 0,this.error=void 0,this.hls=t,this.log=Gc.log.bind(Gc,"[info]:"),this.warn=Gc.warn.bind(Gc,"[warning]:"),this.error=Gc.error.bind(Gc,"[error]:"),this.registerListeners()}registerListeners(){const t=this.hls;t.on(Fc.ERROR,this.onError,this),t.on(Fc.MANIFEST_LOADING,this.onManifestLoading,this),t.on(Fc.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const t=this.hls;t&&(t.off(Fc.ERROR,this.onError,this),t.off(Fc.ERROR,this.onErrorOut,this),t.off(Fc.MANIFEST_LOADING,this.onManifestLoading,this),t.off(Fc.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(t){}stopLoad(){this.playlistError=0}getVariantLevelIndex(t){return(null==t?void 0:t.type)===Yp?t.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onLevelUpdated(){this.playlistError=0}onError(t,e){var i,s;if(e.fatal)return;const a=this.hls,r=e.context;switch(e.details){case Nc.FRAG_LOAD_ERROR:case Nc.FRAG_LOAD_TIMEOUT:case Nc.KEY_LOAD_ERROR:case Nc.KEY_LOAD_TIMEOUT:return void(e.errorAction=this.getFragRetryOrSwitchAction(e));case Nc.FRAG_PARSING_ERROR:if(null!=(i=e.frag)&&i.gap)return void(e.errorAction={action:Bg,flags:qg});case Nc.FRAG_GAP:case Nc.FRAG_DECRYPT_ERROR:return e.errorAction=this.getFragRetryOrSwitchAction(e),void(e.errorAction.action=Hg);case Nc.LEVEL_EMPTY_ERROR:case Nc.LEVEL_PARSING_ERROR:{var n,o;const t=e.parent===Yp?e.level:a.loadLevel;e.details===Nc.LEVEL_EMPTY_ERROR&&null!=(n=e.context)&&null!=(o=n.levelDetails)&&o.live?e.errorAction=this.getPlaylistRetryOrSwitchAction(e,t):(e.levelRetry=!1,e.errorAction=this.getLevelSwitchAction(e,t))}return;case Nc.LEVEL_LOAD_ERROR:case Nc.LEVEL_LOAD_TIMEOUT:return void("number"==typeof(null==r?void 0:r.level)&&(e.errorAction=this.getPlaylistRetryOrSwitchAction(e,r.level)));case Nc.AUDIO_TRACK_LOAD_ERROR:case Nc.AUDIO_TRACK_LOAD_TIMEOUT:case Nc.SUBTITLE_LOAD_ERROR:case Nc.SUBTITLE_TRACK_LOAD_TIMEOUT:if(r){const t=a.levels[a.loadLevel];if(t&&(r.type===Kp&&t.hasAudioGroup(r.groupId)||r.type===Wp&&t.hasSubtitleGroup(r.groupId)))return e.errorAction=this.getPlaylistRetryOrSwitchAction(e,a.loadLevel),e.errorAction.action=Hg,void(e.errorAction.flags=Zg)}return;case Nc.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{const t=a.levels[a.loadLevel],i=null==t?void 0:t.attrs["HDCP-LEVEL"];i?e.errorAction={action:Hg,flags:Kg,hdcpLevel:i}:this.keySystemError(e)}return;case Nc.BUFFER_ADD_CODEC_ERROR:case Nc.REMUX_ALLOC_ERROR:case Nc.BUFFER_APPEND_ERROR:return void(e.errorAction=this.getLevelSwitchAction(e,null!=(s=e.level)?s:a.loadLevel));case Nc.INTERNAL_EXCEPTION:case Nc.BUFFER_APPENDING_ERROR:case Nc.BUFFER_FULL_ERROR:case Nc.LEVEL_SWITCH_ERROR:case Nc.BUFFER_STALLED_ERROR:case Nc.BUFFER_SEEK_OVER_HOLE:case Nc.BUFFER_NUDGE_ON_STALL:return void(e.errorAction={action:Bg,flags:qg})}e.type===zc.KEY_SYSTEM_ERROR&&this.keySystemError(e)}keySystemError(t){const e=this.getVariantLevelIndex(t.frag);t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,e)}getPlaylistRetryOrSwitchAction(t,e){const i=Ig(this.hls.config.playlistLoadPolicy,t),s=this.playlistError++;if(Ug(i,s,Dg(t),t.response))return{action:Gg,flags:qg,retryConfig:i,retryCount:s};const a=this.getLevelSwitchAction(t,e);return i&&(a.retryConfig=i,a.retryCount=s),a}getFragRetryOrSwitchAction(t){const e=this.hls,i=this.getVariantLevelIndex(t.frag),s=e.levels[i],{fragLoadPolicy:a,keyLoadPolicy:r}=e.config,n=Ig(t.details.startsWith("key")?r:a,t),o=e.levels.reduce(((t,e)=>t+e.fragmentError),0);if(s){t.details!==Nc.FRAG_GAP&&s.fragmentError++;if(Ug(n,o,Dg(t),t.response))return{action:Gg,flags:qg,retryConfig:n,retryCount:o}}const l=this.getLevelSwitchAction(t,i);return n&&(l.retryConfig=n,l.retryCount=o),l}getLevelSwitchAction(t,e){const i=this.hls;null==e&&(e=i.loadLevel);const s=this.hls.levels[e];if(s){var a,r;const e=t.details;s.loadError++,e===Nc.BUFFER_APPEND_ERROR&&s.fragmentError++;let l=-1;const{levels:d,loadLevel:c,minAutoLevel:h,maxAutoLevel:p}=i;i.autoLevelEnabled||(i.loadLevel=-1);const g=null==(a=t.frag)?void 0:a.type,u=(g===Qp&&e===Nc.FRAG_PARSING_ERROR||"audio"===t.sourceBufferName&&(e===Nc.BUFFER_ADD_CODEC_ERROR||e===Nc.BUFFER_APPEND_ERROR))&&d.some((({audioCodec:t})=>s.audioCodec!==t)),m="video"===t.sourceBufferName&&(e===Nc.BUFFER_ADD_CODEC_ERROR||e===Nc.BUFFER_APPEND_ERROR)&&d.some((({codecSet:t,audioCodec:e})=>s.codecSet!==t&&s.audioCodec===e)),{type:v,groupId:f}=null!=(r=t.context)?r:{};for(let i=d.length;i--;){const a=(i+c)%d.length;if(a!==c&&a>=h&&a<=p&&0===d[a].loadError){var n,o;const i=d[a];if(e===Nc.FRAG_GAP&&g===Yp&&t.frag){const e=d[a].details;if(e){const i=zg(t.frag,e.fragments,t.frag.start);if(null!=i&&i.gap)continue}}else{if(v===Kp&&i.hasAudioGroup(f)||v===Wp&&i.hasSubtitleGroup(f))continue;if(g===Qp&&null!=(n=s.audioGroups)&&n.some((t=>i.hasAudioGroup(t)))||g===Jp&&null!=(o=s.subtitleGroups)&&o.some((t=>i.hasSubtitleGroup(t)))||u&&s.audioCodec===i.audioCodec||!u&&s.audioCodec!==i.audioCodec||m&&s.codecSet===i.codecSet)continue}l=a;break}}if(l>-1&&i.loadLevel!==l)return t.levelRetry=!0,this.playlistError=0,{action:Hg,flags:qg,nextAutoLevel:l}}return{action:Hg,flags:Zg}}onErrorOut(t,e){var i;switch(null==(i=e.errorAction)?void 0:i.action){case Bg:break;case Hg:this.sendAlternateToPenaltyBox(e),e.errorAction.resolved||e.details===Nc.FRAG_GAP?/MediaSource readyState: ended/.test(e.error.message)&&(this.warn(`MediaSource ended after "${e.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError()):e.fatal=!0}e.fatal&&this.hls.stopLoad()}sendAlternateToPenaltyBox(t){const e=this.hls,i=t.errorAction;if(!i)return;const{flags:s,hdcpLevel:a,nextAutoLevel:r}=i;switch(s){case qg:this.switchLevel(t,r);break;case Kg:a&&(e.maxHdcpLevel=vg[vg.indexOf(a)-1],i.resolved=!0),this.warn(`Restricting playback to HDCP-LEVEL of "${e.maxHdcpLevel}" or lower`)}i.resolved||this.switchLevel(t,r)}switchLevel(t,e){void 0!==e&&t.errorAction&&(this.warn(`switching to level ${e} after ${t.details}`),this.hls.nextAutoLevel=e,t.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel)}},fpsController:class{constructor(t){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=t,this.registerListeners()}setStreamController(t){this.streamController=t}registerListeners(){this.hls.on(Fc.MEDIA_ATTACHING,this.onMediaAttaching,this)}unregisterListeners(){this.hls.off(Fc.MEDIA_ATTACHING,this.onMediaAttaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(t,e){const i=this.hls.config;if(i.capLevelOnFPSDrop){const t=e.media instanceof self.HTMLVideoElement?e.media:null;this.media=t,t&&"function"==typeof t.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),i.fpsDroppedMonitoringPeriod)}}checkFPS(t,e,i){const s=performance.now();if(e){if(this.lastTime){const t=s-this.lastTime,a=i-this.lastDroppedFrames,r=e-this.lastDecodedFrames,n=1e3*a/t,o=this.hls;if(o.trigger(Fc.FPS_DROP,{currentDropped:a,currentDecoded:r,totalDroppedFrames:i}),n>0&&a>o.config.fpsDroppedMonitoringThreshold*r){let t=o.currentLevel;Gc.warn("drop FPS ratio greater than max allowed value for currentLevel: "+t),t>0&&(-1===o.autoLevelCapping||o.autoLevelCapping>=t)&&(t-=1,o.trigger(Fc.FPS_DROP_LEVEL_CAPPING,{level:t,droppedLevel:o.currentLevel}),o.autoLevelCapping=t,this.streamController.nextLevelSwitch())}}this.lastTime=s,this.lastDroppedFrames=i,this.lastDecodedFrames=e}}checkFPSInterval(){const t=this.media;if(t)if(this.isVideoPlaybackQualityAvailable){const e=t.getVideoPlaybackQuality();this.checkFPS(t,e.totalVideoFrames,e.droppedVideoFrames)}else this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount)}},stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:kh,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0,useMediaCapabilities:!0,certLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null}},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},{cueHandler:Hf,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:class extends qu{constructor(t,e,i){super(t,e,i,"[subtitle-stream-controller]",Jp),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}_registerListeners(){const{hls:t}=this;t.on(Fc.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(Fc.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(Fc.MANIFEST_LOADING,this.onManifestLoading,this),t.on(Fc.LEVEL_LOADED,this.onLevelLoaded,this),t.on(Fc.ERROR,this.onError,this),t.on(Fc.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.on(Fc.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),t.on(Fc.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.on(Fc.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),t.on(Fc.BUFFER_FLUSHING,this.onBufferFlushing,this),t.on(Fc.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:t}=this;t.off(Fc.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(Fc.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(Fc.MANIFEST_LOADING,this.onManifestLoading,this),t.off(Fc.LEVEL_LOADED,this.onLevelLoaded,this),t.off(Fc.ERROR,this.onError,this),t.off(Fc.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.off(Fc.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),t.off(Fc.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.off(Fc.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),t.off(Fc.BUFFER_FLUSHING,this.onBufferFlushing,this),t.off(Fc.FRAG_BUFFERED,this.onFragBuffered,this)}startLoad(t){this.stopLoad(),this.state=Ou,this.setInterval(500),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()}onManifestLoading(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()}onMediaDetaching(){this.tracksBuffered=[],super.onMediaDetaching()}onLevelLoaded(t,e){this.mainDetails=e.details}onSubtitleFragProcessed(t,e){const{frag:i,success:s}=e;if(this.fragPrevious=i,this.state=Ou,!s)return;const a=this.tracksBuffered[this.currentTrackId];if(!a)return;let r;const n=i.start;for(let l=0;l<a.length;l++)if(n>=a[l].start&&n<=a[l].end){r=a[l];break}const o=i.start+i.duration;r?r.end=o:(r={start:n,end:o},a.push(r)),this.fragmentTracker.fragBuffered(i),this.fragBufferedComplete(i,null)}onBufferFlushing(t,e){const{startOffset:i,endOffset:s}=e;if(0===i&&s!==Number.POSITIVE_INFINITY){const t=s-1;if(t<=0)return;e.endOffsetSubtitles=Math.max(0,t),this.tracksBuffered.forEach((e=>{for(let i=0;i<e.length;)if(e[i].end<=t)e.shift();else{if(!(e[i].start<t))break;e[i].start=t,i++}})),this.fragmentTracker.removeFragmentsInRange(i,t,Jp)}}onFragBuffered(t,e){var i;this.loadedmetadata||e.frag.type!==Yp||null!=(i=this.media)&&i.buffered.length&&(this.loadedmetadata=!0)}onError(t,e){const i=e.frag;(null==i?void 0:i.type)===Jp&&(e.details===Nc.FRAG_GAP&&this.fragmentTracker.fragBuffered(i,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==Iu&&(this.state=Ou))}onSubtitleTracksUpdated(t,{subtitleTracks:e}){this.levels&&tv(this.levels,e)?this.levels=e.map((t=>new Sg(t))):(this.tracksBuffered=[],this.levels=e.map((t=>{const e=new Sg(t);return this.tracksBuffered[e.id]=[],e})),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,Jp),this.fragPrevious=null,this.mediaBuffer=null)}onSubtitleTrackSwitch(t,e){var i;if(this.currentTrackId=e.id,null==(i=this.levels)||!i.length||-1===this.currentTrackId)return void this.clearInterval();const s=this.levels[this.currentTrackId];null!=s&&s.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,s&&this.setInterval(500)}onSubtitleTrackLoaded(t,e){var i;const{currentTrackId:s,levels:a}=this,{details:r,id:n}=e;if(!a)return void this.warn(`Subtitle tracks were reset while loading level ${n}`);const o=a[n];if(n>=a.length||!o)return;this.log(`Subtitle track ${n} loaded [${r.startSN},${r.endSN}]${r.lastPartSn?`[part-${r.lastPartSn}-${r.lastPartIndex}]`:""},duration:${r.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let l=0;if(r.live||null!=(i=o.details)&&i.live){const t=this.mainDetails;if(r.deltaUpdateFailed||!t)return;const e=t.fragments[0];var d;if(o.details)l=this.alignPlaylists(r,o.details,null==(d=this.levelLastLoaded)?void 0:d.details),0===l&&e&&(l=e.start,Eg(r,l));else r.hasProgramDateTime&&t.hasProgramDateTime?(Su(r,t),l=r.fragments[0].start):e&&(l=e.start,Eg(r,l))}if(o.details=r,this.levelLastLoaded=o,n===s&&(this.startFragRequested||!this.mainDetails&&r.live||this.setStartPosition(this.mainDetails||r,l),this.tick(),r.live&&!this.fragCurrent&&this.media&&this.state===Ou)){zg(null,r.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),o.details=void 0)}}_handleFragmentLoadComplete(t){const{frag:e,payload:i}=t,s=e.decryptdata,a=this.hls;if(!this.fragContextChanged(e)&&i&&i.byteLength>0&&null!=s&&s.key&&s.iv&&"AES-128"===s.method){const t=performance.now();this.decrypter.decrypt(new Uint8Array(i),s.key.buffer,s.iv.buffer).catch((t=>{throw a.trigger(Fc.ERROR,{type:zc.MEDIA_ERROR,details:Nc.FRAG_DECRYPT_ERROR,fatal:!1,error:t,reason:t.message,frag:e}),t})).then((i=>{const s=performance.now();a.trigger(Fc.FRAG_DECRYPTED,{frag:e,payload:i,stats:{tstart:t,tdecrypt:s}})})).catch((t=>{this.warn(`${t.name}: ${t.message}`),this.state=Ou}))}}doTick(){if(this.media){if(this.state===Ou){const{currentTrackId:t,levels:e}=this,i=null==e?void 0:e[t];if(!i||!e.length||!i.details)return;const{config:s}=this,a=this.getLoadPosition(),r=fu.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],a,s.maxBufferHole),{end:n,len:o}=r,l=this.getFwdBufferInfo(this.media,Yp),d=i.details;if(o>this.getMaxBufferLength(null==l?void 0:l.len)+d.levelTargetDuration)return;const c=d.fragments,h=c.length,p=d.edge;let g=null;const u=this.fragPrevious;if(n<p){const t=s.maxFragLookUpTolerance,e=n>p-t?0:t;g=zg(u,c,Math.max(c[0].start,n),e),!g&&u&&u.start<c[0].start&&(g=c[0])}else g=c[h-1];if(!g)return;if(g=this.mapToInitFragWhenRequired(g),"initSegment"!==g.sn){const t=c[g.sn-d.startSN-1];t&&t.cc===g.cc&&this.fragmentTracker.getState(t)===du&&(g=t)}this.fragmentTracker.getState(g)===du&&this.loadFragment(g,i,n)}}else this.state=Ou}getMaxBufferLength(t){const e=super.getMaxBufferLength();return t?Math.max(e,t):e}loadFragment(t,e,i){this.fragCurrent=t,"initSegment"===t.sn?this._loadInitSegment(t,e):(this.startFragRequested=!0,super.loadFragment(t,e,i))}get mediaBufferTimeRanges(){return new sv(this.tracksBuffered[this.currentTrackId]||[])}},subtitleTrackController:class extends Wg{constructor(t){super(t,"[subtitle-track-controller]"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let t=null;const e=ng(this.media.textTracks);for(let s=0;s<e.length;s++)if("hidden"===e[s].mode)t=e[s];else if("showing"===e[s].mode){t=e[s];break}const i=this.findTrackForTextTrack(t);this.subtitleTrack!==i&&this.setSubtitleTrack(i)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(t){this._subtitleDisplay=t,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:t}=this;t.on(Fc.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(Fc.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(Fc.MANIFEST_LOADING,this.onManifestLoading,this),t.on(Fc.MANIFEST_PARSED,this.onManifestParsed,this),t.on(Fc.LEVEL_LOADING,this.onLevelLoading,this),t.on(Fc.LEVEL_SWITCHING,this.onLevelSwitching,this),t.on(Fc.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.on(Fc.ERROR,this.onError,this)}unregisterListeners(){const{hls:t}=this;t.off(Fc.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(Fc.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(Fc.MANIFEST_LOADING,this.onManifestLoading,this),t.off(Fc.MANIFEST_PARSED,this.onManifestParsed,this),t.off(Fc.LEVEL_LOADING,this.onLevelLoading,this),t.off(Fc.LEVEL_SWITCHING,this.onLevelSwitching,this),t.off(Fc.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.off(Fc.ERROR,this.onError,this)}onMediaAttached(t,e){this.media=e.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(t){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,t)}onMediaDetaching(){if(!this.media)return;self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId);ng(this.media.textTracks).forEach((t=>{ag(t)})),this.subtitleTrack=-1,this.media=null}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(t,e){this.tracks=e.subtitleTracks}onSubtitleTrackLoaded(t,e){const{id:i,groupId:s,details:a}=e,r=this.tracksInGroup[i];if(!r||r.groupId!==s)return void this.warn(`Subtitle track with id:${i} and group:${s} not found in active group ${null==r?void 0:r.groupId}`);const n=r.details;r.details=e.details,this.log(`Subtitle track ${i} "${r.name}" lang:${r.lang} group:${s} loaded [${a.startSN}-${a.endSN}]`),i===this.trackId&&this.playlistLoaded(i,e,n)}onLevelLoading(t,e){this.switchLevel(e.level)}onLevelSwitching(t,e){this.switchLevel(e.level)}switchLevel(t){const e=this.hls.levels[t];if(!e)return;const i=e.subtitleGroups||null,s=this.groupIds;let a=this.currentTrack;if(!i||(null==s?void 0:s.length)!==(null==i?void 0:i.length)||null!=i&&i.some((t=>-1===(null==s?void 0:s.indexOf(t))))){this.groupIds=i,this.trackId=-1,this.currentTrack=null;const t=this.tracks.filter((t=>!i||-1!==i.indexOf(t.groupId)));if(t.length)this.selectDefaultTrack&&!t.some((t=>t.default))&&(this.selectDefaultTrack=!1),t.forEach(((t,e)=>{t.id=e}));else if(!a&&!this.tracksInGroup.length)return;this.tracksInGroup=t;const e=this.hls.config.subtitlePreference;if(!a&&e){this.selectDefaultTrack=!1;const i=au(e,t);if(i>-1)a=t[i];else{const t=au(e,this.tracks);a=this.tracks[t]}}let s=this.findTrackId(a);-1===s&&a&&(s=this.findTrackId(null));const r={subtitleTracks:t};this.log(`Updating subtitle tracks, ${t.length} track(s) found in "${null==i?void 0:i.join(",")}" group-id`),this.hls.trigger(Fc.SUBTITLE_TRACKS_UPDATED,r),-1!==s&&-1===this.trackId&&this.setSubtitleTrack(s)}else this.shouldReloadPlaylist(a)&&this.setSubtitleTrack(this.trackId)}findTrackId(t){const e=this.tracksInGroup,i=this.selectDefaultTrack;for(let s=0;s<e.length;s++){const a=e[s];if((!i||a.default)&&(i||t)&&(!t||ru(a,t)))return s}if(t){for(let i=0;i<e.length;i++){const s=e[i];if(ev(t.attrs,s.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return i}for(let i=0;i<e.length;i++){const s=e[i];if(ev(t.attrs,s.attrs,["LANGUAGE"]))return i}}return-1}findTrackForTextTrack(t){if(t){const e=this.tracksInGroup;for(let i=0;i<e.length;i++){if(iv(e[i],t))return i}}return-1}onError(t,e){!e.fatal&&e.context&&(e.context.type!==Wp||e.context.id!==this.trackId||this.groupIds&&-1===this.groupIds.indexOf(e.context.groupId)||this.checkRetry(e))}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(t){this.selectDefaultTrack=!1,this.setSubtitleTrack(t)}setSubtitleOption(t){if(this.hls.config.subtitlePreference=t,t){const e=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,e.length){const i=this.currentTrack;if(i&&ru(t,i))return i;const s=au(t,this.tracksInGroup);if(s>-1){const t=this.tracksInGroup[s];return this.setSubtitleTrack(s),t}if(i)return null;{const i=au(t,e);if(i>-1)return e[i]}}}return null}loadPlaylist(t){super.loadPlaylist();const e=this.currentTrack;if(this.shouldLoadPlaylist(e)&&e){const s=e.id,a=e.groupId;let r=e.url;if(t)try{r=t.addDirectives(r)}catch(i){this.warn(`Could not construct new URL with HLS Delivery Directives: ${i}`)}this.log(`Loading subtitle playlist for id ${s}`),this.hls.trigger(Fc.SUBTITLE_TRACK_LOADING,{url:r,id:s,groupId:a,deliveryDirectives:t||null})}}toggleTrackModes(){const{media:t}=this;if(!t)return;const e=ng(t.textTracks),i=this.currentTrack;let s;if(i&&(s=e.filter((t=>iv(i,t)))[0],s||this.warn(`Unable to find subtitle TextTrack with name "${i.name}" and language "${i.lang}"`)),[].slice.call(e).forEach((t=>{"disabled"!==t.mode&&t!==s&&(t.mode="disabled")})),s){const t=this.subtitleDisplay?"showing":"hidden";s.mode!==t&&(s.mode=t)}}setSubtitleTrack(t){const e=this.tracksInGroup;if(!this.media)return void(this.queuedDefaultTrack=t);if(t<-1||t>=e.length||!Oc(t))return void this.warn(`Invalid subtitle track id: ${t}`);this.clearTimer(),this.selectDefaultTrack=!1;const i=this.currentTrack,s=e[t]||null;if(this.trackId=t,this.currentTrack=s,this.toggleTrackModes(),!s)return void this.hls.trigger(Fc.SUBTITLE_TRACK_SWITCH,{id:t});const a=!!s.details&&!s.details.live;if(t===this.trackId&&s===i&&a)return;this.log(`Switching to subtitle-track ${t}`+(s?` "${s.name}" lang:${s.lang} group:${s.groupId}`:""));const{id:r,groupId:n="",name:o,type:l,url:d}=s;this.hls.trigger(Fc.SUBTITLE_TRACK_SWITCH,{id:r,groupId:n,name:o,type:l,url:d});const c=this.switchParams(s.url,null==i?void 0:i.details,s.details);this.loadPlaylist(c)}},timelineController:class{constructor(t){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this.captionsProperties=void 0,this.hls=t,this.config=t.config,this.Cues=t.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},t.on(Fc.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(Fc.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(Fc.MANIFEST_LOADING,this.onManifestLoading,this),t.on(Fc.MANIFEST_LOADED,this.onManifestLoaded,this),t.on(Fc.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.on(Fc.FRAG_LOADING,this.onFragLoading,this),t.on(Fc.FRAG_LOADED,this.onFragLoaded,this),t.on(Fc.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),t.on(Fc.FRAG_DECRYPTED,this.onFragDecrypted,this),t.on(Fc.INIT_PTS_FOUND,this.onInitPtsFound,this),t.on(Fc.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),t.on(Fc.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:t}=this;t.off(Fc.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(Fc.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(Fc.MANIFEST_LOADING,this.onManifestLoading,this),t.off(Fc.MANIFEST_LOADED,this.onManifestLoaded,this),t.off(Fc.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.off(Fc.FRAG_LOADING,this.onFragLoading,this),t.off(Fc.FRAG_LOADED,this.onFragLoaded,this),t.off(Fc.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),t.off(Fc.FRAG_DECRYPTED,this.onFragDecrypted,this),t.off(Fc.INIT_PTS_FOUND,this.onInitPtsFound,this),t.off(Fc.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),t.off(Fc.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){if(this.config.enableCEA708Captions&&(!this.cea608Parser1||!this.cea608Parser2)){const t=new Pv(this,"textTrack1"),e=new Pv(this,"textTrack2"),i=new Pv(this,"textTrack3"),s=new Pv(this,"textTrack4");this.cea608Parser1=new Sv(1,t,e),this.cea608Parser2=new Sv(3,i,s)}}addCues(t,e,i,s,a){let r=!1;for(let c=a.length;c--;){const t=a[c],s=(n=t[0],o=t[1],l=e,d=i,Math.min(o,d)-Math.max(n,l));if(s>=0&&(t[0]=Math.min(t[0],e),t[1]=Math.max(t[1],i),r=!0,s/(i-e)>.5))return}var n,o,l,d;if(r||a.push([e,i]),this.config.renderTextTracksNatively){const a=this.captionsTracks[t];this.Cues.newCue(a,e,i,s)}else{const a=this.Cues.newCue(null,e,i,s);this.hls.trigger(Fc.CUES_PARSED,{type:"captions",cues:a,track:t})}}onInitPtsFound(t,{frag:e,id:i,initPTS:s,timescale:a}){const{unparsedVttFrags:r}=this;"main"===i&&(this.initPTS[e.cc]={baseTime:s,timescale:a}),r.length&&(this.unparsedVttFrags=[],r.forEach((t=>{this.onFragLoaded(Fc.FRAG_LOADED,t)})))}getExistingTrack(t,e){const{media:i}=this;if(i)for(let s=0;s<i.textTracks.length;s++){const a=i.textTracks[s];if(tf(a,{name:t,lang:e,attrs:{}}))return a}return null}createCaptionsTrack(t){this.config.renderTextTracksNatively?this.createNativeTrack(t):this.createNonNativeTrack(t)}createNativeTrack(t){if(this.captionsTracks[t])return;const{captionsProperties:e,captionsTracks:i,media:s}=this,{label:a,languageCode:r}=e[t],n=this.getExistingTrack(a,r);if(n)i[t]=n,ag(i[t]),ig(i[t],s);else{const e=this.createTextTrack("captions",a,r);e&&(e[t]=!0,i[t]=e)}}createNonNativeTrack(t){if(this.nonNativeCaptionsTracks[t])return;const e=this.captionsProperties[t];if(!e)return;const i={_id:t,label:e.label,kind:"captions",default:!!e.media&&!!e.media.default,closedCaptions:e.media};this.nonNativeCaptionsTracks[t]=i,this.hls.trigger(Fc.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[i]})}createTextTrack(t,e,i){const s=this.media;if(s)return s.addTextTrack(t,e,i)}onMediaAttaching(t,e){this.media=e.media,this._cleanTracks()}onMediaDetaching(){const{captionsTracks:t}=this;Object.keys(t).forEach((e=>{ag(t[e]),delete t[e]})),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:t}=this;if(!t)return;const e=t.textTracks;if(e)for(let i=0;i<e.length;i++)ag(e[i])}onSubtitleTracksUpdated(t,e){const i=e.subtitleTracks||[],s=i.some((t=>t.textCodec===Bv));if(this.config.enableWebVTT||s&&this.config.enableIMSC1){if(tv(this.tracks,i))return void(this.tracks=i);if(this.textTracks=[],this.tracks=i,this.config.renderTextTracksNatively){const t=this.media,e=t?ng(t.textTracks):null;if(this.tracks.forEach(((t,i)=>{let s;if(e){let i=null;for(let s=0;s<e.length;s++)if(e[s]&&tf(e[s],t)){i=e[s],e[s]=null;break}i&&(s=i)}if(s)ag(s);else{const e=Xv(t);s=this.createTextTrack(e,t.name,t.lang),s&&(s.mode="disabled")}s&&this.textTracks.push(s)})),null!=e&&e.length){const t=e.filter((t=>null!==t)).map((t=>t.label));t.length&&Gc.warn(`Media element contains unused subtitle tracks: ${t.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const t=this.tracks.map((t=>({label:t.name,kind:t.type.toLowerCase(),default:t.default,subtitleTrack:t})));this.hls.trigger(Fc.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:t})}}}onManifestLoaded(t,e){this.config.enableCEA708Captions&&e.captions&&e.captions.forEach((t=>{const e=/(?:CC|SERVICE)([1-4])/.exec(t.instreamId);if(!e)return;const i=`textTrack${e[1]}`,s=this.captionsProperties[i];s&&(s.label=t.name,t.lang&&(s.languageCode=t.lang),s.media=t)}))}closedCaptionsForLevel(t){const e=this.hls.levels[t.level];return null==e?void 0:e.attrs["CLOSED-CAPTIONS"]}onFragLoading(t,e){if(this.enabled&&e.frag.type===Yp){var i,s;const{cea608Parser1:t,cea608Parser2:a,lastSn:r}=this,{cc:n,sn:o}=e.frag,l=null!=(i=null==(s=e.part)?void 0:s.index)?i:-1;t&&a&&(o!==r+1||o===r&&l!==this.lastPartIndex+1||n!==this.lastCc)&&(t.reset(),a.reset()),this.lastCc=n,this.lastSn=o,this.lastPartIndex=l}}onFragLoaded(t,e){const{frag:i,payload:s}=e;if(i.type===Jp)if(s.byteLength){const t=i.decryptdata,a="stats"in e;if(null==t||!t.encrypted||a){const t=this.tracks[i.level],a=this.vttCCs;a[i.cc]||(a[i.cc]={start:i.start,prevCC:this.prevCC,new:!0},this.prevCC=i.cc),t&&t.textCodec===Bv?this._parseIMSC1(i,s):this._parseVTTs(e)}}else this.hls.trigger(Fc.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:i,error:new Error("Empty subtitle payload")})}_parseIMSC1(t,e){const i=this.hls;qv(e,this.initPTS[t.cc],(e=>{this._appendCues(e,t.level),i.trigger(Fc.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})}),(e=>{Gc.log(`Failed to parse IMSC1: ${e}`),i.trigger(Fc.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t,error:e})}))}_parseVTTs(t){var e;const{frag:i,payload:s}=t,{initPTS:a,unparsedVttFrags:r}=this,n=a.length-1;if(!a[i.cc]&&-1===n)return void r.push(t);const o=this.hls;jv(null!=(e=i.initSegment)&&e.data?op(i.initSegment.data,new Uint8Array(s)):s,this.initPTS[i.cc],this.vttCCs,i.cc,i.start,(t=>{this._appendCues(t,i.level),o.trigger(Fc.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:i})}),(e=>{const a="Missing initPTS for VTT MPEGTS"===e.message;a?r.push(t):this._fallbackToIMSC1(i,s),Gc.log(`Failed to parse VTT cue: ${e}`),a&&n>i.cc||o.trigger(Fc.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:i,error:e})}))}_fallbackToIMSC1(t,e){const i=this.tracks[t.level];i.textCodec||qv(e,this.initPTS[t.cc],(()=>{i.textCodec=Bv,this._parseIMSC1(t,e)}),(()=>{i.textCodec="wvtt"}))}_appendCues(t,e){const i=this.hls;if(this.config.renderTextTracksNatively){const i=this.textTracks[e];if(!i||"disabled"===i.mode)return;t.forEach((t=>sg(i,t)))}else{const s=this.tracks[e];if(!s)return;const a=s.default?"default":"subtitles"+e;i.trigger(Fc.CUES_PARSED,{type:"subtitles",cues:t,track:a})}}onFragDecrypted(t,e){const{frag:i}=e;i.type===Jp&&this.onFragLoaded(Fc.FRAG_LOADED,e)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(t,e){this.initCea608Parsers();const{cea608Parser1:i,cea608Parser2:s}=this;if(!this.enabled||!i||!s)return;const{frag:a,samples:r}=e;if(a.type!==Yp||"NONE"!==this.closedCaptionsForLevel(a))for(let n=0;n<r.length;n++){const t=r[n].bytes;if(t){const e=this.extractCea608Data(t);i.addData(r[n].pts,e[0]),s.addData(r[n].pts,e[1])}}}onBufferFlushing(t,{startOffset:e,endOffset:i,endOffsetSubtitles:s,type:a}){const{media:r}=this;if(r&&!(r.currentTime<i)){if(!a||"video"===a){const{captionsTracks:t}=this;Object.keys(t).forEach((s=>rg(t[s],e,i)))}if(this.config.renderTextTracksNatively&&0===e&&void 0!==s){const{textTracks:t}=this;Object.keys(t).forEach((i=>rg(t[i],e,s)))}}}extractCea608Data(t){const e=[[],[]],i=31&t[0];let s=2;for(let a=0;a<i;a++){const i=t[s++],a=127&t[s++],r=127&t[s++];if(0===a&&0===r)continue;if(!!(4&i)){const t=3&i;0!==t&&1!==t||(e[t].push(a),e[t].push(r))}}return e}},audioStreamController:class extends qu{constructor(t,e,i){super(t,e,i,"[audio-stream-controller]",Qp),this.videoBuffer=null,this.videoTrackCC=-1,this.waitingVideoCC=-1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null,this.bufferedTrack=null,this.switchingTrack=null}_registerListeners(){const{hls:t}=this;t.on(Fc.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(Fc.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(Fc.MANIFEST_LOADING,this.onManifestLoading,this),t.on(Fc.LEVEL_LOADED,this.onLevelLoaded,this),t.on(Fc.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),t.on(Fc.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.on(Fc.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.on(Fc.ERROR,this.onError,this),t.on(Fc.BUFFER_RESET,this.onBufferReset,this),t.on(Fc.BUFFER_CREATED,this.onBufferCreated,this),t.on(Fc.BUFFER_FLUSHING,this.onBufferFlushing,this),t.on(Fc.BUFFER_FLUSHED,this.onBufferFlushed,this),t.on(Fc.INIT_PTS_FOUND,this.onInitPtsFound,this),t.on(Fc.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:t}=this;t.off(Fc.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(Fc.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(Fc.MANIFEST_LOADING,this.onManifestLoading,this),t.off(Fc.LEVEL_LOADED,this.onLevelLoaded,this),t.off(Fc.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),t.off(Fc.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.off(Fc.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.off(Fc.ERROR,this.onError,this),t.off(Fc.BUFFER_RESET,this.onBufferReset,this),t.off(Fc.BUFFER_CREATED,this.onBufferCreated,this),t.off(Fc.BUFFER_FLUSHING,this.onBufferFlushing,this),t.off(Fc.BUFFER_FLUSHED,this.onBufferFlushed,this),t.off(Fc.INIT_PTS_FOUND,this.onInitPtsFound,this),t.off(Fc.FRAG_BUFFERED,this.onFragBuffered,this)}onInitPtsFound(t,{frag:e,id:i,initPTS:s,timescale:a}){if("main"===i){const t=e.cc;this.initPTS[e.cc]={baseTime:s,timescale:a},this.log(`InitPTS for cc: ${t} found from main: ${s}`),this.videoTrackCC=t,this.state===Vu&&this.tick()}}startLoad(t){if(!this.levels)return this.startPosition=t,void(this.state=Iu);const e=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),e>0&&-1===t?(this.log(`Override startPosition with lastCurrentTime @${e.toFixed(3)}`),t=e,this.state=Ou):(this.loadedmetadata=!1,this.state=zu),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()}doTick(){switch(this.state){case Ou:this.doTickIdle();break;case zu:{var t;const{levels:e,trackId:i}=this,s=null==e||null==(t=e[i])?void 0:t.details;if(s){if(this.waitForCdnTuneIn(s))break;this.state=Vu}break}case Fu:{var e;const t=performance.now(),i=this.retryDate;if(!i||t>=i||null!=(e=this.media)&&e.seeking){const{levels:t,trackId:e}=this;this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded((null==t?void 0:t[e])||null),this.state=Ou}break}case Vu:{const t=this.waitingData;if(t){const{frag:e,part:i,cache:s,complete:a}=t;if(void 0!==this.initPTS[e.cc]){this.waitingData=null,this.waitingVideoCC=-1,this.state=Uu;const t={frag:e,part:i,payload:s.flush(),networkDetails:null};this._handleFragmentLoadProgress(t),a&&super._handleFragmentLoadComplete(t)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log(`Waiting fragment cc (${e.cc}) cancelled because video is at cc ${this.videoTrackCC}`),this.clearWaitingFragment();else{const t=this.getLoadPosition(),i=fu.bufferInfo(this.mediaBuffer,t,this.config.maxBufferHole);Ng(i.end,this.config.maxFragLookUpTolerance,e)<0&&(this.log(`Waiting fragment cc (${e.cc}) @ ${e.start} cancelled because another fragment at ${i.end} is needed`),this.clearWaitingFragment())}}else this.state=Ou}}this.onTickEnd()}clearWaitingFragment(){const t=this.waitingData;t&&(this.fragmentTracker.removeFragment(t.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=Ou)}resetLoadingState(){this.clearWaitingFragment(),super.resetLoadingState()}onTickEnd(){const{media:t}=this;null!=t&&t.readyState&&(this.lastCurrentTime=t.currentTime)}doTickIdle(){const{hls:t,levels:e,media:i,trackId:s}=this,a=t.config;if(!i&&(this.startFragRequested||!a.startFragPrefetch)||null==e||!e[s])return;const r=e[s],n=r.details;if(!n||n.live&&this.levelLastLoaded!==r||this.waitForCdnTuneIn(n))return void(this.state=zu);const o=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&o&&(this.bufferFlushed=!1,this.afterBufferFlushed(o,Jc,Qp));const l=this.getFwdBufferInfo(o,Qp);if(null===l)return;const{bufferedTrack:d,switchingTrack:c}=this;if(!c&&this._streamEnded(l,n))return t.trigger(Fc.BUFFER_EOS,{type:"audio"}),void(this.state=Bu);const h=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,Yp),p=l.len,g=this.getMaxBufferLength(null==h?void 0:h.len),u=n.fragments,m=u[0].start;let v=this.flushing?this.getLoadPosition():l.end;if(c&&i){const t=this.getLoadPosition();d&&!ev(c.attrs,d.attrs)&&(v=t),n.PTSKnown&&t<m&&(l.end>m||l.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),i.currentTime=m+.05)}if(p>=g&&!c&&v<u[u.length-1].start)return;let f=this.getNextFragment(v,n),y=!1;if(f&&this.isLoopLoading(f,v)&&(y=!!f.gap,f=this.getNextFragmentLoopLoading(f,n,l,Yp,g)),!f)return void(this.bufferFlushed=!0);const b=h&&f.start>h.end+n.targetduration;if(b||(null==h||!h.len)&&l.len){const t=this.getAppendedFrag(f.start,Yp);if(null===t)return;if(y||(y=!!t.gap||!!b&&0===h.len),b&&!y||y&&l.nextStart&&l.nextStart<t.end)return}this.loadFragment(f,r,v)}getMaxBufferLength(t){const e=super.getMaxBufferLength();return t?Math.min(Math.max(e,t),this.config.maxMaxBufferLength):e}onMediaDetaching(){this.videoBuffer=null,this.bufferFlushed=this.flushing=!1,super.onMediaDetaching()}onAudioTracksUpdated(t,{audioTracks:e}){this.resetTransmuxer(),this.levels=e.map((t=>new Sg(t)))}onAudioTrackSwitching(t,e){const i=!!e.url;this.trackId=e.id;const{fragCurrent:s}=this;s&&(s.abortRequests(),this.removeUnbufferedFrags(s.start)),this.resetLoadingState(),i?this.setInterval(100):this.resetTransmuxer(),i?(this.switchingTrack=e,this.state=Ou,this.flushAudioIfNeeded(e)):(this.switchingTrack=null,this.bufferedTrack=e,this.state=Iu),this.tick()}onManifestLoading(){this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=this.flushing=!1,this.levels=this.mainDetails=this.waitingData=this.bufferedTrack=this.cachedTrackLoadedData=this.switchingTrack=null,this.startFragRequested=!1,this.trackId=this.videoTrackCC=this.waitingVideoCC=-1}onLevelLoaded(t,e){this.mainDetails=e.details,null!==this.cachedTrackLoadedData&&(this.hls.trigger(Fc.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)}onAudioTrackLoaded(t,e){var i;if(null==this.mainDetails)return void(this.cachedTrackLoadedData=e);const{levels:s}=this,{details:a,id:r}=e;if(!s)return void this.warn(`Audio tracks were reset while loading level ${r}`);this.log(`Audio track ${r} loaded [${a.startSN},${a.endSN}]${a.lastPartSn?`[part-${a.lastPartSn}-${a.lastPartIndex}]`:""},duration:${a.totalduration}`);const n=s[r];let o=0;if(a.live||null!=(i=n.details)&&i.live){this.checkLiveUpdate(a);const t=this.mainDetails;if(a.deltaUpdateFailed||!t)return;var l;if(!n.details&&a.hasProgramDateTime&&t.hasProgramDateTime)Su(a,t),o=a.fragments[0].start;else o=this.alignPlaylists(a,n.details,null==(l=this.levelLastLoaded)?void 0:l.details)}n.details=a,this.levelLastLoaded=n,this.startFragRequested||!this.mainDetails&&a.live||this.setStartPosition(this.mainDetails||a,o),this.state!==zu||this.waitForCdnTuneIn(a)||(this.state=Ou),this.tick()}_handleFragmentLoadProgress(t){var e;const{frag:i,part:s,payload:a}=t,{config:r,trackId:n,levels:o}=this;if(!o)return void this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${i.sn} of level ${i.level} will not be buffered`);const l=o[n];if(!l)return void this.warn("Audio track is undefined on fragment load progress");const d=l.details;if(!d)return this.warn("Audio track details undefined on fragment load progress"),void this.removeUnbufferedFrags(i.start);const c=r.defaultAudioCodec||l.audioCodec||"mp4a.40.2";let h=this.transmuxer;h||(h=this.transmuxer=new Xm(this.hls,Qp,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const p=this.initPTS[i.cc],g=null==(e=i.initSegment)?void 0:e.data;if(void 0!==p){const t=!1,e=s?s.index:-1,r=-1!==e,n=new yu(i.level,i.sn,i.stats.chunkCount,a.byteLength,e,r);h.push(a,g,c,"",i,s,d.totalduration,t,n,p)}else{this.log(`Unknown video PTS for cc ${i.cc}, waiting for video PTS before demuxing audio frag ${i.sn} of [${d.startSN} ,${d.endSN}],track ${n}`);const{cache:t}=this.waitingData=this.waitingData||{frag:i,part:s,cache:new Zu,complete:!1};t.push(new Uint8Array(a)),this.waitingVideoCC=this.videoTrackCC,this.state=Vu}}_handleFragmentLoadComplete(t){this.waitingData?this.waitingData.complete=!0:super._handleFragmentLoadComplete(t)}onBufferReset(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1}onBufferCreated(t,e){const i=e.tracks.audio;i&&(this.mediaBuffer=i.buffer||null),e.tracks.video&&(this.videoBuffer=e.tracks.video.buffer||null)}onFragBuffered(t,e){const{frag:i,part:s}=e;if(i.type===Qp)if(this.fragContextChanged(i))this.warn(`Fragment ${i.sn}${s?" p: "+s.index:""} of level ${i.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);else{if("initSegment"!==i.sn){this.fragPrevious=i;const t=this.switchingTrack;t&&(this.bufferedTrack=t,this.switchingTrack=null,this.hls.trigger(Fc.AUDIO_TRACK_SWITCHED,Mc({},t)))}this.fragBufferedComplete(i,s)}else if(!this.loadedmetadata&&i.type===Yp){const t=this.videoBuffer||this.media;if(t){fu.getBuffered(t).length&&(this.loadedmetadata=!0)}}}onError(t,e){var i;if(e.fatal)this.state=Hu;else switch(e.details){case Nc.FRAG_GAP:case Nc.FRAG_PARSING_ERROR:case Nc.FRAG_DECRYPT_ERROR:case Nc.FRAG_LOAD_ERROR:case Nc.FRAG_LOAD_TIMEOUT:case Nc.KEY_LOAD_ERROR:case Nc.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Qp,e);break;case Nc.AUDIO_TRACK_LOAD_ERROR:case Nc.AUDIO_TRACK_LOAD_TIMEOUT:case Nc.LEVEL_PARSING_ERROR:e.levelRetry||this.state!==zu||(null==(i=e.context)?void 0:i.type)!==Kp||(this.state=Ou);break;case Nc.BUFFER_APPEND_ERROR:case Nc.BUFFER_FULL_ERROR:if(!e.parent||"audio"!==e.parent)return;if(e.details===Nc.BUFFER_APPEND_ERROR)return void this.resetLoadingState();this.reduceLengthAndFlushBuffer(e)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case Nc.INTERNAL_EXCEPTION:this.recoverWorkerError(e)}}onBufferFlushing(t,{type:e}){e!==Xc&&(this.flushing=!0)}onBufferFlushed(t,{type:e}){if(e!==Xc){this.flushing=!1,this.bufferFlushed=!0,this.state===Bu&&(this.state=Ou);const t=this.mediaBuffer||this.media;t&&(this.afterBufferFlushed(t,e,Qp),this.tick())}}_handleTransmuxComplete(t){var e;const i="audio",{hls:s}=this,{remuxResult:a,chunkMeta:r}=t,n=this.getCurrentContext(r);if(!n)return void this.resetWhenMissingContext(r);const{frag:o,part:l,level:d}=n,{details:c}=d,{audio:h,text:p,id3:g,initSegment:u}=a;if(!this.fragContextChanged(o)&&c){if(this.state=Nu,this.switchingTrack&&h&&this.completeAudioSwitch(this.switchingTrack),null!=u&&u.tracks){const t=o.initSegment||o;this._bufferInitSegment(d,u.tracks,t,r),s.trigger(Fc.FRAG_PARSING_INIT_SEGMENT,{frag:t,id:i,tracks:u.tracks})}if(h){const{startPTS:t,endPTS:e,startDTS:i,endDTS:s}=h;l&&(l.elementaryStreams[Jc]={startPTS:t,endPTS:e,startDTS:i,endDTS:s}),o.setElementaryStreamInfo(Jc,t,e,i,s),this.bufferFragmentData(h,o,l,r)}if(null!=g&&null!=(e=g.samples)&&e.length){const t=Ic({id:i,frag:o,details:c},g);s.trigger(Fc.FRAG_PARSING_METADATA,t)}if(p){const t=Ic({id:i,frag:o,details:c},p);s.trigger(Fc.FRAG_PARSING_USERDATA,t)}}else this.fragmentTracker.removeFragment(o)}_bufferInitSegment(t,e,i,s){if(this.state!==Nu)return;e.video&&delete e.video;const a=e.audio;if(!a)return;a.id="audio";const r=t.audioCodec;this.log(`Init audio buffer, container:${a.container}, codecs[level/parsed]=[${r}/${a.codec}]`),r&&1===r.split(",").length&&(a.levelCodec=r),this.hls.trigger(Fc.BUFFER_CODECS,e);const n=a.initSegment;if(null!=n&&n.byteLength){const t={type:"audio",frag:i,part:null,chunkMeta:s,parent:i.type,data:n};this.hls.trigger(Fc.BUFFER_APPENDING,t)}this.tickImmediate()}loadFragment(t,e,i){const s=this.fragmentTracker.getState(t);var a;if(this.fragCurrent=t,this.switchingTrack||s===du||s===hu)if("initSegment"===t.sn)this._loadInitSegment(t,e);else if(null!=(a=e.details)&&a.live&&!this.initPTS[t.cc]){this.log(`Waiting for video PTS in continuity counter ${t.cc} of live stream before loading audio fragment ${t.sn} of level ${this.trackId}`),this.state=Vu;const i=this.mainDetails;i&&i.fragments[0].start!==e.details.fragments[0].start&&Su(e.details,i)}else this.startFragRequested=!0,super.loadFragment(t,e,i);else this.clearTrackerIfNeeded(t)}flushAudioIfNeeded(t){const{media:e,bufferedTrack:i}=this,s=null==i?void 0:i.attrs,a=t.attrs;e&&s&&(s.CHANNELS!==a.CHANNELS||i.name!==t.name||i.lang!==t.lang)&&(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null)}completeAudioSwitch(t){const{hls:e}=this;this.flushAudioIfNeeded(t),this.bufferedTrack=t,this.switchingTrack=null,e.trigger(Fc.AUDIO_TRACK_SWITCHED,Mc({},t))}},audioTrackController:class extends Wg{constructor(t){super(t,"[audio-track-controller]"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:t}=this;t.on(Fc.MANIFEST_LOADING,this.onManifestLoading,this),t.on(Fc.MANIFEST_PARSED,this.onManifestParsed,this),t.on(Fc.LEVEL_LOADING,this.onLevelLoading,this),t.on(Fc.LEVEL_SWITCHING,this.onLevelSwitching,this),t.on(Fc.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.on(Fc.ERROR,this.onError,this)}unregisterListeners(){const{hls:t}=this;t.off(Fc.MANIFEST_LOADING,this.onManifestLoading,this),t.off(Fc.MANIFEST_PARSED,this.onManifestParsed,this),t.off(Fc.LEVEL_LOADING,this.onLevelLoading,this),t.off(Fc.LEVEL_SWITCHING,this.onLevelSwitching,this),t.off(Fc.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.off(Fc.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(t,e){this.tracks=e.audioTracks||[]}onAudioTrackLoaded(t,e){const{id:i,groupId:s,details:a}=e,r=this.tracksInGroup[i];if(!r||r.groupId!==s)return void this.warn(`Audio track with id:${i} and group:${s} not found in active group ${null==r?void 0:r.groupId}`);const n=r.details;r.details=e.details,this.log(`Audio track ${i} "${r.name}" lang:${r.lang} group:${s} loaded [${a.startSN}-${a.endSN}]`),i===this.trackId&&this.playlistLoaded(i,e,n)}onLevelLoading(t,e){this.switchLevel(e.level)}onLevelSwitching(t,e){this.switchLevel(e.level)}switchLevel(t){const e=this.hls.levels[t];if(!e)return;const i=e.audioGroups||null,s=this.groupIds;let a=this.currentTrack;if(!i||(null==s?void 0:s.length)!==(null==i?void 0:i.length)||null!=i&&i.some((t=>-1===(null==s?void 0:s.indexOf(t))))){this.groupIds=i,this.trackId=-1,this.currentTrack=null;const t=this.tracks.filter((t=>!i||-1!==i.indexOf(t.groupId)));if(t.length)this.selectDefaultTrack&&!t.some((t=>t.default))&&(this.selectDefaultTrack=!1),t.forEach(((t,e)=>{t.id=e}));else if(!a&&!this.tracksInGroup.length)return;this.tracksInGroup=t;const e=this.hls.config.audioPreference;if(!a&&e){const i=au(e,t,nu);if(i>-1)a=t[i];else{const t=au(e,this.tracks);a=this.tracks[t]}}let s=this.findTrackId(a);-1===s&&a&&(s=this.findTrackId(null));const n={audioTracks:t};this.log(`Updating audio tracks, ${t.length} track(s) found in group(s): ${null==i?void 0:i.join(",")}`),this.hls.trigger(Fc.AUDIO_TRACKS_UPDATED,n);const o=this.trackId;if(-1!==s&&-1===o)this.setAudioTrack(s);else if(t.length&&-1===o){var r;const e=new Error(`No audio track selected for current audio group-ID(s): ${null==(r=this.groupIds)?void 0:r.join(",")} track count: ${t.length}`);this.warn(e.message),this.hls.trigger(Fc.ERROR,{type:zc.MEDIA_ERROR,details:Nc.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:e})}}else this.shouldReloadPlaylist(a)&&this.setAudioTrack(this.trackId)}onError(t,e){!e.fatal&&e.context&&(e.context.type!==Kp||e.context.id!==this.trackId||this.groupIds&&-1===this.groupIds.indexOf(e.context.groupId)||(this.requestScheduled=-1,this.checkRetry(e)))}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(t){this.selectDefaultTrack=!1,this.setAudioTrack(t)}setAudioOption(t){const e=this.hls;if(e.config.audioPreference=t,t){const i=this.allAudioTracks;if(this.selectDefaultTrack=!1,i.length){const s=this.currentTrack;if(s&&ru(t,s,nu))return s;const a=au(t,this.tracksInGroup,nu);if(a>-1){const t=this.tracksInGroup[a];return this.setAudioTrack(a),t}if(s){let s=e.loadLevel;-1===s&&(s=e.firstAutoLevel);const a=function(t,e,i,s,a){const r=e[s],n=e.reduce(((t,e,i)=>{const s=e.uri;return(t[s]||(t[s]=[])).push(i),t}),{}),o=n[r.uri];o.length>1&&(s=Math.max.apply(Math,o));const l=r.videoRange,d=r.frameRate,c=r.codecSet.substring(0,4),h=ou(e,s,(e=>{if(e.videoRange!==l||e.frameRate!==d||e.codecSet.substring(0,4)!==c)return!1;const s=e.audioGroups,r=i.filter((t=>!s||-1!==s.indexOf(t.groupId)));return au(t,r,a)>-1}));return h>-1?h:ou(e,s,(e=>{const s=e.audioGroups,r=i.filter((t=>!s||-1!==s.indexOf(t.groupId)));return au(t,r,a)>-1}))}(t,e.levels,i,s,nu);if(-1===a)return null;e.nextLoadLevel=a}if(t.channels||t.audioCodec){const e=au(t,i);if(e>-1)return i[e]}}}return null}setAudioTrack(t){const e=this.tracksInGroup;if(t<0||t>=e.length)return void this.warn(`Invalid audio track id: ${t}`);this.clearTimer(),this.selectDefaultTrack=!1;const i=this.currentTrack,s=e[t],a=s.details&&!s.details.live;if(t===this.trackId&&s===i&&a)return;if(this.log(`Switching to audio-track ${t} "${s.name}" lang:${s.lang} group:${s.groupId} channels:${s.channels}`),this.trackId=t,this.currentTrack=s,this.hls.trigger(Fc.AUDIO_TRACK_SWITCHING,Mc({},s)),a)return;const r=this.switchParams(s.url,null==i?void 0:i.details,s.details);this.loadPlaylist(r)}findTrackId(t){const e=this.tracksInGroup;for(let i=0;i<e.length;i++){const s=e[i];if((!this.selectDefaultTrack||s.default)&&(!t||ru(t,s,nu)))return i}if(t){const{name:i,lang:s,assocLang:a,characteristics:r,audioCodec:n,channels:o}=t;for(let t=0;t<e.length;t++){if(ru({name:i,lang:s,assocLang:a,characteristics:r,audioCodec:n,channels:o},e[t],nu))return t}for(let l=0;l<e.length;l++){const i=e[l];if(ev(t.attrs,i.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return l}for(let l=0;l<e.length;l++){const i=e[l];if(ev(t.attrs,i.attrs,["LANGUAGE"]))return l}}return-1}loadPlaylist(t){const e=this.currentTrack;if(this.shouldLoadPlaylist(e)&&e){super.loadPlaylist();const s=e.id,a=e.groupId;let r=e.url;if(t)try{r=t.addDirectives(r)}catch(i){this.warn(`Could not construct new URL with HLS Delivery Directives: ${i}`)}this.log(`loading audio-track playlist ${s} "${e.name}" lang:${e.lang} group:${a}`),this.clearTimer(),this.hls.trigger(Fc.AUDIO_TRACK_LOADING,{url:r,id:s,groupId:a,deliveryDirectives:t||null})}}},emeController:af,cmcdController:class{constructor(t){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=t=>{try{this.apply(t,{ot:nf.MANIFEST,su:!this.initialized})}catch(e){Gc.warn("Could not generate manifest CMCD data.",e)}},this.applyFragmentData=t=>{try{const e=t.frag,i=this.hls.levels[e.level],s=this.getObjectType(e),a={d:1e3*e.duration,ot:s};s!==nf.VIDEO&&s!==nf.AUDIO&&s!=nf.MUXED||(a.br=i.bitrate/1e3,a.tb=this.getTopBandwidth(s)/1e3,a.bl=this.getBufferLength(s)),this.apply(t,a)}catch(e){Gc.warn("Could not generate segment CMCD data.",e)}},this.hls=t;const e=this.config=t.config,{cmcd:i}=e;null!=i&&(e.pLoader=this.createPlaylistLoader(),e.fLoader=this.createFragmentLoader(),this.sid=i.sessionId||function(){try{return crypto.randomUUID()}catch(t){try{const t=URL.createObjectURL(new Blob),e=t.toString();return URL.revokeObjectURL(t),e.slice(e.lastIndexOf("/")+1)}catch(t){let e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{const i=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?i:3&i|8).toString(16)}))}}}(),this.cid=i.contentId,this.useHeaders=!0===i.useHeaders,this.includeKeys=i.includeKeys,this.registerListeners())}registerListeners(){const t=this.hls;t.on(Fc.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(Fc.MEDIA_DETACHED,this.onMediaDetached,this),t.on(Fc.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const t=this.hls;t.off(Fc.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(Fc.MEDIA_DETACHED,this.onMediaDetached,this),t.off(Fc.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=null}onMediaAttached(t,e){this.media=e.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(t,e){var i,s;this.audioBuffer=null==(i=e.tracks.audio)?void 0:i.buffer,this.videoBuffer=null==(s=e.tracks.video)?void 0:s.buffer}createData(){var t;return{v:1,sf:of.HLS,sid:this.sid,cid:this.cid,pr:null==(t=this.media)?void 0:t.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(t,e={}){Ic(e,this.createData());const i=e.ot===nf.INIT||e.ot===nf.VIDEO||e.ot===nf.MUXED;this.starved&&i&&(e.bs=!0,e.su=!0,this.starved=!1),null==e.su&&(e.su=this.buffering);const{includeKeys:s}=this;s&&(e=Object.keys(e).reduce(((t,i)=>(s.includes(i)&&(t[i]=e[i]),t)),{})),this.useHeaders?(t.headers||(t.headers={}),Mf(t.headers,e)):t.url=Df(t.url,e)}getObjectType(t){const{type:e}=t;return"subtitle"===e?nf.TIMED_TEXT:"initSegment"===t.sn?nf.INIT:"audio"===e?nf.AUDIO:"main"===e?this.hls.audioTracks.length?nf.VIDEO:nf.MUXED:void 0}getTopBandwidth(t){let e,i=0;const s=this.hls;if(t===nf.AUDIO)e=s.audioTracks;else{const t=s.maxAutoLevel,i=t>-1?t+1:s.levels.length;e=s.levels.slice(0,i)}for(const a of e)a.bitrate>i&&(i=a.bitrate);return i>0?i:NaN}getBufferLength(t){const e=this.hls.media,i=t===nf.AUDIO?this.audioBuffer:this.videoBuffer;if(!i||!e)return NaN;return 1e3*fu.bufferInfo(i,e.currentTime,this.config.maxBufferHole).len}createPlaylistLoader(){const{pLoader:t}=this.config,e=this.applyPlaylistData,i=t||this.config.loader;return class{constructor(t){this.loader=void 0,this.loader=new i(t)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(t,i,s){e(t),this.loader.load(t,i,s)}}}createFragmentLoader(){const{fLoader:t}=this.config,e=this.applyFragmentData,i=t||this.config.loader;return class{constructor(t){this.loader=void 0,this.loader=new i(t)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(t,i,s){e(t),this.loader.load(t,i,s)}}}},contentSteeringController:class{constructor(t){this.hls=void 0,this.log=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this.pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=t,this.log=Gc.log.bind(Gc,"[content-steering]:"),this.registerListeners()}registerListeners(){const t=this.hls;t.on(Fc.MANIFEST_LOADING,this.onManifestLoading,this),t.on(Fc.MANIFEST_LOADED,this.onManifestLoaded,this),t.on(Fc.MANIFEST_PARSED,this.onManifestParsed,this),t.on(Fc.ERROR,this.onError,this)}unregisterListeners(){const t=this.hls;t&&(t.off(Fc.MANIFEST_LOADING,this.onManifestLoading,this),t.off(Fc.MANIFEST_LOADED,this.onManifestLoaded,this),t.off(Fc.MANIFEST_PARSED,this.onManifestParsed,this),t.off(Fc.ERROR,this.onError,this))}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const t=1e3*this.timeToLoad-(performance.now()-this.updated);if(t>0)return void this.scheduleRefresh(this.uri,t)}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){-1!==this.reloadTimer&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(t){const e=this.levels;e&&(this.levels=e.filter((e=>e!==t)))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(t,e){const{contentSteering:i}=e;null!==i&&(this.pathwayId=i.pathwayId,this.uri=i.uri,this.started&&this.startLoad())}onManifestParsed(t,e){this.audioTracks=e.audioTracks,this.subtitleTracks=e.subtitleTracks}onError(t,e){const{errorAction:i}=e;if((null==i?void 0:i.action)===Hg&&i.flags===Zg){const t=this.levels;let s=this.pathwayPriority,a=this.pathwayId;if(e.context){const{groupId:i,pathwayId:s,type:r}=e.context;i&&t?a=this.getPathwayForGroupId(i,r,a):s&&(a=s)}a in this.penalizedPathways||(this.penalizedPathways[a]=performance.now()),!s&&t&&(s=t.reduce(((t,e)=>(-1===t.indexOf(e.pathwayId)&&t.push(e.pathwayId),t)),[])),s&&s.length>1&&(this.updatePathwayPriority(s),i.resolved=this.pathwayId!==a),i.resolved||Gc.warn(`Could not resolve ${e.details} ("${e.error.message}") with content-steering for Pathway: ${a} levels: ${t?t.length:t} priorities: ${JSON.stringify(s)} penalized: ${JSON.stringify(this.penalizedPathways)}`)}}filterParsedLevels(t){this.levels=t;let e=this.getLevelsForPathway(this.pathwayId);if(0===e.length){const i=t[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${i}"`),e=this.getLevelsForPathway(i),this.pathwayId=i}return e.length!==t.length&&this.log(`Found ${e.length}/${t.length} levels in Pathway "${this.pathwayId}"`),e}getLevelsForPathway(t){return null===this.levels?[]:this.levels.filter((e=>t===e.pathwayId))}updatePathwayPriority(t){let e;this.pathwayPriority=t;const i=this.penalizedPathways,s=performance.now();Object.keys(i).forEach((t=>{s-i[t]>3e5&&delete i[t]}));for(let a=0;a<t.length;a++){const s=t[a];if(s in i)continue;if(s===this.pathwayId)return;const r=this.hls.nextLoadLevel,n=this.hls.levels[r];if(e=this.getLevelsForPathway(s),e.length>0){this.log(`Setting Pathway to "${s}"`),this.pathwayId=s,Rg(e),this.hls.trigger(Fc.LEVELS_UPDATED,{levels:e});const t=this.hls.levels[r];n&&t&&this.levels&&(t.attrs["STABLE-VARIANT-ID"]!==n.attrs["STABLE-VARIANT-ID"]&&t.bitrate!==n.bitrate&&this.log(`Unstable Pathways change from bitrate ${n.bitrate} to ${t.bitrate}`),this.hls.nextLoadLevel=r);break}}}getPathwayForGroupId(t,e,i){const s=this.getLevelsForPathway(i).concat(this.levels||[]);for(let a=0;a<s.length;a++)if(e===Kp&&s[a].hasAudioGroup(t)||e===Wp&&s[a].hasSubtitleGroup(t))return s[a].pathwayId;return i}clonePathways(t){const e=this.levels;if(!e)return;const i={},s={};t.forEach((t=>{const{ID:a,"BASE-ID":r,"URI-REPLACEMENT":n}=t;if(e.some((t=>t.pathwayId===a)))return;const o=this.getLevelsForPathway(r).map((t=>{const e=new Kc(t.attrs);e["PATHWAY-ID"]=a;const r=e.AUDIO&&`${e.AUDIO}_clone_${a}`,o=e.SUBTITLES&&`${e.SUBTITLES}_clone_${a}`;r&&(i[e.AUDIO]=r,e.AUDIO=r),o&&(s[e.SUBTITLES]=o,e.SUBTITLES=o);const l=Of(t.uri,e["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",n),d=new Sg({attrs:e,audioCodec:t.audioCodec,bitrate:t.bitrate,height:t.height,name:t.name,url:l,videoCodec:t.videoCodec,width:t.width});if(t.audioGroups)for(let i=1;i<t.audioGroups.length;i++)d.addGroupId("audio",`${t.audioGroups[i]}_clone_${a}`);if(t.subtitleGroups)for(let i=1;i<t.subtitleGroups.length;i++)d.addGroupId("text",`${t.subtitleGroups[i]}_clone_${a}`);return d}));e.push(...o),If(this.audioTracks,i,n,a),If(this.subtitleTracks,s,n,a)}))}loadSteeringManifest(t){const e=this.hls.config,i=e.loader;let s;this.loader&&this.loader.destroy(),this.loader=new i(e);try{s=new self.URL(t)}catch(d){return this.enabled=!1,void this.log(`Failed to parse Steering Manifest URI: ${t}`)}if("data:"!==s.protocol){const t=0|(this.hls.bandwidthEstimate||e.abrEwmaDefaultEstimate);s.searchParams.set("_HLS_pathway",this.pathwayId),s.searchParams.set("_HLS_throughput",""+t)}const a={responseType:"json",url:s.href},r=e.steeringManifestLoadPolicy.default,n=r.errorRetry||r.timeoutRetry||{},o={loadPolicy:r,timeout:r.maxLoadTimeMs,maxRetry:n.maxNumRetry||0,retryDelay:n.retryDelayMs||0,maxRetryDelay:n.maxRetryDelayMs||0},l={onSuccess:(t,e,i,a)=>{this.log(`Loaded steering manifest: "${s}"`);const r=t.data;if(1!==r.VERSION)return void this.log(`Steering VERSION ${r.VERSION} not supported!`);this.updated=performance.now(),this.timeToLoad=r.TTL;const{"RELOAD-URI":n,"PATHWAY-CLONES":o,"PATHWAY-PRIORITY":l}=r;if(n)try{this.uri=new self.URL(n,s).href}catch(d){return this.enabled=!1,void this.log(`Failed to parse Steering Manifest RELOAD-URI: ${n}`)}this.scheduleRefresh(this.uri||i.url),o&&this.clonePathways(o);const c={steeringManifest:r,url:s.toString()};this.hls.trigger(Fc.STEERING_MANIFEST_LOADED,c),l&&this.updatePathwayPriority(l)},onError:(t,e,i,s)=>{if(this.log(`Error loading steering manifest: ${t.code} ${t.text} (${e.url})`),this.stopLoad(),410===t.code)return this.enabled=!1,void this.log(`Steering manifest ${e.url} no longer available`);let a=1e3*this.timeToLoad;if(429!==t.code)this.scheduleRefresh(this.uri||e.url,a);else{const t=this.loader;if("function"==typeof(null==t?void 0:t.getResponseHeader)){const e=t.getResponseHeader("Retry-After");e&&(a=1e3*parseFloat(e))}this.log(`Steering manifest ${e.url} rate limited`)}},onTimeout:(t,e,i)=>{this.log(`Timeout loading steering manifest (${e.url})`),this.scheduleRefresh(this.uri||e.url)}};this.log(`Requesting steering manifest: ${s}`),this.loader.load(a,o,l)}scheduleRefresh(t,e=1e3*this.timeToLoad){this.clearTimeout(),this.reloadTimer=self.setTimeout((()=>{var e;const i=null==(e=this.hls)?void 0:e.media;!i||i.ended?this.scheduleRefresh(t,1e3*this.timeToLoad):this.loadSteeringManifest(t)}),e)}}});function Gf(t){return t&&"object"==typeof t?Array.isArray(t)?t.map(Gf):Object.keys(t).reduce(((e,i)=>(e[i]=Gf(t[i]),e)),{}):t}function qf(t){const e=t.loader;if(e!==zf&&e!==Uf)Gc.log("[config]: Custom loader detected, cannot enable progressive streaming"),t.progressive=!1;else{(function(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch(t){}return!1})()&&(t.loader=zf,t.progressive=!0,t.enableSoftwareAES=!0,Gc.log("[config]: Progressive streaming enabled, using FetchLoader"))}}let Zf;class Kf extends Wg{constructor(t,e){super(t,"[level-controller]"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=e,this._registerListeners()}_registerListeners(){const{hls:t}=this;t.on(Fc.MANIFEST_LOADING,this.onManifestLoading,this),t.on(Fc.MANIFEST_LOADED,this.onManifestLoaded,this),t.on(Fc.LEVEL_LOADED,this.onLevelLoaded,this),t.on(Fc.LEVELS_UPDATED,this.onLevelsUpdated,this),t.on(Fc.FRAG_BUFFERED,this.onFragBuffered,this),t.on(Fc.ERROR,this.onError,this)}_unregisterListeners(){const{hls:t}=this;t.off(Fc.MANIFEST_LOADING,this.onManifestLoading,this),t.off(Fc.MANIFEST_LOADED,this.onManifestLoaded,this),t.off(Fc.LEVEL_LOADED,this.onLevelLoaded,this),t.off(Fc.LEVELS_UPDATED,this.onLevelsUpdated,this),t.off(Fc.FRAG_BUFFERED,this.onFragBuffered,this),t.off(Fc.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach((t=>{t.loadError=0,t.fragmentError=0})),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(t,e){this.resetLevels()}onManifestLoaded(t,e){const i=this.hls.config.preferManagedMediaSource,s=[],a={},r={};let n=!1,o=!1,l=!1;e.levels.forEach((t=>{var e,d;const c=t.attrs;let{audioCodec:h,videoCodec:p}=t;-1!==(null==(e=h)?void 0:e.indexOf("mp4a.40.34"))&&(Zf||(Zf=/chrome|firefox/i.test(navigator.userAgent)),Zf&&(t.audioCodec=h=void 0)),h&&(t.audioCodec=h=Mp(h,i)),0===(null==(d=p)?void 0:d.indexOf("avc1"))&&(p=t.videoCodec=function(t){const e=t.split(",");for(let i=0;i<e.length;i++){const t=e[i].split(".");if(t.length>2){let s=t.shift()+".";s+=parseInt(t.shift()).toString(16),s+=("000"+parseInt(t.shift()).toString(16)).slice(-4),e[i]=s}}return e.join(",")}(p));const{width:g,height:u,unknownCodecs:m}=t;if(n||(n=!(!g||!u)),o||(o=!!p),l||(l=!!h),null!=m&&m.length||h&&!_p(h,"audio",i)||p&&!_p(p,"video",i))return;const{CODECS:v,"FRAME-RATE":f,"HDCP-LEVEL":y,"PATHWAY-ID":b,RESOLUTION:w,"VIDEO-RANGE":x}=c,k=`${`${b||"."}-`}${t.bitrate}-${w}-${f}-${v}-${x}-${y}`;if(a[k])if(a[k].uri===t.url||t.attrs["PATHWAY-ID"])a[k].addGroupId("audio",c.AUDIO),a[k].addGroupId("text",c.SUBTITLES);else{const e=r[k]+=1;t.attrs["PATHWAY-ID"]=new Array(e+1).join(".");const i=new Sg(t);a[k]=i,s.push(i)}else{const e=new Sg(t);a[k]=e,r[k]=1,s.push(e)}})),this.filterAndSortMediaOptions(s,e,n,o,l)}filterAndSortMediaOptions(t,e,i,s,a){let r=[],n=[],o=t;if((i||s)&&a&&(o=o.filter((({videoCodec:t,videoRange:e,width:i,height:s})=>{return(!!t||!(!i||!s))&&(!!(a=e)&&fg.indexOf(a)>-1);var a}))),0===o.length)return void Promise.resolve().then((()=>{if(this.hls){e.levels.length&&this.warn(`One or more CODECS in variant not supported: ${JSON.stringify(e.levels[0].attrs)}`);const t=new Error("no level with compatible codecs found in manifest");this.hls.trigger(Fc.ERROR,{type:zc.MEDIA_ERROR,details:Nc.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:e.url,error:t,reason:t.message})}}));if(e.audioTracks){const{preferManagedMediaSource:t}=this.hls.config;r=e.audioTracks.filter((e=>!e.audioCodec||_p(e.audioCodec,"audio",t))),Wf(r)}e.subtitles&&(n=e.subtitles,Wf(n));const l=o.slice(0);o.sort(((t,e)=>{if(t.attrs["HDCP-LEVEL"]!==e.attrs["HDCP-LEVEL"])return(t.attrs["HDCP-LEVEL"]||"")>(e.attrs["HDCP-LEVEL"]||"")?1:-1;if(i&&t.height!==e.height)return t.height-e.height;if(t.frameRate!==e.frameRate)return t.frameRate-e.frameRate;if(t.videoRange!==e.videoRange)return fg.indexOf(t.videoRange)-fg.indexOf(e.videoRange);if(t.videoCodec!==e.videoCodec){const i=Lp(t.videoCodec),s=Lp(e.videoCodec);if(i!==s)return s-i}if(t.uri===e.uri&&t.codecSet!==e.codecSet){const i=Tp(t.codecSet),s=Tp(e.codecSet);if(i!==s)return s-i}return t.averageBitrate!==e.averageBitrate?t.averageBitrate-e.averageBitrate:0}));let d=l[0];if(this.steering&&(o=this.steering.filterParsedLevels(o),o.length!==l.length))for(let g=0;g<l.length;g++)if(l[g].pathwayId===o[0].pathwayId){d=l[g];break}this._levels=o;for(let g=0;g<o.length;g++)if(o[g]===d){var c;this._firstLevel=g;const t=d.bitrate,e=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${o.length} level(s) found, first bitrate: ${t}`),void 0===(null==(c=this.hls.userConfig)?void 0:c.abrEwmaDefaultEstimate)){const i=Math.min(t,this.hls.config.abrEwmaDefaultEstimateMax);i>e&&e===Vf.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=i)}break}const h=a&&!s,p={levels:o,audioTracks:r,subtitleTracks:n,sessionData:e.sessionData,sessionKeys:e.sessionKeys,firstLevel:this._firstLevel,stats:e.stats,audio:a,video:s,altAudio:!h&&r.some((t=>!!t.url))};this.hls.trigger(Fc.MANIFEST_PARSED,p),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}get levels(){return 0===this._levels.length?null:this._levels}get level(){return this.currentLevelIndex}set level(t){const e=this._levels;if(0===e.length)return;if(t<0||t>=e.length){const i=new Error("invalid level idx"),s=t<0;if(this.hls.trigger(Fc.ERROR,{type:zc.OTHER_ERROR,details:Nc.LEVEL_SWITCH_ERROR,level:t,fatal:s,error:i,reason:i.message}),s)return;t=Math.min(t,e.length-1)}const i=this.currentLevelIndex,s=this.currentLevel,a=s?s.attrs["PATHWAY-ID"]:void 0,r=e[t],n=r.attrs["PATHWAY-ID"];if(this.currentLevelIndex=t,this.currentLevel=r,i===t&&r.details&&s&&a===n)return;this.log(`Switching to level ${t} (${r.height?r.height+"p ":""}${r.videoRange?r.videoRange+" ":""}${r.codecSet?r.codecSet+" ":""}@${r.bitrate})${n?" with Pathway "+n:""} from level ${i}${a?" with Pathway "+a:""}`);const o={level:t,attrs:r.attrs,details:r.details,bitrate:r.bitrate,averageBitrate:r.averageBitrate,maxBitrate:r.maxBitrate,realBitrate:r.realBitrate,width:r.width,height:r.height,codecSet:r.codecSet,audioCodec:r.audioCodec,videoCodec:r.videoCodec,audioGroups:r.audioGroups,subtitleGroups:r.subtitleGroups,loaded:r.loaded,loadError:r.loadError,fragmentError:r.fragmentError,name:r.name,id:r.id,uri:r.uri,url:r.url,urlId:0,audioGroupIds:r.audioGroupIds,textGroupIds:r.textGroupIds};this.hls.trigger(Fc.LEVEL_SWITCHING,o);const l=r.details;if(!l||l.live){const t=this.switchParams(r.uri,null==s?void 0:s.details,l);this.loadPlaylist(t)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(t){this.manualLevelIndex=t,void 0===this._startLevel&&(this._startLevel=t),-1!==t&&(this.level=t)}get firstLevel(){return this._firstLevel}set firstLevel(t){this._firstLevel=t}get startLevel(){if(void 0===this._startLevel){const t=this.hls.config.startLevel;return void 0!==t?t:this.hls.firstAutoLevel}return this._startLevel}set startLevel(t){this._startLevel=t}onError(t,e){!e.fatal&&e.context&&e.context.type===Zp&&e.context.level===this.level&&this.checkRetry(e)}onFragBuffered(t,{frag:e}){if(void 0!==e&&e.type===Yp){const t=e.elementaryStreams;if(!Object.keys(t).some((e=>!!t[e])))return;const i=this._levels[e.level];null!=i&&i.loadError&&(this.log(`Resetting level error count of ${i.loadError} on frag buffered`),i.loadError=0)}}onLevelLoaded(t,e){var i;const{level:s,details:a}=e,r=this._levels[s];var n;if(!r)return this.warn(`Invalid level index ${s}`),void(null!=(n=e.deliveryDirectives)&&n.skip&&(a.deltaUpdateFailed=!0));s===this.currentLevelIndex?(0===r.fragmentError&&(r.loadError=0),this.playlistLoaded(s,e,r.details)):null!=(i=e.deliveryDirectives)&&i.skip&&(a.deltaUpdateFailed=!0)}loadPlaylist(t){super.loadPlaylist();const e=this.currentLevelIndex,i=this.currentLevel;if(i&&this.shouldLoadPlaylist(i)){let a=i.uri;if(t)try{a=t.addDirectives(a)}catch(s){this.warn(`Could not construct new URL with HLS Delivery Directives: ${s}`)}const r=i.attrs["PATHWAY-ID"];this.log(`Loading level index ${e}${void 0!==(null==t?void 0:t.msn)?" at sn "+t.msn+" part "+t.part:""} with${r?" Pathway "+r:""} ${a}`),this.clearTimer(),this.hls.trigger(Fc.LEVEL_LOADING,{url:a,level:e,pathwayId:i.attrs["PATHWAY-ID"],id:0,deliveryDirectives:t||null})}}get nextLoadLevel(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(t){this.level=t,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=t)}removeLevel(t){var e;const i=this._levels.filter(((e,i)=>i!==t||(this.steering&&this.steering.removeLevel(e),e===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,e.details&&e.details.fragments.forEach((t=>t.level=-1))),!1)));Rg(i),this._levels=i,this.currentLevelIndex>-1&&null!=(e=this.currentLevel)&&e.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.hls.trigger(Fc.LEVELS_UPDATED,{levels:i})}onLevelsUpdated(t,{levels:e}){this._levels=e}checkMaxAutoUpdated(){const{autoLevelCapping:t,maxAutoLevel:e,maxHdcpLevel:i}=this.hls;this._maxAutoLevel!==e&&(this._maxAutoLevel=e,this.hls.trigger(Fc.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:t,levels:this.levels,maxAutoLevel:e,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:i}))}}function Wf(t){const e={};t.forEach((t=>{const i=t.groupId||"";t.id=e[i]=e[i]||0,e[i]++}))}class Yf{constructor(t){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=t}abort(t){for(const i in this.keyUriToKeyInfo){const s=this.keyUriToKeyInfo[i].loader;if(s){var e;if(t&&t!==(null==(e=s.context)?void 0:e.frag.type))return;s.abort()}}}detach(){for(const t in this.keyUriToKeyInfo){const e=this.keyUriToKeyInfo[t];(e.mediaKeySessionContext||e.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[t]}}destroy(){this.detach();for(const t in this.keyUriToKeyInfo){const e=this.keyUriToKeyInfo[t].loader;e&&e.destroy()}this.keyUriToKeyInfo={}}createKeyLoadError(t,e=Nc.KEY_LOAD_ERROR,i,s,a){return new Tu({type:zc.NETWORK_ERROR,details:e,fatal:!1,frag:t,response:a,error:i,networkDetails:s})}loadClear(t,e){if(this.emeController&&this.config.emeEnabled){const{sn:i,cc:s}=t;for(let t=0;t<e.length;t++){const a=e[t];if(s<=a.cc&&("initSegment"===i||"initSegment"===a.sn||i<a.sn)){this.emeController.selectKeySystemFormat(a).then((t=>{a.setKeyFormat(t)}));break}}}}load(t){return!t.decryptdata&&t.encrypted&&this.emeController?this.emeController.selectKeySystemFormat(t).then((e=>this.loadInternal(t,e))):this.loadInternal(t)}loadInternal(t,e){var i,s;e&&t.setKeyFormat(e);const a=t.decryptdata;if(!a){const i=new Error(e?`Expected frag.decryptdata to be defined after setting format ${e}`:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(t,Nc.KEY_LOAD_ERROR,i))}const r=a.uri;if(!r)return Promise.reject(this.createKeyLoadError(t,Nc.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${r}"`)));let n=this.keyUriToKeyInfo[r];if(null!=(i=n)&&i.decryptdata.key)return a.key=n.decryptdata.key,Promise.resolve({frag:t,keyInfo:n});var o;if(null!=(s=n)&&s.keyLoadPromise)switch(null==(o=n.mediaKeySessionContext)?void 0:o.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return n.keyLoadPromise.then((e=>(a.key=e.keyInfo.decryptdata.key,{frag:t,keyInfo:n})))}switch(n=this.keyUriToKeyInfo[r]={decryptdata:a,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},a.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return"identity"===a.keyFormat?this.loadKeyHTTP(n,t):this.loadKeyEME(n,t);case"AES-128":return this.loadKeyHTTP(n,t);default:return Promise.reject(this.createKeyLoadError(t,Nc.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${a.method}"`)))}}loadKeyEME(t,e){const i={frag:e,keyInfo:t};if(this.emeController&&this.config.emeEnabled){const e=this.emeController.loadKey(i);if(e)return(t.keyLoadPromise=e.then((e=>(t.mediaKeySessionContext=e,i)))).catch((e=>{throw t.keyLoadPromise=null,e}))}return Promise.resolve(i)}loadKeyHTTP(t,e){const i=this.config,s=new(0,i.loader)(i);return e.keyLoader=t.loader=s,t.keyLoadPromise=new Promise(((a,r)=>{const n={keyInfo:t,frag:e,responseType:"arraybuffer",url:t.decryptdata.uri},o=i.keyLoadPolicy.default,l={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(t,e,i,s)=>{const{frag:n,keyInfo:o,url:l}=i;if(!n.decryptdata||o!==this.keyUriToKeyInfo[l])return r(this.createKeyLoadError(n,Nc.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),s));o.decryptdata.key=n.decryptdata.key=new Uint8Array(t.data),n.keyLoader=null,o.loader=null,a({frag:n,keyInfo:o})},onError:(t,i,s,a)=>{this.resetLoader(i),r(this.createKeyLoadError(e,Nc.KEY_LOAD_ERROR,new Error(`HTTP Error ${t.code} loading key ${t.text}`),s,Mc({url:n.url,data:void 0},t)))},onTimeout:(t,i,s)=>{this.resetLoader(i),r(this.createKeyLoadError(e,Nc.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),s))},onAbort:(t,i,s)=>{this.resetLoader(i),r(this.createKeyLoadError(e,Nc.INTERNAL_ABORTED,new Error("key loading aborted"),s))}};s.load(n,l,d)}))}resetLoader(t){const{frag:e,keyInfo:i,url:s}=t,a=i.loader;e.keyLoader===a&&(e.keyLoader=null,i.loader=null),delete this.keyUriToKeyInfo[s],a&&a.destroy()}}function Qf(){return self.SourceBuffer||self.WebKitSourceBuffer}function Jf(){if(!kp())return!1;const t=Qf();return!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove}class Xf{constructor(t,e,i,s){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=t,this.media=e,this.fragmentTracker=i,this.hls=s}destroy(){this.media=null,this.hls=this.fragmentTracker=null}poll(t,e){const{config:i,media:s,stalled:a}=this;if(null===s)return;const{currentTime:r,seeking:n}=s,o=this.seeking&&!n,l=!this.seeking&&n;if(this.seeking=n,r!==t){if(this.moved=!0,n||(this.nudgeRetry=0),null!==a){if(this.stallReported){const t=self.performance.now()-a;Gc.warn(`playback not stuck anymore @${r}, after ${Math.round(t)}ms`),this.stallReported=!1}this.stalled=null}return}if(l||o)return void(this.stalled=null);if(s.paused&&!n||s.ended||0===s.playbackRate||!fu.getBuffered(s).length)return void(this.nudgeRetry=0);const d=fu.bufferInfo(s,r,0),c=d.nextStart||0;if(n){const t=d.len>2,i=!c||e&&e.start<=r||c-r>2&&!this.fragmentTracker.getPartialFragment(r);if(t||i)return;this.moved=!1}if(!this.moved&&null!==this.stalled){var h;if(!(d.len>0)&&!c)return;const t=Math.max(c,d.start||0)-r,e=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,i=(null==e||null==(h=e.details)?void 0:h.live)?2*e.details.targetduration:2,a=this.fragmentTracker.getPartialFragment(r);if(t>0&&(t<=i||a))return void(s.paused||this._trySkipBufferHole(a))}const p=self.performance.now();if(null===a)return void(this.stalled=p);const g=p-a;if(!n&&g>=250&&(this._reportStall(d),!this.media))return;const u=fu.bufferInfo(s,r,i.maxBufferHole);this._tryFixBufferStall(u,g)}_tryFixBufferStall(t,e){const{config:i,fragmentTracker:s,media:a}=this;if(null===a)return;const r=a.currentTime,n=s.getPartialFragment(r);if(n){if(this._trySkipBufferHole(n)||!this.media)return}(t.len>i.maxBufferHole||t.nextStart&&t.nextStart-r<i.maxBufferHole)&&e>1e3*i.highBufferWatchdogPeriod&&(Gc.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}_reportStall(t){const{hls:e,media:i,stallReported:s}=this;if(!s&&i){this.stallReported=!0;const s=new Error(`Playback stalling at @${i.currentTime} due to low buffer (${JSON.stringify(t)})`);Gc.warn(s.message),e.trigger(Fc.ERROR,{type:zc.MEDIA_ERROR,details:Nc.BUFFER_STALLED_ERROR,fatal:!1,error:s,buffer:t.len})}}_trySkipBufferHole(t){const{config:e,hls:i,media:s}=this;if(null===s)return 0;const a=s.currentTime,r=fu.bufferInfo(s,a,0),n=a<r.start?r.start:r.nextStart;if(n){const o=r.len<=e.maxBufferHole,l=r.len>0&&r.len<1&&s.readyState<3,d=n-a;if(d>0&&(o||l)){if(d>e.maxBufferHole){const{fragmentTracker:e}=this;let i=!1;if(0===a){const t=e.getAppendedFrag(0,Yp);t&&n<t.end&&(i=!0)}if(!i){const i=t||e.getAppendedFrag(a,Yp);if(i){let t=!1,s=i.end;for(;s<n;){const i=e.getPartialFragment(s);if(!i){t=!0;break}s+=i.duration}if(t)return 0}}}const r=Math.max(n+.05,a+.1);if(Gc.warn(`skipping hole, adjusting currentTime from ${a} to ${r}`),this.moved=!0,this.stalled=null,s.currentTime=r,t&&!t.gap){const e=new Error(`fragment loaded with buffer holes, seeking from ${a} to ${r}`);i.trigger(Fc.ERROR,{type:zc.MEDIA_ERROR,details:Nc.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:e,reason:e.message,frag:t})}return r}}return 0}_tryNudgeBuffer(){const{config:t,hls:e,media:i,nudgeRetry:s}=this;if(null===i)return;const a=i.currentTime;if(this.nudgeRetry++,s<t.nudgeMaxRetry){const r=a+(s+1)*t.nudgeOffset,n=new Error(`Nudging 'currentTime' from ${a} to ${r}`);Gc.warn(n.message),i.currentTime=r,e.trigger(Fc.ERROR,{type:zc.MEDIA_ERROR,details:Nc.BUFFER_NUDGE_ON_STALL,error:n,fatal:!1})}else{const i=new Error(`Playhead still not moving while enough data buffered @${a} after ${t.nudgeMaxRetry} nudges`);Gc.error(i.message),e.trigger(Fc.ERROR,{type:zc.MEDIA_ERROR,details:Nc.BUFFER_STALLED_ERROR,error:i,fatal:!0})}}}class ty extends qu{constructor(t,e,i){super(t,e,i,"[stream-controller]",Yp),this.audioCodecSwap=!1,this.gapController=null,this.level=-1,this._forceStartLoad=!1,this.altAudio=!1,this.audioOnly=!1,this.fragPlaying=null,this.onvplaying=null,this.onvseeked=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this._registerListeners()}_registerListeners(){const{hls:t}=this;t.on(Fc.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(Fc.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(Fc.MANIFEST_LOADING,this.onManifestLoading,this),t.on(Fc.MANIFEST_PARSED,this.onManifestParsed,this),t.on(Fc.LEVEL_LOADING,this.onLevelLoading,this),t.on(Fc.LEVEL_LOADED,this.onLevelLoaded,this),t.on(Fc.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),t.on(Fc.ERROR,this.onError,this),t.on(Fc.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.on(Fc.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.on(Fc.BUFFER_CREATED,this.onBufferCreated,this),t.on(Fc.BUFFER_FLUSHED,this.onBufferFlushed,this),t.on(Fc.LEVELS_UPDATED,this.onLevelsUpdated,this),t.on(Fc.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:t}=this;t.off(Fc.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(Fc.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(Fc.MANIFEST_LOADING,this.onManifestLoading,this),t.off(Fc.MANIFEST_PARSED,this.onManifestParsed,this),t.off(Fc.LEVEL_LOADED,this.onLevelLoaded,this),t.off(Fc.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),t.off(Fc.ERROR,this.onError,this),t.off(Fc.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.off(Fc.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.off(Fc.BUFFER_CREATED,this.onBufferCreated,this),t.off(Fc.BUFFER_FLUSHED,this.onBufferFlushed,this),t.off(Fc.LEVELS_UPDATED,this.onLevelsUpdated,this),t.off(Fc.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying()}startLoad(t){if(this.levels){const{lastCurrentTime:e,hls:i}=this;if(this.stopLoad(),this.setInterval(100),this.level=-1,!this.startFragRequested){let t=i.startLevel;-1===t&&(i.config.testBandwidth&&this.levels.length>1?(t=0,this.bitrateTest=!0):t=i.firstAutoLevel),i.nextLoadLevel=t,this.level=i.loadLevel,this.loadedmetadata=!1}e>0&&-1===t&&(this.log(`Override startPosition with lastCurrentTime @${e.toFixed(3)}`),t=e),this.state=Ou,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()}else this._forceStartLoad=!0,this.state=Iu}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case Gu:{const{levels:t,level:e}=this,i=null==t?void 0:t[e],s=null==i?void 0:i.details;if(s&&(!s.live||this.levelLastLoaded===i)){if(this.waitForCdnTuneIn(s))break;this.state=Ou;break}if(this.hls.nextLoadLevel!==this.level){this.state=Ou;break}break}case Fu:{var t;const e=self.performance.now(),i=this.retryDate;if(!i||e>=i||null!=(t=this.media)&&t.seeking){const{levels:t,level:e}=this,i=null==t?void 0:t[e];this.resetStartWhenNotLoaded(i||null),this.state=Ou}}}this.state===Ou&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){super.onTickEnd(),this.checkBuffer(),this.checkFragmentChanged()}doTickIdle(){const{hls:t,levelLastLoaded:e,levels:i,media:s}=this;if(null===e||!s&&(this.startFragRequested||!t.config.startFragPrefetch))return;if(this.altAudio&&this.audioOnly)return;const a=t.nextLoadLevel;if(null==i||!i[a])return;const r=i[a],n=this.getMainFwdBufferInfo();if(null===n)return;const o=this.getLevelDetails();if(o&&this._streamEnded(n,o)){const t={};return this.altAudio&&(t.type="video"),this.hls.trigger(Fc.BUFFER_EOS,t),void(this.state=Bu)}t.loadLevel!==a&&-1===t.manualLevel&&this.log(`Adapting to level ${a} from level ${this.level}`),this.level=t.nextLoadLevel=a;const l=r.details;if(!l||this.state===Gu||l.live&&this.levelLastLoaded!==r)return this.level=a,void(this.state=Gu);const d=n.len,c=this.getMaxBufferLength(r.maxBitrate);if(d>=c)return;this.backtrackFragment&&this.backtrackFragment.start>n.end&&(this.backtrackFragment=null);const h=this.backtrackFragment?this.backtrackFragment.start:n.end;let p=this.getNextFragment(h,l);if(this.couldBacktrack&&!this.fragPrevious&&p&&"initSegment"!==p.sn&&this.fragmentTracker.getState(p)!==pu){var g;const t=(null!=(g=this.backtrackFragment)?g:p).sn-l.startSN,e=l.fragments[t-1];e&&p.cc===e.cc&&(p=e,this.fragmentTracker.removeFragment(e))}else this.backtrackFragment&&n.len&&(this.backtrackFragment=null);if(p&&this.isLoopLoading(p,h)){if(!p.gap){const t=this.audioOnly&&!this.altAudio?Jc:Xc,e=(t===Xc?this.videoBuffer:this.mediaBuffer)||this.media;e&&this.afterBufferFlushed(e,t,Yp)}p=this.getNextFragmentLoopLoading(p,l,n,Yp,c)}p&&(!p.initSegment||p.initSegment.data||this.bitrateTest||(p=p.initSegment),this.loadFragment(p,r,h))}loadFragment(t,e,i){const s=this.fragmentTracker.getState(t);this.fragCurrent=t,s===du||s===hu?"initSegment"===t.sn?this._loadInitSegment(t,e):this.bitrateTest?(this.log(`Fragment ${t.sn} of level ${t.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(t,e)):(this.startFragRequested=!0,super.loadFragment(t,e,i)):this.clearTrackerIfNeeded(t)}getBufferedFrag(t){return this.fragmentTracker.getBufferedFrag(t,Yp)}followingBufferedFrag(t){return t?this.getBufferedFrag(t.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:t,media:e}=this;if(null!=e&&e.readyState){let i;const s=this.getAppendedFrag(e.currentTime);s&&s.start>1&&this.flushMainBuffer(0,s.start-1);const a=this.getLevelDetails();if(null!=a&&a.live){const t=this.getMainFwdBufferInfo();if(!t||t.len<2*a.targetduration)return}if(!e.paused&&t){const e=t[this.hls.nextLoadLevel],s=this.fragLastKbps;i=s&&this.fragCurrent?this.fragCurrent.duration*e.maxBitrate/(1e3*s)+1:0}else i=0;const r=this.getBufferedFrag(e.currentTime+i);if(r){const t=this.followingBufferedFrag(r);if(t){this.abortCurrentFrag();const e=t.maxStartPTS?t.maxStartPTS:t.start,i=t.duration,s=Math.max(r.end,e+Math.min(Math.max(i-this.config.maxFragLookUpTolerance,i*(this.couldBacktrack?.5:.125)),i*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(s,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const t=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,t&&(t.abortRequests(),this.fragmentTracker.removeFragment(t)),this.state){case $u:case Uu:case Fu:case Nu:case ju:this.state=Ou}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(t,e){super.flushMainBuffer(t,e,this.altAudio?"video":null)}onMediaAttached(t,e){super.onMediaAttached(t,e);const i=e.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),i.addEventListener("playing",this.onvplaying),i.addEventListener("seeked",this.onvseeked),this.gapController=new Xf(this.config,i,this.fragmentTracker,this.hls)}onMediaDetaching(){const{media:t}=this;t&&this.onvplaying&&this.onvseeked&&(t.removeEventListener("playing",this.onvplaying),t.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),super.onMediaDetaching()}onMediaPlaying(){this.tick()}onMediaSeeked(){const t=this.media,e=t?t.currentTime:null;Oc(e)&&this.log(`Media seeked to ${e.toFixed(3)}`);const i=this.getMainFwdBufferInfo();null!==i&&0!==i.len?this.tick():this.warn(`Main forward buffer length on "seeked" event ${i?i.len:"empty"})`)}onManifestLoading(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(Fc.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=this.fragLastKbps=0,this.levels=this.fragPlaying=this.backtrackFragment=this.levelLastLoaded=null,this.altAudio=this.audioOnly=this.startFragRequested=!1}onManifestParsed(t,e){let i=!1,s=!1;e.levels.forEach((t=>{const e=t.audioCodec;e&&(i=i||-1!==e.indexOf("mp4a.40.2"),s=s||-1!==e.indexOf("mp4a.40.5"))})),this.audioCodecSwitch=i&&s&&!function(){var t;const e=Qf();return"function"==typeof(null==e||null==(t=e.prototype)?void 0:t.changeType)}(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=e.levels,this.startFragRequested=!1}onLevelLoading(t,e){const{levels:i}=this;if(!i||this.state!==Ou)return;const s=i[e.level];(!s.details||s.details.live&&this.levelLastLoaded!==s||this.waitForCdnTuneIn(s.details))&&(this.state=Gu)}onLevelLoaded(t,e){var i;const{levels:s}=this,a=e.level,r=e.details,n=r.totalduration;if(!s)return void this.warn(`Levels were reset while loading level ${a}`);this.log(`Level ${a} loaded [${r.startSN},${r.endSN}]${r.lastPartSn?`[part-${r.lastPartSn}-${r.lastPartIndex}]`:""}, cc [${r.startCC}, ${r.endCC}] duration:${n}`);const o=s[a],l=this.fragCurrent;!l||this.state!==Uu&&this.state!==Fu||l.level!==e.level&&l.loader&&this.abortCurrentFrag();let d=0;if(r.live||null!=(i=o.details)&&i.live){var c;if(this.checkLiveUpdate(r),r.deltaUpdateFailed)return;d=this.alignPlaylists(r,o.details,null==(c=this.levelLastLoaded)?void 0:c.details)}if(o.details=r,this.levelLastLoaded=o,this.hls.trigger(Fc.LEVEL_UPDATED,{details:r,level:a}),this.state===Gu){if(this.waitForCdnTuneIn(r))return;this.state=Ou}this.startFragRequested?r.live&&this.synchronizeToLiveEdge(r):this.setStartPosition(r,d),this.tick()}_handleFragmentLoadProgress(t){var e;const{frag:i,part:s,payload:a}=t,{levels:r}=this;if(!r)return void this.warn(`Levels were reset while fragment load was in progress. Fragment ${i.sn} of level ${i.level} will not be buffered`);const n=r[i.level],o=n.details;if(!o)return this.warn(`Dropping fragment ${i.sn} of level ${i.level} after level details were reset`),void this.fragmentTracker.removeFragment(i);const l=n.videoCodec,d=o.PTSKnown||!o.live,c=null==(e=i.initSegment)?void 0:e.data,h=this._getAudioCodec(n),p=this.transmuxer=this.transmuxer||new Xm(this.hls,Yp,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),g=s?s.index:-1,u=-1!==g,m=new yu(i.level,i.sn,i.stats.chunkCount,a.byteLength,g,u),v=this.initPTS[i.cc];p.push(a,c,h,l,i,s,o.totalduration,d,m,v)}onAudioTrackSwitching(t,e){const i=this.altAudio;if(!!!e.url){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const t=this.fragCurrent;t&&(this.log("Switching to main audio track, cancel main fragment load"),t.abortRequests(),this.fragmentTracker.removeFragment(t)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();const t=this.hls;i&&(t.trigger(Fc.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null}),this.fragmentTracker.removeAllFragments()),t.trigger(Fc.AUDIO_TRACK_SWITCHED,e)}}onAudioTrackSwitched(t,e){const i=e.id,s=!!this.hls.audioTracks[i].url;if(s){const t=this.videoBuffer;t&&this.mediaBuffer!==t&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=t)}this.altAudio=s,this.tick()}onBufferCreated(t,e){const i=e.tracks;let s,a,r=!1;for(const n in i){const t=i[n];if("main"===t.id){if(a=n,s=t,"video"===n){const t=i[n];t&&(this.videoBuffer=t.buffer)}}else r=!0}r&&s?(this.log(`Alternate track found, use ${a}.buffered to schedule main fragment loading`),this.mediaBuffer=s.buffer):this.mediaBuffer=this.media}onFragBuffered(t,e){const{frag:i,part:s}=e;if(i&&i.type!==Yp)return;if(this.fragContextChanged(i))return this.warn(`Fragment ${i.sn}${s?" p: "+s.index:""} of level ${i.level} finished buffering, but was aborted. state: ${this.state}`),void(this.state===ju&&(this.state=Ou));const a=s?s.stats:i.stats;this.fragLastKbps=Math.round(8*a.total/(a.buffering.end-a.loading.first)),"initSegment"!==i.sn&&(this.fragPrevious=i),this.fragBufferedComplete(i,s)}onError(t,e){var i;if(e.fatal)this.state=Hu;else switch(e.details){case Nc.FRAG_GAP:case Nc.FRAG_PARSING_ERROR:case Nc.FRAG_DECRYPT_ERROR:case Nc.FRAG_LOAD_ERROR:case Nc.FRAG_LOAD_TIMEOUT:case Nc.KEY_LOAD_ERROR:case Nc.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Yp,e);break;case Nc.LEVEL_LOAD_ERROR:case Nc.LEVEL_LOAD_TIMEOUT:case Nc.LEVEL_PARSING_ERROR:e.levelRetry||this.state!==Gu||(null==(i=e.context)?void 0:i.type)!==Zp||(this.state=Ou);break;case Nc.BUFFER_APPEND_ERROR:case Nc.BUFFER_FULL_ERROR:if(!e.parent||"main"!==e.parent)return;if(e.details===Nc.BUFFER_APPEND_ERROR)return void this.resetLoadingState();this.reduceLengthAndFlushBuffer(e)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case Nc.INTERNAL_EXCEPTION:this.recoverWorkerError(e)}}checkBuffer(){const{media:t,gapController:e}=this;if(t&&e&&t.readyState){if(this.loadedmetadata||!fu.getBuffered(t).length){const t=this.state!==Ou?this.fragCurrent:null;e.poll(this.lastCurrentTime,t)}this.lastCurrentTime=t.currentTime}}onFragLoadEmergencyAborted(){this.state=Ou,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()}onBufferFlushed(t,{type:e}){if(e!==Jc||this.audioOnly&&!this.altAudio){const t=(e===Xc?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(t,e,Yp),this.tick()}}onLevelsUpdated(t,e){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level),this.levels=e.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:t}=this;if(!t)return;const e=t.currentTime;let i=this.startPosition;if(i>=0&&e<i){if(t.seeking)return void this.log(`could not seek to ${i}, already seeking at ${e}`);const s=fu.getBuffered(t),a=(s.length?s.start(0):0)-i;a>0&&(a<this.config.maxBufferHole||a<this.config.maxFragLookUpTolerance)&&(this.log(`adjusting start position by ${a} to match buffer start`),i+=a,this.startPosition=i),this.log(`seek to target start position ${i} from current time ${e}`),t.currentTime=i}}_getAudioCodec(t){let e=this.config.defaultAudioCodec||t.audioCodec;return this.audioCodecSwap&&e&&(this.log("Swapping audio codec"),e=-1!==e.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),e}_loadBitrateTestFrag(t,e){t.bitrateTest=!0,this._doFragLoad(t,e).then((i=>{const{hls:s}=this;if(!i||this.fragContextChanged(t))return;e.fragmentError=0,this.state=Ou,this.startFragRequested=!1,this.bitrateTest=!1;const a=t.stats;a.parsing.start=a.parsing.end=a.buffering.start=a.buffering.end=self.performance.now(),s.trigger(Fc.FRAG_LOADED,i),t.bitrateTest=!1}))}_handleTransmuxComplete(t){var e;const i="main",{hls:s}=this,{remuxResult:a,chunkMeta:r}=t,n=this.getCurrentContext(r);if(!n)return void this.resetWhenMissingContext(r);const{frag:o,part:l,level:d}=n,{video:c,text:h,id3:p,initSegment:g}=a,{details:u}=d,m=this.altAudio?void 0:a.audio;if(this.fragContextChanged(o))this.fragmentTracker.removeFragment(o);else{if(this.state=Nu,g){if(null!=g&&g.tracks){const t=o.initSegment||o;this._bufferInitSegment(d,g.tracks,t,r),s.trigger(Fc.FRAG_PARSING_INIT_SEGMENT,{frag:t,id:i,tracks:g.tracks})}const t=g.initPTS,e=g.timescale;Oc(t)&&(this.initPTS[o.cc]={baseTime:t,timescale:e},s.trigger(Fc.INIT_PTS_FOUND,{frag:o,id:i,initPTS:t,timescale:e}))}if(c&&u&&"initSegment"!==o.sn){const t=u.fragments[o.sn-1-u.startSN],e=o.sn===u.startSN,i=!t||o.cc>t.cc;if(!1!==a.independent){const{startPTS:t,endPTS:s,startDTS:a,endDTS:n}=c;if(l)l.elementaryStreams[c.type]={startPTS:t,endPTS:s,startDTS:a,endDTS:n};else if(c.firstKeyFrame&&c.independent&&1===r.id&&!i&&(this.couldBacktrack=!0),c.dropped&&c.independent){const a=this.getMainFwdBufferInfo(),r=(a?a.end:this.getLoadPosition())+this.config.maxBufferHole,l=c.firstKeyFramePTS?c.firstKeyFramePTS:t;if(!e&&r<l-this.config.maxBufferHole&&!i)return void this.backtrack(o);i&&(o.gap=!0),o.setElementaryStreamInfo(c.type,o.start,s,o.start,n,!0)}else e&&t>2&&(o.gap=!0);o.setElementaryStreamInfo(c.type,t,s,a,n),this.backtrackFragment&&(this.backtrackFragment=o),this.bufferFragmentData(c,o,l,r,e||i)}else{if(!e&&!i)return void this.backtrack(o);o.gap=!0}}if(m){const{startPTS:t,endPTS:e,startDTS:i,endDTS:s}=m;l&&(l.elementaryStreams[Jc]={startPTS:t,endPTS:e,startDTS:i,endDTS:s}),o.setElementaryStreamInfo(Jc,t,e,i,s),this.bufferFragmentData(m,o,l,r)}if(u&&null!=p&&null!=(e=p.samples)&&e.length){const t={id:i,frag:o,details:u,samples:p.samples};s.trigger(Fc.FRAG_PARSING_METADATA,t)}if(u&&h){const t={id:i,frag:o,details:u,samples:h.samples};s.trigger(Fc.FRAG_PARSING_USERDATA,t)}}}_bufferInitSegment(t,e,i,s){if(this.state!==Nu)return;this.audioOnly=!!e.audio&&!e.video,this.altAudio&&!this.audioOnly&&delete e.audio;const{audio:a,video:r,audiovideo:n}=e;if(a){let e=t.audioCodec;const i=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){e&&(e=-1!==e.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5");const t=a.metadata;t&&"channelCount"in t&&1!==(t.channelCount||1)&&-1===i.indexOf("firefox")&&(e="mp4a.40.5")}e&&-1!==e.indexOf("mp4a.40.5")&&-1!==i.indexOf("android")&&"audio/mpeg"!==a.container&&(e="mp4a.40.2",this.log(`Android: force audio codec to ${e}`)),t.audioCodec&&t.audioCodec!==e&&this.log(`Swapping manifest audio codec "${t.audioCodec}" for "${e}"`),a.levelCodec=e,a.id="main",this.log(`Init audio buffer, container:${a.container}, codecs[selected/level/parsed]=[${e||""}/${t.audioCodec||""}/${a.codec}]`)}r&&(r.levelCodec=t.videoCodec,r.id="main",this.log(`Init video buffer, container:${r.container}, codecs[level/parsed]=[${t.videoCodec||""}/${r.codec}]`)),n&&this.log(`Init audiovideo buffer, container:${n.container}, codecs[level/parsed]=[${t.codecs}/${n.codec}]`),this.hls.trigger(Fc.BUFFER_CODECS,e),Object.keys(e).forEach((t=>{const a=e[t].initSegment;null!=a&&a.byteLength&&this.hls.trigger(Fc.BUFFER_APPENDING,{type:t,data:a,frag:i,part:null,chunkMeta:s,parent:i.type})})),this.tickImmediate()}getMainFwdBufferInfo(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,Yp)}backtrack(t){this.couldBacktrack=!0,this.backtrackFragment=t,this.resetTransmuxer(),this.flushBufferGap(t),this.fragmentTracker.removeFragment(t),this.fragPrevious=null,this.nextLoadPosition=t.start,this.state=Ou}checkFragmentChanged(){const t=this.media;let e=null;if(t&&t.readyState>1&&!1===t.seeking){const i=t.currentTime;if(fu.isBuffered(t,i)?e=this.getAppendedFrag(i):fu.isBuffered(t,i+.1)&&(e=this.getAppendedFrag(i+.1)),e){this.backtrackFragment=null;const t=this.fragPlaying,i=e.level;t&&e.sn===t.sn&&t.level===i||(this.fragPlaying=e,this.hls.trigger(Fc.FRAG_CHANGED,{frag:e}),t&&t.level===i||this.hls.trigger(Fc.LEVEL_SWITCHED,{level:i}))}}}get nextLevel(){const t=this.nextBufferedFrag;return t?t.level:-1}get currentFrag(){const t=this.media;return t?this.fragPlaying||this.getAppendedFrag(t.currentTime):null}get currentProgramDateTime(){const t=this.media;if(t){const e=t.currentTime,i=this.currentFrag;if(i&&Oc(e)&&Oc(i.programDateTime)){const t=i.programDateTime+1e3*(e-i.start);return new Date(t)}}return null}get currentLevel(){const t=this.currentFrag;return t?t.level:-1}get nextBufferedFrag(){const t=this.currentFrag;return t?this.followingBufferedFrag(t):null}get forceStartLoad(){return this._forceStartLoad}}class ey{static get version(){return"1.5.17"}static isMSESupported(){return Jf()}static isSupported(){return function(){if(!Jf())return!1;const t=kp();return"function"==typeof(null==t?void 0:t.isTypeSupported)&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some((e=>t.isTypeSupported(Pp(e,"video"))))||["mp4a.40.2","fLaC"].some((e=>t.isTypeSupported(Pp(e,"audio")))))}()}static getMediaSource(){return kp()}static get Events(){return Fc}static get ErrorTypes(){return zc}static get ErrorDetails(){return Nc}static get DefaultConfig(){return ey.defaultConfig?ey.defaultConfig:Vf}static set DefaultConfig(t){ey.defaultConfig=t}constructor(t={}){this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this.started=!1,this._emitter=new Jm,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null,this.triggeringException=void 0,function(t,e){if("object"==typeof console&&!0===t||"object"==typeof t){Vc(t,"debug","log","info","warn","error");try{Hc.log(`Debug logs enabled for "${e}" in hls.js version 1.5.17`)}catch(i){Hc=Bc}}else Hc=Bc}(t.debug||!1,"Hls instance");const e=this.config=function(t,e){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==e.liveMaxLatencyDurationCount&&(void 0===e.liveSyncDurationCount||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==e.liveMaxLatencyDuration&&(void 0===e.liveSyncDuration||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const i=Gf(t),s=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return["manifest","level","frag"].forEach((t=>{const a=`${"level"===t?"playlist":t}LoadPolicy`,r=void 0===e[a],n=[];s.forEach((s=>{const o=`${t}Loading${s}`,l=e[o];if(void 0!==l&&r){n.push(o);const t=i[a].default;switch(e[a]={default:t},s){case"TimeOut":t.maxLoadTimeMs=l,t.maxTimeToFirstByteMs=l;break;case"MaxRetry":t.errorRetry.maxNumRetry=l,t.timeoutRetry.maxNumRetry=l;break;case"RetryDelay":t.errorRetry.retryDelayMs=l,t.timeoutRetry.retryDelayMs=l;break;case"MaxRetryTimeout":t.errorRetry.maxRetryDelayMs=l,t.timeoutRetry.maxRetryDelayMs=l}}})),n.length&&Gc.warn(`hls.js config: "${n.join('", "')}" setting(s) are deprecated, use "${a}": ${JSON.stringify(e[a])}`)})),Mc(Mc({},i),e)}(ey.DefaultConfig,t);this.userConfig=t,e.progressive&&qf(e);const{abrController:i,bufferController:s,capLevelController:a,errorController:r,fpsController:n}=e,o=new r(this),l=this.abrController=new i(this),d=this.bufferController=new s(this),c=this.capLevelController=new a(this),h=new n(this),p=new eg(this),g=new ug(this),u=e.contentSteeringController,m=u?new u(this):null,v=this.levelController=new Kf(this,m),f=new gu(this),y=new Yf(this.config),b=this.streamController=new ty(this,f,y);c.setStreamController(b),h.setStreamController(b);const w=[p,v,b];m&&w.splice(1,0,m),this.networkControllers=w;const x=[l,d,c,h,g,f];this.audioTrackController=this.createController(e.audioTrackController,w);const k=e.audioStreamController;k&&w.push(new k(this,f,y)),this.subtitleTrackController=this.createController(e.subtitleTrackController,w);const S=e.subtitleStreamController;S&&w.push(new S(this,f,y)),this.createController(e.timelineController,x),y.emeController=this.emeController=this.createController(e.emeController,x),this.cmcdController=this.createController(e.cmcdController,x),this.latencyController=this.createController(mg,x),this.coreComponents=x,w.push(o);const _=o.onErrorOut;"function"==typeof _&&this.on(Fc.ERROR,_,o)}createController(t,e){if(t){const i=new t(this);return e&&e.push(i),i}return null}on(t,e,i=this){this._emitter.on(t,e,i)}once(t,e,i=this){this._emitter.once(t,e,i)}removeAllListeners(t){this._emitter.removeAllListeners(t)}off(t,e,i=this,s){this._emitter.off(t,e,i,s)}listeners(t){return this._emitter.listeners(t)}emit(t,e,i){return this._emitter.emit(t,e,i)}trigger(t,e){if(this.config.debug)return this.emit(t,t,e);try{return this.emit(t,t,e)}catch(i){if(Gc.error("An internal error happened while handling event "+t+'. Error message: "'+i.message+'". Here is a stacktrace:',i),!this.triggeringException){this.triggeringException=!0;const e=t===Fc.ERROR;this.trigger(Fc.ERROR,{type:zc.OTHER_ERROR,details:Nc.INTERNAL_EXCEPTION,fatal:e,event:t,error:i}),this.triggeringException=!1}}return!1}listenerCount(t){return this._emitter.listenerCount(t)}destroy(){Gc.log("destroy"),this.trigger(Fc.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach((t=>t.destroy())),this.networkControllers.length=0,this.coreComponents.forEach((t=>t.destroy())),this.coreComponents.length=0;const t=this.config;t.xhrSetup=t.fetchSetup=void 0,this.userConfig=null}attachMedia(t){Gc.log("attachMedia"),this._media=t,this.trigger(Fc.MEDIA_ATTACHING,{media:t})}detachMedia(){Gc.log("detachMedia"),this.trigger(Fc.MEDIA_DETACHING,void 0),this._media=null}loadSource(t){this.stopLoad();const e=this.media,i=this.url,s=this.url=Ec.buildAbsoluteURL(self.location.href,t,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,Gc.log(`loadSource:${s}`),e&&i&&(i!==s||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(e)),this.trigger(Fc.MANIFEST_LOADING,{url:t})}startLoad(t=-1){Gc.log(`startLoad(${t})`),this.started=!0,this.networkControllers.forEach((e=>{e.startLoad(t)}))}stopLoad(){Gc.log("stopLoad"),this.started=!1,this.networkControllers.forEach((t=>{t.stopLoad()}))}resumeBuffering(){this.started&&this.networkControllers.forEach((t=>{"fragmentLoader"in t&&t.startLoad(-1)}))}pauseBuffering(){this.networkControllers.forEach((t=>{"fragmentLoader"in t&&t.stopLoad()}))}swapAudioCodec(){Gc.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){Gc.log("recoverMediaError");const t=this._media;this.detachMedia(),t&&this.attachMedia(t)}removeLevel(t){this.levelController.removeLevel(t)}get levels(){const t=this.levelController.levels;return t||[]}get currentLevel(){return this.streamController.currentLevel}set currentLevel(t){Gc.log(`set currentLevel:${t}`),this.levelController.manualLevel=t,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(t){Gc.log(`set nextLevel:${t}`),this.levelController.manualLevel=t,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(t){Gc.log(`set loadLevel:${t}`),this.levelController.manualLevel=t}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(t){this.levelController.nextLoadLevel=t}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(t){Gc.log(`set firstLevel:${t}`),this.levelController.firstLevel=t}get startLevel(){const t=this.levelController.startLevel;return-1===t&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:t}set startLevel(t){Gc.log(`set startLevel:${t}`),-1!==t&&(t=Math.max(t,this.minAutoLevel)),this.levelController.startLevel=t}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(t){const e=!!t;e!==this.config.capLevelToPlayerSize&&(e?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=e)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:t}=this.abrController;return t?t.getEstimate():NaN}set bandwidthEstimate(t){this.abrController.resetEstimator(t)}get ttfbEstimate(){const{bwEstimator:t}=this.abrController;return t?t.getEstimateTTFB():NaN}set autoLevelCapping(t){this._autoLevelCapping!==t&&(Gc.log(`set autoLevelCapping:${t}`),this._autoLevelCapping=t,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(t){(function(t){return vg.indexOf(t)>-1})(t)&&this._maxHdcpLevel!==t&&(this._maxHdcpLevel=t,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return-1===this.levelController.manualLevel}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:t,config:{minAutoBitrate:e}}=this;if(!t)return 0;const i=t.length;for(let s=0;s<i;s++)if(t[s].maxBitrate>=e)return s;return 0}get maxAutoLevel(){const{levels:t,autoLevelCapping:e,maxHdcpLevel:i}=this;let s;if(s=-1===e&&null!=t&&t.length?t.length-1:e,i)for(let a=s;a--;){const e=t[a].attrs["HDCP-LEVEL"];if(e&&e<=i)return a}return s}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(t){this.abrController.nextAutoLevel=t}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}setAudioOption(t){var e;return null==(e=this.audioTrackController)?void 0:e.setAudioOption(t)}setSubtitleOption(t){var e;return null==(e=this.subtitleTrackController)||e.setSubtitleOption(t),null}get allAudioTracks(){const t=this.audioTrackController;return t?t.allAudioTracks:[]}get audioTracks(){const t=this.audioTrackController;return t?t.audioTracks:[]}get audioTrack(){const t=this.audioTrackController;return t?t.audioTrack:-1}set audioTrack(t){const e=this.audioTrackController;e&&(e.audioTrack=t)}get allSubtitleTracks(){const t=this.subtitleTrackController;return t?t.allSubtitleTracks:[]}get subtitleTracks(){const t=this.subtitleTrackController;return t?t.subtitleTracks:[]}get subtitleTrack(){const t=this.subtitleTrackController;return t?t.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(t){const e=this.subtitleTrackController;e&&(e.subtitleTrack=t)}get subtitleDisplay(){const t=this.subtitleTrackController;return!!t&&t.subtitleDisplay}set subtitleDisplay(t){const e=this.subtitleTrackController;e&&(e.subtitleDisplay=t)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(t){this.config.lowLatencyMode=t}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}}function iy(t){const e=Math.floor(t/3600),i=Math.floor(t%3600/60),s=Math.floor(t%60);return e>0?`${e}:${i.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`:`${i}:${s.toString().padStart(2,"0")}`}ey.defaultConfig=void 0;const sy=class{constructor(t){vt(this,t),this.dyteAPIError=k(this,"dyteAPIError",7),this.statsIntervalTimer=null,this.hideControlsTimeout=null,this.livestreamUpdateListener=t=>{this.playbackUrl=this.meeting.livestream.playbackUrl,this.livestreamState=t},this.updateProgress=()=>{this.currentTime=this.videoRef.currentTime},this.updateHlsStatsPeriodically=()=>{var t,e;this.duration=((null===(t=this.videoRef)||void 0===t?void 0:t.currentTime)||0)+((null===(e=this.hls)||void 0===e?void 0:e.latency)||0)},this.fastForwardToLatest=()=>{this.videoRef.currentTime=this.duration-1},this.togglePlay=()=>{this.videoRef.paused?(this.videoRef.play(),this.playerState=bi.PLAYING):(this.videoRef.pause(),this.playerState=bi.IDLE)},this.changeQuality=t=>{this.selectedQuality=t,this.hls&&(this.hls.currentLevel=t)},this.cleanupPlayer=()=>{var t;this.playerState=bi.IDLE,this.videoRef&&(null===(t=this.hls)||void 0===t||t.destroy(),this.hls=null)},this.onMouseMovePlayer=()=>{this.hideControls=!1,clearTimeout(this.hideControlsTimeout),this.hideControlsTimeout=setTimeout((()=>{this.hideControls=!0}),5e3)},this.getLoadingState=()=>{let t="",e=!1,i=!1;switch(this.livestreamState){case"IDLE":t=this.t("livestream.idle"),e=!0,i=!1;break;case"STARTING":t=this.t("livestream.starting"),e=!0,i=!0;break;case"STOPPING":t=this.t("livestream.stopping"),e=!0,i=!0;break;case"LIVESTREAMING":this.playerState!==bi.PLAYING&&this.playerState!==bi.PAUSED&&(t=this.t("livestream.starting"),i=!0,e=!0);break;default:e=!1,t=this.t(""),i=!0}return{isLoading:e,loadingMessage:t,showIcon:i}},this.getErrorState=()=>{var t,e;let i=!1,s="";return"LIVESTREAMING"!==this.livestreamState?(i=!1,s=this.t(""),{isError:i,errorMessage:s}):(this.isSupported||(i=!0,s=this.t("livestream.error.not_supported")),this.playbackUrl||(i=!0,s=this.t("livestream.error.not_found")),this.playerError&&(i=!0,s=this.t(null!==(e=null===(t=this.playerError)||void 0===t?void 0:t.message)&&void 0!==e?e:"livestream.error.unknown")),{isError:i,errorMessage:s})},this.initialiseAndPlayStream=async()=>{try{this.meeting.__internals__.logger.info(`dyte-livestream-player:: About to initialise HLS. VideoRef? ${!!this.videoRef} playbackUrl: ${this.playbackUrl}`),ey.isSupported()?(this.meeting.__internals__.logger.info("dyte-livestream-player:: Initialising HLS. HLS is Supported"),this.hls=new ey({lowLatencyMode:!1}),window.dyte_hls=this.hls,this.meeting.__internals__.logger.info("dyte-livestream-player:: Loading source"),this.hls.loadSource(this.playbackUrl),this.meeting.__internals__.logger.info("dyte-livestream-player:: Attaching video element to HLS"),this.hls.attachMedia(this.videoRef),this.meeting.__internals__.logger.info("dyte-livestream-player:: Waiting async for HLS manifest parsing"),this.hls.on(ey.Events.ERROR,((t,e)=>{if(e.fatal){if(this.meeting.__internals__.logger.error(`dyte-livestream-player:: fatal error: ${e.details}`,{error:e.error}),this.playbackUrl&&"LIVESTREAMING"===this.livestreamState)return void setTimeout((()=>{this.playbackUrl&&"LIVESTREAMING"===this.livestreamState&&(this.meeting.__internals__.logger.info("dyte-livestream-player:: Retrying playbackUrl"),this.hls.loadSource(this.playbackUrl))}),5e3)}else this.meeting.__internals__.logger.warn(`dyte-livestream-player:: non-fatal error: ${e.details}`,{error:e.error})})),this.hls.on(ey.Events.MEDIA_ATTACHED,(()=>{this.meeting.__internals__.logger.info("dyte-livestream-player:: media attached")})),this.hls.on(ey.Events.MEDIA_DETACHED,(()=>{this.meeting.__internals__.logger.info("dyte-livestream-player:: media detached")})),this.hls.on(ey.Events.DESTROYING,(()=>{this.meeting.__internals__.logger.info("dyte-livestream-player:: hls is getting destroyed")})),this.hls.on(ey.Events.MANIFEST_PARSED,(async(t,e)=>{this.meeting.__internals__.logger.info("dyte-livestream-player:: HLS manifest parsed");const{levels:i,autoLevelChangeAllowed:s}=function({meeting:t,hlsLevels:e}){let i=t.self.config.livestreamViewerQualities||[];if(!i.length)return{autoLevelChangeAllowed:!0,levels:e};const s=e.filter((t=>i.includes(t.height)));return s.length?{autoLevelChangeAllowed:!1,levels:s}:{autoLevelChangeAllowed:!0,levels:e}}({meeting:this.meeting,hlsLevels:e.levels});this.qualityLevels=i.map(((t,e)=>({level:e,resolution:t.height?`${t.height}p`:"auto"}))),s&&(this.qualityLevels=[{level:-1,resolution:"Auto"},...this.qualityLevels]),this.hls.currentLevel=this.qualityLevels[0].level;try{this.meeting.__internals__.logger.info("dyte-livestream-player:: About to start video."),await this.videoRef.play(),this.meeting.__internals__.logger.info("dyte-livestream-player:: Video has started playing."),this.playerState=bi.PLAYING}catch(a){this.audioPlaybackError=!0,this.meeting.__internals__.logger.error("dyte-livestream-player:: Video couldn't start. Trying with user gesture again.",{error:a})}})),this.videoRef.addEventListener("timeupdate",this.updateProgress),this.statsIntervalTimer=setInterval(this.updateHlsStatsPeriodically,1e3)):this.isSupported=!1}catch(t){this.meeting.__internals__.logger.error("dyte-livestream-player:: HLS couldn't initialise.",{error:t})}},this.meeting=void 0,this.size=void 0,this.t=ns(),this.iconPack=ts,this.playbackUrl=void 0,this.isSupported=!0,this.playerState=bi.IDLE,this.livestreamState="IDLE",this.playerError=void 0,this.livestreamId=null,this.audioPlaybackError=!1,this.qualityLevels=[],this.selectedQuality=-1,this.currentTime=0,this.duration=0,this.hideControls=!0}async updateLivestreamId(){const t=this.meeting.livestream.playbackUrl;if(!t||"LIVESTREAMING"!==this.livestreamState)return this.playbackUrl=null,this.livestreamId=null,void this.cleanupPlayer();const e=t.split("/"),i=e.findIndex((t=>"manifest"===t)),s=e[i-1];this.livestreamId=s,await this.conditionallyStartLivestreamViewer()}async conditionallyStartLivestreamViewer(){this.videoRef&&this.playbackUrl&&!this.hls&&await this.initialiseAndPlayStream()}async connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){this.meeting.livestream.removeListener("livestreamUpdate",this.livestreamUpdateListener),this.videoRef.removeEventListener("timeupdate",this.updateProgress),clearInterval(this.statsIntervalTimer),this.videoRef=null,this.hls&&this.hls.destroy(),window.dyte_hls=null}meetingChanged(t){null!=t&&(this.playbackUrl=this.meeting.livestream.playbackUrl,this.livestreamState=this.meeting.livestream.state,this.meeting.livestream.on("livestreamUpdate",this.livestreamUpdateListener))}render(){var t,e;if(!yi(this.meeting))return;const{isError:i,errorMessage:s}=this.getErrorState(),{isLoading:a,loadingMessage:r,showIcon:n}=this.getLoadingState();return m(f,null,m("div",{class:"player-container h-full max-h-full min-h-full w-full min-w-full max-w-full"},m("div",{ref:async t=>{this.videoContainerRef=t},class:"video-container relative flex h-full w-full flex-col items-center justify-center pb-20"},m("video",{onMouseMove:this.onMouseMovePlayer,ref:async t=>{this.videoRef=t,await this.conditionallyStartLivestreamViewer()},id:"livestream-video",style:{height:`${null===(t=this.el)||void 0===t?void 0:t.clientHeight}px`},controls:!1,onPlay:()=>{this.playerState===bi.PAUSED&&(this.playerState=bi.PLAYING)},onPause:()=>this.playerState=bi.PAUSED}),this.playerState!==bi.IDLE&&!this.hideControls&&m("div",{class:"control-bar",style:{width:`${null===(e=this.videoRef)||void 0===e?void 0:e.clientWidth}px`}},m("div",{class:"control-groups"},m("dyte-icon",{id:"playPause",onClick:this.togglePlay,size:"lg",class:"control-btn",icon:this.playerState===bi.PLAYING?this.iconPack.pause:this.iconPack.play}),m("dyte-icon",{size:"lg",class:"control-btn",icon:this.iconPack.fastForward,onClick:this.fastForwardToLatest}),m("span",{class:"timings"},iy(this.currentTime)," /"," ",iy(this.duration))),m("div",{class:"control-groups"},m("select",{class:"level-select",onChange:t=>this.changeQuality(parseInt(t.target.value))},this.qualityLevels.map((t=>m("option",{value:t.level,selected:this.selectedQuality===t.level},t.resolution)))),m("dyte-fullscreen-toggle",{id:"fullscreen",class:"control-btn fullscreen-btn",targetElement:this.videoContainerRef,size:"sm",iconPack:this.iconPack,t:this.t,ref:t=>{var e;const i=document.createElement("style");i.textContent="\n                        dyte-controlbar-button {\n                          display: contents;\n                          background-color: var(--bg-brand-500);\n                          color: var(--text-text-on-brand);\n                        }\n                      ",null===(e=null==t?void 0:t.shadowRoot)||void 0===e||e.appendChild(i)}})))),this.audioPlaybackError&&m("div",{class:"unmute-popup"},m("h3",null,this.t("audio_playback.title")),m("p",null,this.t("audio_playback.description")),m("dyte-button",{kind:"wide",onClick:()=>{this.audioPlaybackError=!1,this.videoRef&&(this.videoRef.muted=!1,this.videoRef.play(),this.playerState=bi.PLAYING)},title:this.t("audio_playback"),iconPack:this.iconPack,t:this.t},this.t("audio_playback"))),i&&m("div",{class:"loader"},m("dyte-icon",{icon:this.iconPack.warning,t:this.t}),m("p",null,s)),!i&&a&&m("div",{class:"loader"},n&&m("dyte-spinner",{id:"icon",part:"spinner",iconPack:this.iconPack,t:this.t,size:"md"}),m("p",null,r))))}get el(){return x(this)}static get watchers(){return{livestreamState:["updateLivestreamId"],meeting:["meetingChanged"]}}};sy.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:100%;max-height:100%;min-height:100%;width:100%;min-width:100%;max-width:100%;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}.player-container{position:relative;margin:var(--dyte-space-4, 16px);display:flex;flex-grow:1;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-md, 8px)}.loader{position:absolute;z-index:10;height:100%;width:100%;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));display:flex;flex-direction:column;align-items:center;justify-content:center}p{margin-top:var(--dyte-space-1, 4px);margin-bottom:var(--dyte-space-1, 4px);font-size:16px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.unmute-popup{position:absolute;z-index:30 !important;display:flex;width:var(--dyte-space-72, 288px);flex-direction:column;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));padding:var(--dyte-space-4, 16px);text-align:center;max-width:70%}.unmute-popup h3{margin:var(--dyte-space-0, 0px);font-size:16px;font-weight:500}.unmute-popup p{margin-top:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-3, 12px);font-size:14px}.control-bar{position:absolute;bottom:0;display:flex;height:auto;justify-content:space-between;align-items:center;padding:10px 10px 0px 10px;z-index:10;}.timings{color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.control-btn{border:none;margin-right:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)));cursor:pointer;font-size:24px;height:30px;width:30px}.fullscreen-btn{margin-right:20px;height:30px}.control-btn:hover{opacity:0.8}.control-btn:focus{outline:none}.control-groups{display:flex;align-items:center;justify-content:space-around}#livestream-video{aspect-ratio:16/9;max-width:100%;min-width:100%;left:var(--dyte-space-0, 0px);z-index:20;aspect-ratio:16 / 9;width:auto;border-radius:var(--dyte-border-radius-md, 8px);border-width:0px}.level-select{border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)));border:none;padding:5px 10px;font-size:14px;height:30px;cursor:pointer;border-radius:5px;margin-right:10px}.level-select:focus{outline:none}.level-select option{border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.volume-control-holder{display:flex;justify-content:center;align-items:center}";const ay=class{constructor(t){vt(this,t),this.disconnectMeeting=t=>{var e;null!=t&&null!=this.countListener&&(null===(e=t.livestream)||void 0===e||e.removeListener("viewerCountUpdate",this.countListener))},this.meeting=void 0,this.variant="primary",this.iconPack=ts,this.t=ns(),this.viewerCount=0}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){this.disconnectMeeting(this.meeting)}meetingChanged(t,e){var i;this.disconnectMeeting(e),null!=t&&(this.countListener=()=>{var e;this.viewerCount=null===(e=t.livestream)||void 0===e?void 0:e.viewerCount},this.countListener(),null===(i=t.livestream)||void 0===i||i.addListener("viewerCountUpdate",this.countListener))}render(){return yi(this.meeting)?m(f,{tabIndex:0,role:"log","aria-label":`${this.viewerCount} ${this.t("viewers")}`},m("dyte-icon",{icon:this.iconPack.viewers,tabIndex:-1,"aria-hidden":!0,part:"icon",iconPack:this.iconPack,t:this.t}),this.viewerCount," ",this.t("viewers")):null}static get watchers(){return{meeting:["meetingChanged"]}}};ay.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);display:inline-flex;height:var(--dyte-space-10, 40px);-webkit-user-select:none;-moz-user-select:none;user-select:none;align-items:center;font-size:14px}:host([size='sm']){margin-left:var(--dyte-space-1, 4px);margin-right:var(--dyte-space-1, 4px);font-size:12px}dyte-icon{margin-right:var(--dyte-space-1, 4px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}:host([size='sm']) dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}:host([variant='embedded']){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));opacity:0.5;margin-top:var(--dyte-space-1, 4px);margin-left:var(--dyte-space-1, 4px);height:var(--dyte-space-5, 20px);border-radius:var(--dyte-border-radius-sm, 4px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);font-size:12px}:host([variant='embedded']) dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}";var ry=Object.freeze({__proto__:null,dyte_livestream_indicator:Pc,dyte_livestream_player:sy,dyte_viewer_count:ay});const ny=class{constructor(t){vt(this,t),this.participant=void 0,this.meeting=void 0,this.size=void 0,this.isScreenShare=!1,this.variant="default",this.iconPack=ts,this.t=ns(),this.length=13}sizeChanged(t){this.length="sm"===t?8:13}formatNameTag(t,e){return this.isScreenShare?e?`${this.t("screen")} - ${Ia(t,this.length-3)} (${this.t("you")})`:`${this.t("screen")} - ${Ia(t,this.length)}`:e?`${Ia(t,this.length-3)} (${this.t("you")})`:Ia(t,this.length)}render(){var t,e,i;const s=Ua((null===(t=this.participant)||void 0===t?void 0:t.name)||""),a=(null===(e=this.participant)||void 0===e?void 0:e.id)===(null===(i=this.meeting)||void 0===i?void 0:i.self.id);return m(f,{title:s},m("slot",{name:"start"}),m("span",{class:"name"},this.formatNameTag(s,a)),m("slot",{name:"end"}))}static get watchers(){return{size:["sizeChanged"]}}};ny.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:inline-flex;-webkit-user-select:none;-moz-user-select:none;user-select:none;align-items:center;padding-top:var(--dyte-space-1, 4px);padding-bottom:var(--dyte-space-1, 4px);padding-left:var(--dyte-space-1\\.5, 6px);padding-right:var(--dyte-space-1\\.5, 6px);font-size:14px;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}span.name{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}::slotted(dyte-audio-visualizer[slot='start']){margin-right:var(--dyte-space-1\\.5, 6px)}::slotted(dyte-audio-visualizer[slot='end']){margin-left:var(--dyte-space-1\\.5, 6px)}:host([size='sm']){font-size:12px;--tw-bg-opacity:0.6}:host([variant='text']){background-color:transparent;padding:var(--dyte-space-0, 0px)}";var oy=Object.freeze({__proto__:null,dyte_name_tag:ny});function ly(t){return t.split("-")[0]}function dy(t){return t.split("-")[1]}function cy(t){return["top","bottom"].includes(ly(t))?"x":"y"}function hy(t){return"y"===t?"height":"width"}function py(t,e,i){let{reference:s,floating:a}=t;const r=s.x+s.width/2-a.width/2,n=s.y+s.height/2-a.height/2,o=cy(e),l=hy(o),d=s[l]/2-a[l]/2,c="x"===o;let h;switch(ly(e)){case"top":h={x:r,y:s.y-a.height};break;case"bottom":h={x:r,y:s.y+s.height};break;case"right":h={x:s.x+s.width,y:n};break;case"left":h={x:s.x-a.width,y:n};break;default:h={x:s.x,y:s.y}}switch(dy(e)){case"start":h[o]-=d*(i&&c?-1:1);break;case"end":h[o]+=d*(i&&c?-1:1)}return h}function gy(t){return"number"!=typeof t?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(t):{top:t,right:t,bottom:t,left:t}}function uy(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function my(t,e){var i;void 0===e&&(e={});const{x:s,y:a,platform:r,rects:n,elements:o,strategy:l}=t,{boundary:d="clippingAncestors",rootBoundary:c="viewport",elementContext:h="floating",altBoundary:p=!1,padding:g=0}=e,u=gy(g),m=o[p?"floating"===h?"reference":"floating":h],v=uy(await r.getClippingRect({element:null==(i=await(null==r.isElement?void 0:r.isElement(m)))||i?m:m.contextElement||await(null==r.getDocumentElement?void 0:r.getDocumentElement(o.floating)),boundary:d,rootBoundary:c,strategy:l})),f="floating"===h?{...n.floating,x:s,y:a}:n.reference,y=await(null==r.getOffsetParent?void 0:r.getOffsetParent(o.floating)),b=await(null==r.isElement?void 0:r.isElement(y))&&await(null==r.getScale?void 0:r.getScale(y))||{x:1,y:1},w=uy(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({rect:f,offsetParent:y,strategy:l}):f);return{top:(v.top-w.top+u.top)/b.y,bottom:(w.bottom-v.bottom+u.bottom)/b.y,left:(v.left-w.left+u.left)/b.x,right:(w.right-v.right+u.right)/b.x}}const vy=Math.min,fy=Math.max;function yy(t,e,i){return fy(t,vy(e,i))}const by={left:"right",right:"left",bottom:"top",top:"bottom"};function wy(t){return t.replace(/left|right|bottom|top/g,(t=>by[t]))}function xy(t,e,i){void 0===i&&(i=!1);const s=dy(t),a=cy(t),r=hy(a);let n="x"===a?s===(i?"end":"start")?"right":"left":"start"===s?"bottom":"top";return e.reference[r]>e.floating[r]&&(n=wy(n)),{main:n,cross:wy(n)}}const ky={start:"end",end:"start"};function Sy(t){return t.replace(/start|end/g,(t=>ky[t]))}const _y=["top","right","bottom","left"],Cy=_y.reduce(((t,e)=>t.concat(e,e+"-start",e+"-end")),[]);const Py=function(t){return void 0===t&&(t={}),{name:"autoPlacement",options:t,async fn(e){var i,s,a,r,n;const{x:o,y:l,rects:d,middlewareData:c,placement:h,platform:p,elements:g}=e,{alignment:u,allowedPlacements:m=Cy,autoAlignment:v=!0,...f}=t,y=void 0!==u||m===Cy?function(t,e,i){return(t?[...i.filter((e=>dy(e)===t)),...i.filter((e=>dy(e)!==t))]:i.filter((t=>ly(t)===t))).filter((i=>!t||dy(i)===t||!!e&&Sy(i)!==i))}(u||null,v,m):m,b=await my(e,f),w=null!=(i=null==(s=c.autoPlacement)?void 0:s.index)?i:0,x=y[w];if(null==x)return{};const{main:k,cross:S}=xy(x,d,await(null==p.isRTL?void 0:p.isRTL(g.floating)));if(h!==x)return{x:o,y:l,reset:{placement:y[0]}};const _=[b[ly(x)],b[k],b[S]],C=[...null!=(a=null==(r=c.autoPlacement)?void 0:r.overflows)?a:[],{placement:x,overflows:_}],P=y[w+1];if(P)return{data:{index:w+1,overflows:C},reset:{placement:P}};const L=C.slice().sort(((t,e)=>t.overflows[0]-e.overflows[0])),T=null==(n=L.find((t=>{let{overflows:e}=t;return e.every((t=>t<=0))})))?void 0:n.placement,E=null!=T?T:L[0].placement;return E!==h?{data:{index:w+1,overflows:C},reset:{placement:E}}:{}}}};const Ly=function(t){return void 0===t&&(t={}),{name:"flip",options:t,async fn(e){var i;const{placement:s,middlewareData:a,rects:r,initialPlacement:n,platform:o,elements:l}=e,{mainAxis:d=!0,crossAxis:c=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",flipAlignment:g=!0,...u}=t,m=ly(s),v=h||(m===n||!g?[wy(n)]:function(t){const e=wy(t);return[Sy(t),e,Sy(e)]}(n)),f=[n,...v],y=await my(e,u),b=[];let w=(null==(i=a.flip)?void 0:i.overflows)||[];if(d&&b.push(y[m]),c){const{main:t,cross:e}=xy(s,r,await(null==o.isRTL?void 0:o.isRTL(l.floating)));b.push(y[t],y[e])}if(w=[...w,{placement:s,overflows:b}],!b.every((t=>t<=0))){var x,k;const t=(null!=(x=null==(k=a.flip)?void 0:k.index)?x:0)+1,e=f[t];if(e)return{data:{index:t,overflows:w},reset:{placement:e}};let i="bottom";switch(p){case"bestFit":{var S;const t=null==(S=w.map((t=>[t,t.overflows.filter((t=>t>0)).reduce(((t,e)=>t+e),0)])).sort(((t,e)=>t[1]-e[1]))[0])?void 0:S[0].placement;t&&(i=t);break}case"initialPlacement":i=n}if(s!==i)return{reset:{placement:i}}}return{}}}};function Ty(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Ey(t){return _y.some((e=>t[e]>=0))}const Ay=function(t){return void 0===t&&(t=0),{name:"offset",options:t,async fn(e){const{x:i,y:s}=e,a=await async function(t,e){const{placement:i,platform:s,elements:a}=t,r=await(null==s.isRTL?void 0:s.isRTL(a.floating)),n=ly(i),o=dy(i),l="x"===cy(i),d=["left","top"].includes(n)?-1:1,c=r&&l?-1:1,h="function"==typeof e?e(t):e;let{mainAxis:p,crossAxis:g,alignmentAxis:u}="number"==typeof h?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...h};return o&&"number"==typeof u&&(g="end"===o?-1*u:u),l?{x:g*c,y:p*d}:{x:p*d,y:g*c}}(e,t);return{x:i+a.x,y:s+a.y,data:a}}}};const My=function(t){return void 0===t&&(t={}),{name:"shift",options:t,async fn(e){const{x:i,y:s,placement:a}=e,{mainAxis:r=!0,crossAxis:n=!1,limiter:o={fn:t=>{let{x:e,y:i}=t;return{x:e,y:i}}},...l}=t,d={x:i,y:s},c=await my(e,l),h=cy(ly(a)),p="x"===h?"y":"x";let g=d[h],u=d[p];if(r){const t="y"===h?"bottom":"right";g=yy(g+c["y"===h?"top":"left"],g,g-c[t])}if(n){const t="y"===p?"bottom":"right";u=yy(u+c["y"===p?"top":"left"],u,u-c[t])}const m=o.fn({...e,[h]:g,[p]:u});return{...m,data:{x:m.x-i,y:m.y-s}}}}};function Ry(t){var e;return(null==(e=t.ownerDocument)?void 0:e.defaultView)||window}function Dy(t){return Ry(t).getComputedStyle(t)}function Iy(t){return zy(t)?(t.nodeName||"").toLowerCase():""}let Oy;function $y(){if(Oy)return Oy;const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?(Oy=t.brands.map((t=>t.brand+"/"+t.version)).join(" "),Oy):navigator.userAgent}function Uy(t){return t instanceof Ry(t).HTMLElement}function Fy(t){return t instanceof Ry(t).Element}function zy(t){return t instanceof Ry(t).Node}function Ny(t){if("undefined"==typeof ShadowRoot)return!1;return t instanceof Ry(t).ShadowRoot||t instanceof ShadowRoot}function jy(t){const{overflow:e,overflowX:i,overflowY:s,display:a}=Dy(t);return/auto|scroll|overlay|hidden|clip/.test(e+s+i)&&!["inline","contents"].includes(a)}function By(t){return["table","td","th"].includes(Iy(t))}function Hy(t){const e=/firefox/i.test($y()),i=Dy(t),s=i.backdropFilter||i.WebkitBackdropFilter;return"none"!==i.transform||"none"!==i.perspective||!!s&&"none"!==s||e&&"filter"===i.willChange||e&&!!i.filter&&"none"!==i.filter||["transform","perspective"].some((t=>i.willChange.includes(t)))||["paint","layout","strict","content"].some((t=>{const e=i.contain;return null!=e&&e.includes(t)}))}function Vy(){return!/^((?!chrome|android).)*safari/i.test($y())}function Gy(t){return["html","body","#document"].includes(Iy(t))}const qy=Math.min,Zy=Math.max,Ky=Math.round;function Wy(t){const e=Dy(t);let i=parseFloat(e.width),s=parseFloat(e.height);const a=t.offsetWidth,r=t.offsetHeight,n=Ky(i)!==a||Ky(s)!==r;return n&&(i=a,s=r),{width:i,height:s,fallback:n}}function Yy(t){return Fy(t)?t:t.contextElement}const Qy={x:1,y:1};function Jy(t){const e=Yy(t);if(!Uy(e))return Qy;const i=e.getBoundingClientRect(),{width:s,height:a,fallback:r}=Wy(e);let n=(r?Ky(i.width):i.width)/s,o=(r?Ky(i.height):i.height)/a;return n&&Number.isFinite(n)||(n=1),o&&Number.isFinite(o)||(o=1),{x:n,y:o}}function Xy(t,e,i,s){var a,r;void 0===e&&(e=!1),void 0===i&&(i=!1);const n=t.getBoundingClientRect(),o=Yy(t);let l=Qy;e&&(s?Fy(s)&&(l=Jy(s)):l=Jy(t));const d=o?Ry(o):window,c=!Vy()&&i;let h=(n.left+(c&&(null==(a=d.visualViewport)?void 0:a.offsetLeft)||0))/l.x,p=(n.top+(c&&(null==(r=d.visualViewport)?void 0:r.offsetTop)||0))/l.y,g=n.width/l.x,u=n.height/l.y;if(o){const t=Ry(o),e=s&&Fy(s)?Ry(s):s;let i=t.frameElement;for(;i&&s&&e!==t;){const t=Jy(i),e=i.getBoundingClientRect(),s=getComputedStyle(i);e.x+=(i.clientLeft+parseFloat(s.paddingLeft))*t.x,e.y+=(i.clientTop+parseFloat(s.paddingTop))*t.y,h*=t.x,p*=t.y,g*=t.x,u*=t.y,h+=e.x,p+=e.y,i=Ry(i).frameElement}}return{width:g,height:u,top:p,right:h+g,bottom:p+u,left:h,x:h,y:p}}function tb(t){return((zy(t)?t.ownerDocument:t.document)||window.document).documentElement}function eb(t){return Fy(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function ib(t){return Xy(tb(t)).left+eb(t).scrollLeft}function sb(t,e,i){const s=Uy(e),a=tb(e),r=Xy(t,!0,"fixed"===i,e);let n={scrollLeft:0,scrollTop:0};const o={x:0,y:0};if(s||!s&&"fixed"!==i)if(("body"!==Iy(e)||jy(a))&&(n=eb(e)),Uy(e)){const t=Xy(e,!0);o.x=t.x+e.clientLeft,o.y=t.y+e.clientTop}else a&&(o.x=ib(a));return{x:r.left+n.scrollLeft-o.x,y:r.top+n.scrollTop-o.y,width:r.width,height:r.height}}function ab(t){if("html"===Iy(t))return t;const e=t.assignedSlot||t.parentNode||(Ny(t)?t.host:null)||tb(t);return Ny(e)?e.host:e}function rb(t){return Uy(t)&&"fixed"!==Dy(t).position?t.offsetParent:null}function nb(t){const e=Ry(t);let i=rb(t);for(;i&&By(i)&&"static"===Dy(i).position;)i=rb(i);return i&&("html"===Iy(i)||"body"===Iy(i)&&"static"===Dy(i).position&&!Hy(i))?e:i||function(t){let e=ab(t);for(;Uy(e)&&!Gy(e);){if(Hy(e))return e;e=ab(e)}return null}(t)||e}function ob(t){const e=ab(t);return Gy(e)?t.ownerDocument.body:Uy(e)&&jy(e)?e:ob(e)}function lb(t,e){var i;void 0===e&&(e=[]);const s=ob(t),a=s===(null==(i=t.ownerDocument)?void 0:i.body),r=Ry(s);return a?e.concat(r,r.visualViewport||[],jy(s)?s:[]):e.concat(s,lb(s))}function db(t,e,i){return"viewport"===e?uy(function(t,e){const i=Ry(t),s=tb(t),a=i.visualViewport;let r=s.clientWidth,n=s.clientHeight,o=0,l=0;if(a){r=a.width,n=a.height;const t=Vy();(t||!t&&"fixed"===e)&&(o=a.offsetLeft,l=a.offsetTop)}return{width:r,height:n,x:o,y:l}}(t,i)):Fy(e)?function(t,e){const i=Xy(t,!0,"fixed"===e),s=i.top+t.clientTop,a=i.left+t.clientLeft,r=Uy(t)?Jy(t):{x:1,y:1},n=t.clientWidth*r.x,o=t.clientHeight*r.y,l=a*r.x,d=s*r.y;return{top:d,left:l,right:l+n,bottom:d+o,x:l,y:d,width:n,height:o}}(e,i):uy(function(t){var e;const i=tb(t),s=eb(t),a=null==(e=t.ownerDocument)?void 0:e.body,r=Zy(i.scrollWidth,i.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),n=Zy(i.scrollHeight,i.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0);let o=-s.scrollLeft+ib(t);const l=-s.scrollTop;return"rtl"===Dy(a||i).direction&&(o+=Zy(i.clientWidth,a?a.clientWidth:0)-r),{width:r,height:n,x:o,y:l}}(tb(t)))}const cb={getClippingRect:function(t){let{element:e,boundary:i,rootBoundary:s,strategy:a}=t;const r=[..."clippingAncestors"===i?function(t,e){const i=e.get(t);if(i)return i;let s=lb(t).filter((t=>Fy(t)&&"body"!==Iy(t))),a=null;const r="fixed"===Dy(t).position;let n=r?ab(t):t;for(;Fy(n)&&!Gy(n);){const t=Dy(n),e=Hy(n);(r?e||a:e||"static"!==t.position||!a||!["absolute","fixed"].includes(a.position))?a=t:s=s.filter((t=>t!==n)),n=ab(n)}return e.set(t,s),s}(e,this._c):[].concat(i),s],n=r[0],o=r.reduce(((t,i)=>{const s=db(e,i,a);return t.top=Zy(s.top,t.top),t.right=qy(s.right,t.right),t.bottom=qy(s.bottom,t.bottom),t.left=Zy(s.left,t.left),t}),db(e,n,a));return{width:o.right-o.left,height:o.bottom-o.top,x:o.left,y:o.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:i,strategy:s}=t;const a=Uy(i),r=tb(i);if(i===r)return e;let n={scrollLeft:0,scrollTop:0},o={x:1,y:1};const l={x:0,y:0};if((a||!a&&"fixed"!==s)&&(("body"!==Iy(i)||jy(r))&&(n=eb(i)),Uy(i))){const t=Xy(i);o=Jy(i),l.x=t.x+i.clientLeft,l.y=t.y+i.clientTop}return{width:e.width*o.x,height:e.height*o.y,x:e.x*o.x-n.scrollLeft*o.x+l.x,y:e.y*o.y-n.scrollTop*o.y+l.y}},isElement:Fy,getDimensions:function(t){return Wy(t)},getOffsetParent:nb,getDocumentElement:tb,getScale:Jy,async getElementRects(t){let{reference:e,floating:i,strategy:s}=t;const a=this.getOffsetParent||nb,r=this.getDimensions;return{reference:sb(e,await a(i),s),floating:{x:0,y:0,...await r(i)}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>"rtl"===Dy(t).direction},hb=(t,e,i)=>{const s=new Map,a={platform:cb,...i},r={...a.platform,_c:s};return(async(t,e,i)=>{const{placement:s="bottom",strategy:a="absolute",middleware:r=[],platform:n}=i,o=r.filter(Boolean),l=await(null==n.isRTL?void 0:n.isRTL(e));let d=await n.getElementRects({reference:t,floating:e,strategy:a}),{x:c,y:h}=py(d,s,l),p=s,g={},u=0;for(let m=0;m<o.length;m++){const{name:i,fn:r}=o[m],{x:v,y:f,data:y,reset:b}=await r({x:c,y:h,initialPlacement:s,placement:p,strategy:a,middlewareData:g,rects:d,platform:n,elements:{reference:t,floating:e}});c=null!=v?v:c,h=null!=f?f:h,g={...g,[i]:{...g[i],...y}},b&&u<=50&&(u++,"object"==typeof b&&(b.placement&&(p=b.placement),b.rects&&(d=!0===b.rects?await n.getElementRects({reference:t,floating:e,strategy:a}):b.rects),({x:c,y:h}=py(d,p,l))),m=-1)}return{x:c,y:h,placement:p,strategy:a,middlewareData:g}})(t,e,{...a,platform:r})},pb=class{constructor(t){vt(this,t),this.dyteSendNotification=k(this,"dyteSendNotification",7),this.pinnedListener=({isPinned:t})=>{this.isPinned=t},this.toggleTileListener=({hidden:t})=>{this.isHidden=t},this.stageListener=({stageStatus:t})=>{this.isOnStage="ON_STAGE"===t},this.permissionsUpdateListener=()=>{this.meetingChanged(this.meeting)},this.inviteToStageToggle=async()=>{const t=this.participant,{stage:e}=this.meeting;"ACCEPTED_TO_JOIN_STAGE"!==t.stageStatus?(this.isOnStage?(t.isPinned&&t.unpin(),await e.kick([t.userId])):(await e.grantAccess([t.userId]),this.dyteSendNotification.emit({message:`${t.name} ${this.t("stage.invited_notification")}`,trace:`join-stage-invite-${t.id}`})),this.isOnStage="ON_STAGE"===t.stageStatus):this.dyteSendNotification.emit({message:`${t.name} ${this.t("stage.invited_notification")}`,trace:`join-stage-${t.id}`})},this.handleOutsideClick=t=>{!t.composedPath().includes(this.host)&&this.menuOpen&&(this.menuOpen=!1)},this.update=()=>{const t=this.host.shadowRoot.getElementById("trigger"),e=this.host.shadowRoot.getElementById("menu-list");var i;hb(t,e,{placement:"bottom-end",middleware:[Py({allowedPlacements:["bottom-end","top-end"],alignment:"end"}),Ay(4),My({padding:8}),(void 0===i&&(i={}),{name:"hide",options:i,async fn(t){const{strategy:e="referenceHidden",...s}=i,{rects:a}=t;switch(e){case"referenceHidden":{const e=Ty(await my(t,{...s,elementContext:"reference"}),a.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:Ey(e)}}}case"escaped":{const e=Ty(await my(t,{...s,altBoundary:!0}),a.floating);return{data:{escapedOffsets:e,escaped:Ey(e)}}}default:return{}}}})]}).then((({x:t,y:i,placement:s})=>{let a=null;a="bottom-end"===s?{right:`${t}px`,top:`${i}px`}:{right:`${t}px`,bottom:`${i}px`},Object.assign(e.style,a)}))},this.onMenuToggle=()=>{this.menuOpen=!this.menuOpen,this.menuOpen&&this.update()},this.meeting=void 0,this.view="sidebar",this.participant=void 0,this.iconPack=ts,this.t=ns(),this.config=$t,this.audioEnabled=!1,this.videoEnabled=!1,this.isPinned=!1,this.isHidden=!1,this.isOnStage=!1,this.canDisableParticipantAudio=!1,this.canDisableParticipantVideo=!1,this.canKickParticipant=!1,this.canPinParticipant=!1,this.canAllowParticipantOnStage=!1,this.menuOpen=!1}connectedCallback(){this.meetingChanged(this.meeting),this.participantChanged(this.participant),document.addEventListener("click",this.handleOutsideClick)}disconnectedCallback(){var t;document.removeEventListener("click",this.handleOutsideClick),null===(t=this.meeting)||void 0===t||t.self.permissions.removeListener("permissionsUpdate",this.permissionsUpdateListener),null!=this.participant&&null!=this.participant.removeListener&&(this.audioUpdateListener&&this.participant.removeListener("audioUpdate",this.audioUpdateListener),this.videoUpdateListener&&this.participant.removeListener("videoUpdate",this.videoUpdateListener),this.participant.removeListener("pinned",this.pinnedListener),this.participant.removeListener("unpinned",this.pinnedListener),this.participant.removeListener("stageStatusUpdate",this.stageListener),this.participant.removeListener("toggleTile",this.toggleTileListener))}meetingChanged(t){var e,i,s,a,r,n,o;if(null!=t){const{self:l}=t;this.canDisableParticipantAudio=l.permissions.canAllowParticipantAudio||l.permissions.canDisableParticipantAudio,this.canDisableParticipantVideo=l.permissions.canAllowParticipantVideo||l.permissions.canDisableParticipantVideo,this.canKickParticipant=l.permissions.kickParticipant&&!0!==(null===(e=this.meeting)||void 0===e?void 0:e.__internals__.features.hasFeature(Ls))&&(!0!==(null===(i=this.meeting)||void 0===i?void 0:i.__internals__.features.hasFeature(Ts))||"webinar_admin"!==(null===(s=this.participant)||void 0===s?void 0:s.presetName)),this.canPinParticipant=l.permissions.pinParticipant,this.canAllowParticipantOnStage=l.permissions.acceptStageRequests&&l.permissions.stageEnabled&&(!0!==(null===(a=this.meeting)||void 0===a?void 0:a.__internals__.features.hasFeature(Ts))||"webinar_admin"!==(null===(r=this.participant)||void 0===r?void 0:r.presetName))&&(!0!==(null===(n=this.meeting)||void 0===n?void 0:n.__internals__.features.hasFeature(Es))||"webinar_viewer"!==(null===(o=this.participant)||void 0===o?void 0:o.presetName)),t.self.permissions.addListener("permissionsUpdate",this.permissionsUpdateListener)}}participantChanged(t){var e;if(null!=t){if(this.audioEnabled=t.audioEnabled,this.videoEnabled=t.videoEnabled,this.isPinned=t.isPinned,this.isHidden=null!==(e=t.hidden)&&void 0!==e&&e,this.isOnStage="ON_STAGE"===t.stageStatus,this.audioUpdateListener=({audioEnabled:t})=>{this.audioEnabled=t},this.videoUpdateListener=({videoEnabled:t})=>{this.videoEnabled=t},null==t.addListener)return;t.addListener("audioUpdate",this.audioUpdateListener),t.addListener("videoUpdate",this.videoUpdateListener),t.addListener("pinned",this.pinnedListener),t.addListener("unpinned",this.pinnedListener),t.addListener("stageStatusUpdate",this.stageListener),this.participant.addListener("toggleTile",this.toggleTileListener)}}render(){var t,e,i,s,a,r,n,o,l;const d="AUDIO_ROOM"===(null===(t=this.meeting)||void 0===t?void 0:t.meta.viewType),c=(null===(e=this.meeting)||void 0===e?void 0:e.self.id)===this.participant.id,h=this.canDisableParticipantAudio&&this.audioEnabled||this.canDisableParticipantVideo&&this.videoEnabled&&!d||this.canKickParticipant||this.canPinParticipant&&this.isOnStage||this.canAllowParticipantOnStage,p=Ua((null===(i=this.participant)||void 0===i?void 0:i.name)||""),g=this.isOnStage||["GROUP_CALL","AUDIO_ROOM"].includes(null===(s=this.meeting)||void 0===s?void 0:s.meta.viewType),u={meeting:this.meeting,size:"sm",states:Ss,config:this.config,iconPack:this.iconPack,t:this.t};return m(f,null,m("div",{class:"left",key:null===(a=this.participant)||void 0===a?void 0:a.id},m("dyte-avatar",{participant:this.participant,size:"sm",iconPack:this.iconPack,t:this.t}),m("p",{class:"name",title:p},Ia(p,16)," ",(null===(r=this.meeting)||void 0===r?void 0:r.self.id)===(null===(n=this.participant)||void 0===n?void 0:n.id)&&this.t("(you)"))),"sidebar"===this.view&&m("div",{class:"right"},g&&m("dyte-icon",{class:{red:!this.audioEnabled},iconPack:this.iconPack,t:this.t,icon:this.audioEnabled?this.iconPack.mic_on:this.iconPack.mic_off}),g&&!d&&m("dyte-icon",{class:{red:!this.videoEnabled},iconPack:this.iconPack,t:this.t,icon:this.videoEnabled?this.iconPack.video_on:this.iconPack.video_off}),(h||(({element:t,defaults:e,props:i={},elementProps:s={}})=>{var a;const{config:r,size:n,states:o}=e;let l,d={},c=[];Array.isArray(t)?[l,d,...c]=t:l=t;const h=null===(a=null==r?void 0:r.root)||void 0===a?void 0:a[l];null!=h&&"props"in h&&(i=Object.assign(Object.assign({},h.props),i)),i=Object.assign(Object.assign({},i),d),l in s&&(i=Object.assign(Object.assign({},i),s[l]));const p=os({element:l,size:n,states:o,config:r});return ls({selectors:p,root:r.root}).length})({element:"dyte-participant",defaults:u,childProps:{participant:this.participant}})>0)&&m("div",{class:"menu"},m("span",{id:"trigger",onClick:this.onMenuToggle},m("dyte-button",{variant:"ghost",kind:"icon",slot:"trigger",iconPack:this.iconPack,t:this.t},m("dyte-icon",{class:"more",icon:this.iconPack.more_vertical}))),m("span",{id:"menu-list"},this.menuOpen&&m("dyte-menu-list",{iconPack:this.iconPack,t:this.t},this.canPinParticipant&&g&&!d&&m("dyte-menu-item",{onClick:()=>{this.isPinned?this.participant.unpin():this.participant.pin()},iconPack:this.iconPack,t:this.t},m("dyte-icon",{icon:this.isPinned?this.iconPack.pin_off:this.iconPack.pin,slot:"start",iconPack:this.iconPack,t:this.t}),this.isPinned?this.t("unpin"):this.t("pin")),c&&m("dyte-menu-item",{iconPack:this.iconPack,t:this.t,onClick:()=>{this.isHidden?this.participant.show():this.participant.hide()}},m("dyte-icon",{icon:this.isHidden?this.iconPack.minimize:this.iconPack.maximize,slot:"start"}),this.meeting.self.hidden?this.t("maximize"):this.t("minimize")),this.canDisableParticipantAudio&&g&&this.audioEnabled&&m("dyte-menu-item",{iconPack:this.iconPack,t:this.t,onClick:()=>{this.participant.disableAudio()}},m("dyte-icon",{icon:this.iconPack.mic_off,slot:"start"}),this.t("mute")),this.canDisableParticipantVideo&&g&&this.videoEnabled&&m("dyte-menu-item",{iconPack:this.iconPack,t:this.t,onClick:()=>{this.participant.disableVideo()}},m("dyte-icon",{icon:this.iconPack.video_off,slot:"start",iconPack:this.iconPack,t:this.t}),this.t("participants.turn_off_video")),this.canAllowParticipantOnStage&&(null===(o=this.participant)||void 0===o?void 0:o.id)!==(null===(l=this.meeting)||void 0===l?void 0:l.self.id)&&m("dyte-menu-item",{iconPack:this.iconPack,t:this.t,class:this.isOnStage?"red":"",onClick:this.inviteToStageToggle},m("dyte-icon",{iconPack:this.iconPack,t:this.t,icon:this.isOnStage?this.iconPack.leave_stage:this.iconPack.join_stage,slot:"start"}),this.isOnStage?this.t("stage.remove_from_stage"):this.t("stage.add_to_stage")),!c&&this.canKickParticipant&&m("dyte-menu-item",{iconPack:this.iconPack,t:this.t,class:"red",onClick:()=>{var t,e;null===(t=this.meeting)||void 0===t||t.participants.kick(null===(e=this.participant)||void 0===e?void 0:e.id)}},m("dyte-icon",{icon:this.iconPack.dismiss,slot:"start",iconPack:this.iconPack,t:this.t}),this.t("kick")),m("slot",null,m(cs,{element:"dyte-participant",defaults:u,childProps:{participant:this.participant},deepProps:!0,onlyChildren:!0})))))))}get host(){return x(this)}static get watchers(){return{meeting:["meetingChanged"],participant:["participantChanged"]}}};pb.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:flex;height:var(--dyte-space-14, 56px);align-items:center;justify-content:space-between;cursor:pointer;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}:host dyte-avatar{height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);font-size:14px}.left{display:flex;align-items:center}.left>*{margin-right:var(--dyte-space-2, 8px)}.left>*:last-child{margin-right:var(--dyte-space-0, 0px)}.right{display:flex;align-items:center;justify-content:flex-end}.right>*{margin-left:var(--dyte-space-2, 8px)}.right>*:first-child{margin-left:var(--dyte-space-0, 0px)}.name{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}dyte-icon{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}dyte-icon.red{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}dyte-icon.more{cursor:pointer}.menu{position:relative;display:inline-block;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}#menu-list{position:absolute;top:var(--dyte-space-8, 32px) !important;right:var(--dyte-space-4, 16px) !important;z-index:20}";var gb=Object.freeze({__proto__:null,dyte_participant:pb});const ub=class{constructor(t){vt(this,t),this.onVote=k(this,"dyteVotePoll",7),this.MAX_VOTES_RENDER=10,this.poll=void 0,this.self=void 0,this.permissions=void 0,this.iconPack=ts,this.t=ns()}vote(t,e){this.poll.voted.includes(this.self)?t.preventDefault():this.onVote.emit({id:this.poll.id,index:e})}render(){const t=this.poll.voted.includes(this.self);return m(f,null,m("div",{class:"ctr"},m("p",{class:"poll-title"},this.t("polls.by")," ",Ia(Ua(this.poll.createdBy),20)),m("div",{class:"poll"},m("p",{class:"poll-question"},this.poll.question),m("div",{class:"poll-answers"},m("span",null,this.t("polls.answers")),m("span",null,this.poll.voted.length)),this.poll.options.map(((e,i)=>m("div",{class:{active:e.votes.some((t=>t.id===this.self)),"open-vote":this.permissions.polls.canVote&&!t,"poll-option":!0}},m("div",{class:"poll-option-header","data-disabled":!this.permissions.polls.canVote},m("label",null,!t&&m("input",{disabled:!this.permissions.polls.canVote,readOnly:t,type:"radio",checked:e.votes.some((t=>t.id===this.self)),onClick:t=>this.vote(t,i)}),m("p",null,e.text)),m("span",{class:"counter"},e.count)),m("div",{class:"votes"},e.votes.slice(0,this.MAX_VOTES_RENDER).map((t=>{if(!this.poll.anonymous||this.self===this.poll.createdByUserId)return m("dyte-tooltip",{label:t.name,iconPack:this.iconPack,t:this.t},m("div",{class:"vote"},Na(t.name)))})),e.votes.length>this.MAX_VOTES_RENDER&&m("dyte-tooltip",{label:`+${e.votes.length-this.MAX_VOTES_RENDER} more `,iconPack:this.iconPack,t:this.t},m("div",{class:"vote"},"+",e.votes.length-this.MAX_VOTES_RENDER)))))))))}};ub.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))\n    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}.ctr{margin-bottom:var(--dyte-space-3, 12px);display:flex;width:100%;flex-direction:column;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.poll-title{margin-top:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-3, 12px);margin-right:var(--dyte-space-4, 16px);font-size:12px}.poll{border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));display:flex;flex-direction:column;padding:var(--dyte-space-4, 16px)}.poll-question{padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);font-size:14px;overflow-wrap:break-word}.poll-answers{display:flex;flex-direction:row;justify-content:space-between;font-size:12px;margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-1, 4px);padding-left:var(--dyte-space-1, 4px);padding-right:var(--dyte-space-3, 12px)}.poll-option{display:flex;flex-direction:column;margin-top:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));padding:var(--dyte-space-2, 8px);word-break:break-word}.poll-option.open-vote:hover{cursor:pointer}.poll-option label{display:flex;flex-direction:row;cursor:inherit}.poll-option-header{display:flex;flex-direction:row;justify-content:space-between;padding:var(--dyte-space-1, 4px)}.poll-option-header[data-disabled='true']:hover{cursor:default}.poll-option-header input{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-0, 0px);margin-left:var(--dyte-space-0\\.5, 2px);margin-right:var(--dyte-space-2, 8px);cursor:inherit}.poll-option-header .counter{color:rgb(var(--dyte-colors-text-1000, 255 255 255));font-size:12px}.votes{margin-top:var(--dyte-space-1, 4px);display:flex;flex-direction:row;flex-wrap:wrap}.vote{margin-right:var(--dyte-space-1, 4px);height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);display:flex;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-video-bg, 24 24 24) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));border-radius:var(--dyte-border-radius-none, 0);clip-path:circle()}.active{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-on-brand-900, var(--dyte-colors-text-900, 255 255 255 / 0.88)))}.active .counter{color:rgb(var(--dyte-colors-text-on-brand-900, var(--dyte-colors-text-900, 255 255 255 / 0.88)))}";const mb=class{constructor(t){vt(this,t),this.onCreate=k(this,"dyteCreatePoll",7),this.iconPack=ts,this.t=ns(),this.options=["",""],this.anonymous=!1,this.hideVotes=!0,this.error=void 0}removeOption(t){var e;this.options=this.options.filter(((e,i)=>i!==t)),1===(null===(e=this.error)||void 0===e?void 0:e.code)&&(this.error=void 0)}addOption(){this.options=[...this.options,""]}updateOption(t,e){var i;this.options[e]=t.target.value,1===(null===(i=this.error)||void 0===i?void 0:i.code)&&(this.error=void 0)}handleSubmit(){const t={question:this.question.value,options:this.options,anonymous:this.anonymous,hideVotes:!!this.anonymous||this.hideVotes};t.question?this.options.filter((t=>""===t.trim())).length>0?this.error={code:1,message:this.t("polls.errors.empty_option")}:this.onCreate.emit(t):this.error={code:0,message:this.t("polls.errors.question_required")}}render(){return m(f,null,m("div",{class:"create-poll"},m("p",null,this.t("polls.question")),m("textarea",{onInput:()=>{this.error&&0===this.error.code&&(this.error=void 0)},ref:t=>this.question=t,placeholder:this.t("polls.question.placeholder")}),this.options.map(((t,e)=>m("div",{class:"option"},m("input",{placeholder:this.t("polls.option.placeholder"),value:t,onInput:t=>this.updateOption(t,e)}),e>1&&m("dyte-button",{kind:"icon",class:"auto remove-option",variant:"secondary",onClick:()=>this.removeOption(e),iconPack:this.iconPack,t:this.t},m("dyte-icon",{icon:this.iconPack.subtract,iconPack:this.iconPack,t:this.t}))))),m("dyte-button",{class:"add-option",variant:"secondary",onClick:()=>this.addOption(),iconPack:this.iconPack,t:this.t},this.t("polls.option")),m("label",null,m("input",{id:"anonymous",type:"checkbox",onChange:t=>this.anonymous=t.target.checked}),this.t("polls.results.anon")),m("label",null,m("input",{id:"hideVotes",type:"checkbox",disabled:this.anonymous,checked:!!this.anonymous||this.hideVotes,onChange:t=>this.hideVotes=t.target.checked}),this.t("polls.results.hide")),m("dyte-button",{kind:"wide",onClick:()=>this.handleSubmit(),iconPack:this.iconPack,t:this.t},this.t("polls.create")),this.error&&m("span",{class:"error-text"},this.error.message)))}};mb.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))\n    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}.create-poll{margin-top:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-3, 12px);display:flex;flex:1 1 0%;flex-direction:column;padding:var(--dyte-space-3, 12px);border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}.create-poll p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px);text-align:center}.create-poll textarea{display:flex;border-radius:var(--dyte-border-radius-sm, 4px);padding:var(--dyte-space-2, 8px);font-family:var(--dyte-font-family, sans-serif);border-width:var(--dyte-border-width-none, 0);border-style:none;font-weight:500;outline:2px solid transparent;outline-offset:2px;margin-top:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-3, 12px);resize:vertical;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.create-poll textarea:focus{outline-style:solid;outline-offset:2px;outline-color:rgb(var(--dyte-colors-background-600, 60 60 60))}.option{display:flex;flex-direction:row;align-items:center;margin-bottom:var(--dyte-space-3, 12px);width:100%}.option input{width:100%;border-radius:var(--dyte-border-radius-sm, 4px);padding:var(--dyte-space-2, 8px);border-width:var(--dyte-border-width-none, 0);border-style:none;outline:2px solid transparent;outline-offset:2px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.remove-option{margin-left:var(--dyte-space-2, 8px);width:var(--dyte-space-10, 40px);border-radius:var(--dyte-border-radius-sm, 4px)}.add-option{margin-bottom:var(--dyte-space-3, 12px)}label{margin-bottom:var(--dyte-space-3, 12px)}.error-text{margin-top:var(--dyte-space-3, 12px);text-align:center;font-size:12px;--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}";var vb=Object.freeze({__proto__:null,dyte_poll:ub,dyte_poll_form:mb});const fb=class{constructor(t){vt(this,t),this.stateUpdate=k(this,"dyteStateUpdate",7),this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=ts,this.t=ns()}render(){var t,e;if(null==this.meeting)return null;const i={meeting:this.meeting,states:this.states||Ss,size:this.size,iconPack:this.iconPack,t:this.t},s=this.states||Ss,a=!0===(null===(t=null==s?void 0:s.prefs)||void 0===t?void 0:t.muteNotificationSounds)||"true"===vs("mute-notification-sounds");return m(f,null,m("dyte-microphone-selector",Object.assign({},i),m("dyte-audio-visualizer",{participant:null===(e=this.meeting)||void 0===e?void 0:e.self,iconPack:this.iconPack,t:this.t,slot:"indicator"})),m("dyte-speaker-selector",Object.assign({},i)),m("div",{class:"group",part:"notification-toggle"},m("div",{class:"row"},m("label",{htmlFor:"notification-toggle"},this.t("settings.notification_sound")),m("dyte-switch",{id:"notification-toggle",checked:!a,onDyteChange:t=>{var e;const{checked:i}=t.target,s=!i;this.stateUpdate.emit({prefs:{muteNotificationSounds:s}}),Ss.prefs=Object.assign(Object.assign({},null!==(e=Ss.prefs)&&void 0!==e?e:{}),{muteNotificationSounds:s}),ms("mute-notification-sounds",s)},iconPack:this.iconPack,t:this.t}))))}};fb.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;width:100%;flex-direction:column}audio{visibility:hidden}.group{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px)}.group>*{margin-bottom:var(--dyte-space-2, 8px)}.group>*:last-child{margin-bottom:var(--dyte-space-0, 0px)}.group select{flex:1 1 0%}dyte-audio-visualizer{flex-shrink:0}dyte-button{border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}dyte-button dyte-icon{margin-right:var(--dyte-space-2, 8px)}";const yb=class{constructor(t){vt(this,t),this.stateUpdate=k(this,"dyteStateUpdate",7),this.onVideoUpdate=t=>{this.videoEnabled=t.videoEnabled},this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=ts,this.t=ns(),this.videoEnabled=void 0}componentDidLoad(){this.meetingChanged(this.meeting)}meetingChanged(t){var e;null!=t&&(this.videoEnabled=t.self.videoEnabled,null===(e=t.self)||void 0===e||e.addListener("videoUpdate",this.onVideoUpdate))}disconnectedCallback(){var t;null===(t=this.meeting.self)||void 0===t||t.removeListener("videoUpdate",this.onVideoUpdate)}render(){var t,e,i;if(null==this.meeting)return null;const s={meeting:this.meeting,states:this.states||Ss,size:this.size,iconPack:this.iconPack,t:this.t},a=this.states||Ss,r=!0===(null===(t=null==a?void 0:a.prefs)||void 0===t?void 0:t.mirrorVideo)||"true"===vs("mirror-video");return m(f,null,m("div",{class:"section",part:"tile-preview"},m("div",{class:"group",part:"tile-preview"},!0===this.videoEnabled?m("dyte-participant-tile",{meeting:this.meeting,participant:null===(e=this.meeting)||void 0===e?void 0:e.self,iconPack:this.iconPack,t:this.t,states:a,size:this.size,isPreview:!0}):m("div",{class:"camera-off-helper"},m("dyte-participant-tile",{meeting:this.meeting,participant:null===(i=this.meeting)||void 0===i?void 0:i.self,size:this.size},m("div",null,m("dyte-icon",{id:"icon",icon:this.iconPack.video_off,tabIndex:-1,"aria-hidden":!0,iconPack:this.iconPack,t:this.t}),m("div",null,this.t("settings.camera_off"))))))),m("dyte-camera-selector",Object.assign({},s)),m("div",{class:"group",part:"mirror-toggle"},m("div",{class:"row"},m("label",{htmlFor:"mirror-toggle"},this.t("settings.mirror_video")),m("dyte-switch",{checked:r,iconPack:this.iconPack,t:this.t,onDyteChange:t=>{var e;const{checked:i}=t.target;this.stateUpdate.emit({prefs:{mirrorVideo:i}}),Ss.prefs=Object.assign(Object.assign({},null!==(e=Ss.prefs)&&void 0!==e?e:{}),{mirrorVideo:i}),ms("mirror-video",i)}}))))}static get watchers(){return{meeting:["meetingChanged"]}}};yb.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.dyte-select{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.dyte-select:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)}.dyte-select{display:block;border-radius:var(--dyte-border-radius-sm, 4px);border-width:var(--dyte-border-width-none, 0);border-style:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:var(--dyte-space-3, 12px);font-size:16px;--icon-size:var(--dyte-select-chevron-size, var(--dyte-space-6, 24px));--icon-right-position:var(--dyte-select-chevron-right-position, var(--dyte-space-2, 8px));background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e\");background-position:right var(--icon-right-position) center;background-repeat:no-repeat;background-size:var(--icon-size) var(--icon-size);padding-right:calc(var(--icon-right-position) * 5)}:host{display:flex;width:100%;flex-direction:column}.dyte-select{width:100%;text-overflow:ellipsis}dyte-participant-tile{margin-left:auto;margin-right:auto;margin-bottom:var(--dyte-space-4, 16px);max-width:100%}#icon{padding-bottom:var(--dyte-space-1, 4px)}.apply-button{height:var(--dyte-space-10, 40px)}label{-webkit-user-select:none;-moz-user-select:none;user-select:none;font-size:14px}.group{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px)}.group>*{margin-bottom:var(--dyte-space-2, 8px)}.group>*:last-child{margin-bottom:var(--dyte-space-0, 0px)}.group select{flex:1 1 0%}.row{display:flex;align-items:center;justify-content:space-between;gap:var(--dyte-space-3, 12px)}.section{display:flex;flex-direction:column}@media only screen and (max-height: 480px) and (orientation: landscape){:host{flex-direction:row}:host([size='sm']){flex-direction:row}.section[part='tile-preview']{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);max-height:90%;max-width:40%;flex-shrink:1}.section[part='video-settings']{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);flex-grow:1}}";var bb=Object.freeze({__proto__:null,dyte_settings_audio:fb,dyte_settings_video:yb});const wb=class{constructor(t){vt(this,t),this.tabChange=k(this,"tabChange",7),this.size=void 0,this.meeting=void 0,this.states=void 0,this.config=$t,this.layout="row",this.iconPack=ts,this.t=ns(),this.activeTab=void 0,this.tabs=[]}render(){return m(f,null,m("dyte-spotlight-indicator",{meeting:this.meeting,iconPack:this.iconPack,t:this.t,size:this.size}),this.tabs.map((t=>{var e,i,s,a,r;let n=!1;if(("plugin"===(null===(e=this.activeTab)||void 0===e?void 0:e.type)&&t.plugin&&(null===(i=this.activeTab)||void 0===i?void 0:i.plugin.id)===t.plugin.id||"screenshare"===(null===(s=this.activeTab)||void 0===s?void 0:s.type)&&t.participant&&(null===(a=this.activeTab)||void 0===a?void 0:a.participant.id)===t.participant.id)&&(n=!0),"screenshare"===t.type){const e=t.participant,i=Ua(e.name);return m("dyte-button",{title:`${i}'s Screen Share`,key:t.participant.id,kind:"icon",iconPack:this.iconPack,t:this.t,variant:n?"primary":"secondary",class:{tab:!0,active:n},onClick:()=>this.tabChange.emit(t)},m("div",{class:"center col"},m("dyte-icon",{icon:this.iconPack.share_screen_person,iconPack:this.iconPack,t:this.t}),m("span",{class:"name"},e.id===(null===(r=this.meeting)||void 0===r?void 0:r.self.id)?this.t("you"):Ia(i,6))))}if("plugin"===t.type){const e=t.plugin;return m("dyte-button",{title:e.name,key:e.id,kind:"icon",iconPack:this.iconPack,t:this.t,variant:n?"primary":"secondary",class:{tab:!0,active:n},onClick:()=>this.tabChange.emit(t)},m("div",{class:"center col"},m("img",{src:e.picture}),m("span",{class:"name"},Ia(e.name,6))))}})))}};wb.style=".scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))\n    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{box-sizing:border-box;display:flex;height:100%;width:var(--dyte-space-16, 64px);flex-direction:column;gap:var(--dyte-space-2, 8px);overflow-y:auto;font-family:var(--dyte-font-family, sans-serif)}dyte-button{z-index:10}.col{display:flex;flex-direction:column;align-items:center}.tab{display:flex;height:var(--dyte-space-16, 64px);width:var(--dyte-space-16, 64px);align-items:center;justify-content:center;margin-bottom:var(--dyte-space-2, 8px);font-size:12px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}.tab.active{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity))}.tab img{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px);border-radius:var(--dyte-border-radius-sm, 4px)}.tab .name{margin-top:var(--dyte-space-0\\.5, 2px)}:host([size='sm']){flex-direction:column;margin-top:var(--dyte-space-4, 16px);height:var(--dyte-space-16, 64px);width:100%;flex-direction:row;gap:var(--dyte-space-2, 8px);overflow-x:auto}:host([size='sm']) .tab{margin:var(--dyte-space-0, 0px);text-overflow:clip;min-width:100px;height:40px}:host([size='sm']) .tab .col{display:flex;flex-direction:row;align-items:center;gap:var(--dyte-space-2, 8px)}:host([size='sm']) .tab .col img,:host([size='sm']) .tab .col dyte-icon{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}:host([size='sm']) .tab .col .name{gap:var(--dyte-space-1, 4px)}:host([layout='column']){flex-direction:column}:host([layout='column']) .aside{flex:2;max-width:100%;width:100%}@media (orientation: portrait){:host([size='sm']){margin-top:var(--dyte-space-2, 8px);height:var(--dyte-space-16, 64px);width:100%;flex-direction:row;transition:all 0.3s linear}:host([size='md']){height:var(--dyte-space-24, 96px);width:100%;flex-direction:row;transition:all 0.3s linear}:host .tab{margin:var(--dyte-space-0, 0px)}}@media (orientation: landscape){:host([size='sm']){margin-right:var(--dyte-space-4, 16px);height:100%;width:var(--dyte-space-14, 56px);flex-direction:row;gap:var(--dyte-space-2, 8px);overflow-y:auto;overflow-x:hidden;transition:all 0.3s linear}:host([size='md']){margin-right:var(--dyte-space-4, 16px);height:100%;width:var(--dyte-space-14, 56px);flex-direction:row;gap:var(--dyte-space-2, 8px);overflow-y:auto;overflow-x:hidden;transition:all 0.3s linear}:host .tab{margin:var(--dyte-space-0, 0px)}:host([size='sm']) .tab{margin:var(--dyte-space-0, 0px);width:100%;text-overflow:clip;min-width:0px;min-height:40px}:host([size='sm']) .tab .col{display:flex;flex-direction:column;align-items:center;gap:var(--dyte-space-2, 8px);font-size:10px}:host([size='sm']) .tab .col img,:host([size='sm']) .tab .col dyte-icon{height:var(--dyte-space-3, 12px);width:var(--dyte-space-3, 12px)}:host([size='sm']) .tab .col .name{gap:var(--dyte-space-1, 4px)}}";var xb=Object.freeze({__proto__:null,dyte_tab_bar:wb});const kb=class{constructor(t){vt(this,t),this.dismiss=k(this,"dyteTranscriptDismiss",7),this.transcript=void 0,this.t=ns(),this.timeout=void 0}connectedCallback(){this.transcriptChanged(this.transcript)}transcriptChanged(t,e){if((null==e?void 0:e.renderedId)===t.renderedId&&(null==e?void 0:e.transcript)===t.transcript)return;if(clearTimeout(this.timeout),!(null==t?void 0:t.name)||!(null==t?void 0:t.transcript))return;const{id:i,renderedId:s}=t;this.timeout=setTimeout((()=>{this.dismiss.emit({id:i,renderedId:s})}),1e4)}render(){return m(f,null,m("div",{class:"ctr"},m("p",{class:"message"},m("span",{class:"name"},this.transcript.name),": ",this.transcript.transcript)))}static get watchers(){return{transcript:["transcriptChanged"]}}};kb.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{pointer-events:none;display:block;color:rgb(var(--dyte-colors-text-1000, 255 255 255));display:flex;justify-content:center;vertical-align:middle;animation:show 0.4s ease;transition:0.4s;z-index:5;width:100%}.ctr{box-sizing:border-box;display:inline-flex;height:100%;align-items:center;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);-webkit-user-select:none;-moz-user-select:none;user-select:none;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));--tw-shadow:0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);--tw-shadow-color:rgb(var(--dyte-colors-background-1000, 8 8 8));--tw-shadow:var(--tw-shadow-colored);pointer-events:auto;padding:var(--dyte-space-3, 12px);overflow:auto;max-width:50%}.message{margin:var(--dyte-space-0, 0px);display:inline-block;justify-content:center;max-width:100%;text-wrap:wrap;line-height:1.5rem}.message .name{font-weight:bold}:host(.exit){animation:exit 0.4s ease}@keyframes show{0%{opacity:0;transform:translateY(120px)}100%{opacity:1;transform:translateY(0px)}}@keyframes exit{0%{opacity:1;transform:translateY(0)}100%{opacity:0;transform:translateY(-120px)}}:host([size='sm']){font-size:14px}";var Sb=Object.freeze({__proto__:null,dyte_transcript:kb});const _b=(t,e)=>{if(null==t)return;const i=Math.round(1.5),s=[...Array(3)].map(((t,s)=>{let a=s;return a>i-1&&(a=3-a-1),Math.round((a+1)/(i+1)*e)})),{width:a,height:r}=t,n=t.getContext("2d");let o=2;const l=1*a/s.length,d=l-4;n.clearRect(0,0,a,r),n.fillStyle="rgb(0,0,0,0.0)",n.fillRect(0,0,a,r);const c=getComputedStyle(t).getPropertyValue("color");n.fillStyle=c,n.strokeStyle=c,n.lineCap="round",n.lineWidth=4,n.beginPath();for(const h of s){const t=Math.min(-Math.abs(1.2*h/10*r)+r/2,r/2-2.5),e=Math.max(2*(r/2-t),5);n.moveTo(o+d/2,t),n.lineTo(o+d/2,t+e),o+=l}n.stroke()},Cb=class{constructor(t){vt(this,t),this.variant="bars",this.participant=void 0,this.size=void 0,this.iconPack=ts,this.t=ns(),this.hideMuted=!1,this.isScreenShare=!1,this.audioEnabled=void 0,this.volume=0}connectedCallback(){this.participantChanged(this.participant)}componentDidLoad(){_b(this.visualizer,0)}disconnectedCallback(){var t,e,i;null===(t=this.hark)||void 0===t||t.stop(),this.audioUpdateListener&&(null===(e=this.participant)||void 0===e||e.removeListener("audioUpdate",this.audioUpdateListener)),this.screenShareUpdateListener&&(null===(i=this.participant)||void 0===i||i.removeListener("screenShareUpdate",this.screenShareUpdateListener))}participantChanged(t){null!=t&&(this.audioUpdateListener=({audioEnabled:t,audioTrack:e})=>{var i;if(null===(i=this.hark)||void 0===i||i.stop(),t&&null!=e){this.audioEnabled=!0;const t=new MediaStream;t.addTrack(e),this.calcVolume(t),_b(this.visualizer,0)}else this.volume=0,this.audioEnabled=!1},this.isScreenShare?(this.screenShareUpdateListener=({screenShareEnabled:t,screenShareTracks:e})=>{this.audioUpdateListener({audioEnabled:t&&null!=e.audio,audioTrack:e.audio})},this.screenShareUpdateListener({screenShareEnabled:t.screenShareEnabled,screenShareTracks:{audio:t.screenShareTracks.audio,video:t.screenShareTracks.video}}),t.addListener("screenShareUpdate",this.screenShareUpdateListener)):(this.audioUpdateListener(t),t.addListener("audioUpdate",this.audioUpdateListener)))}calcVolume(t){this.hark=Vr(t,{play:!1,interval:100}),this.hark.on("volume_change",(t=>{const e=this.volume;let i=Math.round(10**(t/115)*10);i<3&&(i=0);let s=Math.round((2*e+i)/3);e!==s&&(this.volume=s,_b(this.visualizer,this.volume))}))}render(){return m(f,null,m("div",{class:{hideMuted:this.hideMuted}},m("canvas",{width:"24",height:"24",class:{bars:!0,visible:this.audioEnabled},ref:t=>this.visualizer=t,part:"canvas"}),!this.isScreenShare&&!this.audioEnabled&&!0!==this.hideMuted&&m("dyte-icon",{icon:this.iconPack.mic_off,part:"mic-off-icon",iconPack:this.iconPack,t:this.t})))}static get watchers(){return{participant:["participantChanged"]}}};Cb.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block;width:-moz-fit-content;width:fit-content}.hideMuted{padding:var(--dyte-space-1, 4px)}canvas,dyte-icon{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}:host([size='sm']){transform:scale(0.9)}canvas{display:none}canvas.visible{display:block}canvas.bars{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}";const Pb=class{constructor(t){vt(this,t),this.stageStateListener=()=>{this.canProduceAudio="ALLOWED"===this.meeting.self.permissions.canProduceAudio},this.deviceListUpdateListener=async()=>{const t=await this.meeting.self.getAudioDevices();this.audioinputDevices=t},this.deviceUpdateListener=({device:t})=>{"audioinput"===t.kind&&(this.currentDevices={audio:t})},this.mediaPermissionUpdateListener=async({kind:t,message:e})=>{this.meeting&&"audio"===t&&"ACCEPTED"===e&&(this.audioinputDevices=await this.meeting.self.getAudioDevices())},this.meeting=void 0,this.size=void 0,this.iconPack=ts,this.variant="full",this.t=ns(),this.audioinputDevices=[],this.canProduceAudio=!0,this.currentDevices={audio:void 0}}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var t,e,i,s,a;null===(e=null===(t=this.meeting)||void 0===t?void 0:t.stage)||void 0===e||e.removeListener("stageStatusUpdate",this.stageStateListener),null===(i=this.meeting)||void 0===i||i.self.removeListener("deviceListUpdate",this.deviceListUpdateListener),null===(s=this.meeting)||void 0===s||s.self.removeListener("deviceUpdate",this.deviceUpdateListener),null===(a=this.meeting)||void 0===a||a.self.removeListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener)}meetingChanged(t){null!=t&&It((async()=>{var e,i;const{self:s,stage:a}=t,r=await t.self.getAudioDevices(),n=null===(e=t.self.getCurrentDevices())||void 0===e?void 0:e.audio;this.currentDevices={audio:n},this.canProduceAudio="ALLOWED"===this.meeting.self.permissions.canProduceAudio,null==a||a.addListener("stageStatusUpdate",this.stageStateListener),s.addListener("deviceListUpdate",this.deviceListUpdateListener),s.addListener("deviceUpdate",this.deviceUpdateListener),s.addListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),this.audioinputDevices=null!=n?[null!==(i=r.find((t=>t.deviceId===n.deviceId)))&&void 0!==i?i:n,...r.filter((t=>t.deviceId!==n.deviceId))]:r}))}setDevice(t){var e;if(Rs(this.meeting))return;const i=this.audioinputDevices.find((e=>e.deviceId===t));null!=i&&(this.currentDevices={audio:i},null===(e=this.meeting)||void 0===e||e.self.setDevice(i))}render(){if(null==this.meeting)return null;let t=0;return m(f,null,this.canProduceAudio&&m("div",{part:"microphone-selection",class:"group container "+this.variant},m("label",{slot:"label"},"inline"!==this.variant&&this.t("settings.microphone_input"),m("dyte-icon",{icon:this.iconPack.mic_on,iconPack:this.iconPack,t:this.t,size:"sm"})),m("div",{class:"row"},m("select",{class:"dyte-select",onChange:t=>this.setDevice(t.target.value)},this.audioinputDevices.map((({deviceId:e,label:i})=>{var s;return m("option",{value:e,selected:(null===(s=this.currentDevices.audio)||void 0===s?void 0:s.deviceId)===e},i||"Microphone "+ ++t)}))),m("slot",{name:"indicator"}))))}static get watchers(){return{meeting:["meetingChanged"]}}};Pb.style=".dyte-select{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.dyte-select:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)}.dyte-select{display:block;border-radius:var(--dyte-border-radius-sm, 4px);border-width:var(--dyte-border-width-none, 0);border-style:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:var(--dyte-space-3, 12px);font-size:16px;--icon-size:var(--dyte-select-chevron-size, var(--dyte-space-6, 24px));--icon-right-position:var(--dyte-select-chevron-right-position, var(--dyte-space-2, 8px));background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e\");background-position:right var(--icon-right-position) center;background-repeat:no-repeat;background-size:var(--icon-size) var(--icon-size);padding-right:calc(var(--icon-right-position) * 5);width:100%;max-width:100%;text-overflow:ellipsis}.inline .dyte-select{margin-top:var(--dyte-space-1, 4px);width:100%;padding-top:var(--dyte-space-1, 4px);padding-bottom:var(--dyte-space-1, 4px);padding-left:var(--dyte-space-1\\.5, 6px);padding-right:var(--dyte-space-1\\.5, 6px);padding-right:var(--dyte-space-8, 32px);font-size:14px}.row{margin-bottom:var(--dyte-space-2, 8px);display:flex;width:100%;align-items:center;justify-content:space-between;gap:var(--dyte-space-3, 12px)}.group{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px)}.group>*{margin-bottom:var(--dyte-space-2, 8px)}.group>*:last-child{margin-bottom:var(--dyte-space-0, 0px)}.group select{flex:1 1 0%}.inline.group{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-0\\.5, 2px)}.inline.group>*{margin-bottom:var(--dyte-space-0, 0px)}label{display:flex;-webkit-user-select:none;-moz-user-select:none;user-select:none;align-items:center;gap:var(--dyte-space-1, 4px);font-size:14px}.inline.container{display:flex;align-items:center;justify-content:flex-start;gap:var(--dyte-space-2, 8px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px)}";const Lb=class{constructor(t){vt(this,t),this.deviceListUpdateListener=async()=>{const t=await this.meeting.self.getSpeakerDevices();this.speakerDevices=t},this.deviceUpdateListener=({device:t})=>{"audiooutput"===t.kind&&(this.currentDevices={speaker:t})},this.mediaPermissionUpdate=async({kind:t,message:e})=>{this.meeting&&"audio"===t&&"ACCEPTED"===e&&(this.speakerDevices=await this.meeting.self.getSpeakerDevices())},this.meeting=void 0,this.states=void 0,this.variant="full",this.size=void 0,this.iconPack=ts,this.t=ns(),this.speakerDevices=[],this.currentDevices={speaker:void 0}}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var t,e,i;null===(t=this.meeting)||void 0===t||t.self.removeListener("deviceListUpdate",this.deviceListUpdateListener),null===(e=this.meeting)||void 0===e||e.self.removeListener("deviceUpdate",this.deviceUpdateListener),null===(i=this.meeting)||void 0===i||i.self.addListener("mediaPermissionUpdate",this.mediaPermissionUpdate)}meetingChanged(t){null!=t&&It((async()=>{var e,i;const{self:s}=t,a=await t.self.getSpeakerDevices(),r=null===(e=t.self.getCurrentDevices())||void 0===e?void 0:e.speaker;this.currentDevices={speaker:r},s.addListener("deviceListUpdate",this.deviceListUpdateListener),s.addListener("deviceUpdate",this.deviceUpdateListener),s.addListener("mediaPermissionUpdate",this.mediaPermissionUpdate),this.speakerDevices=null!=r?[null!==(i=a.find((t=>t.deviceId===r.deviceId)))&&void 0!==i?i:r,...a.filter((t=>t.deviceId!==r.deviceId))]:a}))}testAudio(){var t;null===(t=this.testAudioEl)||void 0===t||t.play()}setDevice(t){var e,i;if(Rs(this.meeting))return;const s=this.speakerDevices.find((e=>e.deviceId===t));this.currentDevices={speaker:s},null!=s&&(null===(e=this.meeting)||void 0===e||e.self.setDevice(s),null===(i=this.testAudioEl)||void 0===i||i.setSinkId(s.deviceId))}render(){if(null==this.meeting)return null;let t=0;return m(f,null,m("audio",{preload:"auto",src:"https://assets.dyte.io/ui-kit/speaker-test.mp3",ref:t=>this.testAudioEl=t}),m("div",{class:"group "+this.variant,part:"speaker-selection"},this.speakerDevices.length>0&&!Rs(this.meeting)&&m("div",{class:"container"},m("label",null,"inline"!==this.variant&&this.t("settings.speaker_output"),m("dyte-icon",{icon:this.iconPack.speaker,iconPack:this.iconPack,t:this.t,size:"sm"})),m("div",{class:"row"},m("select",{class:"dyte-select",onChange:t=>this.setDevice(t.target.value)},this.speakerDevices.map((({deviceId:e,label:i})=>{var s;return m("option",{value:e,selected:(null===(s=this.currentDevices.speaker)||void 0===s?void 0:s.deviceId)===e},i||"Speaker "+ ++t)}))))),"full"===this.variant&&m("dyte-button",{variant:"secondary",onClick:()=>this.testAudio(),iconPack:this.iconPack,t:this.t},m("dyte-icon",{icon:this.iconPack.speaker,slot:"start",iconPack:this.iconPack,t:this.t}),this.t("test"))))}static get watchers(){return{meeting:["meetingChanged"]}}};Lb.style=".dyte-select{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.dyte-select:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)}.dyte-select{display:block;border-radius:var(--dyte-border-radius-sm, 4px);border-width:var(--dyte-border-width-none, 0);border-style:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:var(--dyte-space-3, 12px);font-size:16px;--icon-size:var(--dyte-select-chevron-size, var(--dyte-space-6, 24px));--icon-right-position:var(--dyte-select-chevron-right-position, var(--dyte-space-2, 8px));background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e\");background-position:right var(--icon-right-position) center;background-repeat:no-repeat;background-size:var(--icon-size) var(--icon-size);padding-right:calc(var(--icon-right-position) * 5);width:100%;max-width:100%;text-overflow:ellipsis}.inline .dyte-select{margin-top:var(--dyte-space-1, 4px);width:100%;padding-top:var(--dyte-space-1, 4px);padding-bottom:var(--dyte-space-1, 4px);padding-left:var(--dyte-space-1\\.5, 6px);padding-right:var(--dyte-space-1\\.5, 6px);padding-right:var(--dyte-space-8, 32px);font-size:14px}.row{display:flex;width:100%;align-items:center;justify-content:space-between;gap:var(--dyte-space-3, 12px)}.group{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px)}.group>*{margin-bottom:var(--dyte-space-2, 8px)}.group>*:last-child{margin-bottom:var(--dyte-space-0, 0px)}.group select{flex:1 1 0%}.inline.group{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-0\\.5, 2px)}.inline.group>*{margin-bottom:var(--dyte-space-0, 0px)}label{display:flex;-webkit-user-select:none;-moz-user-select:none;user-select:none;align-items:center;gap:var(--dyte-space-1, 4px);font-size:14px}.inline .container{display:flex;align-items:center;justify-content:flex-start;gap:var(--dyte-space-2, 8px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px)}";const Tb=class{constructor(t){vt(this,t),this.dyteChange=k(this,"dyteChange",4),this.onClick=()=>{this.readonly||this.disabled||(this.checked=!this.checked)},this.onKeyPress=t=>{if(!this.readonly)switch(t.key){case"Enter":case" ":this.checked=!this.checked}},this.checked=!1,this.readonly=!1,this.disabled=!1,this.iconPack=ts,this.t=ns()}connectedCallback(){this.checkedChange(this.checked)}checkedChange(t){this.checked=t,this.dyteChange.emit(t)}render(){return m(f,{role:"switch",tabIndex:this.disabled&&0,"aria-readonly":this.readonly,"aria-checked":this.checked,"aria-disabled":this.disabled,class:{checked:this.checked},onClick:this.onClick,onKeyPress:this.onKeyPress},m("div",{class:"switch",part:"switch"}))}static get watchers(){return{checked:["checkedChange"]}}};Tb.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{box-sizing:border-box;display:inline-flex;height:var(--dyte-space-6, 24px);width:var(--dyte-space-10, 40px);align-items:center;padding:var(--dyte-space-1, 4px);border-radius:9999px;background-color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52));cursor:pointer}.switch{box-sizing:border-box;height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);background-color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)));border-radius:9999px;transition-property:var(--dyte-transition-property, all);transition-duration:200ms}:host(.checked){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity))}:host(.checked) .switch{transform:translateX(100%)}:host([readonly]),:host([disabled]){cursor:not-allowed;opacity:0.6}";var Eb=Object.freeze({__proto__:null,dyte_audio_visualizer:Cb,dyte_microphone_selector:Pb,dyte_speaker_selector:Lb,dyte_switch:Tb});const Ab=class{constructor(t){vt(this,t),this.channel=void 0,this.t=ns(),this.iconPack=ts,this.members=[]}renderMembers(){return m("ul",{class:"scrollbar"},this.members.map((t=>m("li",null,m("dyte-avatar",{participant:{name:t.name,picture:t.picture},size:"sm"}),m("span",null,t.name)))))}render(){return m(f,null,m("header",null,this.t("chat.channel_members")),this.renderMembers())}};Ab.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))\n    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));display:flex;flex-direction:column;width:var(--dyte-space-72, 288px);padding-top:var(--dyte-space-5, 20px);padding-bottom:var(--dyte-space-5, 20px);padding-left:var(--dyte-space-8, 32px);padding-right:var(--dyte-space-8, 32px)}header{font-size:20px}dyte-spinner{margin-top:var(--dyte-space-10, 40px);margin-bottom:var(--dyte-space-10, 40px);margin-left:auto;margin-right:auto}ul{margin-left:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0, 0px);margin-top:var(--dyte-space-6, 24px);margin-bottom:var(--dyte-space-4, 16px);height:var(--dyte-space-48, 192px);padding:var(--dyte-space-0, 0px);overflow-y:auto;list-style-type:none;display:flex;flex-direction:column;gap:var(--dyte-space-2, 8px)}ul li{margin-right:var(--dyte-space-2, 8px);display:flex;align-items:center;gap:var(--dyte-space-2, 8px);padding:var(--dyte-space-2, 8px);cursor:pointer;border-radius:var(--dyte-border-radius-sm, 4px)}ul li:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}ul li dyte-avatar{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px);font-size:14px;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}";var Mb=Object.freeze({__proto__:null,dyte_channel_details:Ab});const Rb=class{constructor(t){vt(this,t),this.edit=k(this,"edit",7),this.reply=k(this,"reply",7),this.pin=k(this,"pin",7),this.delete=k(this,"delete",7),this.renderMessage=()=>{switch(this.message.type){case"text":return m("div",{"is-continued":this.isContinued,key:this.message.id},this.isUnread&&m("div",{class:"new-chat-marker",part:"new-chat-marker"},this.t("chat.new")),m("dyte-text-message",{message:this.message,now:this.now,isContinued:this.isContinued,"data-timestamp":this.message.time.getTime(),iconPack:this.iconPack,t:this.t,showBubble:!0}));case"image":return m("div",{"is-continued":this.isContinued,key:this.message.id},this.isUnread&&m("div",{class:"new-chat-marker",part:"new-chat-marker"},this.t("chat.new")),m("dyte-image-message",{message:this.message,now:this.now,isContinued:this.isContinued,iconPack:this.iconPack,"data-timestamp":this.message.time.getTime(),t:this.t,showBubble:!0}));case"file":return m("div",{"is-continued":this.isContinued,key:this.message.id},this.isUnread&&m("div",{class:"new-chat-marker",part:"new-chat-marker"},this.t("chat.new")),m("dyte-file-message",{message:this.message,now:this.now,isContinued:this.isContinued,iconPack:this.iconPack,t:this.t,"data-timestamp":this.message.time.getTime(),showBubble:!0}));case"custom":this.child.setAttribute("message",JSON.stringify(this.message));const t=this.child.cloneNode(!0);return m("div",{"is-continued":this.isContinued,key:this.message.id,ref:e=>e.appendChild(t)})}},this.onReply=()=>{this.reply.emit(this.message)},this.onPinned=()=>{this.pin.emit(this.message)},this.onDelete=()=>{this.delete.emit(this.message)},this.onEdit=async()=>{this.edit.emit(this.message)},this.isTouchDevice=()=>"ontouchstart"in window||navigator.maxTouchPoints>0,this.message=void 0,this.isContinued=void 0,this.child=void 0,this.isUnread=void 0,this.size=void 0,this.iconPack=ts,this.t=ns(),this.isSelf=!1,this.canEdit=!1,this.canDelete=!1,this.canReply=!1,this.canPin=!1,this.disableControls=!1,this.alignRight=!1,this.senderDisplayPicture=void 0,this.hideAvatar=!1,this.now=new Date,this.leftAlign=!1}renderControls(){if(!this.disableControls)return m("dyte-menu",{placement:this.alignRight?"bottom-end":"bottom-start"},m("button",{slot:"trigger",class:"actions"},m("dyte-icon",{icon:this.iconPack.chevron_down})),m("dyte-menu-list",null,this.canReply&&m("dyte-menu-item",{onClick:this.onReply},m("dyte-icon",{icon:this.iconPack.back,slot:"start"}),this.t("chat.reply")),this.canPin&&m("dyte-menu-item",{onClick:this.onPinned},m("dyte-icon",{icon:this.iconPack.pin,slot:"start"}),this.t("pin")),this.canEdit&&m("dyte-menu-item",{onClick:this.onEdit},m("dyte-icon",{icon:this.iconPack.edit,slot:"start"}),this.t("chat.edit_msg")),this.canDelete&&m("dyte-menu-item",{onClick:this.onDelete},m("dyte-icon",{icon:this.iconPack.delete,slot:"start"}),this.t("chat.delete_msg"))))}renderAvatar(){if(!this.hideAvatar)return this.isContinued?m("div",{class:"avatar"}):m("div",{class:"avatar"},m("dyte-avatar",{size:"sm",participant:{name:this.message.displayName,picture:this.senderDisplayPicture}}))}render(){return m(f,null,m("div",{class:{"message-wrapper":!0,"align-right":this.alignRight,"left-align":this.leftAlign},"is-continued":this.isContinued},this.renderAvatar(),m("div",{class:{message:!0,"show-on-hover":!this.isTouchDevice()},"is-continued":this.isContinued},this.renderMessage(),this.renderControls())))}get $el(){return x(this)}};Rb.style=".message-wrapper{display:flex;gap:var(--dyte-space-2, 8px);margin-left:var(--dyte-space-4, 16px);margin-right:var(--dyte-space-4, 16px);margin-top:var(--dyte-space-4, 16px)}[is-continued] .message-wrapper{margin-top:var(--dyte-space-0, 0px)}.message-wrapper.align-right{flex-direction:row-reverse}.file-picker{display:none}.message{position:relative;display:flex}.show-on-hover dyte-menu{visibility:hidden}.show-on-hover:hover dyte-menu{visibility:visible}.align-right .message{justify-content:flex-end;margin-left:auto}.align-right .message .head{margin-right:var(--dyte-space-1, 4px);margin-left:var(--dyte-space-0, 0px);flex-direction:row-reverse;gap:var(--dyte-space-4, 16px)}.align-right .message dyte-text-message .bubble,.align-right .message dyte-image-message .bubble,.align-right .message dyte-file-message .bubble{padding-right:var(--dyte-space-5, 20px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.align-right .message .actions dyte-icon{color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.align-right dyte-menu{left:auto;right:var(--dyte-space-0, 0px)}.head{margin-bottom:var(--dyte-space-2, 8px);margin-left:var(--dyte-space-1, 4px);display:flex;align-items:center;gap:var(--dyte-space-2, 8px)}.head .name{font-size:14px;font-weight:600}.head .time{font-size:12px;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}dyte-menu{position:absolute;left:var(--dyte-space-0, 0px);top:var(--dyte-space-6, 24px);border-radius:var(--dyte-border-radius-lg, 12px)}dyte-menu dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);cursor:pointer}[is-continued] dyte-menu{top:var(--dyte-space-2, 8px)}.actions{display:flex;align-items:center;justify-content:center;padding:var(--dyte-space-0\\.5, 2px);border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent}.actions dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.body{margin-top:var(--dyte-space-1, 4px);margin-bottom:var(--dyte-space-1, 4px);overflow-wrap:break-word;font-size:14px;line-height:1.375}.body .emoji{font-size:24px}.body.bubble{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-1, 4px);max-width:var(--dyte-space-96, 384px);padding-top:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-3, 12px);padding-left:var(--dyte-space-5, 20px);padding-right:var(--dyte-space-5, 20px);overflow-wrap:break-word;font-size:14px;line-height:1.375;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.body.bubble p{margin:var(--dyte-space-0, 0px);word-break:break-word}p{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-3, 12px)}dyte-text-message,dyte-image-message,dyte-file-message{display:block;font-family:var(--dyte-font-family, sans-serif);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));box-sizing:border-box}*[is-continued]{margin-top:var(--dyte-space-0, 0px)}.image{position:relative;height:var(--dyte-space-40, 160px);max-width:var(--dyte-space-64, 256px);cursor:pointer}.image img{display:none;height:100%;width:100%;border-radius:var(--dyte-border-radius-sm, 4px);-o-object-fit:cover;object-fit:cover}.image .image-spinner{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.image .image-spinner dyte-spinner{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}.image .image-errored{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);background-color:rgba(var(--dyte-colors-danger, 255 45 45) / 0.1);--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}.image .actions{display:none;height:var(--dyte-space-8, 32px);align-items:center;position:absolute;top:var(--dyte-space-2, 8px);right:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.image .actions .action{height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);border-radius:var(--dyte-border-radius-none, 0);border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.image .actions .action:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.image.loaded img{display:block}.image.loaded .image-spinner{display:none}.image:hover .actions,.image:focus .actions{display:flex}.file{display:flex;align-items:center;gap:var(--dyte-space-1, 4px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);padding-top:var(--dyte-space-1\\.5, 6px);padding-bottom:var(--dyte-space-1\\.5, 6px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.file .file-data{flex:1 1 0%}.file .file-data .name{word-break:break-all;color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.file .file-data .file-data-split{margin-top:var(--dyte-space-0\\.5, 2px);display:flex;align-items:center;font-size:12px}.file .file-data .file-data-split .ext{margin-right:var(--dyte-space-2, 8px);text-transform:uppercase;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.file .file-data .file-data-split .divider{height:var(--dyte-space-4, 16px);width:var(--dyte-space-0\\.5, 2px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.file .file-data .file-data-split .size{margin-left:var(--dyte-space-2, 8px)}a{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity));-webkit-text-decoration-line:none;text-decoration-line:none}a:hover{-webkit-text-decoration-line:underline;text-decoration-line:underline}.new-chat-marker{display:flex;width:100%;align-items:center;gap:var(--dyte-space-2, 8px);--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity))}.new-chat-marker::before{content:'';height:1px;flex:1 1 0%;background-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / 0.5)}.show-new-messages-ctr{pointer-events:none;display:flex;justify-content:flex-end;padding:var(--dyte-space-3, 12px);z-index:0;margin-top:calc(var(--dyte-space-14, 56px) * -1)}.show-new-messages{pointer-events:auto;--tw-translate-y:calc(var(--dyte-space-6, 24px) * -1);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));opacity:0;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.show-new-messages.active{--tw-translate-y:var(--dyte-space-0, 0px);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));opacity:1}blockquote{margin:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-3, 12px);background-color:transparent}.block-quote,blockquote{--tw-border-spacing-x:1px;--tw-border-spacing-y:1px;border-spacing:var(--tw-border-spacing-x) var(--tw-border-spacing-y);border-top-width:var(--dyte-border-width-none, 0);border-bottom-width:var(--dyte-border-width-none, 0);border-left-width:var(--dyte-border-width-md, 2px);border-right-width:var(--dyte-border-width-none, 0);border-style:solid;border-left-color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));padding:var(--dyte-space-0\\.5, 2px);padding-left:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px) !important;border-radius:var(--dyte-border-radius-sm, 4px);border-top-left-radius:var(--dyte-border-radius-none, 0);border-bottom-left-radius:var(--dyte-border-radius-none, 0)}.link{color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.align-right .block-quote{border-color:rgb(var(--dyte-colors-text-on-brand-600, var(--dyte-colors-text-600, 255 255 255 / 0.52)));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-bg-opacity))}.align-right .link{color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.align-right .image .actions dyte-icon{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity))}.avatar{display:flex;width:var(--dyte-space-6, 24px)}.avatar dyte-avatar{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px);font-size:10px}.message{width:75%}.left-align .body{margin-top:var(--dyte-space-4, 16px)}.left-align [is-continued] .body{margin-top:var(--dyte-space-0, 0px)}.left-align .body{--tw-translate-x:calc(var(--dyte-space-8, 32px) * -1);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}";const Db=class{constructor(t){vt(this,t),this.stateUpdate=k(this,"dyteStateUpdate",7),this.message=void 0,this.now=new Date,this.isContinued=!1,this.iconPack=ts,this.t=ns(),this.showBubble=!1,this.status="loading"}render(){return m(f,null,!this.isContinued&&m(ja,{name:this.message.displayName,time:this.message.time,now:this.now}),m("div",{class:{body:!0,bubble:this.showBubble},part:"body"},m("div",{class:{image:!0,loaded:"loaded"===this.status}},m("img",{src:$a(this.message.link),onLoad:()=>{this.status="loaded"},onError:()=>{this.status="errored"},onClick:()=>{"loaded"===this.status&&(this.stateUpdate.emit({image:this.message}),Ss.image=this.message)}}),"loading"===this.status&&m("div",{class:"image-spinner",title:this.t("chat.img.loading"),"aria-label":this.t("chat.img.loading")},m("dyte-spinner",{iconPack:this.iconPack,t:this.t})),"errored"===this.status&&m("div",{class:"image-errored",title:this.t("chat.error.img_not_found"),"aria-label":this.t("chat.error.img_not_found")},m("dyte-icon",{icon:this.iconPack.image_off,iconPack:this.iconPack,t:this.t})),"loaded"===this.status&&m("div",{class:"actions"},m("dyte-button",{class:"action",variant:"secondary",kind:"icon",onClick:()=>{this.stateUpdate.emit({image:this.message}),Ss.image=this.message},iconPack:this.iconPack,t:this.t},m("dyte-icon",{icon:this.iconPack.full_screen_maximize})),m("dyte-button",{class:"action",variant:"secondary",kind:"icon",onClick:()=>Ko(this.message.link,{fallbackName:"image"}),iconPack:this.iconPack,t:this.t},m("dyte-icon",{icon:this.iconPack.download,iconPack:this.iconPack,t:this.t}))))))}};Db.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.image-spinner{cursor:wait}.image-errored{cursor:not-allowed}";const Ib=class{constructor(t){vt(this,t),this.pagesToRender=[[]],this.currentTime=()=>(new Date).getTime(),this.observe=t=>{t&&this.intersectionObserver.observe(t)},this.pageSize=void 0,this.pagesAllowed=void 0,this.fetchData=void 0,this.createNodes=void 0,this.selectedItemId=void 0,this.autoScroll=!0,this.iconPack=ts,this.t=ns(),this.emptyListLabel=null,this.isLoading=!1,this.rerenderBoolean=!1,this.shouldRenderNewNodes=!0,this.hasNewNodesToRender=!1,this.showEmptyListLabel=!1}async onNewNode(t){this.shouldRenderNewNodes?(this.addNodeToRender(t,!1),this.rerender()):this.hasNewNodesToRender=!0}async onNodeDelete(t){const e=this.pagesToRender.flat().length;this.pagesToRender=this.pagesToRender.map((e=>e.filter((e=>e.id!==t)))),e!==this.pagesToRender.flat().length&&this.rerender()}async onNodeUpdate(t,e){let i=!1;this.pagesToRender=this.pagesToRender.map((s=>s.map((s=>s.id===t?(i=!0,e):s)))),i&&this.rerender()}onItemChanged(t,e){t!==e&&(this.pagesToRender=[[]],this.loadFirstPage().then((()=>this.rerender())))}connectedCallback(){this.rerender=yl(this.rerender.bind(this),50,{maxWait:200}),this.intersectionObserver=new IntersectionObserver((t=>{It((()=>{for(const e of t)"bottom-scroll"===e.target.id&&(e.isIntersecting?this.loadBottom():this.shouldRenderNewNodes=!1),"top-scroll"===e.target.id&&e.isIntersecting&&this.loadTop()}))}))}disconnectedCallback(){this.intersectionObserver.disconnect()}componentDidLoad(){this.loadFirstPage(),this.observe(this.$topRef),this.observe(this.$bottomRef)}componentDidRender(){this.shouldRenderNewNodes&&this.autoScroll&&Ba(this.$paginatedList)}loadFirstPage(){return this.loadPage(this.currentTime(),this.pageSize,!0,(t=>{0===t.length&&(this.showEmptyListLabel=!0)}))}loadTop(){if(0===this.pagesToRender.length)return;if(1===this.pagesToRender.length&&this.pagesToRender[0].length<this.pageSize)return;const t=this.pagesToRender[0][0].timeMs;this.loadPage(t-1,this.pageSize,!0,(()=>{}))}loadBottom(){if(0===this.pagesToRender.length)return void(this.shouldRenderNewNodes=!0);if(1===this.pagesToRender.length&&this.pagesToRender[0].length<this.pageSize)return void(this.shouldRenderNewNodes=!0);const t=this.pagesToRender.at(-1).at(-1).timeMs;this.loadPage(t+1,this.pageSize,!1,(()=>Ba(this.$paginatedList)))}addNodeToRender(t,e){if(e){const e=this.pagesToRender[0];if(e&&(null==e?void 0:e.length)<this.pageSize)e.unshift(t);else{const e=[t];this.pagesToRender.unshift(e),this.removeLastPageIfNeeded(!1)}}else{const[e]=this.pagesToRender.slice(-1);if(e&&(null==e?void 0:e.length)<this.pageSize)e.push(t);else{const e=[t];this.pagesToRender.push(e),this.removeLastPageIfNeeded(!0)}}}async loadPage(t,e,i,s=()=>{}){this.isLoading=!0;const a=await this.fetchData(t,e,i);if(this.isLoading=!1,!(null==a?void 0:a.length))return i||(this.hasNewNodesToRender=!1,this.shouldRenderNewNodes=!0),void s([]);a.forEach((t=>this.addNodeToRender(t,i))),this.rerender(),s(a)}rerender(){this.rerenderBoolean=!this.rerenderBoolean}removeLastPageIfNeeded(t){this.pagesToRender.length>this.pagesAllowed&&(t?this.pagesToRender.shift():this.pagesToRender.pop())}onDownArrowClicked(){this.loadBottom()}render(){var t;return m(f,null,m("div",{class:"scrollbar container",part:"container",ref:t=>this.$paginatedList=t},m("div",{class:{"show-new-messages-ctr":!0,active:!this.shouldRenderNewNodes}},m("dyte-button",{class:"show-new-messages",kind:"icon",variant:"secondary",part:"show-new-messages",onClick:()=>this.onDownArrowClicked(),iconPack:this.iconPack,t:this.t},m("dyte-icon",{icon:this.iconPack.chevron_down,iconPack:this.iconPack,t:this.t}))),m("div",{class:"smallest-dom-element",id:"bottom-scroll",ref:t=>this.$bottomRef=t}),this.isLoading&&0===this.pagesToRender.flat().length&&m("dyte-spinner",{size:"lg"}),0===this.pagesToRender.flat().length&&this.showEmptyListLabel?m("div",{class:"empty-list"},null!==(t=this.emptyListLabel)&&void 0!==t?t:this.t("list.empty")):m("div",{class:"page-wrapper"},this.pagesToRender.map((t=>this.createNodes(t)))),m("div",{class:"smallest-dom-element",id:"top-scroll",ref:t=>this.$topRef=t})))}static get watchers(){return{selectedItemId:["onItemChanged"]}}};Ib.style=".scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))\n    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{position:relative;display:flex;flex-direction:column;flex:1}.container{box-sizing:border-box;display:flex;flex-direction:column-reverse;padding-top:var(--dyte-space-4, 16px);padding-bottom:var(--dyte-space-4, 16px);flex:1 0 0px;overflow-y:scroll;}.file-picker{display:none}.chat *:first-child{margin-top:var(--dyte-space-0, 0px)}.chat .head{display:flex;align-items:center}.chat .head .name{margin-right:var(--dyte-space-4, 16px);font-size:12px;font-weight:700}.chat .head .time{font-size:12px;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.chat .body{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);overflow-wrap:break-word;font-size:14px;line-height:1.375}.chat .body .emoji{font-size:24px}p{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-3, 12px)}dyte-text-message,dyte-image-message,dyte-file-message{margin-top:var(--dyte-space-4, 16px);display:block;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);font-family:var(--dyte-font-family, sans-serif);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));box-sizing:border-box}*[is-continued]{margin-top:var(--dyte-space-3, 12px)}dyte-text-message[is-continued]{margin-top:var(--dyte-space-2, 8px)}.chat .image{position:relative;height:var(--dyte-space-40, 160px);max-width:var(--dyte-space-64, 256px);cursor:pointer}.chat .image img{display:none;height:100%;width:100%;border-radius:var(--dyte-border-radius-sm, 4px);-o-object-fit:cover;object-fit:cover}.chat .image .image-spinner{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.chat .image .image-spinner dyte-spinner{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}.chat .image .image-errored{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);background-color:rgba(var(--dyte-colors-danger, 255 45 45) / 0.1);--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}.chat .image .actions{display:none;height:var(--dyte-space-8, 32px);align-items:center;position:absolute;top:var(--dyte-space-2, 8px);right:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.chat .image .actions .action{height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);border-radius:var(--dyte-border-radius-none, 0);border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.chat .image .actions .action:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.image.loaded img{display:block}.image.loaded .image-spinner{display:none}.image:hover .actions,.image:focus .actions{display:flex}.chat .file{display:flex;align-items:center;gap:var(--dyte-space-1, 4px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);padding-top:var(--dyte-space-1\\.5, 6px);padding-bottom:var(--dyte-space-1\\.5, 6px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.chat .file .file-data{flex:1 1 0%}.chat .file .file-data .name{word-break:break-all;color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.chat .file .file-data .file-data-split{margin-top:var(--dyte-space-0\\.5, 2px);display:flex;align-items:center;font-size:12px}.chat .file .file-data .file-data-split .ext{margin-right:var(--dyte-space-2, 8px);text-transform:uppercase;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.chat .file .file-data .file-data-split .divider{height:var(--dyte-space-4, 16px);width:var(--dyte-space-0\\.5, 2px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.chat .file .file-data .file-data-split .size{margin-left:var(--dyte-space-2, 8px)}.smallest-dom-element{width:1px}#top-scroll{transform:translateY(20vh)}#bottom-scroll{transform:translateY(-20vh)}a{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity));-webkit-text-decoration-line:none;text-decoration-line:none}a:hover{-webkit-text-decoration-line:underline;text-decoration-line:underline}.show-new-messages-ctr{pointer-events:none;position:absolute;bottom:var(--dyte-space-2, 8px);right:var(--dyte-space-4, 16px);z-index:10;margin-top:calc(var(--dyte-space-14, 56px) * -1);--tw-translate-y:var(--dyte-space-28, 112px);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));opacity:0;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.show-new-messages-ctr.active{--tw-translate-y:var(--dyte-space-0, 0px);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));opacity:1}.show-new-messages{pointer-events:auto;border-radius:9999px}.show-new-messages:hover{border-radius:9999px;--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000);--tw-ring-opacity:1;--tw-ring-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-ring-opacity));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}dyte-spinner,.empty-list{margin:auto}.page-wrapper{margin-left:var(--dyte-space-1, 4px);margin-right:var(--dyte-space-1, 4px)}.message-wrapper{margin-bottom:var(--dyte-space-2, 8px)}.pinned .message-wrapper{position:relative}.pinned .pin-icon{position:absolute;right:calc(var(--dyte-space-1, 4px) * -1);top:calc(var(--dyte-space-1, 4px) * -1);display:flex;border-radius:var(--dyte-border-radius-sm, 4px)}.pinned dyte-message-view{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));padding-top:var(--dyte-space-1, 4px);padding-bottom:var(--dyte-space-1, 4px)}";var Ob=Object.freeze({__proto__:null,dyte_chat_message:Rb,dyte_file_message:class{constructor(t){vt(this,t),this.message=void 0,this.now=new Date,this.isContinued=!1,this.iconPack=ts,this.t=ns(),this.showBubble=!1}render(){const t=$a(this.message.link);return m(f,null,!this.isContinued&&m(ja,{name:this.message.displayName,time:this.message.time,now:this.now}),m("div",{class:{body:!0,bubble:this.showBubble},part:"body"},m("div",{class:"file"},m("div",{class:"file-data"},m("div",{class:"name"},this.message.name),m("div",{class:"file-data-split"},m("div",{class:"ext"},qo(this.message.name)),m("span",{class:"divider"}),m("div",{class:"size"},Zo(this.message.size)))),m("dyte-button",{variant:"secondary",kind:"icon",iconPack:this.iconPack,t:this.t,onClick:()=>Ko(t,{name:this.message.name,fallbackName:"file"}),part:"button"},m("dyte-icon",{icon:this.iconPack.download,iconPack:this.iconPack,t:this.t})))))}},dyte_image_message:Db,dyte_paginated_list:Ib,dyte_text_message:class{constructor(t){vt(this,t),this.message=void 0,this.now=new Date,this.isContinued=!1,this.iconPack=ts,this.t=ns(),this.showBubble=!1}render(){return m(f,null,!this.isContinued&&m(ja,{name:this.message.displayName,time:this.message.time,now:this.now}),m("div",{class:{body:!0,bubble:this.showBubble},part:"body"},m("div",{class:{text:!0,emoji:Oa(this.message.message)}},m(Pn,{message:this.message.message}))))}}});const $b=class{constructor(t){vt(this,t),this.onDeleteAttachment=k(this,"deleteAttachment",7),this.fileReader=new FileReader,this.generatePreview=()=>{"image"===this.attachment.type?this.fileReader.readAsDataURL(this.attachment.file):"file"===this.attachment.type&&(this.filePreview=this.attachment.file.name)},this.onDeleteClickHandler=()=>{this.filePreview=null,this.onDeleteAttachment.emit()},this.iconPack=ts,this.t=ns(),this.attachment=null,this.filePreview=null}onAttachmentChange(){this.generatePreview()}connectedCallback(){this.fileReader.onload=t=>{"string"==typeof t.target.result&&(this.filePreview=t.target.result)}}componentWillLoad(){this.onAttachmentChange()}render(){return m(f,null,m("div",{class:"preview-overlay"},m("div",{class:"preview"},m("dyte-tooltip",{label:this.t("chat.cancel_upload")},m("dyte-button",{variant:"secondary",kind:"icon",onClick:this.onDeleteClickHandler},m("dyte-icon",{icon:this.iconPack.dismiss}))),"image"===this.attachment.type?m("img",{class:"preview-image",src:this.filePreview}):m("div",{class:"preview-file"},m("span",null,this.filePreview)))))}static get watchers(){return{attachment:["onAttachmentChange"]}}};$b.style=":host{display:flex;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));border-top-left-radius:var(--dyte-border-radius-md, 8px);border-top-right-radius:var(--dyte-border-radius-md, 8px)}.preview-overlay{position:absolute;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);background-color:inherit}.preview{position:absolute;top:var(--dyte-space-4, 16px);left:var(--dyte-space-4, 16px);max-width:-moz-fit-content;max-width:fit-content;max-height:var(--dyte-space-20, 80px)}.preview:hover dyte-tooltip{display:block}.preview dyte-tooltip{position:absolute;top:calc(var(--dyte-space-1, 4px) * -1);left:calc(var(--dyte-space-1, 4px) * -1);display:none;margin-left:calc(var(--dyte-space-1, 4px) * -1);margin-top:calc(var(--dyte-space-1, 4px) * -1)}.preview dyte-button{display:flex;height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);align-items:center;justify-content:center;border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));border:1px solid rgb(var(--dyte-colors-text-1000, 255 255 255))}.preview dyte-icon{height:var(--dyte-space-3, 12px);width:var(--dyte-space-3, 12px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.preview-image{height:var(--dyte-space-16, 64px);width:var(--dyte-space-16, 64px);-o-object-fit:cover;object-fit:cover;max-height:100%;max-width:100%;overflow:clip;border-radius:var(--dyte-border-radius-md, 8px)}.preview-file{padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));overflow:hidden;text-overflow:ellipsis;white-space:nowrap;border-radius:var(--dyte-border-radius-md, 8px);max-width:200px}";const Ub=class{constructor(t){vt(this,t),this.pickerClose=k(this,"pickerClose",7),this.emojiClicked=k(this,"dyteEmojiClicked",7),this.iconPack=ts,this.t=ns(),this.emojiList=void 0,this.filterVal="",this.filteredEmojis=[]}componentWillLoad(){(async()=>(await fetch("https://cdn.dyte.in/assets/emojis-data.json")).json())().then((t=>{this.emojiList=t,this.handleInputChange({value:""})}))}handleInputChange(t){this.filterVal=t.value;const e=new RegExp(`([^,]*?${this.filterVal}[^,]*):(\\d+)`,"g");this.filteredEmojis=Array.from(this.emojiList.search.matchAll(e)).map((t=>({name:t[1],emoji:this.emojiList.emojis[t[2]]})))}handleEmojiClick(t){this.emojiClicked.emit(t)}mapEmojiList(){var t;return(null===(t=this.emojiList)||void 0===t?void 0:t.length)>0?m("div",{id:"loader"},m("dyte-spinner",{iconPack:this.iconPack,t:this.t})):m("div",{id:"emoji-grid",class:"scrollbar max-w-40"},this.filteredEmojis.map((t=>m("dyte-button",{iconPack:this.iconPack,t:this.t,key:`emoji-button-${t.name}`,class:"emoji",variant:"ghost",kind:"icon",title:t.name,onClick:()=>this.handleEmojiClick(t.emoji)},t.emoji))))}render(){return m(f,null,m("div",{class:"close-parent"},m("dyte-button",{variant:"ghost",kind:"icon",class:"close",onClick:()=>{var t;return null===(t=this.pickerClose)||void 0===t?void 0:t.emit()},"aria-label":this.t("close")},m("dyte-icon",{icon:this.iconPack.dismiss}))),m("div",{class:"emoji-parent"},m("input",{value:this.filterVal,onInput:t=>this.handleInputChange(t.target),placeholder:this.t("search")}),this.mapEmojiList()))}};Ub.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))\n    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{width:100%}.emoji-parent{box-sizing:border-box;display:inline-flex;height:var(--dyte-space-64, 256px);width:100%;max-width:640px;flex-direction:column;padding:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-0, 0px);-webkit-user-select:none;-moz-user-select:none;user-select:none;transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.close-parent{display:flex;flex:1 1 0%;justify-content:flex-end;padding:var(--dyte-space-0, 0px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}#emoji-grid{margin-top:var(--dyte-space-2, 8px);box-sizing:border-box;display:flex;flex-direction:row;flex-wrap:wrap;overflow-x:hidden;overflow-y:scroll;height:100%;grid-auto-rows:minmax(min-content, max-content)}#loader{display:flex;height:100%;width:100%;align-items:center;justify-content:center}input{display:block;height:var(--dyte-space-8, 32px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);font-size:14px;border-width:var(--dyte-border-width-none, 0);border-style:solid;border-style:none;border-color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}input::-moz-placeholder{color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}input::placeholder{color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}input{border-radius:var(--dyte-border-radius-sm, 4px);outline:2px solid transparent;outline-offset:2px;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms;border:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60))}input:focus{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-border-opacity));--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(4px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000);--tw-ring-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-ring-opacity));--tw-ring-opacity:0.3}.emoji{height:var(--dyte-space-10, 40px);width:var(--dyte-space-10, 40px);font-size:20px;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}";const Fb=class{constructor(t){vt(this,t),this.iconPack=ts,this.t=ns(),this.isActive=void 0}render(){const t={iconPack:this.iconPack,t:this.t};return m("dyte-tooltip",Object.assign({label:this.t("chat.send_emoji")},t),m("dyte-button",{variant:"ghost",kind:"icon",class:{active:this.isActive},title:this.t("chat.send_emoji"),iconPack:this.iconPack,t:this.t},m("dyte-icon",{icon:this.iconPack.emoji_multiple})))}};Fb.style=":host{}";const zb=class{constructor(t){vt(this,t),this.onFileChange=k(this,"fileChange",7),this.uploadFile=()=>{const t=this.fileInputField;t.type="file",this.filter&&(t.accept=this.filter),t.onchange=t=>{const{validity:e,files:[i]}=t.target;e.valid&&this.onFileChange.emit(i)},t.click()},this.filter=void 0,this.label=void 0,this.icon="attach",this.iconPack=ts,this.t=ns()}connectedCallback(){this.fileInputField=document.createElement("input")}disconnectedCallback(){this.fileInputField=void 0}render(){const t={iconPack:this.iconPack,t:this.t},e=this.label||this.t("chat.send_file"),i=this.iconPack[this.icon];return m("dyte-tooltip",Object.assign({label:e},t),m("dyte-button",{variant:"ghost",kind:"icon",onClick:()=>this.uploadFile(),title:e,iconPack:this.iconPack,t:this.t},m("dyte-icon",{icon:i})))}};zb.style=":host{}";const Nb=class{constructor(t){vt(this,t),this.onTextChange=k(this,"textChange",7),this.onInputHandler=()=>{const t=this.$textArea.value.trim();this.maybeResize(t),this.checkLength(t),this.onTextChange.emit(t)},this.maybeResize=t=>{const e=[...t.matchAll(/\n/g)].length;this.$textArea.style.height=`${Math.min(200,60+20*e)}px`},this.disabled=!1,this.placeholder=void 0,this.value=void 0,this.maxLength=void 0,this.rateLimitBreached=!1,this.keyDownHandler=()=>{},this.iconPack=ts,this.t=ns(),this.maxLengthBreached=0}componentDidLoad(){this.maxLength&&(this.$textArea.maxLength=this.maxLength);const t=this.$textArea.value.trim();""!==t&&this.maybeResize(t)}async setText(t,e=!1){this.$textArea.value=t,this.maybeResize(t),e&&this.$textArea.focus(),this.checkLength(t),this.onTextChange.emit(t)}checkLength(t){const e=t.length;e+10>=this.maxLength?this.maxLengthBreached=t.length:e+10<this.maxLength&&this.maxLengthBreached>0&&(this.maxLengthBreached=0)}render(){return m("div",{class:"chat-input",part:"chat-input-container"},this.maxLengthBreached>0&&m("div",{class:"text-error "+(this.maxLengthBreached===this.maxLength?"breached":"")},m("dyte-icon",{id:"warning-indicator",icon:this.iconPack.warning,part:"warning-indicator",iconPack:this.iconPack,t:this.t})," ",this.maxLengthBreached," / ",this.maxLength," ",this.t("chat.max_limit_warning")),this.rateLimitBreached&&m("div",{class:"text-error breached"},m("dyte-icon",{id:"warning-indicator",icon:this.iconPack.warning,part:"warning-indicator",iconPack:this.iconPack,t:this.t})," ",this.t("chat.rate_limit_error")),m("textarea",{ref:t=>this.$textArea=t,placeholder:this.placeholder,disabled:this.disabled,onInput:this.onInputHandler,onKeyDown:this.keyDownHandler,part:"chat-input",value:this.value}))}};Nb.style=".chat-input {\n  position: relative;\n  z-index: 10;\n  box-sizing: border-box;\n  display: flex;\n  flex-direction: column;\n  border-top-left-radius: var(--dyte-border-radius-md, 8px);\n  border-top-right-radius: var(--dyte-border-radius-md, 8px)\n}\n\n  .chat-input textarea {\n  --tw-bg-opacity: 1;\n  background-color: rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));\n  box-sizing: border-box;\n  padding: var(--dyte-space-3, 12px);\n  color: rgb(var(--dyte-colors-text-1000, 255 255 255))\n}\n\n  .chat-input textarea::-moz-placeholder {\n  color: rgb(var(--dyte-colors-text-1000, 255 255 255))\n}\n\n  .chat-input textarea::placeholder {\n  color: rgb(var(--dyte-colors-text-1000, 255 255 255))\n}\n\n  .chat-input textarea {\n  font-family: var(--dyte-font-family, sans-serif);\n  outline: 2px solid transparent;\n  outline-offset: 2px;\n  resize: none;\n  overflow-y: auto;\n  border-width: var(--dyte-border-width-none, 0);\n  border-style: none;\n  min-height: 60px;\n  font-size: 14px\n}\n\n@container chatcontainer (height < 360px) {\n  textarea {\n    height: 30px !important;\n    min-height: 30px !important\n  }\n}\n\n.text-error {\n  left: var(--dyte-space-0, 0px);\n  z-index: 10;\n  margin-top: var(--dyte-space-1, 4px);\n  margin-left: var(--dyte-space-1, 4px);\n  display: flex;\n  width: -moz-fit-content;\n  width: fit-content;\n  align-items: center;\n  justify-content: flex-start;\n  border-radius: var(--dyte-border-radius-sm, 4px);\n  --tw-border-opacity: 1;\n  border-color: rgba(var(--dyte-colors-warning, 255 205 7) / var(--tw-border-opacity));\n  --tw-bg-opacity: 1;\n  background-color: rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));\n  padding-left: var(--dyte-space-2, 8px);\n  padding-right: var(--dyte-space-2, 8px);\n  font-size: 12px;\n  font-weight: 600;\n  --tw-text-opacity: 1;\n  color: rgba(var(--dyte-colors-warning, 255 205 7) / var(--tw-text-opacity));\n  border: 1px solid\n}\n\n#warning-indicator {\n  margin-right: var(--dyte-space-1, 4px);\n  height: var(--dyte-space-3, 12px);\n  width: var(--dyte-space-3, 12px)\n}\n\n.text-error.breached {\n  --tw-border-opacity: 1;\n  border-color: rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-border-opacity));\n  --tw-text-opacity: 1;\n  color: rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))\n}";var jb=Object.freeze({__proto__:null,dyte_draft_attachment_view:$b,dyte_emoji_picker:Ub,dyte_emoji_picker_button:Fb,dyte_file_picker_button:zb,dyte_text_composer_view:Nb});const Bb=class{constructor(t){vt(this,t),this.stateUpdate=k(this,"dyteStateUpdate",7),this.onFullScreenchange=()=>{this.fullScreenActive=Sd()},this.toggleFullScreen=()=>{let t=this.targetElement||document.querySelector("dyte-meeting");t&&(this.fullScreenActive?(kd(),this.fullScreenActive=!1):(xd(t),this.fullScreenActive=!0),this.stateUpdate.emit({activeMoreMenu:!1}),Ss.activeMoreMenu=!1)},this.states=void 0,this.targetElement=void 0,this.variant="button",this.size=void 0,this.iconPack=ts,this.t=ns(),this.fullScreenActive=!1,this.isFullScreenSupported=!0}connectedCallback(){this.isFullScreenSupported=_d(),this.onFullScreenchange(),window.addEventListener("webkitfullscreenchange",this.onFullScreenchange),window.addEventListener("fullscreenchange",this.onFullScreenchange)}disconnectedCallback(){window.removeEventListener("webkitfullscreenchange",this.onFullScreenchange),window.removeEventListener("fullscreenchange",this.onFullScreenchange)}render(){return this.isFullScreenSupported?m(f,{title:this.t("full_screen")},m("dyte-controlbar-button",{size:this.size,iconPack:this.iconPack,t:this.t,onClick:this.toggleFullScreen,icon:this.fullScreenActive?this.iconPack.full_screen_minimize:this.iconPack.full_screen_maximize,label:this.fullScreenActive?this.t("full_screen.exit"):this.t("full_screen"),variant:this.variant})):null}};Bb.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}";var Hb=Object.freeze({__proto__:null,dyte_fullscreen_toggle:Bb});const Vb=class{constructor(t){vt(this,t),this.stateUpdate=k(this,"dyteStateUpdate",7),this.joinStage=k(this,"dyteJoinStage",7),this.leaveStage=k(this,"dyteLeaveStage",7),this.meeting=void 0,this.config=$t,this.states=void 0,this.size=void 0,this.iconPack=ts,this.t=ns(),this.dataConfig={title:this.t("stage.join_title"),label:{accept:this.t("stage.join_confirm"),reject:this.t("stage.join_cancel")},description:this.t("stage.join_summary")},this.isLoading=!1}render(){var t,e;const i={meeting:this.meeting,size:this.size,states:this.states||Ss,config:this.config,iconPack:this.iconPack,t:this.t};return m(f,{class:{stage:!0}},m("header",null,m("h2",null,this.dataConfig.title)),m(cs,{element:"dyte-participant-setup",defaults:i,props:{participant:null===(t=this.meeting)||void 0===t?void 0:t.self,size:"md"},childProps:{participant:null===(e=this.meeting)||void 0===e?void 0:e.self,size:"md"},deepProps:!0}),m("div",{class:"summary"},this.dataConfig.description),m("div",{class:"container"},m("dyte-button",{variant:"secondary",onClick:()=>this.leaveStage.emit(),title:this.dataConfig.label.reject,iconPack:this.iconPack,t:this.t},this.dataConfig.label.reject),m("dyte-button",{onClick:()=>{this.isLoading||(this.isLoading=!0,this.joinStage.emit())},title:this.dataConfig.label.accept,iconPack:this.iconPack,t:this.t},this.isLoading?m("dyte-icon",{icon:this.iconPack.spinner}):this.dataConfig.label.accept)))}};Vb.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))\n    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host::-webkit-scrollbar{width:var(--dyte-space-1\\.5, 6px);border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity))}:host::-webkit-scrollbar-thumb{border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}:host(.stage){box-sizing:border-box;display:block;width:512px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));padding:var(--dyte-space-6, 24px);-webkit-user-select:none;-moz-user-select:none;user-select:none;overflow:auto;border-radius:var(--dyte-border-radius-md, 8px);line-height:1.25}:host(.stage) dyte-participant-setup{display:flex;flex:1 1 0%;align-items:center;justify-content:space-around;margin-left:auto;margin-right:auto}:host(.stage) .container dyte-button{flex-grow:1;padding:var(--dyte-space-1, 4px);width:50%}:host(.stage) .container dyte-button:nth-child(1){margin-right:var(--dyte-space-1\\.5, 6px)}:host(.stage) .container dyte-button:nth-child(2){margin-left:var(--dyte-space-1\\.5, 6px)}:host(.stage) h2{font-size:24px;font-weight:500;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}:host(.stage) header{padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}:host(.stage) .summary{padding:var(--dyte-space-4, 16px)}.deny-access{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}.container{width:100%;max-width:1080px;display:flex;flex:1 1 0%;align-items:center;justify-content:space-around}header{display:flex;align-items:center;justify-content:space-between}";const Gb=class{constructor(t){vt(this,t),this.stateUpdate=k(this,"dyteStateUpdate",7),this.meeting=void 0,this.states=void 0,this.iconPack=ts,this.t=ns()}connectedCallback(){this.states.activeOverlayModal.timeout&&setTimeout((()=>{this.stateUpdate.emit({activeOverlayModal:{active:!1}}),Ss.activeOverlayModal={active:!1}}),this.states.activeOverlayModal.timeout)}componentDidLoad(){}disconnectedCallback(){}render(){return m(f,null,m("dyte-icon",{icon:this.states.activeOverlayModal.icon,iconPack:this.iconPack,t:this.t}),m("h2",null,this.states.activeOverlayModal.title),m("p",null,this.states.activeOverlayModal.description))}};Gb.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / 0.6);position:fixed;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);z-index:50}dyte-icon{height:var(--dyte-space-20, 80px)}h2{margin:var(--dyte-space-2, 8px);font-weight:500}p{margin:var(--dyte-space-0, 0px);font-size:16px}";var qb=Object.freeze({__proto__:null,dyte_join_stage:Vb,dyte_overlay_modal:Gb});const Zb=class{constructor(t){vt(this,t),this.dismiss=k(this,"dyteNotificationDismiss",7),this.notification=void 0,this.size=void 0,this.iconPack=ts,this.t=ns(),this.imageState="loading"}connectedCallback(){this.notificationChanged(this.notification)}notificationChanged(t){null!=t&&"number"==typeof t.duration&&setTimeout((()=>{this.dismiss.emit(t.id)}),t.duration)}render(){var t;return m(f,null,m("div",{class:"ctr"},null!=this.notification.icon&&m("dyte-icon",{class:"icon",icon:this.notification.icon,variant:null!==(t=this.notification.iconVariant)&&void 0!==t?t:"primary",iconPack:this.iconPack,t:this.t}),null!=this.notification.image&&null==this.notification.icon&&"errored"!==this.imageState&&m("img",{src:this.notification.image,class:{loaded:"loaded"===this.imageState},onLoad:()=>this.imageState="loaded",onError:()=>this.imageState="errored"}),m("p",{class:"message"},m(Pn,{message:this.notification.message})),m("div",{class:"right"},null!=this.notification.button&&m("dyte-button",{size:"sm",variant:this.notification.button.variant,onClick:()=>this.notification.button.onClick(),iconPack:this.iconPack,t:this.t},this.notification.button.text),m("dyte-icon",{"aria-label":this.t("dismiss"),class:"dismiss",icon:this.iconPack.dismiss,onClick:()=>this.dismiss.emit(this.notification.id),iconPack:this.iconPack,t:this.t}))))}static get watchers(){return{notification:["notificationChanged"]}}};Zb.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{pointer-events:none;display:block;height:var(--dyte-space-10, 40px);color:rgb(var(--dyte-colors-text-1000, 255 255 255));animation:show 0.4s ease;transition:0.4s;z-index:100}.ctr{box-sizing:border-box;display:inline-flex;height:100%;min-width:var(--dyte-space-40, 160px);align-items:center;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);-webkit-user-select:none;-moz-user-select:none;user-select:none;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));--tw-shadow:0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);--tw-shadow-color:rgb(var(--dyte-colors-background-1000, 8 8 8));--tw-shadow:var(--tw-shadow-colored);pointer-events:auto}img{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-0, 0px);width:var(--dyte-space-0, 0px);border-radius:9999px}img.loaded{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}.message{margin-right:var(--dyte-space-3, 12px);max-width:var(--dyte-space-72, 288px);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.message p{margin:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-1, 4px);display:inline-block}.message blockquote{display:none}dyte-icon.icon{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}dyte-icon.dismiss{margin-left:auto;height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);border-radius:var(--dyte-border-radius-md, 8px);color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}dyte-icon.dismiss:hover{cursor:pointer;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}dyte-icon.dismiss{transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}dyte-button{margin-left:var(--dyte-space-4, 16px);margin-right:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-sm, 4px)}.right{margin-left:auto;display:flex;align-items:center}.right>*{margin-left:var(--dyte-space-2, 8px)}.right>*:first-child{margin-left:var(--dyte-space-0, 0px)}:host(.exit){animation:exit 0.4s ease}@keyframes show{0%{opacity:0;transform:translateX(-120px)}100%{opacity:1;transform:translateX(0px)}}@keyframes exit{0%{opacity:1;transform:translateX(0)}100%{opacity:0;transform:translateX(-120px)}}:host([size='sm']){font-size:14px}";var Kb=Object.freeze({__proto__:null,dyte_notification:Zb});const Wb=class{constructor(t){vt(this,t),this.stageStateListener=()=>{this.canProduceVideo="ALLOWED"===this.meeting.self.permissions.canProduceVideo},this.deviceListUpdateListener=({devices:t})=>{this.videoDevices=t.filter((t=>"videoinput"===t.kind))},this.deviceUpdateListener=({device:t})=>{"videoinput"===t.kind&&(this.currentDevice=t)},this.mediaPermissionUpdateListener=async({kind:t,message:e})=>{this.meeting&&"video"===t&&"ACCEPTED"===e&&(this.videoDevices=await this.meeting.self.getVideoDevices())},this.meeting=void 0,this.size=void 0,this.iconPack=ts,this.variant="full",this.t=ns(),this.videoDevices=[],this.currentDevice=void 0,this.canProduceVideo=!0}meetingChanged(t){var e,i,s;null!=t&&(null===(e=t.self)||void 0===e||e.addListener("deviceListUpdate",this.deviceListUpdateListener),null===(i=t.self)||void 0===i||i.addListener("deviceUpdate",this.deviceUpdateListener),null===(s=t.self)||void 0===s||s.addListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),It((async()=>{var e,i;const s=await t.self.getVideoDevices(),a=null===(e=t.self.getCurrentDevices())||void 0===e?void 0:e.video;this.videoDevices=null!=a?[null!==(i=s.find((t=>t.deviceId===a.deviceId)))&&void 0!==i?i:a,...s.filter((t=>t.deviceId!==a.deviceId))]:s})))}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var t,e,i,s,a;null===(e=null===(t=this.meeting)||void 0===t?void 0:t.stage)||void 0===e||e.removeListener("stageStatusUpdate",this.stageStateListener),null===(i=this.meeting)||void 0===i||i.self.removeListener("deviceListUpdate",this.deviceListUpdateListener),null===(s=this.meeting)||void 0===s||s.self.removeListener("deviceUpdate",this.deviceUpdateListener),null===(a=this.meeting)||void 0===a||a.self.removeListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener)}async setDevice(t){var e;const i=this.videoDevices.find((e=>e.deviceId===t));this.currentDevice=i,null!=i&&await(null===(e=this.meeting)||void 0===e?void 0:e.self.setDevice(i))}render(){if(null==this.meeting)return null;let t=0;return m(f,null,this.canProduceVideo&&m("div",{class:"group container "+this.variant,part:"camera-selection"},m("label",null,"inline"!==this.variant&&this.t("camera"),m("dyte-icon",{icon:this.iconPack.video_on,iconPack:this.iconPack,t:this.t,size:"sm"})),m("div",{class:"row"},m("select",{class:"dyte-select",onChange:t=>this.setDevice(t.target.value)},this.videoDevices.map((({deviceId:e,label:i})=>{var s;return m("option",{selected:(null===(s=this.currentDevice)||void 0===s?void 0:s.deviceId)===e,value:e},i||"Camera "+ ++t)}))))))}static get watchers(){return{meeting:["meetingChanged"]}}};Wb.style=".dyte-select{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.dyte-select:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)}.dyte-select{display:block;border-radius:var(--dyte-border-radius-sm, 4px);border-width:var(--dyte-border-width-none, 0);border-style:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:var(--dyte-space-3, 12px);font-size:16px;--icon-size:var(--dyte-select-chevron-size, var(--dyte-space-6, 24px));--icon-right-position:var(--dyte-select-chevron-right-position, var(--dyte-space-2, 8px));background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e\");background-position:right var(--icon-right-position) center;background-repeat:no-repeat;background-size:var(--icon-size) var(--icon-size);padding-right:calc(var(--icon-right-position) * 5);width:100%;max-width:100%;text-overflow:ellipsis}.inline .dyte-select{margin-top:var(--dyte-space-1, 4px);width:100%;padding-top:var(--dyte-space-1, 4px);padding-bottom:var(--dyte-space-1, 4px);padding-left:var(--dyte-space-1\\.5, 6px);padding-right:var(--dyte-space-1\\.5, 6px);padding-right:var(--dyte-space-8, 32px);font-size:14px}.row{margin-bottom:var(--dyte-space-2, 8px);display:flex;width:100%;align-items:center;justify-content:space-between;gap:var(--dyte-space-3, 12px)}.group{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px)}.group>*{margin-bottom:var(--dyte-space-2, 8px)}.group>*:last-child{margin-bottom:var(--dyte-space-0, 0px)}.group select{flex:1 1 0%}.group{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-0, 0px)}.group>*{margin-bottom:var(--dyte-space-0, 0px)}label{display:flex;-webkit-user-select:none;-moz-user-select:none;user-select:none;align-items:center;gap:var(--dyte-space-1, 4px);font-size:14px}.inline.container{display:flex;align-items:center;justify-content:flex-start;gap:var(--dyte-space-2, 8px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px)}";const Yb=class{constructor(t){vt(this,t),this.tileLoad=k(this,"tileLoad",7),this.tileUnload=k(this,"tileUnload",7),this.onPinned=({isPinned:t})=>{this.isPinned=t},this.isSelf=()=>{var t;return this.isPreview||this.participant.id===(null===(t=this.meeting)||void 0===t?void 0:t.self.id)},this.onPause=t=>{var e,i;this.isSelf()&&(null===(e=this.meeting)||void 0===e?void 0:e.__internals__.features.hasFeature(Cs))&&(this.meeting.__internals__.logger.warn(`Video player paused for ${this.participant.id} isSelf: ${this.isSelf()}`),null===(i=null==t?void 0:t.target)||void 0===i||i.play())},this.onPlaying=()=>{this.playTimeout&&clearTimeout(this.playTimeout)},this.isPinned=!1,this.mediaConnectionError=!1,this.nameTagPosition="bottom-left",this.isPreview=!1,this.participant=void 0,this.meeting=void 0,this.states=void 0,this.config=$t,this.variant="solid",this.size=void 0,this.iconPack=ts,this.t=ns()}onVideoRef(t){this.participant&&this.meeting&&t!==this.videoEl&&(this.videoEl=t,this.participant.registerVideoElement(this.videoEl,this.isPreview),this.tileLoad.emit({participant:this.participant,videoElement:this.videoEl}))}connectedCallback(){this.meeting?this.meetingChanged(this.meeting):this.participantsChanged(this.participant),void 0===this.states&&(this.removeStateChangeListener=_s("prefs",(()=>J(this))))}disconnectedCallback(){this.playTimeout&&clearTimeout(this.playTimeout),null!=this.participant&&(this.participant.deregisterVideoElement(this.videoEl,this.isPreview),this.participant.removeListener("pinned",this.onPinned),this.participant.removeListener("unpinned",this.onPinned),this.meeting.meta.off("mediaConnectionUpdate",this.mediaConnectionUpdateListener),this.tileUnload.emit(this.participant),this.removeStateChangeListener&&this.removeStateChangeListener())}meetingChanged(t){null!=t&&this.participantsChanged(this.participant)}participantsChanged(t){null!=t&&(void 0!==this.meeting?(this.isPinned=t.isPinned,this.videoEl&&this.participant.registerVideoElement(this.videoEl,this.isPreview),t.addListener("pinned",this.onPinned),t.addListener("unpinned",this.onPinned),this.meeting.meta.on("mediaConnectionUpdate",this.mediaConnectionUpdateListener.bind(this))):this.isPreview&&this.videoEl&&this.participant.registerVideoElement(this.videoEl,this.isPreview))}mediaConnectionUpdateListener(){var t,e,i;const{recv:s,send:a}=null!==(i=null===(e=null===(t=this.meeting)||void 0===t?void 0:t.meta)||void 0===e?void 0:e.mediaState)&&void 0!==i?i:{};"connected"===(null==s?void 0:s.state)||this.isSelf()?"connected"!==(null==a?void 0:a.state)&&this.isSelf()?this.mediaConnectionError=!0:this.mediaConnectionError=!1:this.mediaConnectionError=!0}isMirrored(){var t;if(null!=this.participant&&this.isSelf()){const e=this.states||Ss,i=null===(t=null==e?void 0:e.prefs)||void 0===t?void 0:t.mirrorVideo;if("boolean"==typeof i)return i}return!1}render(){var t,e,i;const s={meeting:this.meeting,size:this.size,states:this.states||Ss,config:this.config,iconPack:this.iconPack,t:this.t};return m(f,null,m("video",{ref:t=>this.onVideoRef(t),class:{mirror:this.isMirrored(),[null!==(i=null===(e=null===(t=this.config)||void 0===t?void 0:t.config)||void 0===e?void 0:e.videoFit)&&void 0!==i?i:"cover"]:!0},onPlaying:this.onPlaying,onPause:this.onPause,autoPlay:!0,playsInline:!0,muted:!0,part:"video"}),this.isPinned&&m("dyte-icon",{class:"pinned-icon",icon:this.iconPack.pin,"aria-label":this.t("pinned"),iconPack:this.iconPack,t:this.t,part:"pinned-icon"}),this.mediaConnectionError&&m("div",{class:"network-container",part:"network-indicator"},m("dyte-icon",{class:"network-icon",icon:this.iconPack.disconnected,"aria-label":this.t("pinned"),iconPack:this.iconPack,t:this.t,part:"pinned-icon"})),m("slot",null,m(cs,{element:"dyte-participant-tile",defaults:s,childProps:{participant:this.participant},deepProps:!0,onlyChildren:!0})))}static get watchers(){return{meeting:["meetingChanged"],participant:["participantsChanged"]}}};Yb.style=":host {\n  line-height: initial;\n  font-family: var(--dyte-font-family, sans-serif);\n\n  font-feature-settings: normal;\n  font-variation-settings: normal;\n}\n\np {\n  margin: var(--dyte-space-0, 0px);\n  padding: var(--dyte-space-0, 0px);\n}\n\n\n:host {\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  aspect-ratio: 16 / 9;\n  height: var(--dyte-space-56, 224px);\n  overflow: hidden;\n  border-radius: var(--dyte-border-radius-lg, 12px);\n  -webkit-user-select: none;\n     -moz-user-select: none;\n          user-select: none;\n  --tw-bg-opacity: 1;\n  background-color: rgba(var(--dyte-colors-video-bg, 24 24 24) / var(--tw-bg-opacity));\n\n  transition-property: var(--dyte-transition-property, all);\n  transition-duration: 150ms;\n  container-type: inline-size;\n  container-name: participanttile;\n}\n\n@media (prefers-reduced-motion) {\n  /* No transitions when disabled */\n  :host {\n    --dyte-transition-property: none;\n  }\n}\n\ndyte-avatar {\n  z-index: -1;\n}\n\n/**\n  NOTE: provided :slotted(dyte-name-tag) & dyte-name-tag separately\n  because ::slotted isn't applied on default slots.\n*/\n\n::slotted(dyte-name-tag), \ndyte-name-tag {\n  position: absolute;\n  left: var(--dyte-space-3, 12px);\n  bottom: var(--dyte-space-3, 12px);\n}\n\n:host([size='sm'][variant='solid']) ::slotted(dyte-name-tag), \n  :host([size='sm'][variant='solid']) dyte-name-tag {\n  left: var(--dyte-space-2, 8px);\n  bottom: var(--dyte-space-2, 8px);\n  height: var(--dyte-space-4, 16px);\n}\n\n::slotted(dyte-network-indicator), \ndyte-network-indicator {\n  position: absolute;\n  right: var(--dyte-space-3, 12px);\n  bottom: var(--dyte-space-3, 12px);\n}\n\n:host([size='sm']) ::slotted(dyte-network-indicator), \n  :host([size='sm']) dyte-network-indicator {\n  right: var(--dyte-space-2, 8px);\n  bottom: var(--dyte-space-2, 8px);\n}\n\nvideo {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  border-radius: var(--dyte-border-radius-lg, 12px);\n}\n\nvideo.contain {\n  -o-object-fit: contain;\n     object-fit: contain;\n}\n\nvideo.cover {\n  -o-object-fit: cover;\n     object-fit: cover;\n}\n\nvideo::-webkit-media-controls {\n  display: none !important;\n}\n\n.pinned-icon {\n  position: absolute;\n  left: var(--dyte-space-3, 12px);\n  top: var(--dyte-space-3, 12px);\n  height: var(--dyte-space-5, 20px);\n  width: var(--dyte-space-5, 20px);\n  padding: var(--dyte-space-1, 4px);\n  border-radius: var(--dyte-border-radius-md, 8px);\n  --tw-bg-opacity: 1;\n  background-color: rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));\n}\n\n.network-container {\n  position: absolute;\n  right: var(--dyte-space-3, 12px);\n  bottom: var(--dyte-space-3, 12px);\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding: var(--dyte-space-2, 8px);\n  font-size: 12px;\n  border-radius: var(--dyte-border-radius-md, 8px);\n  --tw-bg-opacity: 1;\n  background-color: rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));\n}\n.network-icon {\n  height: var(--dyte-space-5, 20px);\n  width: var(--dyte-space-5, 20px);\n  --tw-text-opacity: 1;\n  color: rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity));\n}\n\n:host([size='sm']) .pinned-icon {\n  top: var(--dyte-space-2, 8px);\n  left: var(--dyte-space-2, 8px);\n}\n\n:host([variant='gradient']) ::slotted(dyte-audio-visualizer), \n  :host([variant='gradient']) dyte-audio-visualizer {\n  position: absolute;\n  top: var(--dyte-space-2, 8px);\n  right: var(--dyte-space-2, 8px);\n  border-radius: 9999px;\n  --tw-bg-opacity: 1;\n  background-color: rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));\n  padding: var(--dyte-space-2, 8px);\n}\n\n:host([variant='gradient']) ::slotted(dyte-name-tag), \n  :host([variant='gradient']) dyte-name-tag {\n  bottom: var(--dyte-space-0, 0px);\n  left: var(--dyte-space-0, 0px);\n  display: flex;\n  width: 100%;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n  background-color: transparent;\n  background-image: linear-gradient(to top, var(--tw-gradient-stops));\n  --tw-gradient-from: rgb(var(--dyte-colors-background-1000, 8 8 8));\n  --tw-gradient-to: rgba(var(--dyte-colors-background-1000, 8 8 8) / 0);\n  --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to);\n  --tw-gradient-to: transparent;\n}\n\nvideo.mirror {\n  transform: scaleX(-1);\n}\n\n/** Name tag positions */\n\n:host([name-tag-position='bottom-right']) ::slotted(dyte-name-tag), \n  :host([name-tag-position='bottom-right']) dyte-name-tag {\n  left: auto;\n  right: var(--dyte-space-3, 12px);\n}\n\n:host([name-tag-position='bottom-center']) ::slotted(dyte-name-tag), \n  :host([name-tag-position='bottom-center']) dyte-name-tag {\n  left: auto;\n  right: auto;\n}\n\n:host([name-tag-position='top-left']) ::slotted(dyte-name-tag), \n  :host([name-tag-position='top-left']) dyte-name-tag {\n  top: var(--dyte-space-3, 12px);\n  bottom: auto;\n}\n\n:host([name-tag-position='top-right']) ::slotted(dyte-name-tag), \n  :host([name-tag-position='top-right']) dyte-name-tag {\n  top: var(--dyte-space-3, 12px);\n  right: var(--dyte-space-3, 12px);\n  left: auto;\n  bottom: auto;\n}\n\n:host([name-tag-position='top-center']) ::slotted(dyte-name-tag), \n  :host([name-tag-position='top-center']) dyte-name-tag {\n  left: auto;\n  right: auto;\n  bottom: auto;\n  top: var(--dyte-space-3, 12px);\n}\n\n@media only screen and (max-height: 480px) and (orientation: landscape) {\n  :host([size='sm']) {\n    border-radius: var(--dyte-border-radius-sm, 4px);\n  }\n\n  :host([size='sm']) > video {\n    border-radius: var(--dyte-border-radius-sm, 4px);\n  }\n\n  ::slotted(dyte-avatar), \n  dyte-avatar {\n    height: var(--dyte-space-12, 48px);\n    width: var(--dyte-space-12, 48px);\n  }\n    :host([size='sm'][variant='solid']) ::slotted(dyte-name-tag),\n    :host([size='sm'][variant='solid']) dyte-name-tag {\n      transform-origin: -2% 100%;\n      transform: scale(0.6);\n      z-index: 10;\n      left: var(--dyte-space-0, 0px);\n      bottom: var(--dyte-space-0, 0px);\n      border-radius: var(--dyte-border-radius-none, 0);\n    }\n}\n\n@media only screen and (max-width: 480px) and (orientation: portrait) {\n  :host([size='sm']) {\n    border-radius: var(--dyte-border-radius-sm, 4px);\n  }\n\n  :host([size='sm']) > video {\n    border-radius: var(--dyte-border-radius-sm, 4px);\n  }\n\n  ::slotted(dyte-avatar), \n  dyte-avatar {\n    height: var(--dyte-space-12, 48px);\n    width: var(--dyte-space-12, 48px);\n  }\n    :host([size='sm'][variant='solid']) ::slotted(dyte-name-tag),\n    :host([size='sm'][variant='solid']) dyte-name-tag {\n      transform-origin: -5% 110%;\n      transform: scale(0.6);\n      z-index: 10;\n      left: var(--dyte-space-0, 0px);\n      bottom: var(--dyte-space-0, 0px);\n      border-radius: var(--dyte-border-radius-none, 0);\n    }\n}\n\n@container participanttile (max-width: 300px) {\n  ::slotted(dyte-name-tag),\n  dyte-name-tag {\n    transform-origin: 0 100%;\n    transform: scale(0.8);\n  }\n\n  ::slotted(dyte-avatar), \n  dyte-avatar {\n    height: var(--dyte-space-8, 32px) !important;\n    width: var(--dyte-space-8, 32px) !important;\n  }\n}\n\n@container participanttile (max-width: 150px) {\n  ::slotted(dyte-name-tag),\n  dyte-name-tag[variant='solid'] {\n    transform-origin: -10% 130%;\n    transform: scale(0.6);\n    z-index: 10;\n    border-radius: 9999px;\n  }\n\n  ::slotted(dyte-avatar), \n  dyte-avatar {\n    height: 6 !important;\n    width: 6 !important;\n  }\n}\n";var Qb=Object.freeze({__proto__:null,dyte_camera_selector:Wb,dyte_participant_tile:Yb});const Jb=class{constructor(t){vt(this,t),this.tabChange=k(this,"tabChange",7),this.sidebarClose=k(this,"sidebarClose",7),this.onClose=()=>{this.sidebarClose.emit()},this.view="sidebar",this.tabs=[],this.hideHeader=!1,this.hideCloseAction=!1,this.currentTab=void 0,this.iconPack=ts,this.t=ns()}render(){const t="full-screen"===this.view,e=this.tabs.find((t=>t.id===this.currentTab));return m(f,{class:this.view},!this.hideCloseAction&&m("dyte-button",{variant:"ghost",kind:"icon",class:"close",onClick:this.onClose,"aria-label":this.t("close")},m("dyte-icon",{icon:this.iconPack.dismiss})),e&&!this.hideHeader&&m("header",{class:"main-header"},m("h3",null,e.name),m("slot",{name:"pinned-state"})),t&&m("header",{class:"mobile-tabs"},this.tabs.map((t=>m("button",{onClick:()=>{this.tabChange.emit(t.id)},class:{active:this.currentTab===t.id}},t.name)))),m("slot",{name:this.currentTab}))}};Jb.style=":host {\n  line-height: initial;\n  font-family: var(--dyte-font-family, sans-serif);\n\n  font-feature-settings: normal;\n  font-variation-settings: normal;\n}\n\np {\n  margin: var(--dyte-space-0, 0px);\n  padding: var(--dyte-space-0, 0px);\n}\n\n\n:host {\n  position: relative;\n  height: 100%;\n  width: 100%;\n  font-family: var(--dyte-font-family, sans-serif);\n  z-index: 50;\n  display: flex;\n  flex-direction: column;\n\n  container-type: size;\n  container-name: sidebarui;\n}\n\n@container sidebarui (height < 370px) {\n  .main-header {\n    height: var(--dyte-space-8, 32px) !important;\n  }\n  .close {\n    top: var(--dyte-space-0\\.5, 2px) !important;\n    left: var(--dyte-space-0, 0px) !important;\n    color: rgba(var(--dyte-colors-danger, 255 45 45) / 0.6);\n  }\n}\n\n:host([view='sidebar']) {\n  --tw-bg-opacity: 1;\n  background-color: rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));\n}\n\n:host([view='full-screen']) {\n  position: absolute;\n  top: var(--dyte-space-0, 0px);\n  right: var(--dyte-space-0, 0px);\n  bottom: var(--dyte-space-0, 0px);\n  left: var(--dyte-space-0, 0px);\n  max-width: 100%;\n  border: none;\n}\n\n::slotted(*) {\n  flex-grow: 1;\n}\n\n.close {\n  position: absolute;\n  top: var(--dyte-space-2, 8px);\n  left: var(--dyte-space-2, 8px);\n  z-index: 10;\n}\n\n.main-header {\n  position: relative;\n  display: flex;\n  height: var(--dyte-space-12, 48px);\n  place-items: center;\n  justify-content: center;\n}\n\n.main-header, \n.mobile-tabs {\n  flex-shrink: 0;\n}\n\n.mobile-tabs {\n  display: flex;\n  place-items: center;\n  justify-content: space-evenly;\n  border-bottom: 1px solid rgb(var(--dyte-colors-background-700, 44 44 44));\n}\n\n.mobile-tabs button {\n  margin: var(--dyte-space-0, 0px);\n  border-width: var(--dyte-border-width-none, 0);\n  border-style: none;\n  background-color: transparent;\n  padding: var(--dyte-space-0, 0px);\n  color: rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52));\n  height: var(--dyte-space-10, 40px);\n  cursor: pointer;\n  padding-left: var(--dyte-space-4, 16px);\n  padding-right: var(--dyte-space-4, 16px);\n  font-weight: 500;\n  border-bottom: 1px solid transparent;\n}\n\n.mobile-tabs button.active {\n  --tw-border-opacity: 1;\n  border-color: rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-border-opacity));\n  --tw-text-opacity: 1;\n  color: rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity));\n}\n\nheader h3 {\n  font-size: 14px;\n  font-weight: 500;\n}\n\n@media only screen and (max-device-height: 480px) and (orientation: landscape) {\n  .main-header {\n    display: none !important;\n  }\n}\n\n.tab-participant-count-badge {\n  display: inline-block;\n  padding: 2px 5px;\n  border-radius: 9999px;\n  --tw-bg-opacity: 1;\n  background-color: rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));\n  font-size: 12px;\n  color: rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));\n}\n\n.tab-participant-count-badge:not(.selected-tab) {\n  --tw-bg-opacity: 1;\n  background-color: rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));\n}\n\n.tab-participant-count-badge.requests-pending{\n  background-color: rgba(var(--dyte-colors-danger));\n}";var Xb=Object.freeze({__proto__:null,dyte_sidebar_ui:Jb});const tw=class{constructor(t){vt(this,t),this.permissionsUpdateListener=()=>{this.canSpotlight=this.meeting.self.permissions.canSpotlight},this.meeting=void 0,this.iconPack=ts,this.t=ns(),this.size=void 0,this.canSpotlight=void 0,this.isSpotlighted=void 0}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var t;null===(t=this.meeting)||void 0===t||t.self.permissions.removeListener("permissionsUpdate",this.permissionsUpdateListener)}meetingChanged(t){var e,i;null!=t&&(this.canSpotlight=t.self.permissions.canSpotlight,this.isSpotlighted=null!==(i=null===(e=t.meta)||void 0===e?void 0:e.broadcastTabChanges)&&void 0!==i&&i,t.self.permissions.addListener("permissionsUpdate",this.permissionsUpdateListener))}updateSpotlightState(t){var e;try{null===(e=this.meeting.meta)||void 0===e||e.setBroadcastTabChanges(t),this.isSpotlighted=t}catch(i){console.error(i)}}render(){if(this.canSpotlight)return m(f,null,m("dyte-tooltip",{size:"md",iconPack:this.iconPack,t:this.t,label:this.t("remote_access.indicator")},m("div",{id:"sync-button",class:{tab:!0,active:this.isSpotlighted},onClick:()=>this.updateSpotlightState(!this.isSpotlighted)},m("span",{class:"name"},"Sync"),m("dyte-icon",{id:"icon",iconPack:this.iconPack,t:this.t,icon:this.isSpotlighted?this.iconPack.checkmark:this.iconPack.warning,tabIndex:-1,"aria-hidden":!0}))))}static get watchers(){return{meeting:["meetingChanged"]}}};tw.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{font-size:12px}#sync-button{flex-direction:row;border-radius:var(--dyte-border-radius-sm, 4px);padding-left:var(--dyte-space-1, 4px);display:flex;align-items:center;justify-content:center;margin-bottom:var(--dyte-space-1, 4px);font-size:12px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}:host([size='sm']) dyte-tooltip,:host([size='md']) dyte-tooltip{width:100%}:host([size='sm'])>#sync-button{height:var(--dyte-space-8, 32px);width:var(--dyte-space-16, 64px);padding-left:var(--dyte-space-0, 0px)}:host([size='md'])>#sync-button{height:var(--dyte-space-8, 32px);width:var(--dyte-space-16, 64px)}:host([size='lg'])>#sync-button{flex-direction:row;height:var(--dyte-space-8, 32px);width:var(--dyte-space-16, 64px)}@media (orientation: portrait){:host([size='lg']) #sync-button{flex-direction:column-reverse;height:var(--dyte-space-16, 64px);width:var(--dyte-space-16, 64px)}:host([size='md']) #sync-button{height:var(--dyte-space-16, 64px);width:var(--dyte-space-16, 64px)}:host([size='sm']) #sync-button{height:var(--dyte-space-10, 40px);width:var(--dyte-space-16, 64px);flex-direction:row}}#sync-button>dyte-icon{max-height:14px}#sync-button dyte-icon{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}:host([size='sm']) #sync-button>dyte-icon{width:auto}#sync-button.active dyte-icon{color:rgb(var(--dyte-colors-text-1000, 255 255 255))}div{align-content:center;line-height:2rem}dyte-icon{height:var(--dyte-space-6, 24px);width:var(--dyte-space-8, 32px)}#sync-button.active{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-bg-opacity))}";var ew=Object.freeze({__proto__:null,dyte_spotlight_indicator:tw});const iw=class{constructor(t){vt(this,t),this.containerHeight=0,this.lastScrollTop=0,this.recalculatePositioning=()=>{this.updateContainerHeight(),requestAnimationFrame((()=>{this.updateItemHeight()}))},this.updateContainerHeight=()=>{this.el.querySelector(".virtual-list-container").clientHeight&&(requestAnimationFrame((()=>{this.updateItemHeight()})),this.containerHeight=this.el.querySelector(".virtual-list-container").clientHeight,this.updateVisibleRange())},this.onScroll=yl((()=>{const t=this.el.querySelector(".virtual-list-container").scrollTop;t>this.lastScrollTop&&this.visibleEnd===this.items.length||(this.lastScrollTop=t,this.updateVisibleRange())})),this.items=[],this.renderItem=void 0,this.itemHeight=55,this.bufferedItemsCount=5,this.emptyListElement=null,this.visibleStart=0,this.visibleEnd=0}itemsChanged(){this.recalculatePositioning()}componentDidLoad(){this.recalculatePositioning(),this.el.querySelector(".virtual-list-container").addEventListener("scroll",this.onScroll),window.addEventListener("resize",this.recalculatePositioning)}componentDidUpdate(){this.updateItemHeight()}disconnectedCallback(){this.el.querySelector(".virtual-list-container").removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.recalculatePositioning)}updateVisibleRange(){const t=this.el.querySelector(".virtual-list-container").scrollTop,e=Math.floor(t/this.itemHeight),i=Math.ceil(this.containerHeight/this.itemHeight),s=Math.min(this.items.length,e+i+this.bufferedItemsCount);this.visibleStart=e,this.visibleEnd=s,this.el.querySelector(".virtual-list-container").scrollTop=this.lastScrollTop}updateItemHeight(){const t=this.el.querySelector(".virtual-list-item");if(t){const e=t.style.height;t.style.height="auto";const i=t.getBoundingClientRect().height;e&&(t.style.height=e),i&&Math.floor(i)!==Math.floor(this.itemHeight)&&(this.itemHeight=i)}}renderItems(){return this.items.slice(this.visibleStart,this.visibleEnd).map(((t,e)=>{const i=this.visibleStart+e;return m("div",{class:"virtual-list-item",key:t.id,style:{position:"absolute",top:i*this.itemHeight+"px",height:`${this.itemHeight}px`,width:"100%"}},this.renderItem(t,i))}))}render(){var t;const e=this.items.length*this.itemHeight;return m("div",{class:"virtual-list-container",style:{position:"relative",height:"100%",overflowX:"hidden",overflowY:"auto"}},m("div",{style:{height:`${e}px`,position:"relative"}},(null===(t=this.items)||void 0===t?void 0:t.length)?this.renderItems():this.emptyListElement),m("div",{style:{height:`${this.itemHeight}px`}}))}get el(){return x(this)}static get watchers(){return{items:["itemsChanged"]}}};iw.style=":host{height:100%;width:100%}";var sw=Object.freeze({__proto__:null,dyte_virtualized_participant_list:iw});const aw=class{constructor(t){vt(this,t),this.name=void 0,this.size=void 0,this.url=void 0,this.iconPack=ts,this.t=ns()}render(){return m("div",{class:"file"},m("dyte-button",{variant:"secondary",kind:"icon",iconPack:this.iconPack,t:this.t,onClick:()=>Ko($a(this.url),{name:this.name,fallbackName:"file"}),part:"button"},m("dyte-icon",{icon:this.iconPack.download,iconPack:this.iconPack,t:this.t})),m("div",{class:"file-data"},m("div",{class:"name"},this.name),m("div",{class:"file-data-split"},m("div",{class:"ext"},qo(this.name)),m("span",{class:"divider"}),m("div",{class:"size"},Zo(this.size)))))}};aw.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.file{display:flex;align-items:center;gap:var(--dyte-space-1, 4px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);padding-top:var(--dyte-space-1, 4px);padding-bottom:var(--dyte-space-1, 4px);min-width:var(--dyte-space-40, 160px);max-width:var(--dyte-space-64, 256px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.file .file-data{margin-left:var(--dyte-space-1, 4px);flex:1 1 0%}.file .file-data .name{word-break:break-all;color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.file .file-data .file-data-split{margin-top:var(--dyte-space-0\\.5, 2px);display:flex;align-items:center;font-size:12px}.file .file-data .file-data-split .ext{margin-right:var(--dyte-space-2, 8px);text-transform:uppercase;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.file .file-data .file-data-split .divider{height:var(--dyte-space-4, 16px);width:var(--dyte-space-0\\.5, 2px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.file .file-data .file-data-split .size{margin-left:var(--dyte-space-2, 8px)}";const rw=class{constructor(t){vt(this,t),this.onPreview=k(this,"preview",7),this.url=void 0,this.iconPack=ts,this.t=ns(),this.status="loading"}render(){return m("div",{class:{image:!0,loaded:"loaded"===this.status}},m("img",{src:$a(this.url),onLoad:()=>{this.status="loaded"},onError:()=>{this.status="errored"},onClick:()=>{"loaded"===this.status&&this.onPreview.emit(this.url)}}),"loading"===this.status&&m("div",{class:"image-spinner",title:this.t("chat.img.loading"),"aria-label":this.t("chat.img.loading")},m("dyte-spinner",{iconPack:this.iconPack,t:this.t})),"errored"===this.status&&m("div",{class:"image-errored",title:this.t("chat.error.img_not_found"),"aria-label":this.t("chat.error.img_not_found")},m("dyte-icon",{icon:this.iconPack.image_off,iconPack:this.iconPack,t:this.t})),"loaded"===this.status&&m("div",{class:"actions"},m("dyte-button",{class:"action",variant:"secondary",kind:"icon",onClick:()=>{this.onPreview.emit(this.url)},iconPack:this.iconPack,t:this.t},m("dyte-icon",{icon:this.iconPack.full_screen_maximize})),m("dyte-button",{class:"action",variant:"secondary",kind:"icon",onClick:()=>Ko(this.url,{fallbackName:"image"}),iconPack:this.iconPack,t:this.t},m("dyte-icon",{icon:this.iconPack.download,iconPack:this.iconPack,t:this.t}))))}};rw.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.image-spinner{cursor:wait}.image-errored{cursor:not-allowed}.image{display:block;font-family:var(--dyte-font-family, sans-serif);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));position:relative;height:var(--dyte-space-40, 160px);max-width:var(--dyte-space-64, 256px);cursor:pointer}.image img{display:none;height:100%;width:100%;border-radius:var(--dyte-border-radius-sm, 4px);-o-object-fit:cover;object-fit:cover}.image .image-spinner{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.image .image-spinner dyte-spinner{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}.image .image-errored{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);background-color:rgba(var(--dyte-colors-danger, 255 45 45) / 0.1);--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}.image .actions{display:none;height:var(--dyte-space-8, 32px);align-items:center;position:absolute;top:var(--dyte-space-2, 8px);right:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.image .actions .action{height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);border-radius:var(--dyte-border-radius-none, 0);border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.image .actions .action:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.image.loaded img{display:block}.image.loaded .image-spinner{display:none}.image:hover .actions,.image:focus .actions{display:flex}";const nw=class{constructor(t){vt(this,t),this.onAction=k(this,"action",7),this.actions=[],this.variant="bubble",this.viewType="outgoing",this.avatarUrl=void 0,this.hideAvatar=!1,this.authorName=void 0,this.hideAuthorName=!1,this.hideMetadata=!1,this.time=void 0,this.iconPack=ts}renderActions(){return m("dyte-menu",{placement:"top-end",offset:1},m("button",{slot:"trigger",class:"actions"},m("dyte-icon",{icon:this.iconPack.chevron_down})),m("dyte-menu-list",null,this.actions.map((t=>m("dyte-menu-item",{onClick:()=>this.onAction.emit(t.id)},t.icon&&m("dyte-icon",{icon:t.icon,slot:"start"}),t.label)))))}render(){return m(f,null,m("div",{class:{"message-wrapper":!0,[this.viewType]:!0}},!this.hideAvatar&&m("aside",{class:"avatar",part:"avatar"},m("dyte-avatar",{participant:{name:this.authorName,picture:this.avatarUrl},size:"sm"})),m("div",{class:"message",part:"message"},!this.hideAuthorName&&m("div",{class:"header"},this.authorName),m("div",{class:{body:!0,bubble:"bubble"===this.variant}},m("slot",null),!this.hideMetadata&&!!this.time&&m("div",{class:"metadata",title:Da(this.time)},Ra(this.time,new Date(Date.now()))),0!==this.actions.length&&this.renderActions()))))}};nw.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))\n    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}.message-wrapper{display:flex;flex-direction:row-reverse;gap:var(--dyte-space-2, 8px)}.message-wrapper.incoming{flex-direction:row}.message{display:flex;flex-direction:column}.header{margin-bottom:var(--dyte-space-1, 4px);align-self:flex-end;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));font-size:14px;font-weight:600}.incoming .header{align-self:flex-start}.body{display:flex;flex-direction:column;min-width:var(--dyte-space-24, 96px);font-family:var(--dyte-font-family, sans-serif);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));font-size:14px;line-height:1.375;position:relative}.body .metadata{margin-top:var(--dyte-space-2, 8px);align-self:flex-end;font-size:10px}.bubble{max-width:var(--dyte-space-96, 384px);padding:var(--dyte-space-2, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)));border-radius:var(--dyte-border-radius-md, 8px)}.incoming .bubble{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.avatar{display:none}dyte-menu{position:absolute;right:var(--dyte-space-0, 0px);top:var(--dyte-space-0, 0px);border-radius:var(--dyte-border-radius-lg, 12px)}dyte-menu dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);cursor:pointer}.actions{display:flex;align-items:center;justify-content:center;padding-left:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px);padding-top:var(--dyte-space-1, 4px);padding-right:var(--dyte-space-1, 4px);border-radius:var(--dyte-border-radius-md, 8px);border-width:var(--dyte-border-width-none, 0);border-style:none;background:radial-gradient(\n    at top right,\n    rgb(var(--dyte-colors-brand-300, 73 124 253)) 60%,\n    rgba(255, 255, 255, 0) 80%\n  )}.actions dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.incoming .actions{background:radial-gradient(\n      at top right,\n      rgb(var(--dyte-colors-background-800, 30 30 30)) 60%,\n      rgba(255, 255, 255, 0) 80%\n    )}.incoming .actions dyte-icon{color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.incoming dyte-avatar{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}@media (min-width: 400px){.avatar{display:flex;width:var(--dyte-space-6, 24px)}.avatar dyte-avatar{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px);font-size:10px;overflow:clip;border-radius:9999px}}@media (hover: hover){dyte-menu{visibility:hidden}.body:hover dyte-menu{visibility:visible}}";const ow=class{constructor(t){vt(this,t),this.text=void 0,this.isMarkdown=!1}render(){return m("p",{class:{text:!0,emoji:Oa(this.text)}},this.isMarkdown?m("dyte-markdown-view",{text:this.text}):this.text)}};ow.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.text{word-break:break-word;display:block;overflow-wrap:break-word;line-height:1.375}.text.emoji{font-size:24px}";var lw=Object.freeze({__proto__:null,dyte_file_message_view:aw,dyte_image_message_view:rw,dyte_message_view:nw,dyte_text_message_view:ow});const dw=class{constructor(t){vt(this,t),this.onClose=k(this,"dyteDialogClose",7),this.close=()=>{this.open=!1,this.onClose.emit()},this.keydownListener=t=>{!this.disableEscapeKey&&"Escape"===t.key&&this.open&&this.close()},this.hideCloseButton=!1,this.disableEscapeKey=!1,this.meeting=void 0,this.config=$t,this.states=void 0,this.size=void 0,this.iconPack=ts,this.t=ns(),this.open=!0}connectedCallback(){document.addEventListener("keydown",this.keydownListener)}disconnectedCallback(){document.removeEventListener("keydown",this.keydownListener)}render(){return this.open?m(f,null,m("div",{id:"dialog",part:"container",role:"dialog","aria-modal":"true"},m("slot",null),!this.hideCloseButton&&m("dyte-button",{part:"close-button",id:"dismiss-btn",kind:"icon",variant:"ghost",onClick:()=>this.close(),iconPack:this.iconPack,t:this.t,type:"button","aria-label":this.t("dialog.close"),role:"button"},m("dyte-icon",{icon:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t})))):null}};dw.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:fixed;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);box-sizing:border-box;padding:var(--dyte-space-4, 16px);flex-direction:column;align-items:center;justify-content:center;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / 0.5);color:rgb(var(--dyte-colors-text-1000, 255 255 255));visibility:hidden;display:none;overflow-wrap:break-word;word-wrap:break-word;z-index:60;-webkit-backdrop-filter:blur(12px) saturate(180%);backdrop-filter:blur(12px) saturate(180%)}#dialog{position:relative;max-height:100%;max-width:100%}#dismiss-btn{position:absolute;top:var(--dyte-space-3, 12px);right:var(--dyte-space-3, 12px);z-index:50}::slotted(*){max-height:100%;max-width:100%}:host([open]){visibility:visible;display:flex}:host([open='false']){visibility:hidden;display:none}";var cw=Object.freeze({__proto__:null,dyte_dialog:dw});const hw=class{constructor(t){vt(this,t),this.logoUrl=void 0,this.config=$t,this.meeting=void 0,this.t=ns()}connectedCallback(){this.configChanged(this.config),this.meetingChanged(this.meeting)}configChanged(t){var e;if(null!=t){const i=null===(e=null==t?void 0:t.designTokens)||void 0===e?void 0:e.logo;null!=i&&null==this.logoUrl&&(this.logoUrl=i)}}meetingChanged(t){var e,i,s,a;if(null!=t){const r=null===(a=null===(s=null===(i=null===(e=t.self)||void 0===e?void 0:e.config)||void 0===i?void 0:i.header)||void 0===s?void 0:s.elements)||void 0===a?void 0:a.logo;null!=r&&null==this.logoUrl&&(this.logoUrl=r)}}render(){if(!this.logoUrl||""===this.logoUrl)return null;const t=this.logoUrl,e=this.t("logo");return m(f,{class:"loaded"},m("img",{src:t,alt:e}))}static get watchers(){return{config:["configChanged"],meeting:["meetingChanged"]}}};hw.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;flex-direction:column;align-items:center;justify-content:center;color:rgb(var(--dyte-colors-text-1000, 255 255 255));height:100%;width:auto}svg,img{height:100%;width:auto}.brand-color{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}";var pw=Object.freeze({__proto__:null,dyte_logo:hw});const gw=class{constructor(t){vt(this,t),this.restoreEmpty=(t,e,i)=>0===t.trim().length?`${e}${t}${e}`:i(t),this.renderLink=t=>m("a",{class:"link",href:t,target:"_blank",rel:"noopener noreferrer"},t),this.renderBold=t=>"string"==typeof t?this.restoreEmpty(t,"*",(t=>m("b",null,t))):m("b",null,this.renderTokens(t)),this.renderItalic=t=>"string"==typeof t?this.restoreEmpty(t,"_",(t=>m("i",null,t))):m("i",null,this.renderTokens(t)),this.renderStrikethrough=t=>"string"==typeof t?this.restoreEmpty(t,"~",(t=>m("s",null,t))):m("b",null,this.renderTokens(t)),this.renderPlainText=t=>"string"==typeof t?t:m("p",null,this.renderTokens(t)),this.renderTokens=t=>t.map((t=>{switch(t.type){case"a":if("string"==typeof t.content)return this.renderLink(t.content);case"b":return this.renderBold(t.content);case"i":return this.renderItalic(t.content);case"s":return this.renderStrikethrough(t.content);case"q":return m("span",{class:"block-quote"});default:return this.renderPlainText(t.content)}})),this.text=void 0,this.maxLength=xn}renderMessage(t){let e=t.split("\n"),i=!1;"```"===e[0]&&"```"===e[e.length-1]&&(i=!0,e=e.slice(1,-1));const s=e.map((t=>{const e=Sn(t);return m("p",null,this.renderTokens(e))}));return i?m("pre",{style:{whiteSpace:"pre",overflow:"scroll"}},e.join("\n")):s}render(){const t=this.text.slice(0,this.maxLength),e=bn(t,!0),i=wn(t);return m("p",null,0!==e.length&&m("blockquote",null,this.renderMessage(e)),0!==i.length&&this.renderMessage(i))}};gw.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{overflow-wrap:break-word}a{color:currentColor}.block-quote,blockquote{margin:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-3, 12px);--tw-border-spacing-x:1px;--tw-border-spacing-y:1px;border-spacing:var(--tw-border-spacing-x) var(--tw-border-spacing-y);border-top-width:var(--dyte-border-width-none, 0);border-bottom-width:var(--dyte-border-width-none, 0);border-left-width:var(--dyte-border-width-md, 2px);border-right-width:var(--dyte-border-width-none, 0);border-style:solid;padding:var(--dyte-space-0\\.5, 2px);padding-left:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-sm, 4px);border-top-left-radius:var(--dyte-border-radius-none, 0);border-bottom-left-radius:var(--dyte-border-radius-none, 0)}pre{white-space:pre-wrap}";var uw=Object.freeze({__proto__:null,dyte_markdown_view:gw});const mw=class{constructor(t){vt(this,t),this.clickedThis=!1,this.handleOutsideClick=()=>{this.clickedThis||(this.menuListEl.style.display="none"),this.clickedThis=!1},this.size=void 0,this.placement="bottom-end",this.offset=10,this.iconPack=ts,this.t=ns()}componentDidLoad(){document.addEventListener("click",this.handleOutsideClick),this.update()}disconnectedCallback(){document.removeEventListener("click",this.handleOutsideClick)}update(){hb(this.triggerEl,this.menuListEl,{placement:this.placement,middleware:[Ay(this.offset),Ly(),My({padding:5})]}).then((({x:t,y:e})=>{Object.assign(this.menuListEl.style,{left:`${t}px`,top:`${e}px`})}))}render(){return m(f,null,m("span",{id:"trigger",ref:t=>this.triggerEl=t,onClick:()=>{this.clickedThis=!0,"block"!==this.menuListEl.style.display?(this.menuListEl.style.display="block",this.update()):this.menuListEl.style.display="none"}},m("slot",{name:"trigger"})),m("span",{part:"menu-list",id:"menu-list",ref:t=>this.menuListEl=t},m("slot",null)))}};mw.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:inline-block;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}#menu-list{position:absolute;z-index:20;display:none}";const vw=class{constructor(t){vt(this,t),this.size=void 0,this.iconPack=ts,this.t=ns()}render(){return m(f,null,m("slot",{name:"start"}),m("slot",null),m("slot",{name:"end"}))}};vw.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;align-items:center;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px);cursor:pointer;transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms;color:rgb(var(--dyte-colors-text-1000, 255 255 255));font-size:14px}::slotted([slot='start']){margin-right:var(--dyte-space-2, 8px)}::slotted([slot='end']){margin-left:var(--dyte-space-2, 8px)}:host(:hover){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}:host(.red){--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}";const fw=class{constructor(t){vt(this,t),this.iconPack=ts,this.t=ns()}render(){return m(f,null,m("slot",null))}};fw.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;width:-moz-max-content;width:max-content;flex-direction:column;padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;border-radius:var(--dyte-border-radius-sm, 4px);--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}";var yw=Object.freeze({__proto__:null,dyte_menu:mw,dyte_menu_item:vw,dyte_menu_list:fw});const bw=class{constructor(t){vt(this,t),this.getAvatar=()=>{var t;const e=Ua((null===(t=this.participant)||void 0===t?void 0:t.name)||"");let i;if(null!=this.participant&&"picture"in this.participant&&(i=this.participant.picture),i&&i.length>0&&"errored"!==this.imageState)return m("div",{class:"image-ctr"},"loading"===this.imageState&&m("dyte-spinner",{iconPack:this.iconPack,t:this.t}),m("img",{src:i,class:{loaded:"loaded"===this.imageState},loading:"lazy",title:e,onLoad:()=>this.imageState="loaded",onError:()=>this.imageState="errored",part:"image"}));const s=Na(e);return m("div",{class:"initials",title:e,part:"initials"},s)},this.participant=void 0,this.variant="circular",this.size=void 0,this.iconPack=ts,this.t=ns(),this.imageState="loading"}render(){return m(f,null,this.getAvatar(),m("slot",null))}};bw.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:var(--dyte-space-32, 128px);width:var(--dyte-space-32, 128px);align-items:center;justify-content:center;font-size:28px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)));overflow:clip;border-radius:9999px;-webkit-user-select:none;-moz-user-select:none;user-select:none}dyte-icon{height:50%;width:50%}.image-ctr{display:flex;height:100%;width:100%;align-items:center;justify-content:center;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}img{height:var(--dyte-space-0, 0px);width:var(--dyte-space-0, 0px);-o-object-fit:cover;object-fit:cover}img.loaded{height:100%;width:100%}.initials{display:flex;height:100%;width:100%;align-items:center;justify-content:center;text-transform:uppercase}.image{display:flex;height:100%;width:100%;align-items:center;justify-content:center}.image img{display:none;height:100%;width:100%;-o-object-fit:cover;object-fit:cover}.image img.loaded{display:block}:host([variant='hexagon']){border-radius:var(--dyte-border-radius-none, 0);clip-path:polygon(50% 0, 95% 25%, 95% 75%, 50% 100%, 5% 75%, 5% 25%)}:host([variant='square']){border-radius:var(--dyte-border-radius-none, 0);clip-path:polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)}:host([size='sm']){height:var(--dyte-space-14, 56px);width:var(--dyte-space-14, 56px);font-size:12px}:host([size='md']){height:var(--dyte-space-28, 112px);width:var(--dyte-space-28, 112px)}:host([size='lg']){height:var(--dyte-space-32, 128px);width:var(--dyte-space-32, 128px)}";var ww=Object.freeze({__proto__:null,dyte_avatar:bw});const xw=class{constructor(t){vt(this,t),this.variant="button",this.showWarning=!1,this.size=void 0,this.label=void 0,this.icon=void 0,this.isLoading=void 0,this.disabled=!1,this.iconPack=ts,this.t=ns(),this.brandIcon=!1}render(){return m(f,null,m("button",{"aria-label":this.label,part:"button"},this.isLoading?m("dyte-spinner",{id:"icon",part:"spinner",iconPack:this.iconPack,t:this.t}):m("dyte-icon",{id:"icon",icon:this.icon,tabIndex:-1,"aria-hidden":!0,part:"icon",iconPack:this.iconPack,t:this.t}),m("span",{class:"label",part:"label"},this.label),this.showWarning&&m("dyte-icon",{id:"warning-indicator",icon:this.iconPack.warning,part:"warning-indicator",iconPack:this.iconPack,t:this.t})))}};xw.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{--background-color:var(\n    --dyte-controlbar-button-background-color,\n    rgb(var(--dyte-colors-background-1000, 8 8 8))\n  );--icon-size:var(--dyte-controlbar-button-icon-size, var(--dyte-space-7, 28px));--button-spacing:var(--dyte-controlbar-button-spacing, var(--dyte-space-1, 4px));position:relative;box-sizing:border-box;display:inline-flex;outline:2px solid transparent !important;outline-offset:2px !important;margin-left:var(--dyte-space-0\\.5, 2px);margin-right:var(--dyte-space-0\\.5, 2px);height:100%;width:auto;min-width:var(--dyte-space-20, 80px);-webkit-user-select:none;-moz-user-select:none;user-select:none;border-radius:var(--dyte-border-radius-md, 8px);transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms;color:rgb(var(--dyte-colors-text-1000, 255 255 255));border:var(--dyte-border-width-md, 2px) solid transparent;background-color:var(--background-color)}button{padding:var(--dyte-space-1, 4px)}:host(.red-icon) #icon{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}:host([disabled]){color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}button{box-sizing:border-box;display:inline-flex;height:100%;width:100%;flex:1 1 0%;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent;color:inherit;outline:2px solid transparent;outline-offset:2px}.label{text-align:center;font-size:12px;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}#warning-indicator{position:absolute;top:var(--dyte-space-1, 4px);right:var(--dyte-space-2, 8px);height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);--tw-text-opacity:1;color:rgba(var(--dyte-colors-warning, 255 205 7) / var(--tw-text-opacity))}:host([size='sm']) #warning-indicator{right:var(--dyte-space-0, 0px);top:var(--dyte-space-0, 0px);height:var(--dyte-space-3, 12px);width:var(--dyte-space-3, 12px)}:host(:hover){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}#icon{margin-bottom:var(--button-spacing);width:var(--icon-size);height:var(--icon-size)}:host([size='sm']),:host([variant='horizontal']){--button-spacing:0px}:host(.leave:hover){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity));border:var(--dyte-border-width-md, 2px) solid rgb(var(--dyte-colors-danger, 255 45 45))}:host(.active){--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-400, 53 110 253) / var(--tw-text-opacity));border:var(--dyte-border-width-md, 2px) solid rgb(var(--dyte-colors-brand-400, 53 110 253))}:host(.active-livestream){--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}:host([size='sm']){margin-left:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0, 0px);min-width:var(--dyte-space-14, 56px)}:host([size='sm']) .label{display:none}:host([variant='horizontal']){margin:var(--dyte-space-0, 0px);height:var(--dyte-space-12, 48px);width:100%;padding-left:var(--dyte-space-5, 20px);padding-right:var(--dyte-space-5, 20px);padding-top:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-3, 12px)}:host([variant='horizontal']) button{flex-direction:row;justify-content:flex-start}:host([variant='horizontal']) #icon{margin-right:var(--dyte-space-3, 12px);width:var(--dyte-space-6, 24px)}:host([variant='horizontal']) .label{display:block;font-size:14px;line-height:1.25rem}:host([variant='horizontal']) #warning-indicator{right:auto;left:var(--dyte-space-4, 16px)}:host([brand-icon]) dyte-icon#icon{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}@media only screen and (max-device-height: 480px) and (orientation: landscape){:host{margin-left:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0, 0px)}:host .label{display:none}:slotted(dyte-icon){height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}}";var kw=Object.freeze({__proto__:null,dyte_controlbar_button:xw});const Sw=class{constructor(t){vt(this,t),this.dyteOpenChange=k(this,"dyteOpenChange",7),this.showMenu=()=>{this.disabled||(this.isInFocus=!0,setTimeout((()=>{this.isInFocus&&(this.tooltipEl.style.display="block",this.update(),this.dyteOpenChange.emit(!0),"sm"===this.size&&setTimeout((()=>{this.isInFocus&&this.hideMenu()}),1e3))}),this.delay))},this.hideMenu=()=>{this.open||this.disabled||(this.isInFocus=!1,this.tooltipEl.style.display="none",this.dyteOpenChange.emit(!1))},this.label="",this.variant="secondary",this.disabled=!1,this.open=!1,this.kind="inline",this.size=void 0,this.placement="top",this.delay=0,this.iconPack=ts,this.t=ns(),this.isInFocus=!1}componentDidLoad(){this.triggerEl.addEventListener("focusin",this.showMenu),this.triggerEl.addEventListener("mouseenter",this.showMenu),this.triggerEl.addEventListener("focusout",this.hideMenu),this.triggerEl.addEventListener("mouseleave",this.hideMenu),It((()=>{this.openChanged(this.open)}))}disconnectedCallback(){this.triggerEl&&(this.triggerEl.removeEventListener("focusin",this.showMenu),this.triggerEl.removeEventListener("mouseenter",this.showMenu),this.triggerEl.removeEventListener("focusout",this.hideMenu),this.triggerEl.removeEventListener("mouseleave",this.hideMenu),this.triggerEl=void 0)}openChanged(t){t?this.showMenu():this.hideMenu()}update(){var t;hb(this.triggerEl,this.tooltipEl,{placement:this.placement,middleware:[Ay(8),Ly(),My({padding:5}),(t={element:this.arrowEl},{name:"arrow",options:t,async fn(e){const{element:i,padding:s=0}=null!=t?t:{},{x:a,y:r,placement:n,rects:o,platform:l}=e;if(null==i)return{};const d=gy(s),c={x:a,y:r},h=cy(n),p=hy(h),g=await l.getDimensions(i),u="y"===h?"top":"left",m="y"===h?"bottom":"right",v=o.reference[p]+o.reference[h]-c[h]-o.floating[p],f=c[h]-o.reference[h],y=await(null==l.getOffsetParent?void 0:l.getOffsetParent(i));let b=y?"y"===h?y.clientHeight||0:y.clientWidth||0:0;0===b&&(b=o.floating[p]);const w=v/2-f/2,x=d[u],k=b-g[p]-d[m],S=b/2-g[p]/2+w,_=yy(x,S,k),C=null!=dy(n)&&S!=_&&o.reference[p]/2-(S<x?d[u]:d[m])-g[p]/2<0?S<x?x-S:k-S:0;return{[h]:c[h]-C,data:{[h]:_,centerOffset:S-_}}}})]}).then((({x:t,y:e,placement:i,middlewareData:s})=>{Object.assign(this.tooltipEl.style,{left:`${t}px`,top:`${e}px`});const{x:a,y:r}=s.arrow,n={top:"bottom",right:"left",bottom:"top",left:"right"}[i.split("-")[0]];Object.assign(this.arrowEl.style,{left:null!=a?`${a}px`:"",top:null!=r?`${r}px`:"",right:"",bottom:"",[n]:"-4px"})}))}render(){return m(f,null,m("span",{part:"trigger",id:"trigger",ref:t=>this.triggerEl=t},m("slot",null)),m("div",{part:"tooltip",class:"tooltip",id:"tooltip",role:"tooltip",ref:t=>this.tooltipEl=t},m("div",{id:"arrow",ref:t=>this.arrowEl=t,part:"arrow"}),this.label,m("slot",{name:"tooltip"})))}static get watchers(){return{open:["openChanged"]}}};Sw.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{--background-color:var(--dyte-tooltip-background-color, rgb(var(--dyte-colors-background-600, 60 60 60)));--color:var(--dyte-tooltip-color, rgb(var(--dyte-colors-text-1000, 255 255 255)));display:inline-flex}#trigger{display:block;width:100%;flex:1 1 0%}.tooltip{max-width:var(--dyte-space-64, 256px);position:fixed;z-index:20;display:none;width:-moz-max-content;width:max-content;padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);padding-top:var(--dyte-space-1, 4px);padding-bottom:var(--dyte-space-1, 4px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-shadow:0 1px 2px 0 rgb(0 0 0 / 0.05);--tw-shadow-colored:0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);font-size:12px}.tooltip,#arrow{position:absolute;background-color:var(--background-color);color:var(--color)}#arrow{position:absolute;height:var(--dyte-space-2, 8px);width:var(--dyte-space-2, 8px);transform:rotate(45deg)}:host([variant='primary']){--background-color:rgb(var(--dyte-colors-brand-500, 33 96 253));--color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}:host([kind='block']){display:block}";var _w=Object.freeze({__proto__:null,dyte_tooltip:Sw});const Cw=class{constructor(t){vt(this,t),this.iconPack=ts,this.size="md",this.t=ns()}render(){return m(f,null,m("dyte-icon",{class:"spinner",icon:this.iconPack.spinner,iconPack:this.iconPack,t:this.t}))}};Cw.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{box-sizing:border-box;display:block;height:var(--dyte-space-10, 40px);width:var(--dyte-space-10, 40px);--dyte-spinner-color:currentColor}.spinner{height:100%;width:100%}@keyframes spin{to{transform:rotate(360deg)}}.spinner{animation:spin 1s linear infinite;border-radius:9999px;background-color:transparent;animation-duration:1.3s}:host([size='md']){height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}:host([size='sm']){height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}";var Pw=Object.freeze({__proto__:null,dyte_spinner:Cw});const Lw=class{constructor(t){vt(this,t),this.size=void 0,this.variant="primary",this.kind="button",this.reverse=!1,this.disabled=!1,this.iconPack=ts,this.t=ns(),this.type="button"}render(){return m(f,null,m("button",{part:"button",type:this.type,disabled:this.disabled},m("span",{class:"start"},m("slot",{name:"start"})),m("span",{class:"content",part:"content"},m("slot",null)),m("span",{class:"end"},m("slot",{name:"end"}))))}};Lw.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{--icon-size:var(--dyte-button-icon-size, var(--dyte-space-5, 20px));--transition-property:var(--dyte-transition-property, all);--transition-duration:100ms;display:inline-flex;height:var(--dyte-space-8, 32px);cursor:pointer;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));font-size:14px;-webkit-user-select:none;-moz-user-select:none;user-select:none;border-radius:var(--dyte-border-radius-sm, 4px);transition-property:var(--transition-property);transition-duration:var(--transition-duration)}button{box-sizing:border-box;background-color:transparent;color:inherit;border:var(--dyte-border-width-sm, 1px) solid transparent;padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);display:inline-flex;flex-grow:1;justify-content:center;vertical-align:baseline;gap:var(--dyte-space-1, 4px);transition-property:var(--transition-property);transition-duration:var(--transition-duration);outline:none;height:inherit;border-radius:inherit;fill:inherit;cursor:inherit;font-weight:inherit;font-family:inherit;font-size:inherit;line-height:inherit}.start,.content,.end{align-self:center}::slotted(dyte-icon),::slotted(dyte-spinner){height:var(--icon-size);width:var(--icon-size)}:host([variant='primary']){color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}:host(:hover){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-600, 13 81 253) / var(--tw-bg-opacity))}button:focus-visible{border-color:rgb(var(--dyte-colors-text-1000, 255 255 255))}:host(:active){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-700, 2 70 253) / var(--tw-bg-opacity))}:host([disabled]:not([disabled='false'])){cursor:not-allowed;opacity:0.6}:host([variant='secondary']){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}:host([variant='secondary']:hover){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}:host([variant='secondary']:active){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}:host([variant='danger']){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-bg-opacity))}:host([variant='danger']:hover){background-color:rgba(var(--dyte-colors-danger, 255 45 45) / 0.7)}:host([variant='danger']:active){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-bg-opacity))}:host([variant='ghost']){background-color:transparent;color:inherit}:host([variant='ghost'].active){--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity))}:host([variant='ghost']:hover){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}:host([variant='ghost']:active){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}:host([kind='icon']){--icon-size:var(--dyte-space-5, 20px);width:var(--dyte-space-8, 32px)}:host([kind='icon']) button{padding-left:var(--dyte-space-0, 0px);padding-right:var(--dyte-space-0, 0px)}:host([kind='wide']){width:100%}:host([size='lg']){--icon-size:var(--dyte-space-5, 20px);height:var(--dyte-space-10, 40px);font-size:16px}:host([size='lg'][kind='icon']){--icon-size:var(--dyte-space-6, 24px);height:var(--dyte-space-10, 40px);width:var(--dyte-space-10, 40px)}:host([size='sm']){--icon-size:var(--dyte-space-4, 16px);height:var(--dyte-space-6, 24px);font-size:12px}:host([size='sm'][kind='icon']){height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}";var Tw=Object.freeze({__proto__:null,dyte_button:Lw});const Ew=t=>{try{return JSON.parse(t)}catch(e){return t}},Aw=class{constructor(t){vt(this,t),this.icon=void 0,this.iconPack=ts,this.variant="primary",this.t=ns(),this.size="lg"}render(){return m(f,null,m("div",{class:"icon-wrapper",innerHTML:Ew(this.icon),part:"wrapper"}))}};Aw.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block;height:var(--dyte-space-10, 40px);outline:2px solid transparent;outline-offset:2px}:host .icon-wrapper{display:flex;height:100%;width:100%;flex-direction:column;align-items:center}:host svg{height:100%;width:100%;outline:2px solid transparent;outline-offset:2px}:host([size='xl']){box-sizing:border-box;display:block;height:var(--dyte-space-16, 64px) !important;width:var(--dyte-space-16, 64px) !important;--dyte-spinner-color:currentColor}:host([size='md']){box-sizing:border-box;display:block;height:var(--dyte-space-6, 24px) !important;width:var(--dyte-space-6, 24px) !important;--dyte-spinner-color:currentColor}:host([size='sm']){box-sizing:border-box;display:block;height:var(--dyte-space-4, 16px) !important;width:var(--dyte-space-4, 16px) !important;--dyte-spinner-color:currentColor}:host([variant='secondary']) .icon-wrapper{--tw-text-opacity:1;color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-text-opacity))}:host([variant='danger']) .icon-wrapper{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}";var Mw=Object.freeze({__proto__:null,dyte_icon:Aw})},70010:(t,e,i)=>{i.d(e,{D:()=>n});var s=i(7641),a=i(41960);const r={joined:"https://dyte-uploads.s3.ap-south-1.amazonaws.com/notification_join.mp3",left:"https://dyte-uploads.s3.ap-south-1.amazonaws.com/notification_join.mp3",message:"https://dyte-uploads.s3.ap-south-1.amazonaws.com/notification_message.mp3"};class n{constructor(t){this.meeting=t,this.audio=document.createElement("audio"),this.audio.volume=.3}play(t,e=3e3){var i;this.playing||(this.playing=!0,this.audio.src=r[t],this.audio.volume=.3,null===(i=this.audio.play())||void 0===i||i.catch((i=>{a.l.error("[dyte-notifications] play() failed\n",{sound:t,duration:e},i)})),setTimeout((()=>{this.playing=!1}),e))}async setDevice(t){var e,i,r;(0,s.d)(this.meeting)||await(null===(r=null===(i=null===(e=this.audio)||void 0===e?void 0:e.setSinkId)||void 0===i?void 0:i.call(e,t))||void 0===r?void 0:r.catch((t=>{a.l.error("[dyte-notifications] setSinkId() error\n",t)})))}}},73726:(t,e,i)=>{i.d(e,{e:()=>z,g:()=>N,m:()=>F,p:()=>v});var s=i(50975),a=i(61604),r=i(49583),n=i(35189);const o=[0,.5,1,1.5,2,3,4,5,6,7,8,9,10,12,14,16,20,24,28,32,36,40,44,48,52,56,60,64,72,80,96],l={darkest:{background:{1e3:"#080808",900:"#1A1A1A",800:"#1E1E1E",700:"#2C2C2C",600:"#393939"},text:"#FFFFFF"},dark:{background:{1e3:"#252525",900:"#2F2F2F",800:"#323232",700:"#3E3E3E",600:"#4A4A4A"},text:"#F5F5F5","video-bg":"#1C1C1C"},light:{background:{1e3:"#FFFFFF",900:"#F5F5F5",800:"#EBEBEB",700:"#E0E0E0",600:"#D6D6D6"},text:"#111111","text-on-brand":"#ffffff","video-bg":"#DADADA"}},d={none:{none:0,sm:0,md:0,lg:0},thin:{none:0,sm:1,md:2,lg:4},fat:{none:0,sm:2,md:4,lg:8}},c={sharp:{none:0,sm:0,md:0,lg:0},rounded:{none:0,sm:4,md:8,lg:12},"extra-rounded":{none:0,sm:8,md:16,lg:24},circular:{none:9999,sm:9999,md:9999,lg:9999}};function h(t){let e="0",i="0",s="0";return 4==(t=t.trim()).length?(e="0x"+t[1]+t[1],i="0x"+t[2]+t[2],s="0x"+t[3]+t[3]):t.length>6&&(e="0x"+t[1]+t[2],i="0x"+t[3]+t[4],s="0x"+t[5]+t[6]),[+e,+i,+s]}const p=t=>"string"==typeof t&&7===t.length&&t.startsWith("#"),g="--dyte-";function u(t,e=g){return e+t}const m=(t,e,i=g)=>{Object.keys(e).forEach((s=>{const a=e[s];if("string"==typeof a)if("text"===s||"text-on-brand"===s){const e=h(a).join(" ");t.style.setProperty(u(`colors-${s}-1000`,i),`${e}`),t.style.setProperty(u(`colors-${s}-900`,i),`${e} / 0.88`),t.style.setProperty(u(`colors-${s}-800`,i),`${e} / 0.76`),t.style.setProperty(u(`colors-${s}-700`,i),`${e} / 0.64`),t.style.setProperty(u(`colors-${s}-600`,i),`${e} / 0.52`)}else{const e=h(a).join(" ");t.style.setProperty(u(`colors-${s}`,i),e)}else"object"==typeof a&&Object.keys(a).forEach((e=>{const r=h(a[e]).join(" ");t.style.setProperty(u(`colors-${s}-${e}`,i),r)}))}))},v=(t,{spacingBase:e,borderRadius:i,borderWidth:s,colors:a,fontFamily:r,googleFont:n,theme:h,tokenPrefix:p=g})=>{if("object"!=typeof t)throw new Error("[dyte-ui-kit] (provideDyteDesignSystem): Passed element is not a valid HTML Element");if("string"==typeof n&&((t=>{const e=[];if(null==document.querySelector("link[data-dyte-font]")){const t=document.createElement("link");t.rel="preconnect",t.setAttribute("data-dyte-font","true"),t.href="https://fonts.googleapis.com";const i=t.cloneNode(!0);i.href="https://fonts.gstatic.com",i.crossOrigin="",e.push(t,i)}const i=document.createElement("link");i.rel="stylesheet",i.setAttribute("data-dyte-font",t),i.href=encodeURI(`https://fonts.googleapis.com/css2?family=${t}:wght@${[400,500,700].join(";")}&display=swap`),e.push(i),document.head.append(...e)})(n),t.style.setProperty(u("font-family",p),n)),"string"==typeof r&&t.style.setProperty(u("font-family",p),r),"number"==typeof e&&((t,e,i=g)=>{o.forEach((s=>{t.style.setProperty(u(`space-${s}`,i),s*e+"px")}))})(t,e,p),"string"==typeof s&&((t,e,i=g)=>{if(e in d){const s=d[e];Object.keys(s).forEach((e=>{t.style.setProperty(u(`border-width-${e}`,i),`${s[e]}px`)}))}})(t,s,p),"string"==typeof i&&((t,e,i=g)=>{if(e in c){const s=c[e];Object.keys(s).forEach((e=>{t.style.setProperty(u(`border-radius-${e}`,i),`${s[e]}px`)}))}})(t,i,p),"string"==typeof h){const e=l[h];null!=e&&m(t,e,p)}"object"==typeof a&&m(t,a,p)};function f(t,e,i){(void 0!==i&&!(0,a.e)(t[e],i)||void 0===i&&!(e in t))&&(0,a.b)(t,e,i)}var y,b=function(t,e,i){for(var s=-1,a=Object(t),r=i(t),n=r.length;n--;){var o=r[y?n:++s];if(!1===e(a[o],o,a))break}return t};var w=Function.prototype,x=Object.prototype,k=w.toString,S=x.hasOwnProperty,_=k.call(Object);function C(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}function P(t,e,i,s,n,o,l){var d=C(t,i),c=C(e,i),h=l.get(c);if(h)f(t,i,h);else{var p,g=o?o(d,c,i+"",t,e,l):void 0,u=void 0===g;if(u){var m=(0,a.f)(c),v=!m&&(0,a.a)(c),y=!m&&!v&&(0,a.d)(c);g=c,m||v||y?(0,a.f)(d)?g=d:(p=d,(0,r.i)(p)&&(0,a.i)(p)?g=(0,a.h)(d):v?(u=!1,g=(0,a.j)(c,!0)):y?(u=!1,g=(0,a.l)(c,!0)):g=[]):function(t){if(!(0,r.i)(t)||"[object Object]"!=(0,r.b)(t))return!1;var e=(0,a.g)(t);if(null===e)return!0;var i=S.call(e,"constructor")&&e.constructor;return"function"==typeof i&&i instanceof i&&k.call(i)==_}(c)||(0,a.m)(c)?(g=d,(0,a.m)(d)?g=function(t){return(0,a.c)(t,(0,a.k)(t))}(d):(0,r.a)(d)&&!(0,a.n)(d)||(g=(0,a.o)(c))):u=!1}u&&(l.set(c,g),n(g,c,s,o,l),l.delete(c)),f(t,i,g)}}function L(t,e,i,s,n){t!==e&&b(e,(function(o,l){if(n||(n=new a.S),(0,r.a)(o))P(t,e,l,i,L,s,n);else{var d=s?s(C(t,l),o,l+"",t,e,n):void 0;void 0===d&&(d=o),f(t,l,d)}}),a.k)}function T(t){return t}var E=Math.max;var A=a.p?function(t,e){return(0,a.p)(t,"toString",{configurable:!0,enumerable:!1,value:(i=e,function(){return i}),writable:!0});var i}:T,M=Date.now;var R,D,I,O=(R=A,D=0,I=0,function(){var t=M(),e=16-(t-I);if(I=t,e>0){if(++D>=800)return arguments[0]}else D=0;return R.apply(void 0,arguments)});function $(t,e){return O(function(t,e,i){return e=E(void 0===e?t.length-1:e,0),function(){for(var s=arguments,a=-1,r=E(s.length-e,0),n=Array(r);++a<r;)n[a]=s[e+a];a=-1;for(var o=Array(e+1);++a<e;)o[a]=s[a];return o[e]=i(n),function(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}(t,this,o)}}(t,e,T),t+"")}var U,F=(U=function(t,e,i){L(t,e,i)},$((function(t,e){var i=-1,s=e.length,n=s>1?e[s-1]:void 0,o=s>2?e[2]:void 0;for(n=U.length>3&&"function"==typeof n?(s--,n):void 0,o&&function(t,e,i){if(!(0,r.a)(i))return!1;var s=typeof e;return!!("number"==s?(0,a.i)(i)&&(0,a.q)(e,i.length):"string"==s&&e in i)&&(0,a.e)(i[e],t)}(e[0],e[1],o)&&(n=s<3?void 0:n,s=1),t=Object(t);++i<s;){var l=e[i];l&&U(t,l,i,n)}return t})));const z=(t,e=s.d)=>{let i=Object.assign({},e);return F(i,t),i},N=(t,e,i={},s={grid_pagination:!0,settings_toggle:!0})=>{var a,r,o,l,d,c,h,g,u,m,v,f,y,b,w,x,k,S;const _={showSetupScreen:!0};let C,P=["dyte-stage"],L={},T={};const E=!1!==(null==s?void 0:s.settings_toggle),A=!1!==(null==s?void 0:s.grid_pagination);if(null===(a=t.controlBar)||void 0===a?void 0:a.isEnabled){P.push("dyte-controlbar");const{elements:i}=t.controlBar,s=[...i.fullscreen?["dyte-fullscreen-toggle"]:[],...E?["dyte-settings-toggle"]:[]],a=[],p=[];(null===(r=e.participants.pip)||void 0===r?void 0:r.isSupported())&&(null===(l=null===(o=e.self)||void 0===o?void 0:o.config)||void 0===l?void 0:l.pipMode)&&"LIVESTREAM"!==(null===(d=e.self.config)||void 0===d?void 0:d.viewType)&&p.push("dyte-pip-toggle"),(null==e?void 0:e.self.permissions.canDisableParticipantAudio)&&p.push("dyte-mute-all-button"),p.push("dyte-breakout-rooms-toggle"),(null===(c=e.self)||void 0===c?void 0:c.permissions.canRecord)&&p.push("dyte-recording-toggle"),null!==(h=e.self.permissions.transcriptionEnabled)&&void 0!==h&&h&&p.push("dyte-caption-toggle"),"ReactNative"!==navigator.product&&p.push("dyte-debugger-toggle"),(0,n.i)(e)&&s.push("dyte-livestream-toggle"),i.screenshare&&s.push("dyte-screen-share-toggle"),i.chat&&a.push("dyte-chat-toggle"),i.polls&&a.push("dyte-polls-toggle"),i.participants&&a.push("dyte-participants-toggle"),i.plugins&&a.push("dyte-plugins-toggle"),a.push("dyte-ai-toggle");const g=["dyte-mic-toggle","dyte-camera-toggle","dyte-stage-toggle","dyte-leave-button"];p.length>0&&g.push("dyte-more-toggle");const u=s.concat(a).concat(p);let m=!1;u.length>0&&(m=!0),T={"dyte-controlbar":{states:["activeMoreMenu"],children:["div#controlbar-left","div#controlbar-center","div#controlbar-right"]},"div#controlbar-left":s,"div#controlbar-center":g,"div#controlbar-right":a,"dyte-more-toggle":{states:["activeMoreMenu"],children:[]},"dyte-more-toggle.activeMoreMenu":p.map((t=>[t,{variant:"horizontal",slot:"more-elements"}])),"dyte-controlbar.sm":["div#controlbar-mobile"],"dyte-controlbar.md":["div#controlbar-mobile"],"dyte-more-toggle.activeMoreMenu.md":u.map((t=>[t,{variant:"horizontal",slot:"more-elements"}])),"dyte-more-toggle.activeMoreMenu.sm":u.map((t=>[t,{variant:"horizontal",slot:"more-elements"}])),"div#controlbar-mobile":["dyte-mic-toggle","dyte-camera-toggle","dyte-stage-toggle",m&&"dyte-more-toggle","dyte-leave-button"]}}if(null===(g=t.header)||void 0===g?void 0:g.isEnabled){P.unshift("dyte-header");const{elements:e}=t.header;let i=["dyte-recording-indicator","dyte-livestream-indicator"],s=[],a=[];A&&a.push("dyte-grid-pagination"),e.title&&s.push("dyte-meeting-title"),"string"==typeof e.logo&&e.logo.length>0&&(C=e.logo,i.unshift("dyte-logo")),e.participantCount&&a.push("dyte-participant-count","dyte-viewer-count"),e.timer&&a.push("dyte-clock"),L={"dyte-header":["div#header-left","div#header-center","div#header-right"],"dyte-header.sm":{remove:["div#header-center"]},"div#header-left":i,"div#header-center":s,"div#header-right":a,"div#header-left.sm":{remove:["dyte-logo"],prepend:["dyte-meeting-title"]}}}P.push("dyte-participants-audio","dyte-dialog-manager");let M={logo:C};M=t.designTokens,p(null===(m=null===(u=null==t?void 0:t.designTokens)||void 0===u?void 0:u.colors)||void 0===m?void 0:m.textOnBrand)&&(M.colors["text-on-brand"]=null===(f=null===(v=null==t?void 0:t.designTokens)||void 0===v?void 0:v.colors)||void 0===f?void 0:f.textOnBrand),p(null===(b=null===(y=null==t?void 0:t.designTokens)||void 0===y?void 0:y.colors)||void 0===b?void 0:b.videoBg)&&(M.colors["video-bg"]=null===(x=null===(w=null==t?void 0:t.designTokens)||void 0===w?void 0:w.colors)||void 0===x?void 0:x.videoBg);let R={designTokens:M,styles:{"dyte-header":{display:"grid",height:"48px",gridTemplateColumns:"repeat(3, 1fr)",gridTemplateRows:"1fr",alignItems:"center"},"dyte-header.sm":{display:"grid",gridArea:"header",gridTemplateColumns:"repeat(2, 1fr)",gridTemplateRows:"1fr",alignItems:"center"},"div#header-left":{display:"flex",alignItems:"center",height:"48px",wordBreak:"break-all"},"dyte-logo":{height:"26px"},"div#header-center":{display:"flex",alignItems:"center",justifyContent:"center",wordBreak:"break-all"},"div#header-right":{display:"flex",alignItems:"center",justifyContent:"flex-end"},"dyte-stage":{display:"flex",flex:"1"},"dyte-grid":{flex:"1",height:"auto"},"dyte-controlbar":{display:"grid",gridTemplateColumns:"repeat(3,1fr)",gridTemplateRows:"1fr",alignItems:"center",padding:"8px"},"dyte-controlbar.sm":{display:"flex",position:"relative",backgroundColor:"var(--dyte-colors-background-1000, #000)"},"dyte-controlbar.md":{display:"flex",position:"relative",backgroundColor:"var(--dyte-colors-background-1000, #000)"},"div#controlbar-left":{display:"flex",alignItems:"center"},"div#controlbar-center":{display:"flex",alignItems:"center",position:"relative",overflow:"visible",justifyContent:"center"},"div#controlbar-mobile":{display:"flex",flex:"1",alignItems:"center",justifyContent:"center",zIndex:"10000"},"div#controlbar-right":{display:"flex",alignItems:"center",justifyContent:"flex-end"},"dyte-settings":{width:"720px",height:"480px"},"dyte-debugger":{width:"720px",height:"480px"},"div#setupcontrols-indicator":{position:"absolute",bottom:"12px",left:"12px",display:"flex",gap:"6px",background:"rgb(var(--dyte-colors-background-800, 0 0 0))",borderRadius:"100%"},"div#setupcontrols-media":{position:"absolute",bottom:"8px",right:"8px",display:"flex",gap:"6px"},"div#setupcontrols-settings":{position:"absolute",top:"8px",right:"8px",display:"flex",flexDirection:"column",gap:"6px"},"dyte-meeting-title.sm":{marginLeft:"0"},"dyte-clock":{marginRight:"0"}},root:Object.assign(Object.assign(Object.assign({"dyte-meeting":{state:"meeting",states:["activeSidebar","activeAI"]},"dyte-meeting[meeting=idle]":["dyte-idle-screen"],"dyte-meeting[meeting=waiting]":["dyte-waiting-screen"],"dyte-meeting[meeting=setup]":["dyte-setup-screen","dyte-dialog-manager"],"dyte-meeting[meeting=joined]":P,"dyte-meeting[meeting=joined].activeSidebar.sm":{add:[["dyte-sidebar",{view:"full-screen"}]]},"dyte-meeting[meeting=joined].activeSidebar.md":{add:[["dyte-sidebar",{view:"full-screen"}]]},"dyte-meeting[meeting=joined].activeAI.sm":{add:[["dyte-ai",{view:"full-screen"}]]},"dyte-meeting[meeting=joined].activeAI.md":{add:[["dyte-ai",{view:"full-screen"}]]},"dyte-meeting[meeting=ended]":["dyte-ended-screen"]},L),T),{"dyte-stage":{states:["activeSidebar","activeAI"],children:["dyte-grid","dyte-notifications","dyte-transcripts"]},"dyte-stage.activeSidebar":{add:[["dyte-sidebar",{view:"sidebar"}]]},"dyte-stage.activeSidebar.sm":{remove:["dyte-sidebar"]},"dyte-stage.activeAI":{add:[["dyte-ai",{view:"sidebar"}]]},"dyte-stage.activeAI.sm":{remove:["dyte-ai"]},"dyte-grid":{states:["activeScreenShare","activePlugin","activeSpotlight"],state:"viewType",children:["dyte-simple-grid"]},"dyte-grid[viewType=AUDIO_ROOM]":["dyte-audio-grid"],"dyte-grid[viewType=AUDIO_ROOM].activePlugin":["dyte-mixed-grid"],"dyte-grid[viewType=AUDIO_ROOM].activeScreenshare":["dyte-mixed-grid"],"dyte-grid[viewType=AUDIO_ROOM].activeScreenShare.activeSpotlight":["dyte-mixed-grid"],"dyte-grid[viewType=AUDIO_ROOM].activePlugin.activeSpotlight":["dyte-mixed-grid"],"dyte-grid[viewType=AUDIO_ROOM].activePlugin.activeScreenShare.activeSpotlight":["dyte-mixed-grid"],"dyte-grid.activeSpotlight":["dyte-spotlight-grid"],"dyte-grid.activeScreenShare":["dyte-mixed-grid"],"dyte-grid.activePlugin":["dyte-mixed-grid"],"dyte-grid.activeScreenShare.activeSpotlight":["dyte-mixed-grid"],"dyte-grid.activePlugin.activeSpotlight":["dyte-mixed-grid"],"dyte-grid.activePlugin.activeScreenShare.activeSpotlight":["dyte-mixed-grid"],"dyte-mixed-grid":{states:["activeSpotlight"],state:"viewType",children:["dyte-simple-grid"]},"dyte-mixed-grid[viewType=AUDIO_ROOM]":["dyte-audio-grid"],"dyte-mixed-grid.activeSpotlight":["dyte-spotlight-grid"],"dyte-participant-tile":{state:"meeting",children:["dyte-name-tag","dyte-avatar","dyte-network-indicator"]},"dyte-participant-setup":["dyte-avatar","div#setupcontrols-media"],"dyte-participant-tile[meeting=setup]":["dyte-avatar","div#setupcontrols-indicator","div#setupcontrols-media",...E?["div#setupcontrols-settings"]:[]],"div#setupcontrols-indicator":[["dyte-audio-visualizer",{slot:"start",hideMuted:!0}]],"div#setupcontrols-media":[["dyte-mic-toggle",{size:"sm"}],["dyte-camera-toggle",{size:"sm"}]],"div#setupcontrols-settings":[["dyte-settings-toggle",{size:"sm"}]],"dyte-screenshare-view":["dyte-name-tag","dyte-network-indicator"],"dyte-name-tag":[["dyte-audio-visualizer",{slot:"start"}]]}),config:{notification_sounds:{participant_left:!1},participant_joined_sound_notification_limit:3,participant_chat_message_sound_notification_limit:10,videoFit:"cover"}};return R=z(i,R),_.showSetupScreen=null===(S=null===(k=t.setupScreen)||void 0===k?void 0:k.isEnabled)||void 0===S||S,{config:R,data:_}}},85621:(t,e,i)=>{i.d(e,{d:()=>s});const s={people:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 13.999 13 14a2 2 0 0 1 1.995 1.85L15 16v1.5C14.999 21 11.284 22 8.5 22c-2.722 0-6.335-.956-6.495-4.27L2 17.5v-1.501c0-1.054.816-1.918 1.85-1.995L4 14ZM15.22 14H20c1.054 0 1.918.816 1.994 1.85L22 16v1c-.001 3.062-2.858 4-5 4a7.16 7.16 0 0 1-2.14-.322c.336-.386.607-.827.802-1.327A6.19 6.19 0 0 0 17 19.5l.267-.006c.985-.043 3.086-.363 3.226-2.289L20.5 17v-1a.501.501 0 0 0-.41-.492L20 15.5h-4.051a2.957 2.957 0 0 0-.595-1.34L15.22 14H20h-4.78ZM4 15.499l-.1.01a.51.51 0 0 0-.254.136.506.506 0 0 0-.136.253l-.01.101V17.5c0 1.009.45 1.722 1.417 2.242.826.445 2.003.714 3.266.753l.317.005.317-.005c1.263-.039 2.439-.308 3.266-.753.906-.488 1.359-1.145 1.412-2.057l.005-.186V16a.501.501 0 0 0-.41-.492L13 15.5l-9-.001ZM8.5 3a4.5 4.5 0 1 1 0 9 4.5 4.5 0 0 1 0-9Zm9 2a3.5 3.5 0 1 1 0 7 3.5 3.5 0 0 1 0-7Zm-9-.5c-1.654 0-3 1.346-3 3s1.346 3 3 3 3-1.346 3-3-1.346-3-3-3Zm9 2c-1.103 0-2 .897-2 2s.897 2 2 2 2-.897 2-2-.897-2-2-2Z" fill="currentColor"/></svg>',people_checked:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 29 29"><path fill="currentColor" d="M14.58 15.333H2.833a2.667 2.667 0 0 0-2.666 2.666v2l.006.307c.214 4.419 5.031 5.693 8.66 5.693 1.374 0 2.92-.182 4.32-.649a8.53 8.53 0 0 1-.717-1.87c-.93.298-2.027.478-3.18.513l-.423.006-.422-.006c-1.684-.052-3.254-.411-4.355-1.004-1.29-.694-1.89-1.644-1.89-2.99v-2.001l.014-.135a.675.675 0 0 1 .181-.337.68.68 0 0 1 .338-.181l.134-.014h10.31a8.71 8.71 0 0 1 1.436-1.998h.001Zm.253-8.667a6 6 0 1 0-12 0 6 6 0 0 0 12 0Zm-10 0c0-2.205 1.795-4 4-4 2.206 0 4 1.795 4 4s-1.794 4-4 4c-2.205 0-4-1.795-4-4ZM25.5 7.999a4.667 4.667 0 1 0-9.333 0A4.667 4.667 0 0 0 25.5 8Zm-7.333 0a2.67 2.67 0 0 1 2.666-2.666A2.67 2.67 0 0 1 23.5 7.999a2.67 2.67 0 0 1-2.667 2.667 2.67 2.67 0 0 1-2.666-2.667Zm10 13.334a7.333 7.333 0 1 1-14.667 0 7.333 7.333 0 0 1 14.667 0Zm-2.862-3.139a.666.666 0 0 0-.944 0l-4.86 4.863-2.196-2.196a.667.667 0 1 0-.944.944l2.667 2.666a.666.666 0 0 0 .944 0l5.333-5.333a.666.666 0 0 0 0-.944Z"/></svg>',chat:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10a9.96 9.96 0 0 1-4.587-1.112l-3.826 1.067a1.25 1.25 0 0 1-1.54-1.54l1.068-3.823A9.96 9.96 0 0 1 2 12C2 6.477 6.477 2 12 2Zm0 1.5A8.5 8.5 0 0 0 3.5 12c0 1.47.373 2.883 1.073 4.137l.15.27-1.112 3.984 3.987-1.112.27.15A8.5 8.5 0 1 0 12 3.5ZM8.75 13h4.498a.75.75 0 0 1 .102 1.493l-.102.007H8.75a.75.75 0 0 1-.102-1.493L8.75 13h4.498H8.75Zm0-3.5h6.505a.75.75 0 0 1 .101 1.493l-.101.007H8.75a.75.75 0 0 1-.102-1.493L8.75 9.5h6.505H8.75Z" fill="currentColor"/></svg>',poll:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.752 2a2.752 2.752 0 0 1 2.752 2.751V19.25a2.752 2.752 0 1 1-5.504 0V4.75A2.752 2.752 0 0 1 11.752 2Zm7 5a2.752 2.752 0 0 1 2.752 2.751v9.499a2.752 2.752 0 1 1-5.504 0V9.75A2.752 2.752 0 0 1 18.752 7Zm-14 5a2.752 2.752 0 0 1 2.752 2.751v4.499a2.752 2.752 0 0 1-5.504 0V14.75A2.752 2.752 0 0 1 4.752 12Zm7-8.5c-.692 0-1.252.56-1.252 1.251V19.25a1.252 1.252 0 0 0 2.504 0V4.75c0-.691-.56-1.251-1.252-1.251Zm7 5c-.691 0-1.252.56-1.252 1.251v9.499a1.252 1.252 0 0 0 2.504 0V9.75c0-.691-.56-1.251-1.252-1.251Zm-14 5c-.692 0-1.252.56-1.252 1.251v4.499a1.252 1.252 0 1 0 2.504 0V14.75c0-.691-.56-1.252-1.252-1.252Z" fill="currentColor"/></svg>',participants:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.754 10c.966 0 1.75.784 1.75 1.75v4.749a4.501 4.501 0 0 1-9.002 0V11.75c0-.966.783-1.75 1.75-1.75h5.502Zm0 1.5H9.252a.25.25 0 0 0-.25.25v4.749a3.001 3.001 0 0 0 6.002 0V11.75a.25.25 0 0 0-.25-.25ZM3.75 10h3.381a2.738 2.738 0 0 0-.618 1.5H3.75a.25.25 0 0 0-.25.25v3.249a2.501 2.501 0 0 0 3.082 2.433c.085.504.24.985.453 1.432A4.001 4.001 0 0 1 2 14.999V11.75c0-.966.784-1.75 1.75-1.75Zm13.125 0h3.375c.966 0 1.75.784 1.75 1.75V15a4 4 0 0 1-5.03 3.866c.214-.448.369-.929.455-1.433A2.5 2.5 0 0 0 20.5 15v-3.25a.25.25 0 0 0-.25-.25h-2.757a2.738 2.738 0 0 0-.618-1.5ZM12 3a3 3 0 1 1 0 6 3 3 0 0 1 0-6Zm6.5 1a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5Zm-13 0a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5Zm6.5.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3Zm6.5 1a1 1 0 1 0 0 2 1 1 0 0 0 0-2Zm-13 0a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z" fill="currentColor"/></svg>',rocket:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path d="M9.35 20.45 14.65 22.7Q15.55 20.9 16.575 19.15Q17.6 17.4 18.75 15.8L14.8 15Q14.8 15 14.8 15Q14.8 15 14.8 15ZM17.05 24.5 23.7 31.15Q26.55 29.85 29.05 28.2Q31.55 26.55 33.1 25Q37.15 20.95 39.05 16.7Q40.95 12.45 41.1 7.1Q35.75 7.25 31.5 9.15Q27.25 11.05 23.2 15.1Q21.65 16.65 20 19.15Q18.35 21.65 17.05 24.5ZM28.5 19.7Q27.5 18.7 27.5 17.225Q27.5 15.75 28.5 14.75Q29.5 13.75 30.975 13.75Q32.45 13.75 33.45 14.75Q34.45 15.75 34.45 17.225Q34.45 18.7 33.45 19.7Q32.45 20.7 30.975 20.7Q29.5 20.7 28.5 19.7ZM27.75 38.85 33.2 33.4Q33.2 33.4 33.2 33.4Q33.2 33.4 33.2 33.4L32.4 29.45Q30.8 30.6 29.05 31.625Q27.3 32.65 25.5 33.55ZM44.05 4.15Q44.5 10.95 42.35 16.55Q40.2 22.15 35.25 27.1Q35.2 27.15 35.15 27.2Q35.1 27.25 35.05 27.3L36.15 32.8Q36.3 33.55 36.075 34.25Q35.85 34.95 35.3 35.5L26.75 44.1L22.5 34.2L14 25.7L4.1 21.45L12.7 12.9Q13.25 12.35 13.95 12.125Q14.65 11.9 15.4 12.05L20.9 13.15Q20.95 13.1 21 13.075Q21.05 13.05 21.1 13Q26.05 8.05 31.65 5.875Q37.25 3.7 44.05 4.15ZM7.45 31.75Q9.2 30 11.725 29.975Q14.25 29.95 16 31.7Q17.75 33.45 17.725 35.975Q17.7 38.5 15.95 40.25Q14.65 41.55 11.925 42.4Q9.2 43.25 3.75 44Q4.5 38.55 5.325 35.8Q6.15 33.05 7.45 31.75ZM9.55 33.9Q8.85 34.65 8.3 36.25Q7.75 37.85 7.35 40.35Q9.85 39.95 11.45 39.4Q13.05 38.85 13.8 38.15Q14.75 37.3 14.775 36.025Q14.8 34.75 13.9 33.8Q12.95 32.9 11.675 32.925Q10.4 32.95 9.55 33.9Z" fill="currentColor" /></svg>',call_end:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m21.903 13.202-.191.816a2.75 2.75 0 0 1-2.955 2.107l-1.755-.178A2.75 2.75 0 0 1 14.6 13.83l-.389-1.686a.25.25 0 0 0-.113-.157c-.321-.197-1.034-.32-2.098-.32-.786 0-1.386.067-1.786.189-.14.043-.238.085-.301.116l-.09.048-.015.04-.409 1.77A2.75 2.75 0 0 1 7 15.948l-1.746.177A2.75 2.75 0 0 1 2.3 14.03l-.196-.817a3.75 3.75 0 0 1 1.13-3.651C5.134 7.839 8.064 7 12 7c3.943 0 6.875.842 8.776 2.57a3.75 3.75 0 0 1 1.172 3.41l-.045.222Zm-1.426-.514a2.25 2.25 0 0 0-.71-2.009C18.184 9.241 15.602 8.5 12 8.5c-3.598 0-6.177.739-7.76 2.172a2.25 2.25 0 0 0-.677 2.19l.196.818a1.25 1.25 0 0 0 1.342.953l1.746-.178a1.25 1.25 0 0 0 1.09-.962l.423-1.82.043-.136c.376-.998 1.591-1.37 3.597-1.37 1.318 0 2.265.164 2.88.54.401.245.687.642.793 1.1l.389 1.685c.12.522.56.909 1.092.963l1.754.178a1.25 1.25 0 0 0 1.343-.958l.192-.816.034-.171Z" fill="currentColor"/></svg>',share:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 2.498a3.502 3.502 0 1 1-2.597 5.851l-4.558 2.604a3.5 3.5 0 0 1 0 2.093l4.557 2.606a3.502 3.502 0 1 1-.745 1.302L9.1 14.347a3.502 3.502 0 1 1 0-4.698l4.557-2.604A3.502 3.502 0 0 1 17 2.498Zm0 13.5a2.002 2.002 0 1 0 0 4.004 2.002 2.002 0 0 0 0-4.004Zm-10.498-6a2.002 2.002 0 1 0 0 4.004 2.002 2.002 0 0 0 0-4.004Zm10.498-6a2.002 2.002 0 1 0 0 4.004 2.002 2.002 0 0 0 0-4.004Z" fill="currentColor"/></svg>',mic_on:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.25 11a.75.75 0 0 1 .743.648l.007.102v.5a6.75 6.75 0 0 1-6.249 6.732l-.001 2.268a.75.75 0 0 1-1.493.102l-.007-.102v-2.268a6.75 6.75 0 0 1-6.246-6.496L5 12.25v-.5a.75.75 0 0 1 1.493-.102l.007.102v.5a5.25 5.25 0 0 0 5.034 5.246l.216.004h.5a5.25 5.25 0 0 0 5.246-5.034l.004-.216v-.5a.75.75 0 0 1 .75-.75ZM12 2a4 4 0 0 1 4 4v6a4 4 0 0 1-8 0V6a4 4 0 0 1 4-4Zm0 1.5A2.5 2.5 0 0 0 9.5 6v6a2.5 2.5 0 0 0 5 0V6A2.5 2.5 0 0 0 12 3.5Z" fill="currentColor"/></svg>',mic_off:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.28 2.22a.75.75 0 1 0-1.06 1.06L8 9.06V12a4 4 0 0 0 6.248 3.309l1.146 1.146A5.227 5.227 0 0 1 12.25 17.5h-.5l-.216-.004A5.25 5.25 0 0 1 6.5 12.25v-.5l-.007-.102A.75.75 0 0 0 5 11.75v.5l.004.236a6.75 6.75 0 0 0 6.246 6.496v2.268l.007.102a.75.75 0 0 0 1.493-.102l.001-2.268a6.718 6.718 0 0 0 3.712-1.458l4.256 4.256a.75.75 0 0 0 1.061-1.06L3.28 2.22Zm9.876 11.997A2.5 2.5 0 0 1 9.5 12v-1.44l3.656 3.657ZM14.5 6v5.318l1.43 1.43c.046-.242.07-.492.07-.748V6a4 4 0 0 0-7.862-1.044L9.5 6.318V6a2.5 2.5 0 0 1 5 0ZM17.196 14.014l1.146 1.146A6.725 6.725 0 0 0 19 12.25v-.5l-.007-.102a.75.75 0 0 0-1.493.102v.5l-.004.216a5.233 5.233 0 0 1-.3 1.548Z" fill="currentColor"/></svg>',video_on:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13.75 4.5A3.25 3.25 0 0 1 17 7.75v.173l3.864-2.318A.75.75 0 0 1 22 6.248V17.75a.75.75 0 0 1-1.136.643L17 16.075v.175a3.25 3.25 0 0 1-3.25 3.25h-8.5A3.25 3.25 0 0 1 2 16.25v-8.5A3.25 3.25 0 0 1 5.25 4.5h8.5Zm0 1.5h-8.5A1.75 1.75 0 0 0 3.5 7.75v8.5c0 .966.784 1.75 1.75 1.75h8.5a1.75 1.75 0 0 0 1.75-1.75v-8.5A1.75 1.75 0 0 0 13.75 6Zm6.75 1.573L17 9.674v4.651l3.5 2.1V7.573Z" fill="currentColor"/></svg>',video_off:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.28 2.22a.75.75 0 1 0-1.06 1.06l1.567 1.567A3.25 3.25 0 0 0 2 7.75v8.5a3.25 3.25 0 0 0 3.25 3.25h8.5a3.25 3.25 0 0 0 2.903-1.786l4.066 4.067a.75.75 0 0 0 1.061-1.061L3.28 2.22Zm12.196 14.317A1.75 1.75 0 0 1 13.75 18h-8.5a1.75 1.75 0 0 1-1.75-1.75v-8.5c0-.869.633-1.59 1.463-1.727l10.514 10.514ZM15.5 12.318V7.75A1.75 1.75 0 0 0 13.75 6H9.182l-1.5-1.5h6.068A3.25 3.25 0 0 1 17 7.75v.173l3.864-2.318A.75.75 0 0 1 22 6.248V17.75c0 .301-.17.543-.403.665L20.5 17.318V7.573L17 9.674v4.144l-1.5-1.5Z" fill="currentColor"/></svg>',share_screen_start:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 6.25A2.25 2.25 0 0 1 4.25 4h15.5A2.25 2.25 0 0 1 22 6.25v11.5A2.25 2.25 0 0 1 19.75 20H4.25A2.25 2.25 0 0 1 2 17.75V6.25Zm2.25-.75a.75.75 0 0 0-.75.75v11.5c0 .414.336.75.75.75h15.5a.75.75 0 0 0 .75-.75V6.25a.75.75 0 0 0-.75-.75H4.25Z"/><path d="M12 7.245a.75.75 0 0 1 .53.22l3.255 3.255a.75.75 0 1 1-1.06 1.06L12.75 9.806v6.447a.75.75 0 0 1-1.5 0V9.808L9.28 11.78a.75.75 0 1 1-1.06-1.06l3.25-3.254a.75.75 0 0 1 .53-.22Z"/></svg>',share_screen_stop:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 6.25A2.25 2.25 0 0 1 4.25 4h15.5A2.25 2.25 0 0 1 22 6.25v11.5A2.25 2.25 0 0 1 19.75 20H4.25A2.25 2.25 0 0 1 2 17.75V6.25Zm2.25-.75a.75.75 0 0 0-.75.75v11.5c0 .414.336.75.75.75h15.5a.75.75 0 0 0 .75-.75V6.25a.75.75 0 0 0-.75-.75H4.25Z"/><path d="M8.22 8.215a.75.75 0 0 1 1.06 0l2.72 2.72 2.725-2.716a.75.75 0 0 1 1.06 1.062l-2.724 2.715 2.724 2.724a.75.75 0 1 1-1.06 1.06L12 13.057 9.28 15.78a.75.75 0 0 1-1.06-1.06l2.72-2.724-2.72-2.72a.75.75 0 0 1 0-1.06Z"/></svg>',share_screen_person:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2 7.25A3.25 3.25 0 0 1 5.25 4h13.5A3.25 3.25 0 0 1 22 7.25V13h-.258a3.74 3.74 0 0 0-1.242-2.545V7.25a1.75 1.75 0 0 0-1.75-1.75H5.25A1.75 1.75 0 0 0 3.5 7.25v9.5c0 .966.784 1.75 1.75 1.75H12v.5c0 .34.04.674.118 1H5.25A3.25 3.25 0 0 1 2 16.75v-9.5ZM21.5 17a1.5 1.5 0 0 1 1.5 1.5v.5c0 1.971-1.86 4-5 4-3.14 0-5-2.029-5-4v-.5a1.5 1.5 0 0 1 1.5-1.5h7ZM18 10.5a2.75 2.75 0 1 1 0 5.5 2.75 2.75 0 0 1 0-5.5Z" fill="currentColor"/></svg>',clock:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2c5.523 0 10 4.478 10 10s-4.477 10-10 10S2 17.522 2 12 6.477 2 12 2Zm0 1.667c-4.595 0-8.333 3.738-8.333 8.333 0 4.595 3.738 8.333 8.333 8.333 4.595 0 8.333-3.738 8.333-8.333 0-4.595-3.738-8.333-8.333-8.333ZM11.25 6a.75.75 0 0 1 .743.648L12 6.75V12h3.25a.75.75 0 0 1 .102 1.493l-.102.007h-4a.75.75 0 0 1-.743-.648l-.007-.102v-6a.75.75 0 0 1 .75-.75Z" fill="currentColor"/></svg>',dismiss:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m4.397 4.554.073-.084a.75.75 0 0 1 .976-.073l.084.073L12 10.939l6.47-6.47a.75.75 0 1 1 1.06 1.061L13.061 12l6.47 6.47a.75.75 0 0 1 .072.976l-.073.084a.75.75 0 0 1-.976.073l-.084-.073L12 13.061l-6.47 6.47a.75.75 0 0 1-1.06-1.061L10.939 12l-6.47-6.47a.75.75 0 0 1-.072-.976l.073-.084-.073.084Z" fill="currentColor"/></svg>',send:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5.694 12 2.299 3.272c-.236-.607.356-1.188.942-.982l.093.04 18 9a.75.75 0 0 1 .097 1.283l-.097.058-18 9a.75.75 0 0 1-1.065-.847l.03-.096L5.694 12 2.299 3.272 5.694 12ZM4.402 4.54l2.61 6.71h6.627a.75.75 0 0 1 .743.648l.007.102a.75.75 0 0 1-.649.743l-.101.007H7.01l-2.609 6.71L19.322 12 4.401 4.54Z" fill="currentColor"/></svg>',search:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 2.75a7.25 7.25 0 0 1 5.63 11.819l4.9 4.9a.75.75 0 0 1-.976 1.134l-.084-.073-4.901-4.9A7.25 7.25 0 1 1 10 2.75Zm0 1.5a5.75 5.75 0 1 0 0 11.5 5.75 5.75 0 0 0 0-11.5Z" fill="currentColor"/</svg>',more_vertical:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7.75a1.75 1.75 0 1 1 0-3.5 1.75 1.75 0 0 1 0 3.5ZM12 13.75a1.75 1.75 0 1 1 0-3.5 1.75 1.75 0 0 1 0 3.5ZM10.25 18a1.75 1.75 0 1 0 3.5 0 1.75 1.75 0 0 0-3.5 0Z" fill="currentColor"/></svg>',chevron_down:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4.22 8.47a.75.75 0 0 1 1.06 0L12 15.19l6.72-6.72a.75.75 0 1 1 1.06 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L4.22 9.53a.75.75 0 0 1 0-1.06Z" fill="currentColor"/></svg>',chevron_up:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4.22 15.53a.75.75 0 0 0 1.06 0L12 8.81l6.72 6.72a.75.75 0 1 0 1.06-1.06l-7.25-7.25a.75.75 0 0 0-1.06 0l-7.25 7.25a.75.75 0 0 0 0 1.06Z" fill="currentColor"/></svg>',chevron_left:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.53 4.22a.75.75 0 0 1 0 1.06L8.81 12l6.72 6.72a.75.75 0 1 1-1.06 1.06l-7.25-7.25a.75.75 0 0 1 0-1.06l7.25-7.25a.75.75 0 0 1 1.06 0Z" fill="currentColor"/></svg>',chevron_right:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.47 4.22a.75.75 0 0 0 0 1.06L15.19 12l-6.72 6.72a.75.75 0 1 0 1.06 1.06l7.25-7.25a.75.75 0 0 0 0-1.06L9.53 4.22a.75.75 0 0 0-1.06 0Z" fill="currentColor"/></svg>',settings:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12.012 2.25c.734.008 1.465.093 2.182.253a.75.75 0 0 1 .582.649l.17 1.527a1.384 1.384 0 0 0 1.927 1.116l1.401-.615a.75.75 0 0 1 .85.174 9.792 9.792 0 0 1 2.204 3.792.75.75 0 0 1-.271.825l-1.242.916a1.381 1.381 0 0 0 0 2.226l1.243.915a.75.75 0 0 1 .272.826 9.797 9.797 0 0 1-2.204 3.792.75.75 0 0 1-.848.175l-1.407-.617a1.38 1.38 0 0 0-1.926 1.114l-.169 1.526a.75.75 0 0 1-.572.647 9.518 9.518 0 0 1-4.406 0 .75.75 0 0 1-.572-.647l-.168-1.524a1.382 1.382 0 0 0-1.926-1.11l-1.406.616a.75.75 0 0 1-.849-.175 9.798 9.798 0 0 1-2.204-3.796.75.75 0 0 1 .272-.826l1.243-.916a1.38 1.38 0 0 0 0-2.226l-1.243-.914a.75.75 0 0 1-.271-.826 9.793 9.793 0 0 1 2.204-3.792.75.75 0 0 1 .85-.174l1.4.615a1.387 1.387 0 0 0 1.93-1.118l.17-1.526a.75.75 0 0 1 .583-.65c.717-.159 1.45-.243 2.201-.252Zm0 1.5a9.135 9.135 0 0 0-1.354.117l-.109.977A2.886 2.886 0 0 1 6.525 7.17l-.898-.394a8.293 8.293 0 0 0-1.348 2.317l.798.587a2.881 2.881 0 0 1 0 4.643l-.799.588c.32.842.776 1.626 1.348 2.322l.905-.397a2.882 2.882 0 0 1 4.017 2.318l.11.984c.889.15 1.798.15 2.687 0l.11-.984a2.881 2.881 0 0 1 4.018-2.322l.905.396a8.296 8.296 0 0 0 1.347-2.318l-.798-.588a2.881 2.881 0 0 1 0-4.643l.796-.587a8.293 8.293 0 0 0-1.348-2.317l-.896.393a2.884 2.884 0 0 1-4.023-2.324l-.11-.976a8.988 8.988 0 0 0-1.333-.117ZM12 8.25a3.75 3.75 0 1 1 0 7.5 3.75 3.75 0 0 1 0-7.5Zm0 1.5a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Z" fill="currentColor"/></svg>',wifi:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17.745 10.75a8.291 8.291 0 0 1 1.492 2.07.75.75 0 1 1-1.335.683 6.798 6.798 0 0 0-1.218-1.692 6.562 6.562 0 0 0-10.493 1.673.75.75 0 1 1-1.339-.677 8.062 8.062 0 0 1 12.893-2.057Zm-2.102 3.07c.448.447.816.997 1.072 1.582a.75.75 0 1 1-1.373.602 3.72 3.72 0 0 0-.76-1.124 3.592 3.592 0 0 0-5.08 0c-.31.31-.562.689-.746 1.11a.75.75 0 1 1-1.375-.6 5.11 5.11 0 0 1 1.061-1.57 5.092 5.092 0 0 1 7.201 0Zm4.805-5.541c.51.509.99 1.09 1.409 1.697a.75.75 0 0 1-1.235.852 10.822 10.822 0 0 0-1.234-1.489c-4.08-4.08-10.695-4.08-14.776 0-.421.422-.84.934-1.222 1.484a.75.75 0 0 1-1.232-.855c.43-.62.905-1.2 1.394-1.69 4.666-4.665 12.23-4.665 16.896 0Zm-7.387 8.16a1.5 1.5 0 1 1-2.122 2.122 1.5 1.5 0 0 1 2.122-2.122Z" fill="currentColor"/></svg>',speaker:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M15 4.25c0-1.079-1.274-1.65-2.08-.934L8.427 7.309a.75.75 0 0 1-.498.19H4.25A2.25 2.25 0 0 0 2 9.749v4.497a2.25 2.25 0 0 0 2.25 2.25h3.68a.75.75 0 0 1 .498.19l4.491 3.994c.806.716 2.081.144 2.081-.934V4.25ZM9.425 8.43 13.5 4.807v14.382l-4.075-3.624a2.25 2.25 0 0 0-1.495-.569H4.25a.75.75 0 0 1-.75-.75V9.75a.75.75 0 0 1 .75-.75h3.68a2.25 2.25 0 0 0 1.495-.569ZM18.992 5.897a.75.75 0 0 1 1.049.157A9.959 9.959 0 0 1 22 12a9.96 9.96 0 0 1-1.96 5.946.75.75 0 0 1-1.205-.892A8.459 8.459 0 0 0 20.5 12a8.459 8.459 0 0 0-1.665-5.054.75.75 0 0 1 .157-1.049Z" /><path d="M17.143 8.37a.75.75 0 0 1 1.017.302c.536.99.84 2.125.84 3.328a6.973 6.973 0 0 1-.84 3.328.75.75 0 0 1-1.32-.714c.42-.777.66-1.666.66-2.614s-.24-1.837-.66-2.614a.75.75 0 0 1 .303-1.017Z"/></svg>',speaker_off:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M3.28 2.22a.75.75 0 1 0-1.06 1.06L6.438 7.5H4.25A2.25 2.25 0 0 0 2 9.749v4.497a2.25 2.25 0 0 0 2.25 2.25h3.68a.75.75 0 0 1 .498.19l4.491 3.994c.806.716 2.081.144 2.081-.934V16.06l5.72 5.72a.75.75 0 0 0 1.06-1.061L3.28 2.22ZM13.5 14.56v4.629l-4.075-3.624a2.25 2.25 0 0 0-1.495-.569H4.25a.75.75 0 0 1-.75-.75V9.75a.75.75 0 0 1 .75-.75h3.688L13.5 14.56ZM13.5 4.807v5.511l1.5 1.5V4.25c0-1.079-1.274-1.65-2.08-.934l-3.4 3.022 1.063 1.063L13.5 4.807ZM17.141 13.96l1.138 1.137A6.974 6.974 0 0 0 19 12a6.973 6.973 0 0 0-.84-3.328.75.75 0 0 0-1.32.714c.42.777.66 1.666.66 2.614 0 .691-.127 1.351-.359 1.96ZM19.388 16.206l1.093 1.094A9.955 9.955 0 0 0 22 12a9.959 9.959 0 0 0-1.96-5.946.75.75 0 0 0-1.205.892A8.46 8.46 0 0 1 20.5 12a8.458 8.458 0 0 1-1.112 4.206Z"/></svg>',download:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.25 20.5a.75.75 0 1 1 0 1.5l-13 .004a.75.75 0 1 1 0-1.5l13-.004ZM11.648 2.012l.102-.007a.75.75 0 0 1 .743.648l.007.102-.001 13.685 3.722-3.72a.75.75 0 0 1 .976-.073l.085.073a.75.75 0 0 1 .072.976l-.073.084-4.997 4.997a.75.75 0 0 1-.976.073l-.085-.073-5.003-4.996a.75.75 0 0 1 .976-1.134l.084.072 3.719 3.714L11 2.755a.75.75 0 0 1 .648-.743l.102-.007-.102.007Z" fill="currentColor"/></svg>',full_screen_maximize:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4.5 5.75c0-.69.56-1.25 1.25-1.25h2a.75.75 0 0 0 0-1.5h-2A2.75 2.75 0 0 0 3 5.75v2a.75.75 0 0 0 1.5 0v-2ZM4.5 18.25c0 .69.56 1.25 1.25 1.25h2a.75.75 0 0 1 0 1.5h-2A2.75 2.75 0 0 1 3 18.25v-2a.75.75 0 0 1 1.5 0v2ZM18.25 4.5c.69 0 1.25.56 1.25 1.25v2a.75.75 0 0 0 1.5 0v-2A2.75 2.75 0 0 0 18.25 3h-2a.75.75 0 0 0 0 1.5h2ZM19.5 18.25c0 .69-.56 1.25-1.25 1.25h-2a.75.75 0 0 0 0 1.5h2A2.75 2.75 0 0 0 21 18.25v-2a.75.75 0 0 0-1.5 0v2Z" fill="currentColor"/></svg>',full_screen_minimize:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.5 3.75a.75.75 0 0 0-1.5 0v2.5a.75.75 0 0 1-.75.75h-2.5a.75.75 0 0 0 0 1.5h2.5A2.25 2.25 0 0 0 8.5 6.25v-2.5ZM8.5 20.25a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 0-.75-.75h-2.5a.75.75 0 0 1 0-1.5h2.5a2.25 2.25 0 0 1 2.25 2.25v2.5ZM16.25 3a.75.75 0 0 0-.75.75v2.5a2.25 2.25 0 0 0 2.25 2.25h2.5a.75.75 0 0 0 0-1.5h-2.5a.75.75 0 0 1-.75-.75v-2.5a.75.75 0 0 0-.75-.75ZM15.5 20.25a.75.75 0 0 0 1.5 0v-2.5a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 0 0-1.5h-2.5a2.25 2.25 0 0 0-2.25 2.25v2.5Z" fill="currentColor"/></svg>',copy:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5.503 4.627 5.5 6.75v10.504a3.25 3.25 0 0 0 3.25 3.25h8.616a2.251 2.251 0 0 1-2.122 1.5H8.75A4.75 4.75 0 0 1 4 17.254V6.75c0-.98.627-1.815 1.503-2.123ZM17.75 2A2.25 2.25 0 0 1 20 4.25v13a2.25 2.25 0 0 1-2.25 2.25h-9a2.25 2.25 0 0 1-2.25-2.25v-13A2.25 2.25 0 0 1 8.75 2h9Zm0 1.5h-9a.75.75 0 0 0-.75.75v13c0 .414.336.75.75.75h9a.75.75 0 0 0 .75-.75v-13a.75.75 0 0 0-.75-.75Z" fill="currentColor"/></svg>',attach:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.772 3.743a6 6 0 0 1 8.66 8.302l-.19.197-8.8 8.798-.036.03a3.723 3.723 0 0 1-5.489-4.973.764.764 0 0 1 .085-.13l.054-.06.086-.088.142-.148.002.003 7.436-7.454a.75.75 0 0 1 .977-.074l.084.073a.75.75 0 0 1 .074.976l-.073.084-7.594 7.613a2.23 2.23 0 0 0 3.174 3.106l8.832-8.83A4.502 4.502 0 0 0 13 4.644l-.168.16-.013.014-9.536 9.536a.75.75 0 0 1-1.133-.977l.072-.084 9.549-9.55h.002Z" fill="currentColor"/></svg>',image:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17.75 3A3.25 3.25 0 0 1 21 6.25v11.5A3.25 3.25 0 0 1 17.75 21H6.25A3.25 3.25 0 0 1 3 17.75V6.25A3.25 3.25 0 0 1 6.25 3h11.5Zm.58 16.401-5.805-5.686a.75.75 0 0 0-.966-.071l-.084.07-5.807 5.687c.182.064.378.099.582.099h11.5c.203 0 .399-.035.58-.099l-5.805-5.686L18.33 19.4ZM17.75 4.5H6.25A1.75 1.75 0 0 0 4.5 6.25v11.5c0 .208.036.408.103.594l5.823-5.701a2.25 2.25 0 0 1 3.02-.116l.128.116 5.822 5.702c.067-.186.104-.386.104-.595V6.25a1.75 1.75 0 0 0-1.75-1.75Zm-2.498 2a2.252 2.252 0 1 1 0 4.504 2.252 2.252 0 0 1 0-4.504Zm0 1.5a.752.752 0 1 0 0 1.504.752.752 0 0 0 0-1.504Z" fill="currentColor"/></svg>',emoji_multiple:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.5 2a6.503 6.503 0 0 1 6.312 4.943c-.515.01-1.02.068-1.506.171a5 5 0 1 0-6.191 6.191 8.053 8.053 0 0 0-.172 1.507A6.5 6.5 0 0 1 8.5 2Zm.16 8.006c.355-.451.759-.864 1.202-1.23a3.5 3.5 0 0 0-4.022.95.75.75 0 1 0 1.14.974 2 2 0 0 1 1.68-.694ZM7.5 6.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm4 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm1 8a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm5.458 2.042a.75.75 0 0 1 .082 1.058 4 4 0 0 1-6.075.005.75.75 0 0 1 1.138-.977 2.499 2.499 0 0 0 3.797-.003.75.75 0 0 1 1.058-.083ZM17.5 14.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2ZM15 22a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0-1.5a5.5 5.5 0 1 1 0-11 5.5 5.5 0 0 1 0 11Z" fill="currentColor"/></svg>',image_off:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.28 2.22a.75.75 0 1 0-1.06 1.06l1.263 1.264A3.235 3.235 0 0 0 3 6.25v11.5A3.25 3.25 0 0 0 6.25 21h11.5c.626 0 1.21-.177 1.706-.483l1.263 1.264a.75.75 0 0 0 1.061-1.061L3.28 2.22Zm8.788 10.909 6.206 6.206.056.066a1.746 1.746 0 0 1-.58.099H6.25c-.204 0-.4-.035-.582-.099l5.807-5.686.593-.586Zm-.95-.95a2.245 2.245 0 0 0-.692.464l-5.823 5.7a1.747 1.747 0 0 1-.103-.593V6.25c0-.206.036-.404.101-.588l6.518 6.518ZM19.5 16.318V6.25a1.75 1.75 0 0 0-1.75-1.75H7.682L6.182 3H17.75A3.25 3.25 0 0 1 21 6.25v11.568l-1.5-1.5Z" fill="currentColor"/><path d="M15.252 6.5a2.252 2.252 0 1 1 0 4.504 2.252 2.252 0 0 1 0-4.504Zm0 1.5a.752.752 0 1 0 0 1.504.752.752 0 0 0 0-1.504Z" fill="currentColor"/></svg>',disconnected:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.28 2.22a.75.75 0 0 0-1.06 1.06l3.364 3.365a11.99 11.99 0 0 0-2.033 1.634c-.49.489-.964 1.069-1.394 1.689a.75.75 0 1 0 1.233.855c.381-.55.8-1.062 1.222-1.484a10.468 10.468 0 0 1 2.063-1.604l1.591 1.592a8.062 8.062 0 0 0-1.923 1.424c-.61.61-1.109 1.3-1.491 2.056a.75.75 0 1 0 1.338.677 6.51 6.51 0 0 1 1.214-1.673 6.546 6.546 0 0 1 1.984-1.362l1.93 1.93a5.07 5.07 0 0 0-2.876 1.44 5.11 5.11 0 0 0-1.061 1.57.75.75 0 0 0 1.374.602c.185-.422.437-.8.747-1.111a3.59 3.59 0 0 1 3.36-.958l7.858 7.858a.75.75 0 0 0 1.06-1.06L3.28 2.22Zm8.304 6.182 1.584 1.584a6.532 6.532 0 0 1 3.516 1.825 6.798 6.798 0 0 1 1.217 1.692.75.75 0 1 0 1.336-.683 8.292 8.292 0 0 0-1.492-2.07 8.042 8.042 0 0 0-6.16-2.348ZM8.487 5.305 9.713 6.53a10.44 10.44 0 0 1 10.908 4.297.75.75 0 1 0 1.235-.852 11.946 11.946 0 0 0-13.369-4.67Zm4.573 11.134a1.5 1.5 0 1 1-2.121 2.122 1.5 1.5 0 0 1 2.121-2.122Z" fill="currentColor"/></svg>',wand:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m13.314 7.565-.136.126-10.48 10.488a2.27 2.27 0 0 0 3.211 3.208L16.388 10.9a2.251 2.251 0 0 0-.001-3.182l-.157-.146a2.25 2.25 0 0 0-2.916-.007Zm-.848 2.961 1.088 1.088-8.706 8.713a.77.77 0 1 1-1.089-1.088l8.707-8.713Zm4.386 4.48L16.75 15a.75.75 0 0 0-.743.648L16 15.75v.75h-.75a.75.75 0 0 0-.743.648l-.007.102c0 .38.282.694.648.743l.102.007H16v.75c0 .38.282.694.648.743l.102.007a.75.75 0 0 0 .743-.648l.007-.102V18h.75a.75.75 0 0 0 .743-.648L19 17.25a.75.75 0 0 0-.648-.743l-.102-.007h-.75v-.75a.75.75 0 0 0-.648-.743L16.75 15l.102.007Zm-1.553-6.254.027.027a.751.751 0 0 1 0 1.061l-.711.713-1.089-1.089.73-.73a.75.75 0 0 1 1.043.018ZM6.852 5.007 6.75 5a.75.75 0 0 0-.743.648L6 5.75v.75h-.75a.75.75 0 0 0-.743.648L4.5 7.25c0 .38.282.693.648.743L5.25 8H6v.75c0 .38.282.693.648.743l.102.007a.75.75 0 0 0 .743-.648L7.5 8.75V8h.75a.75.75 0 0 0 .743-.648L9 7.25a.75.75 0 0 0-.648-.743L8.25 6.5H7.5v-.75a.75.75 0 0 0-.648-.743L6.75 5l.102.007Zm12-2L18.75 3a.75.75 0 0 0-.743.648L18 3.75v.75h-.75a.75.75 0 0 0-.743.648l-.007.102c0 .38.282.693.648.743L17.25 6H18v.75c0 .38.282.693.648.743l.102.007a.75.75 0 0 0 .743-.648l.007-.102V6h.75a.75.75 0 0 0 .743-.648L21 5.25a.75.75 0 0 0-.648-.743L20.25 4.5h-.75v-.75a.75.75 0 0 0-.648-.743L18.75 3l.102.007Z" fill="currentColor"/></svg>',recording:'<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24"><path d="M12 18a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z"/><path d="M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2ZM3.5 12a8.5 8.5 0 1 1 17 0 8.5 8.5 0 0 1-17 0Z"/></svg>',subtract:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.755 12.5h16.492a.75.75 0 0 0 0-1.5H3.755a.75.75 0 0 0 0 1.5Z" fill="currentColor"/></svg>',stop_recording:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 3.5C9.74566 3.5 7.58365 4.39553 5.98959 5.98959C4.39553 7.58365 3.5 9.74566 3.5 12C3.5 14.2543 4.39553 16.4163 5.98959 18.0104C7.58365 19.6045 9.74566 20.5 12 20.5C14.2543 20.5 16.4163 19.6045 18.0104 18.0104C19.6045 16.4163 20.5 14.2543 20.5 12C20.5 9.74566 19.6045 7.58365 18.0104 5.98959C16.4163 4.39553 14.2543 3.5 12 3.5ZM2 12C2 6.477 6.477 2 12 2C17.523 2 22 6.477 22 12C22 17.523 17.523 22 12 22C6.477 22 2 17.523 2 12ZM8 9.5C8 9.10218 8.15804 8.72064 8.43934 8.43934C8.72064 8.15804 9.10218 8 9.5 8H14.5C14.8978 8 15.2794 8.15804 15.5607 8.43934C15.842 8.72064 16 9.10218 16 9.5V14.5C16 14.8978 15.842 15.2794 15.5607 15.5607C15.2794 15.842 14.8978 16 14.5 16H9.5C9.10218 16 8.72064 15.842 8.43934 15.5607C8.15804 15.2794 8 14.8978 8 14.5V9.5Z" fill="currentColor"/></svg>',warning:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10.91 2.782a2.25 2.25 0 0 1 2.975.74l.083.138 7.759 14.009a2.25 2.25 0 0 1-1.814 3.334l-.154.006H4.243a2.25 2.25 0 0 1-2.041-3.197l.072-.143L10.031 3.66a2.25 2.25 0 0 1 .878-.878Zm9.505 15.613-7.76-14.008a.75.75 0 0 0-1.254-.088l-.057.088-7.757 14.008a.75.75 0 0 0 .561 1.108l.095.006h15.516a.75.75 0 0 0 .696-1.028l-.04-.086-7.76-14.008 7.76 14.008ZM12 16.002a.999.999 0 1 1 0 1.997.999.999 0 0 1 0-1.997ZM11.995 8.5a.75.75 0 0 1 .744.647l.007.102.004 4.502a.75.75 0 0 1-1.494.103l-.006-.102-.004-4.502a.75.75 0 0 1 .75-.75Z" fill="currentColor"/></svg>',pin:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m16.242 2.932 4.826 4.826a2.75 2.75 0 0 1-.715 4.404l-4.87 2.435a.75.75 0 0 0-.374.426l-1.44 4.166a1.25 1.25 0 0 1-2.065.476L8.5 16.561 4.06 21H3v-1.06l4.44-4.44-3.105-3.104a1.25 1.25 0 0 1 .476-2.066l4.166-1.44a.75.75 0 0 0 .426-.373l2.435-4.87a2.75 2.75 0 0 1 4.405-.715Zm3.766 5.886-4.826-4.826a1.25 1.25 0 0 0-2.002.325l-2.435 4.871a2.25 2.25 0 0 1-1.278 1.12l-3.789 1.31 6.705 6.704 1.308-3.789a2.25 2.25 0 0 1 1.12-1.277l4.872-2.436a1.25 1.25 0 0 0 .325-2.002Z" fill="currentColor"/></svg>',pin_off:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.28 2.22a.75.75 0 0 0-1.06 1.06l5.905 5.905L4.81 10.33a1.25 1.25 0 0 0-.476 2.065L7.439 15.5 3 19.94V21h1.06l4.44-4.44 3.105 3.105a1.25 1.25 0 0 0 2.065-.476l1.145-3.313 5.905 5.904a.75.75 0 0 0 1.06-1.06L3.28 2.22Zm10.355 12.476-1.252 3.626-6.705-6.705 3.626-1.252 4.331 4.331Zm6.048-3.876-3.787 1.894 1.118 1.118 3.34-1.67a2.75 2.75 0 0 0 .714-4.404l-4.825-4.826a2.75 2.75 0 0 0-4.405.715l-1.67 3.34 1.118 1.117 1.894-3.787a1.25 1.25 0 0 1 2.002-.325l4.826 4.826a1.25 1.25 0 0 1-.325 2.002Z" fill="currentColor"/></svg>',spinner:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke-width="2" stroke="currentColor" stroke-opacity="0.2" vector-effect="non-scaling-stroke"/><path d="M22 12C22 10.6868 21.7413 9.38642 21.2388 8.17317C20.7362 6.95991 19.9997 5.85752 19.0711 4.92893C18.1425 4.00035 17.0401 3.26375 15.8268 2.7612C14.6136 2.25866 13.3132 2 12 2" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke"/></svg>',breakout_rooms:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10.5 3a2.25 2.25 0 0 1 2.25 2.25v6h6A2.25 2.25 0 0 1 21 13.5v5.25A2.25 2.25 0 0 1 18.75 21H5.25A2.25 2.25 0 0 1 3 18.75V5.25A2.25 2.25 0 0 1 5.25 3h5.25Zm.75 9.75H4.5v6c0 .414.336.75.75.75h5.999l.001-6.75Zm7.5 0h-6.001v6.75h6.001a.75.75 0 0 0 .75-.75V13.5a.75.75 0 0 0-.75-.75ZM10.5 4.5H5.25a.75.75 0 0 0-.75.75v6h6.75v-6a.75.75 0 0 0-.75-.75Zm7.398-2.493L18 2a.75.75 0 0 1 .743.648l.007.102v2.5h2.5a.75.75 0 0 1 .743.648L22 6a.75.75 0 0 1-.648.743l-.102.007h-2.5v2.5a.75.75 0 0 1-.648.743L18 10a.75.75 0 0 1-.743-.648l-.007-.102v-2.5h-2.5a.75.75 0 0 1-.743-.648L14 6a.75.75 0 0 1 .648-.743l.102-.007h2.5v-2.5a.75.75 0 0 1 .648-.743Z" fill="currentColor"/></svg>',add:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M11.75 3a.75.75 0 0 1 .743.648l.007.102.001 7.25h7.253a.75.75 0 0 1 .102 1.493l-.102.007h-7.253l.002 7.25a.75.75 0 0 1-1.493.101l-.007-.102-.002-7.249H3.752a.75.75 0 0 1-.102-1.493L3.752 11h7.25L11 3.75a.75.75 0 0 1 .75-.75Z" fill="currentColor"/></svg>',shuffle:'<svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M14.0058 8.11111H18.7947L16.9613 9.94444C16.9095 9.99587 16.8684 10.057 16.8402 10.1243C16.812 10.1917 16.7974 10.2639 16.7971 10.3369C16.7966 10.4843 16.8547 10.6259 16.9586 10.7306C17.01 10.7823 17.0711 10.8235 17.1385 10.8517C17.2058 10.8799 17.278 10.8945 17.351 10.8947C17.4985 10.8953 17.64 10.8372 17.7447 10.7333L20.8891 7.59999L20.4947 7.20555L17.7447 4.46111C17.64 4.35723 17.4985 4.29917 17.351 4.29969C17.2036 4.30021 17.0624 4.35927 16.9586 4.46388C16.8547 4.5685 16.7966 4.71009 16.7971 4.85751C16.7977 5.00494 16.8567 5.14612 16.9613 5.24999L18.728 6.99999H13.6669C13.5699 7.00058 13.4748 7.02653 13.391 7.07526C13.3072 7.12399 13.2376 7.19381 13.1891 7.27777L11.7224 9.82777L12.3669 10.9389L14.0058 8.11111Z" fill="currentColor"/><path d="M8.15022 15.9278H3.66688C3.51954 15.9278 3.37823 15.9863 3.27405 16.0905C3.16986 16.1947 3.11133 16.336 3.11133 16.4833C3.11133 16.6307 3.16986 16.772 3.27405 16.8762C3.37823 16.9804 3.51954 17.0389 3.66688 17.0389H8.47244C8.56939 17.0383 8.6645 17.0124 8.74832 16.9636C8.83214 16.9149 8.90174 16.8451 8.95022 16.7611L10.4335 14.2222L9.77799 13.1111L8.15022 15.9278Z"/><path d="M17.7447 13.2056C17.64 13.1017 17.4985 13.0436 17.351 13.0441C17.2036 13.0447 17.0624 13.1037 16.9586 13.2083C16.8547 13.3129 16.7966 13.4545 16.7971 13.602C16.7977 13.7494 16.8567 13.8906 16.9613 13.9944L18.9058 15.9389H14.0058L8.95022 7.29444C8.90174 7.21047 8.83214 7.14066 8.74832 7.09193C8.6645 7.04319 8.56939 7.01725 8.47244 7.01666H3.66688C3.51954 7.01666 3.37823 7.07519 3.27405 7.17938C3.16986 7.28357 3.11133 7.42487 3.11133 7.57222C3.11133 7.71956 3.16986 7.86087 3.27405 7.96505C3.37823 8.06924 3.51954 8.12777 3.66688 8.12777H8.15022L13.2058 16.7667C13.2542 16.8506 13.3239 16.9204 13.4077 16.9692C13.4915 17.0179 13.5866 17.0439 13.6836 17.0444H18.6113L16.9447 18.7111C16.8929 18.7625 16.8517 18.8237 16.8235 18.891C16.7954 18.9584 16.7807 19.0306 16.7805 19.1036C16.7802 19.1766 16.7943 19.2489 16.822 19.3165C16.8497 19.384 16.8905 19.4454 16.9419 19.4972C16.9933 19.549 17.0545 19.5902 17.1218 19.6184C17.1891 19.6465 17.2614 19.6612 17.3344 19.6614C17.4074 19.6617 17.4797 19.6476 17.5472 19.6199C17.6148 19.5922 17.6762 19.5514 17.728 19.5L20.478 16.7556L20.8724 16.3611L17.7447 13.2056Z"/></svg>',edit:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M21.03 2.97a3.578 3.578 0 0 1 0 5.06L9.062 20a2.25 2.25 0 0 1-.999.58l-5.116 1.395a.75.75 0 0 1-.92-.921l1.395-5.116a2.25 2.25 0 0 1 .58-.999L15.97 2.97a3.578 3.578 0 0 1 5.06 0ZM15 6.06 5.062 16a.75.75 0 0 0-.193.333l-1.05 3.85 3.85-1.05A.75.75 0 0 0 8 18.938L17.94 9 15 6.06Zm2.03-2.03-.97.97L19 7.94l.97-.97a2.079 2.079 0 0 0-2.94-2.94Z" fill="currentColor"/></svg>',delete:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 1.75a3.25 3.25 0 0 1 3.245 3.066L15.25 5h5.25a.75.75 0 0 1 .102 1.493L20.5 6.5h-.796l-1.28 13.02a2.75 2.75 0 0 1-2.561 2.474l-.176.006H8.313a2.75 2.75 0 0 1-2.714-2.307l-.023-.174L4.295 6.5H3.5a.75.75 0 0 1-.743-.648L2.75 5.75a.75.75 0 0 1 .648-.743L3.5 5h5.25A3.25 3.25 0 0 1 12 1.75Zm6.197 4.75H5.802l1.267 12.872a1.25 1.25 0 0 0 1.117 1.122l.127.006h7.374c.6 0 1.109-.425 1.225-1.002l.02-.126L18.196 6.5ZM13.75 9.25a.75.75 0 0 1 .743.648L14.5 10v7a.75.75 0 0 1-1.493.102L13 17v-7a.75.75 0 0 1 .75-.75Zm-3.5 0a.75.75 0 0 1 .743.648L11 10v7a.75.75 0 0 1-1.493.102L9.5 17v-7a.75.75 0 0 1 .75-.75Zm1.75-6a1.75 1.75 0 0 0-1.744 1.606L10.25 5h3.5A1.75 1.75 0 0 0 12 3.25Z" fill="currentColor"/></svg>',back:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4.75 2a.75.75 0 0 1 .743.648l.007.102v5.69l4.574-4.56a6.41 6.41 0 0 1 8.879-.179l.186.18a6.41 6.41 0 0 1 0 9.063l-8.846 8.84a.75.75 0 0 1-1.06-1.062l8.845-8.838a4.91 4.91 0 0 0-6.766-7.112l-.178.17L6.562 9.5h5.688a.75.75 0 0 1 .743.648l.007.102a.75.75 0 0 1-.648.743L12.25 11h-7.5a.75.75 0 0 1-.743-.648L4 10.25v-7.5A.75.75 0 0 1 4.75 2Z" fill="currentColor"/></svg>',save:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 5.75A2.75 2.75 0 0 1 5.75 3h9.964a3.25 3.25 0 0 1 2.299.952l2.035 2.035c.61.61.952 1.437.952 2.299v9.964A2.75 2.75 0 0 1 18.25 21H5.75A2.75 2.75 0 0 1 3 18.25V5.75ZM5.75 4.5c-.69 0-1.25.56-1.25 1.25v12.5c0 .69.56 1.25 1.25 1.25H6v-5.25A2.25 2.25 0 0 1 8.25 12h7.5A2.25 2.25 0 0 1 18 14.25v5.25h.25c.69 0 1.25-.56 1.25-1.25V8.286c0-.465-.184-.91-.513-1.238l-2.035-2.035a1.75 1.75 0 0 0-.952-.49V7.25a2.25 2.25 0 0 1-2.25 2.25h-4.5A2.25 2.25 0 0 1 7 7.25V4.5H5.75Zm10.75 15v-5.25a.75.75 0 0 0-.75-.75h-7.5a.75.75 0 0 0-.75.75v5.25h9Zm-8-15v2.75c0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75V4.5h-6Z" fill="currentColor"/></svg>',web:'<svg fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 1.999c5.524 0 10.002 4.478 10.002 10.002 0 5.523-4.478 10.001-10.002 10.001-5.524 0-10.002-4.478-10.002-10.001C1.998 6.477 6.476 1.999 12 1.999ZM14.939 16.5H9.06c.652 2.414 1.786 4.002 2.939 4.002s2.287-1.588 2.939-4.002Zm-7.43 0H4.785a8.532 8.532 0 0 0 4.094 3.411c-.522-.82-.953-1.846-1.27-3.015l-.102-.395Zm11.705 0h-2.722c-.324 1.335-.792 2.5-1.373 3.411a8.528 8.528 0 0 0 3.91-3.127l.185-.283ZM7.094 10H3.735l-.005.017a8.525 8.525 0 0 0-.233 1.984c0 1.056.193 2.067.545 3h3.173a20.847 20.847 0 0 1-.123-5Zm8.303 0H8.603a18.966 18.966 0 0 0 .135 5h6.524a18.974 18.974 0 0 0 .135-5Zm4.868 0h-3.358c.062.647.095 1.317.095 2a20.3 20.3 0 0 1-.218 3h3.173a8.482 8.482 0 0 0 .544-3c0-.689-.082-1.36-.236-2ZM8.88 4.09l-.023.008A8.531 8.531 0 0 0 4.25 8.5h3.048c.314-1.752.86-3.278 1.583-4.41ZM12 3.499l-.116.005C10.62 3.62 9.396 5.622 8.83 8.5h6.342c-.566-2.87-1.783-4.869-3.045-4.995L12 3.5Zm3.12.59.107.175c.669 1.112 1.177 2.572 1.475 4.237h3.048a8.533 8.533 0 0 0-4.339-4.29l-.291-.121Z" fill="currentColor"/></svg>',checkmark:'<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="m18 6.7-8.48 8.48-3.54-3.54a.996.996 0 1 0-1.41 1.41l4.24 4.24c.39.39 1.02.39 1.41 0l9.18-9.18a.999.999 0 0 0-.01-1.42c-.37-.38-1-.38-1.39.01z"/></svg>',spotlight:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M19.745 4C20.3417 4 20.914 4.23705 21.336 4.65901C21.7579 5.08097 21.995 5.65326 21.995 6.25V12.805C21.5485 12.3774 21.0434 12.0154 20.495 11.73V6.25C20.495 6.05109 20.416 5.86032 20.2753 5.71967C20.1347 5.57902 19.9439 5.5 19.745 5.5H4.25C4.05109 5.5 3.86032 5.57902 3.71967 5.71967C3.57902 5.86032 3.5 6.05109 3.5 6.25V17.755C3.5 18.169 3.836 18.505 4.25 18.505L6.999 18.504L7 15.75C7.00002 15.3108 7.16517 14.8877 7.46268 14.5646C7.76019 14.2415 8.1683 14.0421 8.606 14.006L8.75 14H12.022C11.7223 14.4675 11.484 14.9716 11.313 15.5H8.75C8.69368 15.5001 8.63904 15.5192 8.59493 15.5542C8.55083 15.5893 8.51984 15.6382 8.507 15.693L8.5 15.75L8.499 18.504H11.077C11.1569 19.0193 11.2989 19.5229 11.5 20.004H4.25C3.65344 20.004 3.08129 19.7671 2.65936 19.3453C2.23744 18.9236 2.00027 18.3516 2 17.755V6.25C2 5.65326 2.23705 5.08097 2.65901 4.65901C3.08097 4.23705 3.65326 4 4.25 4H19.745Z"/><path d="M12 7C12.7956 7 13.5587 7.31607 14.1213 7.87868C14.6839 8.44129 15 9.20435 15 10C15 10.7956 14.6839 11.5587 14.1213 12.1213C13.5587 12.6839 12.7956 13 12 13C11.2044 13 10.4413 12.6839 9.87868 12.1213C9.31607 11.5587 9 10.7956 9 10C9 9.20435 9.31607 8.44129 9.87868 7.87868C10.4413 7.31607 11.2044 7 12 7ZM12 8.5C11.6022 8.5 11.2206 8.65804 10.9393 8.93934C10.658 9.22064 10.5 9.60218 10.5 10C10.5 10.3978 10.658 10.7794 10.9393 11.0607C11.2206 11.342 11.6022 11.5 12 11.5C12.3978 11.5 12.7794 11.342 13.0607 11.0607C13.342 10.7794 13.5 10.3978 13.5 10C13.5 9.60218 13.342 9.22064 13.0607 8.93934C12.7794 8.65804 12.3978 8.5 12 8.5Z"/><path d="M23 17.5C23 18.9587 22.4205 20.3576 21.3891 21.3891C20.3576 22.4205 18.9587 23 17.5 23C16.0413 23 14.6424 22.4205 13.6109 21.3891C12.5795 20.3576 12 18.9587 12 17.5C12 16.0413 12.5795 14.6424 13.6109 13.6109C14.6424 12.5795 16.0413 12 17.5 12C18.9587 12 20.3576 12.5795 21.3891 13.6109C22.4205 14.6424 23 16.0413 23 17.5ZM18.055 14.42C18.0207 14.2993 17.9479 14.193 17.8478 14.1174C17.7476 14.0417 17.6255 14.0008 17.5 14.0008C17.3745 14.0008 17.2524 14.0417 17.1522 14.1174C17.0521 14.193 16.9793 14.2993 16.945 14.42L16.388 16.208H14.585C14.019 16.208 13.785 16.962 14.242 17.308L15.7 18.413L15.143 20.2C14.968 20.761 15.584 21.228 16.042 20.881L17.5 19.777L18.958 20.881C19.416 21.228 20.032 20.761 19.857 20.201L19.3 18.413L20.758 17.309C21.216 16.962 20.981 16.208 20.415 16.208H18.612L18.055 14.421V14.42Z"/></svg>',join_stage:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M17.5 22C14.4618 22 12 19.5376 12 16.5C12 13.4623 14.4618 11 17.5 11C20.5371 11 23 13.4624 23 16.5C23 19.5376 20.5371 22 17.5 22ZM17.0704 18.992L17.1167 19.0322C17.1868 19.0841 17.2716 19.1125 17.3588 19.1132C17.4461 19.1139 17.5314 19.0869 17.6023 19.036L17.654 18.992L17.6936 18.9458C17.7455 18.8757 17.7739 18.7909 17.7746 18.7037C17.7753 18.6164 17.7483 18.5311 17.6975 18.4602L17.6535 18.4085L16.158 16.9125H19.8375L19.8936 16.9092C19.9829 16.8969 20.0657 16.8558 20.1293 16.792C20.193 16.7282 20.234 16.6454 20.2462 16.5561L20.25 16.5005L20.2462 16.4444C20.2339 16.3553 20.1928 16.2725 20.1292 16.2089C20.0655 16.1452 19.9828 16.1041 19.8936 16.0919L19.8375 16.088H16.158L17.654 14.592L17.6941 14.5453C17.7537 14.4659 17.7827 14.3676 17.7756 14.2686C17.7686 14.1695 17.726 14.0763 17.6558 14.0061C17.5856 13.9359 17.4924 13.8934 17.3934 13.8863C17.2943 13.8793 17.1961 13.9082 17.1167 13.9678L17.071 14.0079L14.8699 16.2079L14.8303 16.2547C14.7784 16.3247 14.75 16.4094 14.7493 16.4965C14.7485 16.5837 14.7753 16.6688 14.8259 16.7398L14.8699 16.7915L17.0704 18.992Z"/><path d="M2.80546 3.80546C2.28973 4.32118 2 5.02065 2 5.75V16.25C2 16.6111 2.07113 16.9687 2.20933 17.3024C2.34753 17.636 2.5501 17.9392 2.80546 18.1945C3.06082 18.4499 3.36398 18.6525 3.69762 18.7907C4.03127 18.9289 4.38886 19 4.75 19H11.498C11.3 18.526 11.157 18.023 11.076 17.5H9.002V14.75C9.002 14.6837 9.02834 14.6201 9.07522 14.5732C9.12211 14.5263 9.1857 14.5 9.252 14.5H11.3135C11.4858 13.9665 11.7253 13.4632 12.0218 13H9.252C8.285 13 7.502 13.784 7.502 14.75V16H7.5V17.5H4.75C4.06 17.5 3.5 16.94 3.5 16.25V5.75C3.5 5.06 4.06 4.5 4.75 4.5H19.25C19.94 4.5 20.5 5.06 20.5 5.75V10.732C20.6457 10.808 20.7884 10.8895 20.9277 10.9762C20.9687 11.0017 21.0093 11.0276 21.0497 11.054C21.3899 11.2762 21.708 11.5294 22 11.8096V5.75C22 5.02065 21.7103 4.32118 21.1945 3.80546C20.6788 3.28973 19.9793 3 19.25 3H4.75C4.02065 3 3.32118 3.28973 2.80546 3.80546Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M14.4181 10.7757C14.7938 10.264 15 9.64262 15 9C15 8.20435 14.6839 7.44129 14.1213 6.87868C13.5587 6.31607 12.7956 6 12 6C11.2044 6 10.4413 6.31607 9.87868 6.87868C9.31607 7.44129 9 8.20435 9 9C9 9.79565 9.31607 10.5587 9.87868 11.1213C10.4413 11.6839 11.2044 12 12 12C12.333 12 12.6602 11.9446 12.9695 11.839C13.3992 11.4213 13.8864 11.0625 14.4181 10.7757ZM10.9393 7.93934C11.2206 7.65804 11.6022 7.5 12 7.5C12.3978 7.5 12.7794 7.65804 13.0607 7.93934C13.342 8.22064 13.5 8.60218 13.5 9C13.5 9.39782 13.342 9.77936 13.0607 10.0607C12.7794 10.342 12.3978 10.5 12 10.5C11.6022 10.5 11.2206 10.342 10.9393 10.0607C10.658 9.77936 10.5 9.39782 10.5 9C10.5 8.60218 10.658 8.22064 10.9393 7.93934Z"></svg>',leave_stage:'<svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M2.80546 3.80546C2.28973 4.32118 2 5.02065 2 5.75V16.25C2 16.6111 2.07113 16.9687 2.20933 17.3024C2.34753 17.636 2.5501 17.9392 2.80546 18.1945C3.06082 18.4499 3.36398 18.6525 3.69762 18.7907C4.03127 18.9289 4.38886 19 4.75 19H11.498C11.3 18.526 11.157 18.023 11.076 17.5H9.002V14.75C9.002 14.6837 9.02834 14.6201 9.07522 14.5732C9.12211 14.5263 9.1857 14.5 9.252 14.5H11.3135C11.4858 13.9665 11.7253 13.4632 12.0218 13H9.252C8.285 13 7.502 13.784 7.502 14.75V16H7.5V17.5H4.75C4.06 17.5 3.5 16.94 3.5 16.25V5.75C3.5 5.06 4.06 4.5 4.75 4.5H19.25C19.94 4.5 20.5 5.06 20.5 5.75V10.732C20.6457 10.808 20.7884 10.8895 20.9277 10.9762C20.9687 11.0017 21.0093 11.0276 21.0497 11.054C21.3899 11.2762 21.708 11.5294 22 11.8096V5.75C22 5.02065 21.7103 4.32118 21.1945 3.80546C20.6788 3.28973 19.9793 3 19.25 3H4.75C4.02065 3 3.32118 3.28973 2.80546 3.80546Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M14.4181 10.7757C14.7938 10.264 15 9.64262 15 9C15 8.20435 14.6839 7.44129 14.1213 6.87868C13.5587 6.31607 12.7956 6 12 6C11.2044 6 10.4413 6.31607 9.87868 6.87868C9.31607 7.44129 9 8.20435 9 9C9 9.79565 9.31607 10.5587 9.87868 11.1213C10.4413 11.6839 11.2044 12 12 12C12.333 12 12.6602 11.9446 12.9695 11.839C13.3992 11.4213 13.8864 11.0625 14.4181 10.7757ZM10.9393 7.93934C11.2206 7.65804 11.6022 7.5 12 7.5C12.3978 7.5 12.7794 7.65804 13.0607 7.93934C13.342 8.22064 13.5 8.60218 13.5 9C13.5 9.39782 13.342 9.77936 13.0607 10.0607C12.7794 10.342 12.3978 10.5 12 10.5C11.6022 10.5 11.2206 10.342 10.9393 10.0607C10.658 9.77936 10.5 9.39782 10.5 9C10.5 8.60218 10.658 8.22064 10.9393 7.93934Z"/><path d="M17.5 11C20.5382 11 23 13.4624 23 16.5C23 19.5377 20.5382 22 17.5 22C14.4629 22 12 19.5377 12 16.5C12 13.4624 14.4629 11 17.5 11V11ZM17.9296 14.0079L17.8833 13.9678C17.8132 13.9159 17.7284 13.8875 17.6412 13.8868C17.5539 13.8861 17.4686 13.9131 17.3977 13.964L17.346 14.0079L17.3064 14.0542C17.2545 14.1243 17.2261 14.2091 17.2254 14.2963C17.2247 14.3836 17.2517 14.4689 17.3026 14.5398L17.3465 14.5915L18.842 16.0875H15.1625L15.1064 16.0908C15.0171 16.1031 14.9343 16.1442 14.8707 16.208C14.807 16.2718 14.766 16.3546 14.7539 16.4439L14.75 16.4995L14.7539 16.5556C14.7661 16.6447 14.8072 16.7275 14.8708 16.7911C14.9345 16.8548 15.0172 16.8959 15.1064 16.9081L15.1625 16.912H18.842L17.346 18.408L17.3059 18.4547C17.2463 18.5341 17.2173 18.6324 17.2244 18.7314C17.2314 18.8305 17.274 18.9237 17.3442 18.9939C17.4144 19.0641 17.5076 19.1066 17.6066 19.1137C17.7057 19.1207 17.8039 19.0918 17.8833 19.0322L17.929 18.9921L20.1301 16.7921L20.1697 16.7453C20.2216 16.6753 20.25 16.5906 20.2507 16.5035C20.2515 16.4163 20.2247 16.3312 20.1741 16.2602L20.1301 16.2085L17.9301 14.0079L17.8833 13.9678L17.9296 14.0079V14.0079Z"/></svg>',pip_off:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.8666 12.3058C11.0731 12.3058 11.2404 12.1385 11.2404 11.932V8.56753C11.2404 8.36107 11.0731 8.1937 10.8666 8.1937C10.6601 8.1937 10.4928 8.36107 10.4928 8.56753V11.0295L6.45393 6.99066C6.30794 6.84467 6.07124 6.84467 5.92525 6.99066C5.77926 7.13665 5.77926 7.37335 5.92525 7.51934L9.9641 11.5582L7.50212 11.5582C7.29566 11.5582 7.12829 11.7256 7.12829 11.932C7.12829 12.1385 7.29566 12.3058 7.50212 12.3058L10.8666 12.3058ZM5.73832 19.8879C3.6737 19.8879 2 18.2141 2 16.1495V7.73832C2 5.6737 3.6737 4 5.73832 4H18.2617C20.3263 4 22 5.6737 22 7.73832L22 13.0269C22 12.2687 21.6002 11.6038 21 11.2316C20.8468 11.1366 20.6806 11.0607 20.5047 11.0071V7.73832C20.5047 6.49955 19.5005 5.49533 18.2617 5.49533H5.73832C4.49955 5.49533 3.49533 6.49955 3.49533 7.73832V16.1495C3.49533 17.3883 4.49955 18.3925 5.73832 18.3925H10.7971C10.8506 18.5685 10.9266 18.7347 11.0216 18.8879C11.3938 19.4881 12.0587 19.8879 12.8169 19.8879H5.73832Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19.7265 12.5H13.3911C12.899 12.5 12.5 12.899 12.5 13.3911V17.6462C12.5 18.1384 12.899 18.5374 13.3911 18.5374H19.7265C20.2187 18.5374 20.6176 18.1384 20.6176 17.6462V13.3911C20.6176 12.899 20.2187 12.5 19.7265 12.5ZM13.3911 11.5C12.3467 11.5 11.5 12.3467 11.5 13.3911V17.6462C11.5 18.6907 12.3467 19.5374 13.3911 19.5374H19.7265C20.771 19.5374 21.6176 18.6907 21.6176 17.6462V13.3911C21.6176 12.3467 20.771 11.5 19.7265 11.5H13.3911Z"/></svg>',pip_on:'<svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M5.73832 19.8879C3.6737 19.8879 2 18.2141 2 16.1495V7.73832C2 5.6737 3.6737 4 5.73832 4H18.2617C20.3263 4 22 5.6737 22 7.73832L22 13.0269C22 12.2687 21.6002 11.6038 21 11.2316C20.8468 11.1366 20.6806 11.0607 20.5047 11.0071V7.73832C20.5047 6.49955 19.5005 5.49533 18.2617 5.49533H5.73832C4.49955 5.49533 3.49533 6.49955 3.49533 7.73832V16.1495C3.49533 17.3883 4.49955 18.3925 5.73832 18.3925H10.7971C10.8506 18.5685 10.9266 18.7347 11.0216 18.8879C11.3938 19.4881 12.0587 19.8879 12.8169 19.8879H5.73832Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19.7265 12.5H13.3911C12.899 12.5 12.5 12.899 12.5 13.3911V17.6462C12.5 18.1384 12.899 18.5374 13.3911 18.5374H19.7265C20.2187 18.5374 20.6176 18.1384 20.6176 17.6462V13.3911C20.6176 12.899 20.2187 12.5 19.7265 12.5ZM13.3911 11.5C12.3467 11.5 11.5 12.3467 11.5 13.3911V17.6462C11.5 18.6907 12.3467 19.5374 13.3911 19.5374H19.7265C20.771 19.5374 21.6176 18.6907 21.6176 17.6462V13.3911C21.6176 12.3467 20.771 11.5 19.7265 11.5H13.3911Z"/><path d="M6.18951 6.88123C5.98304 6.88123 5.81567 7.0486 5.81567 7.25506V10.6195C5.81567 10.826 5.98304 10.9934 6.18951 10.9934C6.39597 10.9934 6.56334 10.826 6.56334 10.6195V8.15757L10.6022 12.1964C10.7482 12.3424 10.9849 12.3424 11.1309 12.1964C11.2769 12.0504 11.2769 11.8137 11.1309 11.6677L7.09202 7.62889L9.55399 7.62889C9.76045 7.62889 9.92782 7.46152 9.92782 7.25506C9.92782 7.0486 9.76045 6.88123 9.55399 6.88123L6.18951 6.88123Z"/></svg>',signal_1:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 16h2v5H3z"></path></svg>',signal_2:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 16h2v5H3zm4-3h2v8H7z"></path></svg>',signal_3:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 16h2v5H3zm4-3h2v8H7zm4-3h2v11h-2z"></path></svg>',signal_4:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 16h2v5H3zm4-3h2v8H7zm4-3h2v11h-2zm4-3h2v14h-2z"></path></svg>',signal_5:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 16h2v5H3zm4-3h2v8H7zm4-3h2v11h-2zm4-3h2v14h-2zm4-3h2v17h-2z"></path></svg>',start_livestream:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="currentColor" d="M6.343 4.938a1 1 0 0 1 0 1.415a8.003 8.003 0 0 0 0 11.317a1 1 0 1 1-1.415 1.414c-3.906-3.906-3.906-10.24 0-14.146a1 1 0 0 1 1.415 0Zm12.731 0c3.906 3.907 3.906 10.24 0 14.146a1 1 0 0 1-1.414-1.414a8.003 8.003 0 0 0 0-11.317a1 1 0 0 1 1.414-1.415ZM9.31 7.812a1 1 0 0 1 0 1.414a3.92 3.92 0 0 0 0 5.544a1 1 0 1 1-1.414 1.414a5.92 5.92 0 0 1 0-8.372a1 1 0 0 1 1.414 0Zm6.959 0a5.92 5.92 0 0 1 0 8.372a1 1 0 0 1-1.415-1.414a3.92 3.92 0 0 0 0-5.544a1 1 0 0 1 1.415-1.414Zm-4.187 2.77a1.5 1.5 0 1 1 0 3a1.5 1.5 0 0 1 0-3Z"/></svg>',stop_livestream:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path fill="currentColor" d="M2.854 2.146a.5.5 0 1 0-.708.708l1.811 1.81A8.218 8.218 0 0 0 2 10a8.228 8.228 0 0 0 2.604 6.015a.725.725 0 0 0 1.01-.025c.316-.316.277-.819-.027-1.11A6.73 6.73 0 0 1 3.5 10c0-1.62.57-3.107 1.522-4.27l.712.71A5.726 5.726 0 0 0 4.5 10c0 1.691.73 3.213 1.893 4.264a.713.713 0 0 0 .983-.037c.328-.328.267-.844-.041-1.134A4.238 4.238 0 0 1 6 10c0-.93.298-1.789.804-2.489l1.842 1.842a1.5 1.5 0 0 0 2 2l6.5 6.5a.5.5 0 0 0 .708-.707l-1.811-1.81l-1.065-1.066l-.712-.71l-1.07-1.072l-1.842-1.841l-2-2L7.4 6.693l-.942-.942l-.82-.82l-.944-.944l-1.841-1.842Zm13.794 12.38A8.212 8.212 0 0 0 18 10c0-2.283-.928-4.35-2.426-5.843a.726.726 0 0 0-1.027.01c-.31.31-.28.8.01 1.095A6.727 6.727 0 0 1 16.5 10a6.718 6.718 0 0 1-.94 3.438l1.088 1.089Zm-1.822-1.822A5.73 5.73 0 0 0 15.5 10a5.733 5.733 0 0 0-1.706-4.087a.714.714 0 0 0-1.008.016c-.319.318-.272.816.014 1.111A4.235 4.235 0 0 1 14 10c0 .557-.107 1.09-.302 1.577l1.128 1.127Z"/></svg>',viewers:'<svg fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 9.005a4 4 0 1 1 0 8 4 4 0 0 1 0-8Zm0 1.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5ZM12 5.5c4.613 0 8.596 3.15 9.701 7.564a.75.75 0 1 1-1.455.365 8.503 8.503 0 0 0-16.493.004.75.75 0 0 1-1.455-.363A10.003 10.003 0 0 1 12 5.5Z" fill="currentColor"/></svg>',debug:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m10.05 15.42 6.256-8.476a.694.694 0 0 1 1.235.57l-.03.098-3.87 9.8a2.07 2.07 0 1 1-3.737-1.766l.069-.115.076-.11 6.257-8.477-6.257 8.476Zm2.05-4.549-1.226 1.66a3.32 3.32 0 0 0-2.29 3.024.75.75 0 0 1-1.5-.063A4.819 4.819 0 0 1 9.14 11.74c.9-.631 1.942-.911 2.961-.87Zm4.167 2.752c.28.586.436 1.22.463 1.866a.75.75 0 0 1-1.376.444l.913-2.31Zm-2.233-5.37-.969 1.311a6.22 6.22 0 0 0-4.736 1.02 6.208 6.208 0 0 0-2.419 3.39.75.75 0 0 1-1.442-.412 7.708 7.708 0 0 1 3-4.207 7.724 7.724 0 0 1 6.566-1.102Zm3.51 2.138c.25.267.486.556.702.865a7.727 7.727 0 0 1 1.097 2.288.75.75 0 0 1-1.44.417 6.23 6.23 0 0 0-.885-1.845l-.102-.138.627-1.587ZM15.98 5.852l-.088.054c-.123.082-.236.18-.337.295l-.096.12-.54.732a9.138 9.138 0 0 0-8.261 1.146A9.103 9.103 0 0 0 3.38 12.37a.75.75 0 1 1-1.398-.543A10.603 10.603 0 0 1 5.799 6.97 10.642 10.642 0 0 1 15.98 5.852Zm2.629 1.562a10.646 10.646 0 0 1 2.022 2.171c.49.702.892 1.451 1.199 2.235a.75.75 0 1 1-1.397.547 9.188 9.188 0 0 0-2.327-3.405l.381-.964c.076-.19.115-.388.122-.584Z" fill="currentColor"/></svg>',info:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 1.999c5.524 0 10.002 4.478 10.002 10.002 0 5.523-4.478 10.001-10.002 10.001-5.524 0-10.002-4.478-10.002-10.001C1.998 6.477 6.476 1.999 12 1.999Zm0 1.5a8.502 8.502 0 1 0 0 17.003A8.502 8.502 0 0 0 12 3.5Zm-.004 7a.75.75 0 0 1 .744.648l.007.102.003 5.502a.75.75 0 0 1-1.493.102l-.007-.101-.003-5.502a.75.75 0 0 1 .75-.75ZM12 7.003a.999.999 0 1 1 0 1.997.999.999 0 0 1 0-1.997Z" fill="currentColor"/></svg>',devices:'<svg fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18.5a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm5.5-8.5V9a5.5 5.5 0 1 0-11 0v1H9a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1H6.5v.25a2.25 2.25 0 0 0 2.096 2.245l.154.005h1.128a2.251 2.251 0 1 1 0 1.5H8.75a3.75 3.75 0 0 1-3.745-3.55L5 16.25V9a7 7 0 0 1 14 0v5a2 2 0 0 1-1.85 1.995L17 16h-2a1 1 0 0 1-.993-.883L14 15v-4a1 1 0 0 1 .883-.993L15 10h2.5Zm-9 1.5h-2v3h2v-3Zm9 0h-2v3H17a.5.5 0 0 0 .492-.41L17.5 14v-2.5Z" fill="currentColor"/></svg>',horizontal_dots:'<svg fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8 12a2 2 0 1 1-4 0 2 2 0 0 1 4 0ZM14 12a2 2 0 1 1-4 0 2 2 0 0 1 4 0ZM18 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill="currentColor"/></svg>',ai_sparkle:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 49 48" fill="none"><path fill="#F13E1B" d="m30.023 15.96.07.016a1.362 1.362 0 0 1 .657 2.068c-.163.23-.392.403-.658.497l-3.444 1.118a7.095 7.095 0 0 0-4.495 4.492l-1.12 3.442a1.357 1.357 0 0 1-1.267.907h-.016a1.361 1.361 0 0 1-1.283-.907l-1.12-3.442a7.091 7.091 0 0 0-4.495-4.509l-3.444-1.119a1.36 1.36 0 0 1 0-2.564l3.444-1.118a7.097 7.097 0 0 0 4.427-4.492l1.119-3.442a1.36 1.36 0 0 1 2.566 0l1.12 3.442a7.09 7.09 0 0 0 4.495 4.492l3.444 1.118Zm9.195 16.007-2.755-.894a5.678 5.678 0 0 1-3.596-3.594l-.896-2.753a1.087 1.087 0 0 0-2.053 0l-.895 2.753a5.672 5.672 0 0 1-3.541 3.594l-2.756.894a1.088 1.088 0 0 0 0 2.052l2.756.895a5.675 5.675 0 0 1 3.596 3.607l.896 2.753a1.088 1.088 0 0 0 2.052 0l.896-2.753a5.672 5.672 0 0 1 3.596-3.594l2.756-.894a1.088 1.088 0 0 0 0-2.052l-.056-.014Z"/><path fill="#2160FD" d="m39.218 31.967-2.755-.894a5.677 5.677 0 0 1-3.596-3.594l-.896-2.753a1.087 1.087 0 0 0-2.053 0l-.895 2.753a5.672 5.672 0 0 1-3.541 3.594l-2.756.894a1.088 1.088 0 0 0 0 2.052l2.756.895a5.675 5.675 0 0 1 3.596 3.607l.896 2.753a1.088 1.088 0 0 0 2.052 0l.896-2.753a5.672 5.672 0 0 1 3.596-3.594l2.756-.894a1.088 1.088 0 0 0 0-2.052l-.056-.014Z"/></svg>',meeting_ai:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" fill="none"><path fill="#F13E1B" d="M9.111 12.888a4.98 4.98 0 0 0-1.075-.8l-.04.048a4.651 4.651 0 0 0-.903-.424l-2.446-.8a.963.963 0 0 1-.467-.356.953.953 0 0 1 0-1.116.955.955 0 0 1 .467-.352l2.446-.8A5.088 5.088 0 0 0 9.04 7.06a5.048 5.048 0 0 0 1.2-1.904l.02-.064.799-2.444A.97.97 0 0 1 11.969 2a.97.97 0 0 1 .91.648l.8 2.444a5.147 5.147 0 0 0 1.219 1.976 5.042 5.042 0 0 0 1.974 1.2l2.45.8h.048c.188.067.351.19.468.352.115.164.176.36.175.56.001.2-.06.396-.175.56a1 1 0 0 1-.468.352l-2.446.8a5.067 5.067 0 0 0-1.978 1.2 5.096 5.096 0 0 0-1.199 1.976l-.8 2.448-.023.06a1.02 1.02 0 0 1-.184.284.967.967 0 0 1-.703.3 1 1 0 0 1-.927-.644l-.8-2.448a5.11 5.11 0 0 0-.799-1.508 5.16 5.16 0 0 0-.4-.472Zm10.434 5.396a.492.492 0 0 1 .176-.236.473.473 0 0 1 .1-.048.466.466 0 0 1 .168-.04c.1 0 .197.031.28.088l.091.072a.456.456 0 0 1 .096.164l.4 1.224c.124.372.332.71.607.988.278.276.616.484.987.608l1.223.4h.028l.084.04a.536.536 0 0 1 .148.136c.056.082.087.18.088.28a.484.484 0 0 1-.32.456l-1.227.4a2.528 2.528 0 0 0-1.595 1.6l-.399 1.224a.46.46 0 0 1-.176.232.464.464 0 0 1-.28.088.475.475 0 0 1-.455-.32l-.4-1.224a2.507 2.507 0 0 0-.611-.992 2.487 2.487 0 0 0-.987-.612l-1.223-.4a.48.48 0 0 1 0-.908l1.223-.4c.367-.128.7-.337.975-.612.137-.142.257-.3.36-.468.1-.162.18-.335.24-.516l.399-1.224Z"/><path fill="currentColor" d="M19.545 18.284a.492.492 0 0 1 .176-.236.469.469 0 0 1 .1-.048.466.466 0 0 1 .168-.04c.1 0 .197.031.28.088l.091.072a.456.456 0 0 1 .096.164l.4 1.224c.124.372.332.71.607.988.279.276.616.484.988.608l1.222.4h.028l.084.04a.534.534 0 0 1 .148.136c.057.082.087.18.088.28a.484.484 0 0 1-.32.456l-1.227.4a2.528 2.528 0 0 0-1.595 1.6l-.399 1.224a.46.46 0 0 1-.175.232.464.464 0 0 1-.28.088.475.475 0 0 1-.456-.32l-.4-1.224a2.509 2.509 0 0 0-.61-.992 2.487 2.487 0 0 0-.988-.612l-1.223-.4a.48.48 0 0 1 0-.908l1.223-.4c.367-.128.7-.337.975-.612a2.7 2.7 0 0 0 .36-.468c.1-.162.18-.335.24-.516l.4-1.224Z"/></svg>',create_channel:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"><path fill="currentColor" d="M2 14.75A3.25 3.25 0 0 0 5.25 18H6v2.75a1.25 1.25 0 0 0 1.999 1l2.125-1.59.396-1.583c.071-.286.177-.56.312-.82L7.5 20.252 7.499 16.5H5.25a1.75 1.75 0 0 1-1.75-1.75v-8.5c0-.966.784-1.75 1.75-1.75h13.5c.966 0 1.75.784 1.75 1.75v3.845a3.27 3.27 0 0 1 1.5.83V6.25A3.25 3.25 0 0 0 18.75 3H5.25A3.25 3.25 0 0 0 2 6.25v8.5Z"/><path fill="currentColor" d="m18.098 11.67-5.902 5.902a2.684 2.684 0 0 0-.707 1.247l-.458 1.831a1.087 1.087 0 0 0 1.319 1.318l1.83-.457a2.685 2.685 0 0 0 1.248-.707l5.902-5.902a2.285 2.285 0 1 0-3.232-3.232Z"/></svg>',create_channel_illustration:'<svg width="503" height="362" viewBox="0 0 503 362" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M93.3477 192.893C93.3477 190.684 95.1385 188.893 97.3477 188.893H476C478.209 188.893 480 190.684 480 192.893V311.824C480 314.033 478.209 315.824 476 315.824H469.354C467.145 315.824 465.354 317.615 465.354 319.824V339.364C465.354 342.928 461.045 344.712 458.525 342.193L433.328 316.996C432.578 316.245 431.561 315.824 430.5 315.824H97.3477C95.1385 315.824 93.3477 314.033 93.3477 311.824V192.893Z" fill="#282828"/> <path d="M306.606 230.9H136.121C134.648 230.9 133.453 232.095 133.453 233.568C133.453 235.041 134.648 236.236 136.121 236.236H306.606C308.079 236.236 309.274 235.041 309.274 233.568C309.274 232.095 308.079 230.9 306.606 230.9Z" fill="#2160FD"/> <path d="M437.226 249.358H136.121C134.648 249.358 133.453 250.553 133.453 252.026C133.453 253.499 134.648 254.694 136.121 254.694H437.226C438.7 254.694 439.894 253.499 439.894 252.026C439.894 250.553 438.7 249.358 437.226 249.358Z" fill="#5C5C5C"/> <path d="M436.926 267.816H136.121C134.648 267.816 133.453 269.011 133.453 270.484C133.453 271.957 134.648 273.152 136.121 273.152H436.926C438.4 273.152 439.594 271.957 439.594 270.484C439.594 269.011 438.399 267.816 436.926 267.816Z" fill="#5C5C5C"/> <path d="M411.652 23C411.652 20.7909 409.861 19 407.652 19H29C26.7909 19 25 20.7909 25 23V141.931C25 144.14 26.7909 145.931 29 145.931H35.646C37.8551 145.931 39.646 147.722 39.646 149.931V169.472C39.646 173.036 43.9546 174.82 46.4745 172.3L71.6714 147.103C72.4216 146.352 73.439 145.931 74.4999 145.931H407.652C409.861 145.931 411.652 144.14 411.652 141.931V23Z" fill="#282828"/> <path d="M241.188 61.9839H70.703C69.2296 61.9839 68.0352 63.1783 68.0352 64.6517C68.0352 66.1252 69.2296 67.3196 70.703 67.3196H241.188C242.662 67.3196 243.856 66.1252 243.856 64.6517C243.856 63.1783 242.662 61.9839 241.188 61.9839Z" fill="#2160FD"/> <path d="M371.808 80.4419H70.703C69.2296 80.4419 68.0352 81.6363 68.0352 83.1098C68.0352 84.5832 69.2296 85.7776 70.703 85.7776H371.808C373.282 85.7776 374.476 84.5832 374.476 83.1098C374.476 81.6363 373.282 80.4419 371.808 80.4419Z" fill="#5C5C5C"/> <path d="M371.508 98.8999H70.703C69.2296 98.8999 68.0352 100.094 68.0352 101.568C68.0352 103.041 69.2296 104.236 70.703 104.236H371.508C372.982 104.236 374.176 103.041 374.176 101.568C374.176 100.094 372.982 98.8999 371.508 98.8999Z" fill="#5C5C5C"/> </svg>',captionsOn:'<svg width="24" height="24" fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M18.75 4A3.25 3.25 0 0 1 22 7.25v9.505a3.25 3.25 0 0 1-3.25 3.25H5.25A3.25 3.25 0 0 1 2 16.755V7.25a3.25 3.25 0 0 1 3.066-3.245L5.25 4h13.5Zm0 1.5H5.25l-.144.006A1.75 1.75 0 0 0 3.5 7.25v9.505c0 .966.784 1.75 1.75 1.75h13.5a1.75 1.75 0 0 0 1.75-1.75V7.25a1.75 1.75 0 0 0-1.75-1.75ZM5.5 12c0-3.146 2.713-4.775 5.122-3.401A.75.75 0 0 1 9.878 9.9C8.481 9.104 7 9.994 7 12c0 2.005 1.484 2.896 2.88 2.103a.75.75 0 0 1 .74 1.304C8.216 16.775 5.5 15.143 5.5 12Zm7.5 0c0-3.146 2.713-4.775 5.122-3.401a.75.75 0 0 1-.744 1.302C15.981 9.104 14.5 9.994 14.5 12c0 2.005 1.484 2.896 2.88 2.103a.75.75 0 0 1 .74 1.304C15.716 16.775 13 15.143 13 12Z" fill="currentColor"/></svg>',captionsOff:'<svg width="24" height="24" fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3.28 2.22a.75.75 0 0 0-1.06 1.06l1.25 1.25A3.247 3.247 0 0 0 2 7.25v9.505a3.25 3.25 0 0 0 3.25 3.25h13.5c.063 0 .126-.002.188-.006l1.781 1.781a.75.75 0 0 0 1.061-1.06L3.28 2.22Zm14.164 16.284H5.25a1.75 1.75 0 0 1-1.75-1.75V7.25c0-.727.443-1.35 1.074-1.615l2.828 2.828C6.292 9.043 5.5 10.3 5.5 12c0 3.143 2.715 4.775 5.12 3.406a.75.75 0 0 0-.74-1.303C8.483 14.896 7 14.005 7 12c0-1.37.69-2.22 1.573-2.366l8.87 8.87Zm2.986-1.256c.045-.157.07-.322.07-.494V7.25a1.75 1.75 0 0 0-1.75-1.75H8.682L7.182 4H18.75A3.25 3.25 0 0 1 22 7.25v9.505c0 .593-.159 1.148-.436 1.627l-1.134-1.134Zm-5.877-5.877-1.197-1.197c.813-1.888 2.882-2.65 4.766-1.575a.75.75 0 0 1-.744 1.302c-1.241-.708-2.549-.085-2.825 1.47Z" fill="currentColor"/></svg>',play:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M8 5v14l11-7z" /></svg>',pause:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M6 4 H9 V20 H6 Z" /><path d="M15 4 H18 V20 H15 Z" /></svg>',fastForward:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 24" fill="currentColor"><path d="M4 5v14l11-7-11-7zm13 0v14l11-7-11-7z"/></svg>',minimize:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M21.778 2.223a.75.75 0 0 1 .072.976l-.072.084-6.223 6.224h5.693a.75.75 0 0 1 .743.65l.007.1a.75.75 0 0 1-.649.744l-.101.007-7.55-.002-.016-.002a.727.727 0 0 1-.195-.042l-.098-.046a.747.747 0 0 1-.386-.553l-.007-.105V2.754a.75.75 0 0 1 1.493-.102l.007.102v5.69l6.222-6.221a.749.749 0 0 1 1.06 0ZM11.003 13.755v7.504a.75.75 0 0 1-1.494.102l-.007-.102v-5.695L3.28 21.78a.75.75 0 0 1-1.133-.977l.073-.084 6.22-6.214H2.751a.75.75 0 0 1-.743-.648L2 13.755a.75.75 0 0 1 .75-.75l7.554.002.074.009.097.023.053.019.086.04.089.058a.761.761 0 0 1 .148.148l.066.106.041.094.022.07.01.055.007.058v-.008l.005.076Z" fill="currentColor"/></svg>',maximize:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12.748 3.001h7.554l.1.014.099.028.061.026a.72.72 0 0 1 .218.15l.04.044.061.082.037.065.039.09.02.064.013.064.009.093v7.534a.75.75 0 0 1-1.493.102l-.006-.102-.001-5.696-13.94 13.945h5.69a.75.75 0 0 1 .744.65l.007.1a.75.75 0 0 1-.649.744l-.101.007H3.714L3.684 21a.705.705 0 0 1-.187-.04l-.09-.038-.018-.01a.746.746 0 0 1-.384-.553l-.007-.105V12.75a.75.75 0 0 1 1.493-.102l.007.102v5.692L18.438 4.5l-5.69.001a.75.75 0 0 1-.743-.648l-.007-.102a.75.75 0 0 1 .648-.743L12.748 3Z" fill="currentColor"/></svg>'}}}]);