"use strict";(self.webpackChunksentinel_docs=self.webpackChunksentinel_docs||[]).push([[1881],{43626:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>h,frontMatter:()=>l,metadata:()=>p,toc:()=>o});var n=a(87462),r=(a(67294),a(3905));const l={title:"Software upgrade - 3",sidebar_position:4},i="Software upgrade - 3",p={unversionedId:"upgrades/upgrade-3",id:"upgrades/upgrade-3",title:"Software upgrade - 3",description:'???+ warning "Warning"',source:"@site/docs/validator-setup/upgrades/upgrade-3.md",sourceDirName:"upgrades",slug:"/upgrades/upgrade-3",permalink:"/validator-setup/upgrades/upgrade-3",draft:!1,editUrl:"https://github.com/sentinel-official/docs/tree/main/docs/validator-setup/upgrades/upgrade-3.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{title:"Software upgrade - 3",sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Software upgrade - 2",permalink:"/validator-setup/upgrades/upgrade-2"},next:{title:"Software upgrade - 4",permalink:"/validator-setup/upgrades/upgrade-4"}},s={},o=[{value:"Stop the node",id:"stop-the-node",level:2},{value:"Install the new version",id:"install-the-new-version",level:2},{value:"Start the node",id:"start-the-node",level:2},{value:"In case the upgrade fails",id:"in-case-the-upgrade-fails",level:2}],d={toc:o},u="wrapper";function h(e){let{components:t,...a}=e;return(0,r.kt)(u,(0,n.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"software-upgrade---3"},"Software upgrade - 3"),(0,r.kt)("p",null,'???+ warning "Warning"'),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"At block height `5125000` the Blockchain will stop producing the blocks. Follow the next steps only after the blockchain halt!\n")),(0,r.kt)("h2",{id:"stop-the-node"},"Stop the node"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Check the latest block height. It must match with the upgrade height"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"curl -fsLS http://127.0.0.1:26657/status | jq -r '.result.sync_info.latest_block_height'\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Stop the ",(0,r.kt)("inlineCode",{parentName:"p"},"sentinelhub")," process"))),(0,r.kt)("h2",{id:"install-the-new-version"},"Install the new version"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Clone the source code"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"VERSION=v0.9.2\nBASE_DIRECTORY=${GOPATH}/src/github.com/sentinel-official\n\nrm -rf ${BASE_DIRECTORY}/hub/ && mkdir -p ${BASE_DIRECTORY} && cd ${BASE_DIRECTORY}/ && \\\ngit clone https://github.com/sentinel-official/hub.git && cd ${BASE_DIRECTORY}/hub/ && \\\ngit checkout ${VERSION}\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Build and install the software"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"make install\n")))),(0,r.kt)("h2",{id:"start-the-node"},"Start the node"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Verify the software version"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"sentinelhub version --long\n")),(0,r.kt)("p",{parentName:"li"},'???+ note "Note"'),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"Commit hash must be `d04a4004600c9d19e326f61a13fcef853616e3ed`\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Start the ",(0,r.kt)("inlineCode",{parentName:"p"},"sentinelhub")," process"))),(0,r.kt)("h2",{id:"in-case-the-upgrade-fails"},"In case the upgrade fails"),(0,r.kt)("p",null,'???+ warning "Warning"'),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Follow the next steps in case the upgrade fails!\n")),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Install the Sentinel Hub software ",(0,r.kt)("inlineCode",{parentName:"p"},"v0.8.3"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Verfiy the software version commit is ",(0,r.kt)("inlineCode",{parentName:"p"},"fa7cd3c7d5f427308d8a837a18b951482ce5c9e2"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Start the ",(0,r.kt)("inlineCode",{parentName:"p"},"sentinelhub")," process with flag ",(0,r.kt)("inlineCode",{parentName:"p"},"unsafe-skip-upgrades")),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"sentinelhub start --unsafe-skip-upgrades 5125000\n")))))}h.isMDXComponent=!0}}]);