"use strict";(self.webpackChunksentinel_docs=self.webpackChunksentinel_docs||[]).push([[3900,6303],{36303:(t,e,i)=>{i.r(e),i.d(e,{dyte_participants_stage_queue:()=>r});var a=i(37176),s=i(9367),n=(i(78410),i(68753)),c=i(74710);i(60804);const r=class{constructor(t){(0,a.r)(this,t),this.updateStageRequestedParticipants=()=>{this.stageRequestedParticipants=this.meeting.participants.joined.toArray().filter((t=>"REQUESTED_TO_JOIN_STAGE"===t.stageStatus))},this.acceptStageRequest=async t=>{const{userId:e}=t;await this.meeting.stage.grantAccess([e]),this.updateStageRequestedParticipants()},this.rejectStageRequest=async t=>{const{userId:e}=t;await this.meeting.stage.denyAccess([e]),this.updateStageRequestedParticipants()},this.acceptAllStageRequest=async()=>{await this.meeting.stage.grantAccess(this.stageRequestedParticipants.map((t=>t.userId))),this.updateStageRequestedParticipants()},this.denyAllStageRequest=async()=>{var t;await(null===(t=this.meeting.stage)||void 0===t?void 0:t.denyAccess(this.stageRequestedParticipants.map((t=>t.userId)))),this.updateStageRequestedParticipants()},this.shouldShowStageRequests=()=>this.meeting.self.permissions.acceptPresentRequests&&this.stageRequestedParticipants.length>0,this.updateRequestList=async t=>{var e,i,a,s;"WEBINAR"===this.meeting.meta.viewType?this.stageRequestedParticipants=null===(e=[this.meeting.self,...this.meeting.participants.joined.toArray()])||void 0===e?void 0:e.filter((t=>"REQUESTED_TO_JOIN_STAGE"===t.stageStatus)):"LIVESTREAM"===this.meeting.meta.viewType&&this.meeting.self.permissions.acceptPresentRequests&&(t||(t=null!==(s=null===(a=await(null===(i=this.meeting.stage)||void 0===i?void 0:i.getAccessRequests()))||void 0===a?void 0:a.stageRequests)&&void 0!==s?s:[]),this.stageRequestedParticipants=t.map((t=>Object.assign(Object.assign({},t),{name:t.displayName}))))},this.meeting=void 0,this.config=s.d,this.size=void 0,this.iconPack=n.d,this.view="sidebar",this.t=(0,c.u)(),this.stageRequestedParticipants=[]}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){const{participants:t,stage:e}=this.meeting;this.participantLeftListener&&t.joined.removeListener("participantLeft",this.participantLeftListener),null==e||e.removeListener("stageAccessRequestUpdate",this.updateRequestList)}meetingChanged(t){var e;null!=t&&(this.participantLeftListener=t=>{this.stageRequestedParticipants=this.stageRequestedParticipants.filter((e=>e.id!==t.id))},this.updateRequestList(),null===(e=t.stage)||void 0===e||e.on("stageAccessRequestUpdate",this.updateRequestList),t.participants.joined.addListener("participantLeft",this.participantLeftListener))}render(){if("sidebar"===this.view&&this.shouldShowStageRequests())return(0,a.h)("div",{class:"stage-requested-participants"},(0,a.h)("div",{class:"heading-count",part:"staged-heading-count"},this.t("stage_request.header_title")," (",this.stageRequestedParticipants.length,")"),(0,a.h)("ul",{class:"participants",part:"staged-participants"},this.stageRequestedParticipants.map((t=>(0,a.h)("li",{class:"waiting-participant",key:t.id},(0,a.h)("div",{class:"participant-details"},(0,a.h)("dyte-avatar",{participant:t,size:"sm",iconPack:this.iconPack,t:this.t}),(0,a.h)("p",{class:"name",title:t.name},t.name)),(0,a.h)("div",{class:"waitlist-controls"},(0,a.h)("dyte-tooltip",{label:this.t("stage_request.deny_request"),variant:"secondary",iconPack:this.iconPack,t:this.t},(0,a.h)("dyte-button",{variant:"secondary",kind:"icon",onClick:()=>this.rejectStageRequest(t),iconPack:this.iconPack,t:this.t},(0,a.h)("dyte-icon",{class:"deny",icon:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t}))),(0,a.h)("dyte-tooltip",{label:this.t("stage_request.accept_request"),variant:"secondary",iconPack:this.iconPack,t:this.t},(0,a.h)("dyte-button",{variant:"secondary",kind:"icon",iconPack:this.iconPack,t:this.t,onClick:()=>this.acceptStageRequest(t)},(0,a.h)("dyte-icon",{class:"accept",icon:this.iconPack.checkmark})))))))),(0,a.h)("div",{class:"bulk-actions"},(0,a.h)("dyte-button",{class:"accept-all-button",variant:"secondary",iconPack:this.iconPack,t:this.t,onClick:this.acceptAllStageRequest},this.t("stage_request.accept_all")),(0,a.h)("dyte-button",{class:"deny-all-button",variant:"danger",iconPack:this.iconPack,t:this.t,onClick:this.denyAllStageRequest},this.t("stage_request.deny_all"))))}static get watchers(){return{meeting:["meetingChanged"]}}};r.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-top:var(--dyte-space-2, 8px);display:flex;width:100%;flex-direction:column;font-size:14px}.stage-requested-participants{margin-bottom:var(--dyte-space-8, 32px)}.stage-requested-participants .bulk-actions{display:flex;gap:var(--dyte-space-2, 8px)}.stage-requested-participants .bulk-actions .accept-all-button{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}.stage-requested-participants .bulk-actions dyte-button{flex:1 1 0%}h3,.heading-count{margin:var(--dyte-space-0, 0px);display:flex;align-items:center;justify-content:center;padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:400;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));text-align:center}.heading-count{font-size:14px}.participants{margin-top:var(--dyte-space-2, 8px);padding:var(--dyte-space-0, 0px)}.waiting-participant{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);display:flex;align-items:center}.waiting-participant .participant-details{margin-right:auto;display:flex;align-items:center}.waiting-participant .participant-details dyte-avatar{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);flex-shrink:0;font-size:14px}.waiting-participant .participant-details .name{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}@media (min-width: 1080px){.waiting-participant .participant-details .name{max-width:var(--dyte-space-40, 160px)}}.waiting-participant .waitlist-controls{display:flex}.waiting-participant .waitlist-controls dyte-button{margin-left:var(--dyte-space-2, 8px);cursor:pointer;border-radius:var(--dyte-border-radius-sm, 4px)}.waiting-participant .waitlist-controls dyte-icon.accept{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}.waiting-participant .waitlist-controls dyte-icon.deny{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}"}}]);