"use strict";(self.webpackChunksentinel_docs=self.webpackChunksentinel_docs||[]).push([[3463],{73463:(e,t,i)=>{i.r(t),i.d(t,{dyte_audio_visualizer:()=>c,dyte_microphone_selector:()=>l,dyte_speaker_selector:()=>h,dyte_switch:()=>p});var s=i(12754),a=i(27347),n=i(55471),r=i(24012),o=i(1810);i(24996);const d=(e,t)=>{if(null==e)return;const i=Math.round(1.5),s=[...Array(3)].map(((e,s)=>{let a=s;return a>i-1&&(a=3-a-1),Math.round((a+1)/(i+1)*t)})),{width:a,height:n}=e,r=e.getContext("2d");let o=2;const d=1*a/s.length,c=d-4;r.clearRect(0,0,a,n),r.fillStyle="rgb(0,0,0,0.0)",r.fillRect(0,0,a,n);const l=getComputedStyle(e).getPropertyValue("color");r.fillStyle=l,r.strokeStyle=l,r.lineCap="round",r.lineWidth=4,r.beginPath();for(const h of s){const e=Math.min(-Math.abs(1.2*h/10*n)+n/2,n/2-2.5),t=Math.max(2*(n/2-e),5);r.moveTo(o+c/2,e),r.lineTo(o+c/2,e+t),o+=d}r.stroke()},c=class{constructor(e){(0,s.r)(this,e),this.variant="bars",this.participant=void 0,this.size=void 0,this.iconPack=n.d,this.t=(0,r.u)(),this.hideMuted=!1,this.isScreenShare=!1,this.audioEnabled=void 0,this.volume=0}connectedCallback(){this.participantChanged(this.participant)}componentDidLoad(){d(this.visualizer,0)}disconnectedCallback(){var e,t,i;null===(e=this.hark)||void 0===e||e.stop(),this.audioUpdateListener&&(null===(t=this.participant)||void 0===t||t.removeListener("audioUpdate",this.audioUpdateListener)),this.screenShareUpdateListener&&(null===(i=this.participant)||void 0===i||i.removeListener("screenShareUpdate",this.screenShareUpdateListener))}participantChanged(e){null!=e&&(this.audioUpdateListener=({audioEnabled:e,audioTrack:t})=>{var i;if(null===(i=this.hark)||void 0===i||i.stop(),e&&null!=t){this.audioEnabled=!0;const e=new MediaStream;e.addTrack(t),this.calcVolume(e),d(this.visualizer,0)}else this.volume=0,this.audioEnabled=!1},this.isScreenShare?(this.screenShareUpdateListener=({screenShareEnabled:e,screenShareTracks:t})=>{this.audioUpdateListener({audioEnabled:e&&null!=t.audio,audioTrack:t.audio})},this.screenShareUpdateListener({screenShareEnabled:e.screenShareEnabled,screenShareTracks:{audio:e.screenShareTracks.audio,video:e.screenShareTracks.video}}),e.addListener("screenShareUpdate",this.screenShareUpdateListener)):(this.audioUpdateListener(e),e.addListener("audioUpdate",this.audioUpdateListener)))}calcVolume(e){this.hark=(0,a.h)(e,{play:!1,interval:100}),this.hark.on("volume_change",(e=>{const t=this.volume;let i=Math.round(10**(e/115)*10);i<3&&(i=0);let s=Math.round((2*t+i)/3);t!==s&&(this.volume=s,d(this.visualizer,this.volume))}))}render(){return(0,s.h)(s.H,null,(0,s.h)("div",{class:{hideMuted:this.hideMuted}},(0,s.h)("canvas",{width:"24",height:"24",class:{bars:!0,visible:this.audioEnabled},ref:e=>this.visualizer=e,part:"canvas"}),!this.isScreenShare&&!this.audioEnabled&&!0!==this.hideMuted&&(0,s.h)("dyte-icon",{icon:this.iconPack.mic_off,part:"mic-off-icon",iconPack:this.iconPack,t:this.t})))}static get watchers(){return{participant:["participantChanged"]}}};c.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block;width:-moz-fit-content;width:fit-content}.hideMuted{padding:var(--dyte-space-1, 4px)}canvas,dyte-icon{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}:host([size='sm']){transform:scale(0.9)}canvas{display:none}canvas.visible{display:block}canvas.bars{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}";const l=class{constructor(e){(0,s.r)(this,e),this.stageStateListener=()=>{this.canProduceAudio="ALLOWED"===this.meeting.self.permissions.canProduceAudio},this.deviceListUpdateListener=({devices:e})=>{const t=e.reduce(((e,t)=>{var i;return null===(i=e[t.kind])||void 0===i||i.push(t),e}),{audioinput:[],audiooutput:[]});this.audioinputDevices=t.audioinput},this.deviceUpdateListener=({device:e})=>{"audioinput"===e.kind&&(this.currentDevices={audio:e})},this.mediaPermissionUpdateListener=async({kind:e,message:t})=>{this.meeting&&"audio"===e&&"ACCEPTED"===t&&(this.audioinputDevices=await this.meeting.self.getAudioDevices())},this.meeting=void 0,this.size=void 0,this.iconPack=n.d,this.variant="full",this.t=(0,r.u)(),this.audioinputDevices=[],this.canProduceAudio=!0,this.currentDevices={audio:void 0}}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var e,t,i,s,a;null===(t=null===(e=this.meeting)||void 0===e?void 0:e.stage)||void 0===t||t.removeListener("stageStatusUpdate",this.stageStateListener),null===(i=this.meeting)||void 0===i||i.self.removeListener("deviceListUpdate",this.deviceListUpdateListener),null===(s=this.meeting)||void 0===s||s.self.removeListener("deviceUpdate",this.deviceUpdateListener),null===(a=this.meeting)||void 0===a||a.self.removeListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener)}meetingChanged(e){null!=e&&(0,s.w)((async()=>{var t,i;const{self:s,stage:a}=e,n=await e.self.getAudioDevices(),r=null===(t=e.self.getCurrentDevices())||void 0===t?void 0:t.audio;this.currentDevices={audio:r},this.canProduceAudio="ALLOWED"===this.meeting.self.permissions.canProduceAudio,null==a||a.addListener("stageStatusUpdate",this.stageStateListener),s.addListener("deviceListUpdate",this.deviceListUpdateListener),s.addListener("deviceUpdate",this.deviceUpdateListener),s.addListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),this.audioinputDevices=null!=r?[null!==(i=n.find((e=>e.deviceId===r.deviceId)))&&void 0!==i?i:r,...n.filter((e=>e.deviceId!==r.deviceId))]:n}))}setDevice(e){var t;if((0,o.d)(this.meeting))return;const i=this.audioinputDevices.find((t=>t.deviceId===e));null!=i&&(this.currentDevices={audio:i},null===(t=this.meeting)||void 0===t||t.self.setDevice(i))}render(){if(null==this.meeting)return null;let e=0;return(0,s.h)(s.H,null,this.canProduceAudio&&(0,s.h)("div",{part:"microphone-selection",class:"group container "+this.variant},(0,s.h)("label",{slot:"label"},"inline"!==this.variant&&this.t("settings.microphone_input"),(0,s.h)("dyte-icon",{icon:this.iconPack.mic_on,iconPack:this.iconPack,t:this.t,size:"sm"})),(0,s.h)("div",{class:"row"},(0,s.h)("select",{class:"dyte-select",onChange:e=>this.setDevice(e.target.value)},this.audioinputDevices.map((({deviceId:t,label:i})=>{var a;return(0,s.h)("option",{value:t,selected:(null===(a=this.currentDevices.audio)||void 0===a?void 0:a.deviceId)===t},i||"Microphone "+ ++e)}))),(0,s.h)("slot",{name:"indicator"}))))}static get watchers(){return{meeting:["meetingChanged"]}}};l.style=".dyte-select{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.dyte-select:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)}.dyte-select{display:block;border-radius:var(--dyte-border-radius-sm, 4px);border-width:var(--dyte-border-width-none, 0);border-style:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:var(--dyte-space-3, 12px);font-size:16px;--icon-size:var(--dyte-select-chevron-size, var(--dyte-space-6, 24px));--icon-right-position:var(--dyte-select-chevron-right-position, var(--dyte-space-2, 8px));background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e\");background-position:right var(--icon-right-position) center;background-repeat:no-repeat;background-size:var(--icon-size) var(--icon-size);padding-right:calc(var(--icon-right-position) * 5);width:100%;max-width:100%;text-overflow:ellipsis}.inline .dyte-select{margin-top:var(--dyte-space-1, 4px);width:100%;padding-top:var(--dyte-space-1, 4px);padding-bottom:var(--dyte-space-1, 4px);padding-left:var(--dyte-space-1\\.5, 6px);padding-right:var(--dyte-space-1\\.5, 6px);padding-right:var(--dyte-space-8, 32px);font-size:14px}.row{margin-bottom:var(--dyte-space-2, 8px);display:flex;width:100%;align-items:center;justify-content:space-between;gap:var(--dyte-space-3, 12px)}.group{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px)}.group>*{margin-bottom:var(--dyte-space-2, 8px)}.group>*:last-child{margin-bottom:var(--dyte-space-0, 0px)}.group select{flex:1 1 0%}.inline.group{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-0\\.5, 2px)}.inline.group>*{margin-bottom:var(--dyte-space-0, 0px)}label{display:flex;-webkit-user-select:none;-moz-user-select:none;user-select:none;align-items:center;gap:var(--dyte-space-1, 4px);font-size:14px}.inline.container{display:flex;align-items:center;justify-content:flex-start;gap:var(--dyte-space-2, 8px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px)}";const h=class{constructor(e){(0,s.r)(this,e),this.deviceListUpdateListener=({devices:e})=>{const t=e.reduce(((e,t)=>{var i;return null===(i=e[t.kind])||void 0===i||i.push(t),e}),{audioinput:[],audiooutput:[]});this.speakerDevices=t.audiooutput},this.deviceUpdateListener=({device:e})=>{"audiooutput"===e.kind&&(this.currentDevices={speaker:e})},this.mediaPermissionUpdate=async({kind:e,message:t})=>{this.meeting&&"audio"===e&&"ACCEPTED"===t&&(this.speakerDevices=await this.meeting.self.getSpeakerDevices())},this.meeting=void 0,this.states=void 0,this.variant="full",this.size=void 0,this.iconPack=n.d,this.t=(0,r.u)(),this.speakerDevices=[],this.currentDevices={speaker:void 0}}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var e,t,i;null===(e=this.meeting)||void 0===e||e.self.removeListener("deviceListUpdate",this.deviceListUpdateListener),null===(t=this.meeting)||void 0===t||t.self.removeListener("deviceUpdate",this.deviceUpdateListener),null===(i=this.meeting)||void 0===i||i.self.addListener("mediaPermissionUpdate",this.mediaPermissionUpdate)}meetingChanged(e){null!=e&&(0,s.w)((async()=>{var t,i;const{self:s}=e,a=await e.self.getSpeakerDevices(),n=null===(t=e.self.getCurrentDevices())||void 0===t?void 0:t.speaker;this.currentDevices={speaker:n},s.addListener("deviceListUpdate",this.deviceListUpdateListener),s.addListener("deviceUpdate",this.deviceUpdateListener),s.addListener("mediaPermissionUpdate",this.mediaPermissionUpdate),this.speakerDevices=null!=n?[null!==(i=a.find((e=>e.deviceId===n.deviceId)))&&void 0!==i?i:n,...a.filter((e=>e.deviceId!==n.deviceId))]:a}))}testAudio(){var e;null===(e=this.testAudioEl)||void 0===e||e.play()}setDevice(e){var t,i;if((0,o.d)(this.meeting))return;const s=this.speakerDevices.find((t=>t.deviceId===e));this.currentDevices={speaker:s},null!=s&&(null===(t=this.meeting)||void 0===t||t.self.setDevice(s),null===(i=this.testAudioEl)||void 0===i||i.setSinkId(s.deviceId))}render(){if(null==this.meeting)return null;let e=0;return(0,s.h)(s.H,null,(0,s.h)("audio",{preload:"auto",src:"https://assets.dyte.io/ui-kit/speaker-test.mp3",ref:e=>this.testAudioEl=e}),(0,s.h)("div",{class:"group "+this.variant,part:"speaker-selection"},this.speakerDevices.length>0&&!(0,o.d)(this.meeting)&&(0,s.h)("div",{class:"container"},(0,s.h)("label",null,"inline"!==this.variant&&this.t("settings.speaker_output"),(0,s.h)("dyte-icon",{icon:this.iconPack.speaker,iconPack:this.iconPack,t:this.t,size:"sm"})),(0,s.h)("div",{class:"row"},(0,s.h)("select",{class:"dyte-select",onChange:e=>this.setDevice(e.target.value)},this.speakerDevices.map((({deviceId:t,label:i})=>{var a;return(0,s.h)("option",{value:t,selected:(null===(a=this.currentDevices.speaker)||void 0===a?void 0:a.deviceId)===t},i||"Speaker "+ ++e)}))))),"full"===this.variant&&(0,s.h)("dyte-button",{variant:"secondary",onClick:()=>this.testAudio(),iconPack:this.iconPack,t:this.t},(0,s.h)("dyte-icon",{icon:this.iconPack.speaker,slot:"start",iconPack:this.iconPack,t:this.t}),this.t("test"))))}static get watchers(){return{meeting:["meetingChanged"]}}};h.style=".dyte-select{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.dyte-select:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)}.dyte-select{display:block;border-radius:var(--dyte-border-radius-sm, 4px);border-width:var(--dyte-border-width-none, 0);border-style:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:var(--dyte-space-3, 12px);font-size:16px;--icon-size:var(--dyte-select-chevron-size, var(--dyte-space-6, 24px));--icon-right-position:var(--dyte-select-chevron-right-position, var(--dyte-space-2, 8px));background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e\");background-position:right var(--icon-right-position) center;background-repeat:no-repeat;background-size:var(--icon-size) var(--icon-size);padding-right:calc(var(--icon-right-position) * 5);width:100%;max-width:100%;text-overflow:ellipsis}.inline .dyte-select{margin-top:var(--dyte-space-1, 4px);width:100%;padding-top:var(--dyte-space-1, 4px);padding-bottom:var(--dyte-space-1, 4px);padding-left:var(--dyte-space-1\\.5, 6px);padding-right:var(--dyte-space-1\\.5, 6px);padding-right:var(--dyte-space-8, 32px);font-size:14px}.row{display:flex;width:100%;align-items:center;justify-content:space-between;gap:var(--dyte-space-3, 12px)}.group{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px)}.group>*{margin-bottom:var(--dyte-space-2, 8px)}.group>*:last-child{margin-bottom:var(--dyte-space-0, 0px)}.group select{flex:1 1 0%}.inline.group{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-0\\.5, 2px)}.inline.group>*{margin-bottom:var(--dyte-space-0, 0px)}label{display:flex;-webkit-user-select:none;-moz-user-select:none;user-select:none;align-items:center;gap:var(--dyte-space-1, 4px);font-size:14px}.inline .container{display:flex;align-items:center;justify-content:flex-start;gap:var(--dyte-space-2, 8px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px)}";const p=class{constructor(e){(0,s.r)(this,e),this.dyteChange=(0,s.c)(this,"dyteChange",4),this.onClick=()=>{this.readonly||this.disabled||(this.checked=!this.checked)},this.onKeyPress=e=>{if(!this.readonly)switch(e.key){case"Enter":case" ":this.checked=!this.checked}},this.checked=!1,this.readonly=!1,this.disabled=!1,this.iconPack=n.d,this.t=(0,r.u)()}connectedCallback(){this.checkedChange(this.checked)}checkedChange(e){this.checked=e,this.dyteChange.emit(e)}render(){return(0,s.h)(s.H,{role:"switch",tabIndex:this.disabled&&0,"aria-readonly":this.readonly,"aria-checked":this.checked,"aria-disabled":this.disabled,class:{checked:this.checked},onClick:this.onClick,onKeyPress:this.onKeyPress},(0,s.h)("div",{class:"switch",part:"switch"}))}static get watchers(){return{checked:["checkedChange"]}}};p.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{box-sizing:border-box;display:inline-flex;height:var(--dyte-space-6, 24px);width:var(--dyte-space-10, 40px);align-items:center;padding:var(--dyte-space-1, 4px);border-radius:9999px;background-color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52));cursor:pointer}.switch{box-sizing:border-box;height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);background-color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)));border-radius:9999px;transition-property:var(--dyte-transition-property, all);transition-duration:200ms}:host(.checked){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity))}:host(.checked) .switch{transform:translateX(100%)}:host([readonly]),:host([disabled]){cursor:not-allowed;opacity:0.6}"},27347:(e,t,i)=>{i.d(t,{h:()=>o});var s,a=n;function n(){}n.mixin=function(e){var t=e.prototype||e;t.isWildEmitter=!0,t.on=function(e,t,i){this.callbacks=this.callbacks||{};var s=3===arguments.length,a=s?arguments[1]:void 0,n=s?arguments[2]:arguments[1];return n._groupName=a,(this.callbacks[e]=this.callbacks[e]||[]).push(n),this},t.once=function(e,t,i){var s=this,a=3===arguments.length,n=a?arguments[1]:void 0,r=a?arguments[2]:arguments[1];return this.on(e,n,(function t(){s.off(e,t),r.apply(this,arguments)})),this},t.releaseGroup=function(e){var t,i,s,a;for(t in this.callbacks=this.callbacks||{},this.callbacks)for(i=0,s=(a=this.callbacks[t]).length;i<s;i++)a[i]._groupName===e&&(a.splice(i,1),i--,s--);return this},t.off=function(e,t){this.callbacks=this.callbacks||{};var i,s=this.callbacks[e];return s?1===arguments.length?(delete this.callbacks[e],this):(-1!==(i=s.indexOf(t))&&(s.splice(i,1),0===s.length&&delete this.callbacks[e]),this):this},t.emit=function(e){this.callbacks=this.callbacks||{};var t,i,s,a=[].slice.call(arguments,1),n=this.callbacks[e],r=this.getWildcardCallbacks(e);if(n)for(t=0,i=(s=n.slice()).length;t<i&&s[t];++t)s[t].apply(this,a);if(r)for(i=r.length,t=0,i=(s=r.slice()).length;t<i&&s[t];++t)s[t].apply(this,[e].concat(a));return this},t.getWildcardCallbacks=function(e){this.callbacks=this.callbacks||{};var t,i,s=[];for(t in this.callbacks)i=t.split("*"),("*"===t||2===i.length&&e.slice(0,i[0].length)===i[0])&&(s=s.concat(this.callbacks[t]));return s}},n.mixin(n),"undefined"!=typeof window&&(s=window.AudioContext||window.webkitAudioContext);var r=null,o=function(e,t){var i=new a;if(!s)return i;var n,o,d,c=(t=t||{}).smoothing||.1,l=t.interval||50,h=t.threshold,p=t.play,u=t.history||10,v=!0;r=t.audioContext||r||new s,(d=r.createAnalyser()).fftSize=512,d.smoothingTimeConstant=c,o=new Float32Array(d.frequencyBinCount),e.jquery&&(e=e[0]),e instanceof HTMLAudioElement||e instanceof HTMLVideoElement?(n=r.createMediaElementSource(e),void 0===p&&(p=!0),h=h||-50):(n=r.createMediaStreamSource(e),h=h||-50),n.connect(d),p&&d.connect(r.destination),i.speaking=!1,i.suspend=function(){return r.suspend()},i.resume=function(){return r.resume()},Object.defineProperty(i,"state",{get:function(){return r.state}}),r.onstatechange=function(){i.emit("state_change",r.state)},i.setThreshold=function(e){h=e},i.setInterval=function(e){l=e},i.stop=function(){v=!1,i.emit("volume_change",-100,h),i.speaking&&(i.speaking=!1,i.emit("stopped_speaking")),d.disconnect(),n.disconnect()},i.speakingHistory=[];for(var g=0;g<u;g++)i.speakingHistory.push(0);var m=function(){setTimeout((function(){if(v){var e=function(e,t){var i=-1/0;e.getFloatFrequencyData(t);for(var s=4,a=t.length;s<a;s++)t[s]>i&&t[s]<0&&(i=t[s]);return i}(d,o);i.emit("volume_change",e,h);var t=0;if(e>h&&!i.speaking){for(var s=i.speakingHistory.length-3;s<i.speakingHistory.length;s++)t+=i.speakingHistory[s];t>=2&&(i.speaking=!0,i.emit("speaking"))}else if(e<h&&i.speaking){for(s=0;s<i.speakingHistory.length;s++)t+=i.speakingHistory[s];0==t&&(i.speaking=!1,i.emit("stopped_speaking"))}i.speakingHistory.shift(),i.speakingHistory.push(0+(e>h)),m()}}),l)};return m(),i}}}]);