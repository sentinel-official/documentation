"use strict";(self.webpackChunksentinel_docs=self.webpackChunksentinel_docs||[]).push([[5671],{91065:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>o,toc:()=>l});var r=n(85893),t=n(11151);const i={title:"SSH",description:"Setting up SSH for secure remote access and communication",sidebar_position:3},a=void 0,o={id:"server-setup/ssh",title:"SSH",description:"Setting up SSH for secure remote access and communication",source:"@site/docs/validator-setup/server-setup/ssh.md",sourceDirName:"server-setup",slug:"/server-setup/ssh",permalink:"/validator-setup/server-setup/ssh",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{title:"SSH",description:"Setting up SSH for secure remote access and communication",sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Create New User",permalink:"/validator-setup/server-setup/create-user"},next:{title:"Install Golang",permalink:"/validator-setup/golang"}},c={},l=[{value:"Client Side",id:"client-side",level:3},{value:"Server Side",id:"server-side",level:3}];function d(e){const s={admonition:"admonition",code:"code",h3:"h3",p:"p",pre:"pre",strong:"strong",...(0,t.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.p,{children:"To securely access your server, you will use an SSH connection."}),"\n",(0,r.jsx)(s.h3,{id:"client-side",children:"Client Side"}),"\n",(0,r.jsx)(s.p,{children:"If you don't already have one, generate an SSH key pair on your client"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"ssh-keygen -t ed25519\n"})}),"\n",(0,r.jsx)(s.p,{children:"Navigate to the SSH directory, and you should see both the public and private SSH keys"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"ls -l .ssh/\n\ntotal 2\n-rw-------. 1 user user  size Mar 12 18:08 id_ed25519\n-rw-r--r--. 1 user user  size Mar 12 18:08 id_ed25519.pub\n"})}),"\n",(0,r.jsxs)(s.admonition,{title:"Important",type:"danger",children:[(0,r.jsxs)(s.p,{children:["Add your ",(0,r.jsx)(s.strong,{children:"public"})," SSH key to the ",(0,r.jsx)(s.code,{children:"authorized_keys"})," file on your VPS to enable secure SSH connections. If you do not perform this step you will be locked out and unable to connect to your VPS as it will be refused!"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"ssh-copy-id -i ~/.ssh/id_ed25519.pub username@server_ip\n"})})]}),"\n",(0,r.jsxs)(s.p,{children:["If the import fails, ensure that the ",(0,r.jsx)(s.code,{children:".ssh/"})," folder exists on your server under the newly created user. If it does not exist, create it by doing ",(0,r.jsx)(s.code,{children:"mkdir ~/.ssh"})]}),"\n",(0,r.jsx)(s.h3,{id:"server-side",children:"Server Side"}),"\n",(0,r.jsx)(s.p,{children:"Your public key will be now visible on your server by typing"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"cat ~.ssh/authorized_keys\n"})}),"\n",(0,r.jsx)(s.p,{children:"For security purposes it is recommended to change the default port 22 to another one; let's say 2222.\nCheck if the port is not already being used by another service"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"grep 2222 /etc/services\n"})}),"\n",(0,r.jsx)(s.p,{children:"On your server machine, install the firewall"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"sudo apt-get install ufw\n"})}),"\n",(0,r.jsx)(s.p,{children:"If the port is not already being used by another service, you can add it to your firewall"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"sudo ufw allow 2222/tcp\n"})}),"\n",(0,r.jsx)(s.p,{children:"Enable the firewall"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"sudo ufw enable\n"})}),"\n",(0,r.jsx)(s.p,{children:"Check firewall status to see if the port has been enabled"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"sudo ufw status\n"})}),"\n",(0,r.jsx)(s.p,{children:"Open the SSH config file"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"sudo nano /etc/ssh/sshd_config\n"})}),"\n",(0,r.jsx)(s.p,{children:"Set the following fields"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",metastring:'title="/etc/ssh/sshd_config"',children:"# For security purposes we want to use a port number which is not the default one 22\nPort 2222\n\n# Better disable root login via SSH. If needed better to switch to root once\n# connected with a normal user\nPermitRootLogin  no\n\n# Authentication with public key is preferred\nPubkeyAuthentication  yes\n\n# Better not to use password authentication\nPasswordAuthentication  no\n"})}),"\n",(0,r.jsx)(s.p,{children:"Restart the service"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"sudo service sshd restart\n"})}),"\n",(0,r.jsx)(s.p,{children:"Connect to your machine via SSH using the new port"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"ssh sentinel@machine_ip -p 2222\n"})})]})}function h(e={}){const{wrapper:s}={...(0,t.a)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);