"use strict";(self.webpackChunksentinel_docs=self.webpackChunksentinel_docs||[]).push([[7713],{72729:(e,t,i)=>{i.d(t,{d:()=>a,e:()=>s,f:()=>n});const a=(e,t)=>{const i=t.getTime()-e.getTime();return Math.round(Math.abs(i/1e3/60))},s=(e,t)=>{const i=a(e,t);if(i<2)return"just now";if(i<60)return`${i}m ago`;const s=Math.round(i/60);if(i<90)return`about ${s}h ago`;if(s<24)return`${s}h ago`;const n=Math.round(s/24);if(n<7)return`${n}d ago`;return`${Math.round(n/7)}w ago`},n=e=>e.toDateString()+" "+e.toLocaleTimeString()},11029:(e,t,i)=>{i.d(t,{d:()=>b});var a=i(9079),s="[object Symbol]";var n=/\s/;var o=/^\s+/;function r(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&n.test(e.charAt(t)););return t}(e)+1).replace(o,""):e}var c=NaN,d=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,h=/^0o[0-7]+$/i,p=parseInt;function g(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||(0,a.i)(e)&&(0,a.b)(e)==s}(e))return c;if((0,a.a)(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=(0,a.a)(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var i=l.test(e);return i||h.test(e)?p(e.slice(2),i?2:8):d.test(e)?c:+e}var u=function(){return a.r.Date.now()},m="Expected a function",v=Math.max,y=Math.min;function b(e,t,i){var s,n,o,r,c,d,l=0,h=!1,p=!1,b=!0;if("function"!=typeof e)throw new TypeError(m);function f(t){var i=s,a=n;return s=n=void 0,l=t,r=e.apply(a,i)}function w(e){var i=e-d;return void 0===d||i>=t||i<0||p&&e-l>=o}function x(){var e=u();if(w(e))return k(e);c=setTimeout(x,function(e){var i=t-(e-d);return p?y(i,o-(e-l)):i}(e))}function k(e){return c=void 0,b&&s?f(e):(s=n=void 0,r)}function C(){var e=u(),i=w(e);if(s=arguments,n=this,d=e,i){if(void 0===c)return function(e){return l=e,c=setTimeout(x,t),h?f(e):r}(d);if(p)return clearTimeout(c),c=setTimeout(x,t),f(d)}return void 0===c&&(c=setTimeout(x,t)),r}return t=g(t)||0,(0,a.a)(i)&&(h=!!i.leading,o=(p="maxWait"in i)?v(g(i.maxWait)||0,t):o,b="trailing"in i?!!i.trailing:b),C.cancel=function(){void 0!==c&&clearTimeout(c),l=0,s=d=n=c=void 0},C.flush=function(){return void 0===c?r:k(u())},C}},25738:(e,t,i)=>{i.r(t),i.d(t,{dyte_channel_header:()=>f,dyte_channel_selector_view:()=>w,dyte_chat_composer_view:()=>x,dyte_chat_messages_ui:()=>k,dyte_chat_messages_ui_paginated:()=>C,dyte_chat_search_results:()=>_,dyte_dialog_manager:()=>D,dyte_notifications:()=>S});var a=i(37176),s=i(78410),n=i(68753),o=i(74710),r=i(60804),c=i(11029),d=i(10510),l=i(85114),h=i(72729),p=i(82321),g=i(9367),u=i(67341),m=i(39571),v=i(43367),y=i(52292),b=i(22906);i(9079),i(2079);const f=class{constructor(e){(0,a.r)(this,e),this.search=(0,a.c)(this,"search",7),this.searchDismissed=(0,a.c)(this,"searchDismissed",7),this.back=(0,a.c)(this,"back",7),this.meeting=void 0,this.channel=void 0,this.iconPack=n.d,this.t=(0,o.u)(),this.showChannelDetailsDialog=!1,this.showSearchBar=!1,this.members=[],this.showBackButton=!1}onChannelChanged(){this.$searchInput&&(this.$searchInput.value=""),this.showSearchBar=!1,this.channel.isDirectMessage||this.meeting.chat.getChannelMembers(this.channel.id).then((e=>{this.members=e}))}connectedCallback(){this.onChannelChanged()}renderChannelDetails(){return(0,a.h)("dyte-dialog",{open:!0,onDyteDialogClose:()=>{this.showChannelDetailsDialog=!1},iconPack:this.iconPack,t:this.t},(0,a.h)("dyte-channel-details",{members:this.members,channel:this.channel}))}render(){return this.channel?(0,a.h)(a.H,null,this.showChannelDetailsDialog&&this.renderChannelDetails(),(0,a.h)("header",{class:{searching:this.showSearchBar}},this.showBackButton&&(0,a.h)("dyte-button",{kind:"icon",variant:"secondary",class:"back-btn",onClick:()=>{this.back.emit()}},(0,a.h)("dyte-icon",{icon:this.iconPack.chevron_left})),(0,a.h)("div",{class:"channel-details"},(0,a.h)("span",{class:"name"},this.channel.displayName),!this.channel.isDirectMessage&&(0,a.h)("span",{class:"members"},this.members.map((e=>e.name)).join(", "))),(0,a.h)("div",{class:"channel-tools"},!this.channel.isDirectMessage&&(0,a.h)("dyte-tooltip",{label:this.t("chat.channel_members"),iconPack:this.iconPack,t:this.t,variant:"primary"},(0,a.h)("dyte-button",{iconPack:this.iconPack,t:this.t,kind:"button",variant:"secondary",size:"md",onClick:()=>{this.showChannelDetailsDialog=!this.showChannelDetailsDialog},class:"br-primary-btn"},(0,a.h)("dyte-icon",{icon:this.iconPack.people,iconPack:this.iconPack,t:this.t})))))):null}static get watchers(){return{channel:["onChannelChanged"]}}};f.style="header{box-sizing:border-box;height:var(--dyte-space-16, 64px);width:100%;padding:var(--dyte-space-4, 16px);display:flex;justify-content:space-between;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));border-left-width:var(--dyte-border-width-none, 0);border-right-width:var(--dyte-border-width-none, 0);border-bottom-width:var(--dyte-border-width-sm, 1px);border-top-width:var(--dyte-border-width-none, 0);border-style:solid;--tw-border-opacity:1;border-bottom-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-border-opacity))}header.searching{justify-content:flex-end}header.searching .channel-details{display:none}header .channel-details{display:flex;flex-grow:1;flex-direction:column;justify-content:center;height:var(--dyte-space-9, 36px);width:var(--dyte-space-1, 4px)}header .channel-details .name{font-weight:500}header .channel-details .members{margin-top:var(--dyte-space-0\\.5, 2px);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:12px;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}header .channel-tools{display:flex;flex-shrink:0;justify-content:flex-end;gap:var(--dyte-space-1, 4px);min-width:var(--dyte-space-24, 96px)}header .channel-tools dyte-tooltip{height:var(--dyte-space-8, 32px);width:var(--dyte-space-10, 40px);display:flex}header .search-input{height:var(--dyte-space-8, 32px);width:var(--dyte-space-48, 192px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);border-width:var(--dyte-border-width-none, 0);border-style:none;outline:2px solid transparent;outline-offset:2px;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}header .name{font-size:16px}header .br-primary-btn{background-color:transparent}header .br-primary-btn:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}@media (orientation: landscape) and (min-width: 400px){header.searching .channel-details{display:flex}}.back-btn{margin-right:var(--dyte-space-3, 12px)}";const w=class{constructor(e){(0,a.r)(this,e),this.channelChange=(0,a.c)(this,"channelChange",7),this.calculateListHeight=(0,c.d)((()=>{if("list"===this.viewAs&&this.$listEl){let e=0;const t=this.$el.shadowRoot.querySelector('slot[name="header"]');t&&t.assignedElements().forEach((t=>e+=t.offsetHeight)),this.$searchEl&&(e+=this.$searchEl.offsetHeight),this.$listEl.style.height=window.innerHeight-e-16+"px"}}),60),this.getFilteredChannels=()=>""===this.searchQuery.trim()?this.channels:this.channels.filter((e=>e.name.toLowerCase().includes(this.searchQuery.toLowerCase()))),this.toggleDropdown=()=>{this.showDropdown=!this.showDropdown},this.getChannelById=e=>this.channels.find((t=>t.id===e)),this.getTotalUnreads=()=>this.channels.reduce(((e,t)=>e+t.unreadCount),0),this.onChannelClickHandler=e=>{this.channelChange.emit(e),"dropdown"===this.viewAs&&(this.showDropdown=!1)},this.channels=void 0,this.selectedChannelId=void 0,this.disableSearch=!1,this.hideAvatar=!1,this.iconPack=n.d,this.t=(0,o.u)(),this.viewAs="list",this.searchQuery="",this.showDropdown=!1}connectedCallback(){this.resizeObserver=new ResizeObserver(this.calculateListHeight)}componentDidLoad(){this.resizeObserver.observe(this.$el),this.calculateListHeight()}disconnectedCallback(){var e;null===(e=this.resizeObserver)||void 0===e||e.disconnect()}getTimeLabel(e){const t=new Date,i=new Date(t);i.setDate(t.getDate()-1);const a=new Date(t);if(a.setDate(t.getDate()-t.getDay()-1),e.toDateString()===t.toDateString())return e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});if(e.toDateString()===i.toDateString())return this.t("date.yesteday");if(e>a){const t=["date.sunday","date.monday","date.tuesday","date.wednesday","date.thursday","date.friday","date.saturday"];return this.t(t[e.getDay()])}return Intl.DateTimeFormat([],{day:"2-digit",month:"2-digit",year:"2-digit"}).format(e)}render(){const e=this.getFilteredChannels(),t="list"===this.viewAs||"dropdown"===this.viewAs&&this.showDropdown;return(0,a.h)(a.H,null,"list"===this.viewAs&&(0,a.h)("slot",{name:"header"}),t&&(0,a.h)("div",{class:{dropdown:"dropdown"===this.viewAs,scrollbar:"dropdown"===this.viewAs,list:"list"===this.viewAs}},!this.disableSearch&&(0,a.h)("div",{class:"search-container",ref:e=>this.$searchEl=e},(0,a.h)("input",{type:"text",placeholder:this.t("chat.search_conversations"),value:this.searchQuery,onInput:e=>this.searchQuery=e.target.value}),(0,a.h)("dyte-icon",{icon:this.iconPack.search})),(0,a.h)("div",{class:"channels-container scrollbar",ref:e=>this.$listEl=e},e.map((e=>(0,a.h)("button",{class:{channel:!0,active:this.selectedChannelId===e.id},onClick:()=>this.onChannelClickHandler(e)},!this.hideAvatar&&(0,a.h)("div",null,e.icon?(0,a.h)("dyte-icon",{class:"avatar-icon",icon:this.iconPack[e.icon]}):(0,a.h)("dyte-avatar",{participant:{name:e.name,picture:e.avatarUrl}})),(0,a.h)("div",{class:"channel-data"},(0,a.h)("div",{class:"col"},(0,a.h)("div",{class:"name"},e.name),e.latestMessage&&(0,a.h)("div",{class:{"last-message":!0,"no-message":!e.latestMessage}},(0,a.h)("dyte-text-message-view",{text:e.latestMessage}))),(0,a.h)("div",{class:"col channel-meta"},e.latestMessageTime&&(0,a.h)("time",{class:"time"},this.getTimeLabel(e.latestMessageTime)),e.unreadCount>0&&(0,a.h)("div",{class:"unread-count"},e.unreadCount)))))))),"dropdown"===this.viewAs&&(0,a.h)("button",{class:"dropdown-trigger",onClick:this.toggleDropdown},(0,a.h)("span",null,`${this.t("to")} ${this.getChannelById(this.selectedChannelId).name}`,this.getTotalUnreads()>0&&(0,a.h)("div",{class:"unread-count"},this.getTotalUnreads())),(0,a.h)("dyte-icon",{icon:this.showDropdown?this.iconPack.chevron_up:this.iconPack.chevron_down})))}get $el(){return(0,a.g)(this)}};w.style=".scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))\n    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{display:flex;flex-direction:column;width:100%;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));position:relative;min-height:48px}.dropdown-trigger{height:var(--dyte-space-12, 48px);width:100%;border-width:var(--dyte-border-width-none, 0);border-style:none;padding:var(--dyte-space-4, 16px);display:flex;align-items:center;justify-content:space-between;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));font-size:14px;color:rgb(var(--dyte-colors-text-1000, 255 255 255));cursor:pointer;position:absolute;z-index:10}.dropdown-trigger span{display:flex;flex:1 1 0%;align-items:center;justify-content:space-between}.dropdown-trigger dyte-icon{margin-left:var(--dyte-space-1, 4px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);flex-shrink:0}.dropdown{position:absolute;width:100%;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));top:var(--dyte-space-12, 48px);z-index:10;animation:0.3s slide-down ease}.dropdown .channels-container{max-height:var(--dyte-space-80, 320px)}.list{display:flex;flex-direction:column}.list .channel .channel-data{align-items:flex-start}.unread-count{display:flex;justify-content:center;height:var(--dyte-space-5, 20px);min-width:var(--dyte-space-3, 12px);border-radius:9999px;padding-left:var(--dyte-space-1, 4px);padding-right:var(--dyte-space-1, 4px);font-size:12px;line-height:1.25rem;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}input{height:var(--dyte-space-9, 36px);width:100%;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);box-sizing:border-box;border-width:var(--dyte-border-width-none, 0);border-style:none;outline:2px solid transparent;outline-offset:2px;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.search-container{display:flex;flex-shrink:0;flex-grow:0;flex-basis:auto;align-items:center;padding-top:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-3, 12px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);border-bottom:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-700, 44 44 44))}.search-container dyte-icon{margin-left:calc(var(--dyte-space-8, 32px) * -1);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.channels-container{display:flex;flex-direction:column;gap:var(--dyte-space-1, 4px);padding:var(--dyte-space-2, 8px);flex:1 1 auto;overflow-y:auto}.channel{flex-shrink:0;box-sizing:border-box;border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent;outline:2px solid transparent;outline-offset:2px;cursor:pointer;border-radius:var(--dyte-border-radius-md, 8px);display:flex;align-items:center;justify-content:space-between;gap:var(--dyte-space-2, 8px);height:var(--dyte-space-16, 64px);width:100%;padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-3, 12px);color:rgb(var(--dyte-colors-text-1000, 255 255 255));transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.channel:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.channel .channel-data{flex:1 1 0%;align-items:center;justify-content:space-between;display:flex;gap:var(--dyte-space-2, 8px)}.channel .name,.channel .last-message{text-align:left;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.channel .no-message{font-style:italic}.channel dyte-avatar{height:var(--dyte-space-12, 48px);width:var(--dyte-space-12, 48px);overflow:clip;border-radius:9999px;font-size:14px}.channel .avatar-icon{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px);padding:var(--dyte-space-3, 12px);color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)));overflow:clip;border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity))}.channel time,.channel .last-message{font-size:12px;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.channel.active{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.channel.active .unread-count{background-color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76));--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}.channel.active time{color:rgb(var(--dyte-colors-text-on-brand-800, var(--dyte-colors-text-800, 255 255 255 / 0.76)))}.channel.active .last-message{color:rgb(var(--dyte-colors-text-on-brand-700, var(--dyte-colors-text-700, 255 255 255 / 0.64)))}.channel.active dyte-avatar{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.col{gap:var(--dyte-space-1, 4px);display:flex;flex-direction:column}.channel-meta{flex-shrink:0;align-items:flex-end}@keyframes slide-down{from{transform:translateY(-50px)}to{transform:translateY(0%)}}";const x=class{constructor(e){(0,a.r)(this,e),this.onNewMessage=(0,a.c)(this,"newMessage",7),this.onEditMessage=(0,a.c)(this,"editMessage",7),this.onEditCancel=(0,a.c)(this,"editCancel",7),this.onQuotedMessageDismiss=(0,a.c)(this,"quotedMessageDismiss",7),this.textMessage="",this.sendFile=()=>{this.canSendFiles&&("image"===this.fileToUpload.type?this.onNewMessage.emit({type:"image",file:this.fileToUpload.file}):this.onNewMessage.emit({type:"file",file:this.fileToUpload.file}),this.fileToUpload=null)},this.handleSendMessage=()=>{if(!this.canSendTextMessage)return;if(null!==this.fileToUpload)return void this.sendFile();const e=this.textMessage;e.length>0&&(this.quotedMessage.length,this.onNewMessage.emit({type:"text",message:e}),this.cleanup())},this.handleEditMessage=()=>{this.onEditMessage.emit(this.textMessage),this.cleanup()},this.handleEditCancel=()=>{this.onEditCancel.emit(),this.cleanup()},this.onTextChangeHandler=e=>{this.textMessage=e.detail,r.g.setItem(this.storageKey,e.detail)},this.onKeyDownHandler=e=>{"Enter"===e.key&&e.shiftKey||"Enter"===e.key&&(e.preventDefault(),this.isEditing?this.handleEditMessage():this.handleSendMessage())},this.onFileUploadHandler=(e,t)=>{this.fileToUpload={type:e,file:t}},this.onQuotedMessageDismissHandler=()=>{this.onQuotedMessageDismiss.emit()},this.cleanup=()=>{this.textMessage="",this.fileToUpload=null,r.g.setItem(this.storageKey,""),this.$textComposer.setText("",!0),this.isEmojiPickerOpen=!1},this.canSendTextMessage=!0,this.canSendFiles=!0,this.message="",this.quotedMessage="",this.storageKey="dyte-text-message",this.inputTextPlaceholder="Enter you message",this.isEditing=!1,this.iconPack=n.d,this.t=(0,o.u)(),this.disableEmojiPicker=!1,this.fileToUpload=null,this.isEmojiPickerOpen=!1}connectedCallback(){this.textMessage=this.message||r.g.getItem(this.storageKey)||""}componentWillUpdate(){this.textMessage=this.message||r.g.getItem(this.storageKey)||""}componentDidLoad(){this.message&&(0,a.w)((()=>this.$textComposer.setText(this.message,!0)))}render(){const e={iconPack:this.iconPack,t:this.t};return(0,a.h)(a.H,null,this.canSendTextMessage&&this.isEmojiPickerOpen&&(0,a.h)("dyte-emoji-picker",Object.assign({part:"emoji-picker",onPickerClose:()=>{this.isEmojiPickerOpen=!1},onDyteEmojiClicked:e=>{this.textMessage+=e.detail,this.$textComposer.setText(this.textMessage,!0)}},e)),(0,a.h)("slot",{name:"chat-addon"}),this.quotedMessage&&0!==this.quotedMessage.length&&(0,a.h)("div",{class:"quoted-message-container",part:"quoted-message-container"},(0,a.h)("div",{class:"quoted-message scrollbar"},(0,a.h)("dyte-text-message-view",{text:this.quotedMessage})),(0,a.h)("div",null,(0,a.h)("dyte-icon",Object.assign({"aria-label":this.t("dismiss"),class:"dismiss",icon:this.iconPack.dismiss,onClick:this.onQuotedMessageDismissHandler},e)))),(0,a.h)("div",{class:"composer-container"},(0,a.h)("div",{class:"composers"},this.fileToUpload&&(0,a.h)("dyte-draft-attachment-view",{attachment:this.fileToUpload,onDeleteAttachment:()=>this.fileToUpload=null}),!this.fileToUpload&&(0,a.h)("dyte-text-composer-view",{value:this.textMessage,placeholder:this.inputTextPlaceholder,onTextChange:this.onTextChangeHandler,keyDownHandler:this.onKeyDownHandler,maxLength:d.M,ref:e=>this.$textComposer=e})),(0,a.h)("div",{class:"chat-buttons",part:"chat-buttons"},(0,a.h)("div",{class:"left",part:"chat-buttons-left"},!this.fileToUpload&&!this.isEditing&&(0,a.h)("div",null,this.canSendFiles&&[(0,a.h)("dyte-file-picker-button",{onFileChange:e=>this.onFileUploadHandler("file",e.detail)}),(0,a.h)("dyte-file-picker-button",{filter:"image/*",label:this.t("chat.send_img"),icon:"image",onFileChange:e=>this.onFileUploadHandler("image",e.detail)})],this.canSendTextMessage&&!this.disableEmojiPicker&&(0,a.h)("dyte-emoji-picker-button",{isActive:this.isEmojiPickerOpen,onClick:()=>{this.isEmojiPickerOpen=!this.isEmojiPickerOpen}}),(0,a.h)("slot",{name:"chat-buttons"}))),(0,a.h)("div",{class:"right",part:"chat-buttons-right"},!this.isEditing&&(0,a.h)("dyte-tooltip",Object.assign({variant:"primary",label:this.t("chat.send_msg"),delay:2e3},e),(0,a.h)("dyte-button",Object.assign({kind:"icon",onClick:()=>this.handleSendMessage(),title:this.t("chat.send_msg")},e),(0,a.h)("dyte-icon",{icon:this.iconPack.send}))),this.isEditing&&(0,a.h)("div",{class:"edit-buttons"},(0,a.h)("dyte-tooltip",Object.assign({variant:"secondary",label:this.t("cancel"),delay:2e3},e),(0,a.h)("dyte-button",Object.assign({kind:"icon",variant:"secondary",onClick:()=>this.handleEditCancel(),title:this.t("cancel")},e),(0,a.h)("dyte-icon",{icon:this.iconPack.dismiss}))),(0,a.h)("dyte-tooltip",Object.assign({variant:"primary",label:this.t("chat.update_msg"),delay:2e3},e),(0,a.h)("dyte-button",Object.assign({kind:"icon",onClick:()=>this.handleEditMessage(),title:this.t("chat.send_msg")},e),(0,a.h)("dyte-icon",{icon:this.iconPack.checkmark}))))))))}};x.style=":host{display:flex;flex-direction:column;font-family:var(--dyte-font-family, sans-serif);font-size:14px;position:relative}.quoted-message-container{margin-bottom:var(--dyte-space-2, 8px);display:flex;justify-content:space-between;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));border-radius:var(--dyte-border-radius-md, 8px);border:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60))}.quoted-message-container .quoted-message{flex:1 1 0%;padding:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-md, 8px);max-height:var(--dyte-space-24, 96px);overflow-y:auto;word-break:break-all}.quoted-message-container .quoted-message blockquote{display:none}.quoted-message-container dyte-icon.dismiss{margin-left:auto;height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);padding:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-md, 8px);color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.quoted-message-container dyte-icon.dismiss:hover{cursor:pointer;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.quoted-message-container dyte-icon.dismiss{transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.composer-container{position:relative;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));border-radius:var(--dyte-border-radius-md, 8px);overflow:hidden;border:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60))}.composer-container>.composers{min-height:60px}.chat-buttons{padding:var(--dyte-space-3, 12px);display:flex;align-items:center;justify-content:space-between;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.chat-buttons .right{z-index:10}.chat-buttons .right .edit-buttons{display:flex;gap:var(--dyte-space-2, 8px)}.chat-buttons>div{display:flex;align-items:center}dyte-emoji-picker{z-index:20;position:absolute;top:calc(var(--dyte-space-72, 288px) * -1);border-top:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60));animation:0.3s slide-up ease}@keyframes slide-up{from{transform:translateY(100%)}to{transform:translateY(0%)}}";const k=class{constructor(e){(0,a.r)(this,e),this.observingEl=[],this.autoScrollEnabled=!0,this.onScroll=e=>{const t=e.target;(0,a.w)((()=>{const{scrollTop:e,clientHeight:i,scrollHeight:a}=t;e+i+10>=a?(this.autoScrollEnabled=!0,this.showLatestMessageButton=!1):this.autoScrollEnabled=!1}))},this.scrollToBottom=()=>{(0,p.s)(this.$chat)},this.observeMessage=e=>{e&&this.observingEl.push(e);try{this.intersectionObserver.observe(e)}catch(t){}},this.selectedGroup=void 0,this.messages=[],this.selfUserId=void 0,this.size=void 0,this.iconPack=n.d,this.t=(0,o.u)(),this.now=new Date,this.showLatestMessageButton=!1}connectedCallback(){var e;this.lastReadTimestamp=null!==(e=l.c.everyone)&&void 0!==e?e:new Date("0001-01-01T00:00:00Z"),this.intersectionObserver=new IntersectionObserver((e=>{document.hasFocus()&&(0,a.w)((()=>{for(const t of e)if(t.isIntersecting){parseInt(t.target.getAttribute("data-timestamp"))>this.lastReadTimestamp.getTime()&&(l.c[this.selectedGroup]=new Date)}}))}));const t=()=>{this.now=new Date,this.timeout=setTimeout((()=>{null!=this.request&&(this.request=requestAnimationFrame(t))}),6e4)};this.request=requestAnimationFrame(t),this.chatChanged(this.messages)}componentDidLoad(){this.$chat.addEventListener("scroll",this.onScroll),this.$chat.scrollTop=this.$chat.scrollHeight}componentDidRender(){this.autoScrollEnabled?(0,p.s)(this.$chat):null==this.autoScrollEnabled&&(0,p.s)(this.$chat,!1)}chatChanged(e){if(null!=this.$chat&&!this.autoScrollEnabled&&this.$chat.clientHeight!==this.$chat.scrollHeight)for(let t=e.length-1;t>=0;t--)if(e[t].message.time>this.lastReadTimestamp&&e[t].message.userId!==this.selfUserId){this.showLatestMessageButton=!0;break}}selectedBucketChanged(){this.autoScrollEnabled=void 0,this.observingEl.forEach((e=>{this.intersectionObserver.unobserve(e)})),this.observingEl=[]}disconnectedCallback(){this.$chat.removeEventListener("scroll",this.onScroll),this.intersectionObserver.disconnect(),clearTimeout(this.timeout),cancelAnimationFrame(this.request)}render(){var e;let t=null,i=!1;return(0,a.h)(a.H,null,(0,a.h)("div",{class:"chat-container scrollbar",ref:e=>this.$chat=e,part:"container"},(0,a.h)("div",{class:"spacer",part:"spacer"}),(0,a.h)("div",{class:"chat",part:"chat"},null===(e=this.messages)||void 0===e?void 0:e.map((e=>{if("chat"===e.type){const{message:s}=e,n=!(s.userId===this.selfUserId)&&!this.autoScrollEnabled&&!i&&s.time>this.lastReadTimestamp;n&&(i=n);const o=!n&&s.userId===(null==t?void 0:t.userId)&&(0,h.d)(s.time,null==t?void 0:t.time)<2;switch(t=s,s.type){case"text":return(0,a.h)("div",{"is-continued":o,key:e.message.id},n&&(0,a.h)("div",{class:"new-chat-marker",part:"new-chat-marker"},this.t("chat.new")),(0,a.h)("dyte-text-message",{message:s,now:this.now,isContinued:o,"data-timestamp":s.time.getTime(),ref:this.observeMessage,iconPack:this.iconPack,t:this.t}));case"image":return(0,a.h)("div",{"is-continued":o,key:e.message.id},n&&(0,a.h)("div",{class:"new-chat-marker",part:"new-chat-marker"},this.t("chat.new")),(0,a.h)("dyte-image-message",{message:s,now:this.now,isContinued:o,iconPack:this.iconPack,"data-timestamp":s.time.getTime(),ref:this.observeMessage,t:this.t}));case"file":return(0,a.h)("div",{"is-continued":o,key:e.message.id},n&&(0,a.h)("div",{class:"new-chat-marker",part:"new-chat-marker"},this.t("chat.new")),(0,a.h)("dyte-file-message",{message:s,now:this.now,isContinued:o,iconPack:this.iconPack,t:this.t,"data-timestamp":s.time.getTime(),ref:this.observeMessage}))}}return null})))),(0,a.h)("div",{class:"show-new-messages-ctr"},(0,a.h)("dyte-button",{class:{"show-new-messages":!0,active:this.showLatestMessageButton},kind:"icon",part:"show-new-messages",onClick:this.scrollToBottom,iconPack:this.iconPack,t:this.t},(0,a.h)("dyte-icon",{icon:this.iconPack.chevron_down,iconPack:this.iconPack,t:this.t}))))}static get watchers(){return{messages:["chatChanged"],selectedGroup:["selectedBucketChanged"]}}};k.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))\n    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{position:relative;display:flex;flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));word-break:break-word}.chat-container{box-sizing:border-box;display:flex;flex-direction:column;padding-top:var(--dyte-space-4, 16px);padding-bottom:var(--dyte-space-4, 16px);flex:1 0 0px;overflow-y:scroll}.chat-container .spacer{flex:1 1 auto}.chat-container .chat{flex:0 0 auto}.file-picker{display:none}.chat *:first-child{margin-top:var(--dyte-space-0, 0px)}.chat .head{display:flex;align-items:center}.chat .head .name{margin-right:var(--dyte-space-4, 16px);font-size:12px;font-weight:700}.chat .head .time{font-size:12px;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.chat .body{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);overflow-wrap:break-word;font-size:14px;line-height:1.375}.chat .body .emoji{font-size:24px}p{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-3, 12px)}dyte-text-message,dyte-image-message,dyte-file-message{margin-top:var(--dyte-space-4, 16px);display:block;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));box-sizing:border-box}*[is-continued]{margin-top:var(--dyte-space-3, 12px)}dyte-text-message[is-continued]{margin-top:var(--dyte-space-2, 8px)}.chat .image{position:relative;height:var(--dyte-space-40, 160px);max-width:var(--dyte-space-64, 256px);cursor:pointer}.chat .image img{display:none;height:100%;width:100%;border-radius:var(--dyte-border-radius-sm, 4px);-o-object-fit:cover;object-fit:cover}.chat .image .image-spinner{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.chat .image .image-spinner dyte-spinner{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}.chat .image .image-errored{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);background-color:rgba(var(--dyte-colors-danger, 255 45 45) / 0.1);--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}.chat .image .actions{display:none;height:var(--dyte-space-8, 32px);align-items:center;position:absolute;top:var(--dyte-space-2, 8px);right:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.chat .image .actions .action{height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);border-radius:var(--dyte-border-radius-none, 0);border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.chat .image .actions .action:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.image.loaded img{display:block}.image.loaded .image-spinner{display:none}.image:hover .actions,.image:focus .actions{display:flex}.chat .file{display:flex;align-items:center;gap:var(--dyte-space-1, 4px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);padding-top:var(--dyte-space-1\\.5, 6px);padding-bottom:var(--dyte-space-1\\.5, 6px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.chat .file .file-data{flex:1 1 0%}.chat .file .file-data .name{word-break:break-all;color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.chat .file .file-data .file-data-split{margin-top:var(--dyte-space-0\\.5, 2px);display:flex;align-items:center;font-size:12px}.chat .file .file-data .file-data-split .ext{margin-right:var(--dyte-space-2, 8px);text-transform:uppercase;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.chat .file .file-data .file-data-split .divider{height:var(--dyte-space-4, 16px);width:var(--dyte-space-0\\.5, 2px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.chat .file .file-data .file-data-split .size{margin-left:var(--dyte-space-2, 8px)}a{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity));-webkit-text-decoration-line:none;text-decoration-line:none}a:hover{-webkit-text-decoration-line:underline;text-decoration-line:underline}.new-chat-marker{display:flex;width:100%;align-items:center;gap:var(--dyte-space-2, 8px);--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity))}.new-chat-marker::before{content:'';height:1px;flex:1 1 0%;background-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / 0.5)}.show-new-messages-ctr{pointer-events:none;display:flex;justify-content:flex-end;padding:var(--dyte-space-3, 12px);z-index:0;margin-top:calc(var(--dyte-space-14, 56px) * -1)}.show-new-messages{pointer-events:auto;--tw-translate-y:calc(var(--dyte-space-6, 24px) * -1);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));opacity:0;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.show-new-messages.active{--tw-translate-y:var(--dyte-space-0, 0px);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));opacity:1}";const C=class{constructor(e){(0,a.r)(this,e),this.editMessageInit=(0,a.c)(this,"editMessageInit",7),this.pageSize=25,this.lastReadMessageIndex=-1,this.maybeMarkChannelAsRead=e=>{if(!this.selectedChannelId)return;if(0===e.length)return;if(-1!==this.lastReadMessageIndex)return;const t=e.at(0).time>e.at(-1).time?e.at(0):e.at(-1);t.channelIndex&&(this.lastReadMessageIndex=parseInt(t.channelIndex,10),this.meeting.chat.markLastReadMessage(this.selectedChannelId,t))},this.getChatMessages=async(e,t,i)=>{const{messages:a}=await this.meeting.chat.getMessages(e,t,i,void 0,this.selectedChannelId);return this.maybeMarkChannelAsRead(a),a},this.createChatNodes=e=>e.map(((t,i)=>{var a;const s=t.userId===(null===(a=e[i-1])||void 0===a?void 0:a.userId);return this.createChatNode(t,s)})),this.disconnectMeeting=e=>{var t;null===(t=null==e?void 0:e.chat)||void 0===t||t.removeListener("chatUpdate",this.chatUpdateListener)},this.createChatNode=(e,t)=>{var i,s,n;const o=this.meeting.self.userId===e.userId,r=null===(i=this.meeting.self.permissions)||void 0===i?void 0:i.chatMessage,c=void 0===r?o:"ALL"===r.canEdit||"SELF"===r.canEdit&&o,d=void 0===r?o:"ALL"===r.canDelete||"SELF"===r.canDelete&&o;return(0,a.h)("dyte-chat-message",{message:e,isContinued:t,isUnread:!1,size:this.size,iconPack:this.iconPack,key:e.id,isSelf:o,alignRight:o&&"CHAT"===this.meeting.meta.viewType,disableControls:"CHAT"!==this.meeting.meta.viewType,senderDisplayPicture:null===(s=this.meeting.participants.all.toArray().find((t=>t.userId===e.userId)))||void 0===s?void 0:s.picture,hideAvatar:o&&"CHAT"===this.meeting.meta.viewType||(null===(n=this.selectedChannel)||void 0===n?void 0:n.isDirectMessage),canEdit:c&&"text"===e.type,canDelete:d,canReply:"text"===e.type,onEdit:()=>{"text"===e.type&&this.editMessageInit.emit({payload:e,flags:{isEdit:!0}})},onReply:()=>{"text"===e.type&&this.editMessageInit.emit({payload:e,flags:{isReply:!0}})},onDelete:async()=>{var t;await this.meeting.chat.deleteMessage(e.id,null===(t=this.selectedChannel)||void 0===t?void 0:t.id).catch((()=>{}))}})},this.chatUpdateListener=e=>{this.selectedChannelId&&e.message.channelId!==this.selectedChannelId||("add"===e.action?(this.$paginatedListRef.onNewNode(e.message),this.lastReadMessageIndex=-1,this.maybeMarkChannelAsRead([e.message])):"delete"===e.action?this.$paginatedListRef.onNodeDelete(e.message.id):"edit"===e.action&&this.$paginatedListRef.onNodeUpdate(e.message.id,e.message))},this.meeting=void 0,this.selectedChannel=void 0,this.selectedChannelId=void 0,this.size=void 0,this.iconPack=n.d,this.t=(0,o.u)()}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){this.disconnectMeeting(this.meeting)}meetingChanged(e,t){var i;null!=t&&this.disconnectMeeting(t),e&&!e.chat||null!=e&&(null===(i=e.chat)||void 0===i||i.addListener("chatUpdate",this.chatUpdateListener))}channelChanged(){this.lastReadMessageIndex=-1}render(){return(0,a.h)(a.H,null,(0,a.h)("dyte-paginated-list",{ref:e=>this.$paginatedListRef=e,pageSize:this.pageSize,pagesAllowed:3,fetchData:this.getChatMessages,createNodes:this.createChatNodes,selectedItemId:this.selectedChannelId,emptyListLabel:this.t("chat.empty_channel")}))}static get watchers(){return{meeting:["meetingChanged"],selectedChannelId:["channelChanged"]}}};C.style=":host{display:flex;flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));flex:1 0 0px}";const _=class{constructor(e){(0,a.r)(this,e),this.pageSize=50,this.searchMessages=async(e,t,i)=>this.meeting.chat.searchMessages(this.query,{channelId:this.channelId,timestamp:e,size:t,reversed:i}),this.nodeRenderer=e=>e.map((e=>(0,a.h)("dyte-chat-message",{key:e.id,message:e,disableControls:!0}))),this.meeting=void 0,this.query=void 0,this.channelId=void 0,this.iconPack=n.d,this.t=(0,o.u)()}render(){return(0,a.h)(a.H,null,(0,a.h)("dyte-paginated-list",{pageSize:this.pageSize,pagesAllowed:3,fetchData:this.searchMessages,createNodes:this.nodeRenderer,selectedItemId:this.query}))}};_.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:100%;flex-direction:column;position:relative;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}";const D=class{constructor(e){(0,a.r)(this,e),this.stateUpdate=(0,a.c)(this,"dyteStateUpdate",7),this.onDyteDialogClose=(e,t)=>{m.s[e]=t,this.stateUpdate.emit({[e]:t})},this.cancelJoinStage=async()=>{var e,t,i;"ACCEPTED_TO_JOIN_STAGE"===(null===(e=this.meeting.stage)||void 0===e?void 0:e.status)&&await(null===(i=null===(t=this.meeting)||void 0===t?void 0:t.stage)||void 0===i?void 0:i.leave()),this.onDyteDialogClose("activeJoinStage",!1)},this.joinStage=async()=>{await this.meeting.stage.join()},this.stageStatusUpdateListener=e=>{var t;!0===(null===(t=this.states)||void 0===t?void 0:t.activeJoinStage)&&"ON_STAGE"===e&&this.onDyteDialogClose("activeJoinStage",!1)},this.meeting=void 0,this.config=g.d,this.states=void 0,this.size=void 0,this.iconPack=n.d,this.t=(0,o.u)()}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){this.meeting.stage.removeListener("stageStatusUpdate",this.stageStatusUpdateListener)}meetingChanged(e){if(null==e)return;const{stage:t}=e;t.addListener("stageStatusUpdate",this.stageStatusUpdateListener)}render(){var e,t,i,s;const n={meeting:this.meeting,states:this.states||m.s,config:this.config,size:this.size,iconPack:this.iconPack,t:this.t},o=this.states||m.s;if(null!=(null==o?void 0:o.image)){const e=o.image,t=()=>{this.stateUpdate.emit({image:null}),m.s.image=null};return(0,a.h)(a.H,null,(0,a.h)("dyte-dialog",{open:!0,onDyteDialogClose:t,hideCloseButton:!0,iconPack:this.iconPack,t:this.t},(0,a.h)(u.R,{element:"dyte-image-viewer",defaults:n,props:{image:e,onClose:t}})))}if(!0===(null==o?void 0:o.activeSettings))return(0,a.h)(a.H,null,(0,a.h)("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.onDyteDialogClose("activeSettings",!1),iconPack:this.iconPack,t:this.t},(0,a.h)(u.R,{element:"dyte-settings",defaults:n})));if(!0===(null==o?void 0:o.activeDebugger))return(0,a.h)(a.H,null,(0,a.h)("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.onDyteDialogClose("activeDebugger",!1),iconPack:this.iconPack,t:this.t},(0,a.h)(u.R,{element:"dyte-debugger",defaults:n})));if(!0===(null==o?void 0:o.activeLeaveConfirmation))return(0,a.h)(a.H,null,(0,a.h)("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.onDyteDialogClose("activeLeaveConfirmation",!1),iconPack:this.iconPack,t:this.t},(0,a.h)(u.R,{element:"dyte-leave-meeting",defaults:n})));if(!0===(null===(e=null==o?void 0:o.activePermissionsMessage)||void 0===e?void 0:e.enabled))return(0,a.h)(a.H,null,(0,a.h)("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.onDyteDialogClose("activePermissionsMessage",{enabled:!1}),iconPack:this.iconPack,t:this.t},(0,a.h)(u.R,{element:"dyte-permissions-message",defaults:n})));if(!0===(null==o?void 0:o.activeRemoteAccessManager))return(0,a.h)(a.H,null,(0,a.h)("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.onDyteDialogClose("activeRemoteAccessManager",!1),iconPack:this.iconPack,t:this.t},(0,a.h)(u.R,{element:"dyte-remote-access-manager",defaults:n})));if(!0===(null===(t=null==o?void 0:o.activeBreakoutRoomsManager)||void 0===t?void 0:t.active))return(0,a.h)(a.H,null,(0,a.h)("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.onDyteDialogClose("activeBreakoutRoomsManager",{active:!1,data:void 0}),iconPack:this.iconPack,t:this.t},(0,a.h)(u.R,{element:"dyte-breakout-rooms-manager",defaults:n,props:{mode:this.meeting.connectedMeetings.isActive?"view":"create"}})));if(!0===(null===(i=null==o?void 0:o.activeConfirmationModal)||void 0===i?void 0:i.active))return(0,a.h)(a.H,null,(0,a.h)("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.onDyteDialogClose("activeConfirmationModal",!1),iconPack:this.iconPack,t:this.t},(0,a.h)(u.R,{element:"dyte-confirmation-modal",defaults:n})));if(!0===(null===(s=null==o?void 0:o.activeOverlayModal)||void 0===s?void 0:s.active))return(0,a.h)(a.H,null,(0,a.h)("dyte-overlay-modal",{meeting:this.meeting,states:this.states,iconPack:this.iconPack,t:this.t}));if(null==o?void 0:o.activeBroadcastMessageModal)return(0,a.h)(a.H,null,(0,a.h)("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.onDyteDialogClose("activeBroadcastMessageModal",!1),iconPack:this.iconPack,t:this.t},(0,a.h)(u.R,{element:"dyte-broadcast-message-modal",defaults:n})));if(!0===(null==o?void 0:o.activeJoinStage)){const e={title:this.t("stage.join_title"),label:{accept:this.t("stage.join_confirm"),reject:this.t("stage.join_cancel")},description:this.t("stage.join_summary")};return(0,a.h)(a.H,null,(0,a.h)("dyte-dialog",{open:!0,onDyteDialogClose:this.cancelJoinStage,iconPack:this.iconPack,t:this.t},(0,a.h)("dyte-join-stage",Object.assign({dataConfig:e,onDyteJoinStage:this.joinStage,onDyteLeaveStage:this.cancelJoinStage},n))))}return!0===(null==o?void 0:o.activeMuteAllConfirmation)?(0,a.h)(a.H,null,(0,a.h)("dyte-dialog",{open:!0,onDyteDialogClose:()=>{this.onDyteDialogClose("activeMuteAllConfirmation",!1)},iconPack:this.iconPack,t:this.t},(0,a.h)(u.R,{element:"dyte-mute-all-confirmation",defaults:n}))):(null==o?void 0:o.activeChannelCreator)?(0,a.h)(a.H,null,(0,a.h)("dyte-dialog",{open:!0,onDyteDialogClose:()=>{this.onDyteDialogClose("activeChannelCreator",!1)},iconPack:this.iconPack,t:this.t},(0,a.h)(u.R,{element:"dyte-channel-creator",defaults:n}))):null}static get watchers(){return{meeting:["meetingChanged"]}}};D.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}";const L=2e3,P=Object.freeze({notifications:{participant_joined:!0,participant_left:!0,participant_joined_waitlist:!0,chat:!0,polls:!0,webinar:!0,tab_sync:!0},notification_sounds:{participant_joined:!0,participant_left:!0,chat:!0,polls:!0,webinar:!0,participant_joined_waitlist:!0},notification_duration:{participant_joined:2100,participant_left:2100,participant_joined_waitlist:4e3,chat:L,polls:L,webinar:L,tab_sync:L},participant_joined_sound_notification_limit:10,participant_chat_message_sound_notification_limit:10});function E(e){return Object.keys(e).filter((t=>e[t]))}const S=class{constructor(e){(0,a.r)(this,e),this.permissions=P,this.enabledSounds=E(P.notification_sounds),this.addStagePeersListeners=e=>{e.participants.joined.addListener("participantJoined",this.participantJoinedListener),e.meta.addListener("disconnected",this.networkDisconnectedListener),e.meta.addListener("connected",this.networkConnectedListener),e.participants.joined.addListener("participantLeft",this.participantLeftListener)},this.removeStagePeersListeners=e=>{e.participants.joined.removeListener("participantJoined",this.participantJoinedListener),e.meta.removeListener("disconnected",this.networkDisconnectedListener),e.meta.removeListener("connected",this.networkConnectedListener),e.participants.joined.removeListener("participantLeft",this.participantLeftListener)},this.onRemoteUpdate=({payload:e,type:t})=>{if(t===v.R.INCOMING_REQUEST_ACCEPTED){let t=this.meeting.participants.joined.get(e.request.remotePeerId);this.add({id:`message-${Math.random().toString(36)}`,icon:this.iconPack.chat,message:`Granted remote control to ${t.name}`,duration:L})}if(t===v.R.OUTGOING_REQUEST_ACCEPTED){let t=this.meeting.participants.joined.get(e.request.hostPeerId);this.add({id:`message-${Math.random().toString(36)}`,icon:this.iconPack.chat,message:`${t.name} has granted remote control.`,duration:L})}if(t===v.R.REQUEST_RECEIVED){let t=this.meeting.participants.joined.get(e.request.remotePeerId);this.add({id:`message-${Math.random().toString(36)}`,icon:this.iconPack.chat,message:`${t.name} has requested for remote control.`,duration:L})}if(t!==v.R.INCOMING_REQUEST_ENDED&&t!==v.R.OUTGOING_REQUEST_ENDED||this.add({id:`message-${Math.random().toString(36)}`,icon:this.iconPack.chat,message:"Existing remote control has been terminated.",duration:L}),t===v.R.REQUEST_SENT){let t=this.meeting.participants.joined.get(e.request.hostPeerId);this.add({id:`message-${Math.random().toString(36)}`,icon:this.iconPack.chat,message:`Sent remote control request to ${t.name}`,duration:L})}},this.onDyteNotification=e=>{this.add(e.detail);const t=e.detail.playSound;null!=t&&this.audio.play(t)},this.onRecordingUpdate=e=>{"RECORDING"===e?this.add({id:"recording-started",icon:this.iconPack.recording,message:this.t("recording.started"),duration:L}):"STOPPING"===e&&this.add({id:"recording-stopped",icon:this.iconPack.stop_recording,message:this.t("recording.stopped"),duration:L})},this.meeting=void 0,this.states=void 0,this.config=g.d,this.t=(0,o.u)(),this.size=void 0,this.iconPack=n.d,this.notifications=[]}connectedCallback(){"undefined"!=typeof document&&(null===document||void 0===document||document.addEventListener("dyteNotification",this.onDyteNotification)),this.meetingChanged(this.meeting),this.configChanged(this.config),this.statesChanged(this.states)}clearListeners(e){var t,i,a,s,n,o,r,c,d;const l="LIVESTREAM"===e.meta.viewType;(l&&"ON_STAGE"===(null===(t=e.stage)||void 0===t?void 0:t.status)||!l)&&this.removeStagePeersListeners(e),this.chatUpdateListener&&(null===(i=e.chat)||void 0===i||i.removeListener("chatUpdate",this.chatUpdateListener)),this.pollUpdateListener&&(null===(a=e.polls)||void 0===a||a.removeListener("pollsUpdate",this.pollUpdateListener)),this.socketDisconnectedListener&&e.meta.removeListener("socketDisconnected",this.socketDisconnectedListener),this.socketReconnectFailureListener&&e.meta.removeListener("socketReconnectFailure",this.socketReconnectFailureListener),this.socketReconnectedListener&&e.meta.removeListener("socketReconnected",this.socketReconnectedListener),this.socketReconnectingListener&&e.meta.removeListener("socketReconnecting",this.socketReconnectingListener),this.socketFailureListener&&e.meta.removeListener("socketFailure",this.socketFailureListener),this.stageRequestAccepted&&(null===(s=e.stage)||void 0===s||s.removeListener("stageRequestApproved",this.stageRequestAccepted)),this.stageRequestRejected&&(null===(n=e.stage)||void 0===n||n.removeListener("stageRequestRejected",this.stageRequestRejected)),this.newStageRequests&&(null===(o=e.stage)||void 0===o||o.removeListener("newStageRequest",this.newStageRequests)),this.stageStatusUpdateListener&&(null===(r=e.stage)||void 0===r||r.removeListener("stageStatusUpdate",this.stageStatusUpdateListener)),null===(c=e.remote)||void 0===c||c.removeListener("remoteUpdate",this.onRemoteUpdate),null===(d=e.recording)||void 0===d||d.removeListener("recordingUpdate",this.onRecordingUpdate),clearTimeout(this.disconnectTimeout)}disconnectedCallback(){var e;"undefined"!=typeof document&&(null===document||void 0===document||document.removeEventListener("dyteNotification",this.onDyteNotification)),null!=this.meeting&&(this.clearListeners(this.meeting),this.waitlistedParticipantJoinedListener&&this.meeting.participants.waitlisted.removeListener("participantJoined",this.waitlistedParticipantJoinedListener),this.activeTabUpdateListener&&(null===(e=this.meeting.meta)||void 0===e||e.removeListener("activeTabUpdate",this.activeTabUpdateListener)),this.peerStageStatusListener&&this.meeting.participants.joined.removeListener("stageStatusUpdate",this.peerStageStatusListener))}meetingChanged(e,t){var i,a,n,o,r,c,l,h,p;if(clearTimeout(this.disconnectTimeout),void 0!==t&&this.clearListeners(t),null==e)return;const g="LIVESTREAM"===e.meta.viewType;this.audio=new y.D(e);const{notifications:u,notification_duration:m,notification_sounds:v}=this.permissions;if(this.participantJoinedListener=e=>{u.participant_joined&&this.add({id:`${e.id}-joined`,message:`${(0,b.f)(e.name)} just joined`,image:e.picture,duration:m.participant_joined}),v.participant_joined&&this.canPlayParticipantJoinedSound()&&this.audio.play("joined")},this.participantLeftListener=e=>{u.participant_left&&this.add({id:`${e.id}-left`,message:`${(0,b.f)(e.name)} left`,image:e.picture,duration:m.participant_left}),v.participant_left&&this.canPlayParticipantJoinedSound()&&this.audio.play("left")},this.waitlistedParticipantJoinedListener=e=>{const t=`${e.id}-joined-waitlist`;this.add({id:t,message:`${(0,b.f)(e.name)} is requesting to join the meeting`,image:e.picture,duration:m.participant_joined_waitlist,button:{text:"Accept",variant:"secondary",onClick:async()=>{await this.meeting.participants.acceptWaitingRoomRequest(e.id),this.remove(t)}}}),v.participant_joined_waitlist&&this.canPlayParticipantJoinedSound()&&this.audio.play("message")},this.chatUpdateListener=({message:t})=>{const i=(0,d.j)(t);if(null!=i){if(i.userId===e.self.userId)return;"text"===i.type&&(u.chat&&this.add({id:`message-${Math.random().toString(36)}`,icon:this.iconPack.chat,message:`${i.displayName}: ${i.message}`,duration:m.chat}),v.chat&&this.canPlayChatSound()&&this.audio.play("message"))}},this.pollUpdateListener=({polls:e,newPoll:t})=>{!1!==t&&(u.polls&&this.meeting.self.userId!==e[e.length-1].createdByUserId&&this.add({id:`poll-${Math.random().toString(36)}`,icon:this.iconPack.poll,message:`New poll created by ${e[e.length-1].createdBy}`,duration:m.polls}),v.polls&&this.meeting.self.userId!==e[e.length-1].createdByUserId&&this.canPlayChatSound()&&this.audio.play("message"))},this.deviceUpdateListener=({device:e,preview:t})=>{t||("audiooutput"===e.kind?(this.audio.setDevice(e.deviceId),this.add({id:`speaker-switched-${e.deviceId}`,message:`Connected to ${e.label}`,icon:this.iconPack.speaker,duration:5e3})):"videoinput"===e.kind?this.add({id:`camera-switched-${e.deviceId}`,message:`Connected to ${e.label}`,icon:this.iconPack.speaker,duration:5e3}):this.add({id:`mic-switched-${e.deviceId}`,message:`Connected to ${e.label}`,icon:this.iconPack.mic_on,duration:5e3}))},this.networkDisconnectedListener=()=>{let e;this.remove("network"),e=2e4,this.add({id:"network",icon:this.iconPack.disconnected,message:this.t("network.reconnecting"),duration:2e4}),this.disconnectTimeout=setTimeout((()=>{this.add({id:"network-lost",icon:this.iconPack.disconnected,message:this.t("network.delay"),button:{text:this.t("end"),variant:"danger",onClick:()=>{var e;return null===(e=this.meeting)||void 0===e?void 0:e.leaveRoom()}}})}),2e4)},this.networkConnectedListener=()=>{let e;this.remove("network"),this.remove("network-lost"),e=3e3,this.add({id:"network",icon:this.iconPack.wifi,message:this.t("network.restored"),duration:3e3}),clearTimeout(this.disconnectTimeout)},this.socketUpdateListener=({event:e,attempt:t})=>{this.remove("socket"),"reconnected"===e?(this.remove("socketReconnecting"),this.add({id:"socket",icon:this.iconPack.wifi,message:this.t("network.restored"),duration:3e3})):"disconnected"===e?this.add({id:"socket",icon:this.iconPack.disconnected,message:this.t("network.lost"),duration:3e3}):"reconnecting"===e?this.add({id:"socketReconnecting",icon:this.iconPack.disconnected,message:this.t("network.lost_extended")}):"reconnectFailure"===e?t>5&&(this.remove("socketReconnecting"),this.add({id:"socketReconnecting",icon:this.iconPack.disconnected,message:this.t("network.delay_extended"),button:{text:this.t("end"),variant:"danger",onClick:()=>{var e;return null===(e=this.meeting)||void 0===e?void 0:e.leaveRoom()}}})):"failed"===e&&(this.remove("socketReconnecting"),this.add({id:"socketFailed",icon:this.iconPack.disconnected,message:this.t("network.disconnected")}),this.add({id:"leaveMeeting",icon:this.iconPack.warning,message:this.t("network.leaving")}),setTimeout((()=>{var e;null===(e=this.meeting)||void 0===e||e.leaveRoom("disconnected")}),1e4))},this.activeTabUpdateListener=t=>{if(u.tab_sync)switch(t.type){case"plugin":const i=e.plugins.active.toArray().find((e=>e.id==t.id));null!=i&&this.add({id:"activeTab",message:`Plugin switched to ${i.name}`,duration:m.participant_joined});break;case"screenshare":const a=e.participants.joined.toArray().filter((e=>e.screenShareEnabled)).find((e=>e.id==t.id));null!=a&&this.add({id:"spotlight",message:`Now watching ${a.name}'s screen`,duration:m.webinar})}},this.peerStageStatusListener=e=>{"REQUESTED_TO_JOIN_STAGE"===e.stageStatus&&(this.add({id:`stage-request-${e.id}`,message:`${e.name} has requested to join stage`,duration:m.webinar,button:{text:"Accept",variant:"primary",onClick:async()=>{await this.meeting.stage.grantAccess([e.userId]),this.remove(`stage-request-${e.id}`)}}}),v.webinar&&this.audio.play("joined")),"ON_STAGE"===e.stageStatus&&(this.add({id:`stage-joined-${e.id}`,message:`${e.name} has joined stage`,duration:m.webinar}),v.webinar&&this.audio.play("joined"))},this.stageRequestAccepted=()=>{this.add({id:"stage-request-accepted",message:"Request to join accepted",duration:3e3})},this.stageRequestRejected=()=>{this.add({id:"stage-request-rejected",message:"Request to join rejected",duration:3e3})},this.newStageRequests=({count:e})=>{this.add({id:"new-stage-request",message:`You have ${e} pending request${1===e?"":"s"}`,duration:3e3})},this.stageStatusUpdateListener=t=>{"ON_STAGE"===t?this.addStagePeersListeners(e):this.removeStagePeersListeners(e)},this.socketReconnectedListener=()=>this.socketUpdateListener({event:"reconnected"}),this.socketDisconnectedListener=()=>this.socketUpdateListener({event:"disconnected"}),this.socketReconnectingListener=()=>this.socketUpdateListener({event:"reconnecting"}),this.socketFailureListener=()=>this.socketUpdateListener({event:"failed"}),this.socketReconnectFailureListener=({attempt:e})=>this.socketUpdateListener({event:"reconnectFailure",attempt:e}),!(0,s.s)(e)&&(null===(i=e.chat)||void 0===i||i.addListener("chatUpdate",this.chatUpdateListener)),"CHAT"===e.self.config.viewType)return;const f=e.self.getCurrentDevices();null!=f.speaker&&this.audio.setDevice(f.speaker.deviceId),g?null===(a=e.stage)||void 0===a||a.on("stageStatusUpdate",this.stageStatusUpdateListener):this.addStagePeersListeners(e),e.participants.joined.on("stageStatusUpdate",this.peerStageStatusListener),this.canAcceptWaitingRequests()&&e.participants.waitlisted.addListener("participantJoined",this.waitlistedParticipantJoinedListener),null===(n=e.polls)||void 0===n||n.addListener("pollsUpdate",this.pollUpdateListener),e.self.addListener("deviceUpdate",this.deviceUpdateListener),e.meta.addListener("socketReconnected",this.socketReconnectedListener),e.meta.addListener("socketDisconnected",this.socketDisconnectedListener),e.meta.addListener("socketReconnecting",this.socketReconnectingListener),e.meta.addListener("socketFailure",this.socketFailureListener),e.meta.addListener("socketReconnectFailure",this.socketReconnectFailureListener),null===(o=e.remote)||void 0===o||o.addListener("remoteUpdate",this.onRemoteUpdate),null===(r=e.meta)||void 0===r||r.addListener("activeTabUpdate",this.activeTabUpdateListener),null===(c=e.recording)||void 0===c||c.addListener("recordingUpdate",this.onRecordingUpdate),null===(l=e.stage)||void 0===l||l.addListener("stageRequestApproved",this.stageRequestAccepted),null===(h=e.stage)||void 0===h||h.addListener("stageRequestRejected",this.stageRequestRejected),e.self.permissions.acceptPresentRequests&&(null===(p=e.stage)||void 0===p||p.addListener("newStageRequest",this.newStageRequests))}configChanged(e){null!=e&&null!=(null==e?void 0:e.config)&&(this.permissions=function(e){const t=Object.assign({},P);return null==e||(Object.assign(t.notification_sounds,e.notification_sounds),Object.assign(t.notifications,e.notifications),Object.assign(t.notification_duration,e.notification_duration),t.participant_chat_message_sound_notification_limit=e.participant_chat_message_sound_notification_limit,t.participant_joined_sound_notification_limit=e.participant_joined_sound_notification_limit),t}(e.config),this.enabledSounds=E(this.permissions.notification_sounds))}statesChanged(e){var t;if(null!=e){const i=!(null===(t=null==e?void 0:e.prefs)||void 0===t?void 0:t.muteNotificationSounds);for(const e of this.enabledSounds)e in this.permissions.notification_sounds&&(this.permissions.notification_sounds[e]=i)}}apiErrorListener({detail:e}){const{trace:t,message:i}=e;this.add({id:t,message:i,duration:L,icon:this.iconPack.warning})}sendNotificationListener({detail:e}){const{trace:t,message:i}=e;this.add({id:t,message:i,duration:L})}add(e){"visible"===document.visibilityState&&this.notifications.length<5&&(this.notifications=[...this.notifications,e])}remove(e){this.notifications=this.notifications.filter((t=>t.id!==e))}handleDismiss(e){e.stopPropagation();const t=e.detail,i=this.host.shadowRoot.querySelector(`[data-id="${t}"]`);null==i||i.classList.add("exit"),setTimeout((()=>{(0,a.w)((()=>{this.remove(t)}))}),400)}canPlayParticipantJoinedSound(){return null==this.permissions.participant_joined_sound_notification_limit||this.permissions.participant_joined_sound_notification_limit<=0||this.meeting.participants.count<=this.permissions.participant_joined_sound_notification_limit}canPlayChatSound(){return null==this.permissions.participant_chat_message_sound_notification_limit||this.permissions.participant_chat_message_sound_notification_limit<=0||this.meeting.participants.count<=this.permissions.participant_chat_message_sound_notification_limit}canAcceptWaitingRequests(){return this.permissions.notifications.participant_joined_waitlist&&this.meeting.self.permissions.acceptWaitingRequests}render(){return(0,a.h)(a.H,null,this.notifications.map((e=>(0,a.h)("dyte-notification",{size:this.size,key:e.id,"data-id":e.id,notification:e,onDyteNotificationDismiss:e=>this.handleDismiss(e),iconPack:this.iconPack,t:this.t}))))}get host(){return(0,a.g)(this)}static get watchers(){return{meeting:["meetingChanged"],config:["configChanged"],states:["statesChanged"]}}};S.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:absolute;top:var(--dyte-space-4, 16px);right:var(--dyte-space-4, 16px);bottom:var(--dyte-space-4, 16px);left:var(--dyte-space-4, 16px);top:auto;display:flex;flex-direction:column;pointer-events:none;z-index:100}dyte-notification{margin-top:var(--dyte-space-2, 8px)}"},43367:(e,t,i)=>{var a;i.d(t,{R:()=>a}),function(e){e.REQUEST_RECEIVED="REQUEST_RECEIVED",e.REQUEST_SENT="REQUEST_SENT",e.INCOMING_REQUEST_ACCEPTED="INCOMING_REQUEST_ACCEPTED",e.OUTGOING_REQUEST_ACCEPTED="OUTGOING_REQUEST_ACCEPTED",e.INCOMING_REQUEST_ENDED="INCOMING_REQUEST_ENDED",e.OUTGOING_REQUEST_ENDED="OUTGOING_REQUEST_ENDED"}(a||(a={}))},67341:(e,t,i)=>{i.d(t,{R:()=>c,l:()=>r});var a=i(37176);const s=({element:e,size:t,states:i={},config:a={}})=>{let s=[];const n=null==a?void 0:a.root[e],o=e=>{s.push(e),"string"==typeof t&&s.push(`${e}.${t}`)};if(o(e),"object"==typeof n&&!Array.isArray(n)&&null!==n){const{state:t,states:a}=n;let s=e,r=[];if(Array.isArray(a)){r=a.filter((e=>i[e])),r.sort();for(const e of r)o(`${s}.${e}`);if(r.length>1){o([s,...r].join("."))}}if("string"==typeof t){const a=`${e}[${t}=${i[t]}]`;o(a);for(const e of r)o(`${a}.${e}`);if(r.length>1){o([a,...r].join("."))}}}return s},n=({selectors:e,root:t})=>{if(!t||!Array.isArray(e))return[];let i=[];for(const a of e){const e=t[a];if(Array.isArray(e))i=[...e];else if(e){if(e.children&&(i=[...e.children]),Array.isArray(e.remove))for(const t of e.remove)i=i.filter((e=>"string"==typeof e?e!==t:!Array.isArray(e)||e[0]!==t));if(e.addBefore)for(const[t,a]of Object.entries(e.addBefore)){const e=i.findIndex((e=>"string"==typeof e?e===t:!!Array.isArray(e)&&e[0]===t));e>=0&&i.splice(e,0,...a)}Array.isArray(e.add)&&(i=i.concat(e.add)),Array.isArray(e.prepend)&&(i=e.prepend.concat(i))}}return i},o=({elements:e,defaults:t,props:i={},deepProps:s=!1,elementProps:n={}})=>Array.isArray(e)&&0!==e.length?e.map((e=>(0,a.h)(c,{element:e,defaults:t,props:i,childProps:s&&i,elementProps:n}))):null,r=({element:e,defaults:t,props:i={},elementProps:a={}})=>{var o;const{config:r,size:c,states:d}=t;let l,h={},p=[];Array.isArray(e)?[l,h,...p]=e:l=e;const g=null===(o=null==r?void 0:r.root)||void 0===o?void 0:o[l];null!=g&&"props"in g&&(i=Object.assign(Object.assign({},g.props),i)),i=Object.assign(Object.assign({},i),h),l in a&&(i=Object.assign(Object.assign({},i),a[l]));const u=s({element:l,size:c,states:d,config:r});return n({selectors:u,root:r.root}).length},c=({element:e,defaults:t,childProps:i={},props:r={},onlyChildren:c=!1,asHost:d=!1,deepProps:l=!1,elementProps:h={}},p)=>{var g;const{config:u,size:m,states:v}=t;let y,b={},f=[];Array.isArray(e)?[y,b,...f]=e:y=e;const w=null===(g=null==u?void 0:u.root)||void 0===g?void 0:g[y];null!=w&&"props"in w&&(r=Object.assign(Object.assign({},w.props),r)),r=Object.assign(Object.assign({},r),b),y in h&&(r=Object.assign(Object.assign({},r),h[y]));const x=s({element:y,size:m,states:v,config:u}),k=n({selectors:x,root:u.root});if(c)return(0,a.h)(o,{elements:k,defaults:t,props:i,deepProps:l,elementProps:h});const C=(({selectors:e,styles:t})=>{if(!Array.isArray(e)||null==t)return{};const i={};for(const a of e){const e=t[a];null!=e&&Object.assign(i,e)}return i})({selectors:x,styles:u.styles});if(d)return(0,a.h)(a.H,Object.assign({},t,{style:C},r),(0,a.h)(o,{elements:k,defaults:t,props:i,deepProps:l,elementProps:h}),p,f.map((e=>{if(Array.isArray(e)){const[i,s]=e;return(0,a.h)(i,Object.assign({},t,s))}return e})));if(["dyte-header","dyte-controlbar"].includes(y)&&(r.disableRender=!0),y.startsWith("dyte-"))return(0,a.h)(y,Object.assign({},t,{style:C},r),(0,a.h)(o,{elements:k,defaults:t,props:i,deepProps:l,elementProps:h}),p,f.map((e=>{if(Array.isArray(e)){const[i,s]=e;return(0,a.h)(i,Object.assign({},t,s))}return e})));{const[e,s]=y.split("#");return(0,a.h)(e,Object.assign({id:s,style:C},r),(0,a.h)(o,{elements:k,defaults:t,props:i,deepProps:l,elementProps:h}),p,f.map((e=>{if(Array.isArray(e)){const[i,s]=e;return(0,a.h)(i,Object.assign({},t,s))}return e})))}}},82321:(e,t,i)=>{i.d(t,{s:()=>a});const a=(e,t=!0)=>{null!=e&&e.scrollTo({top:e.scrollHeight,behavior:t?"smooth":"auto"})}},22906:(e,t,i)=>{i.d(t,{a:()=>n,f:()=>o,g:()=>r,h:()=>s,s:()=>a});const a=(e,t=20)=>null==e?"":e.length>t?`${e.substring(0,t)}...`:e,s=e=>/^\p{Emoji}+$/u.test(e)&&!/^\d+$/.test(e),n=e=>(null==e?void 0:e.trim().toLowerCase().startsWith("javascript:"))?"https://dyte.io":e,o=e=>""===(e=null==e?void 0:e.trim())?"Participant":e;function r(e,t=2){return e.replace(/[^\u00BF-\u1FFF\u2C00-\uD7FF\w\s]/g,"").trim().split(/\s+/).slice(0,t).map((e=>e.charAt(0))).join("").toUpperCase()}}}]);