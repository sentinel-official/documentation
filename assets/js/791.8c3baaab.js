"use strict";(self.webpackChunksentinel_docs=self.webpackChunksentinel_docs||[]).push([[791,2002],{30791:(t,e,i)=>{i.r(e),i.d(e,{dyte_participants_stage_list:()=>c});var s=i(65733),a=i(68753),r=i(8934),n=i(86020),o=(i(21237),i(24555),i(60804),i(90362)),p=i(46503);const c=class{constructor(t){(0,s.r)(this,t),this.updateParticipants=()=>{this.getParticipants(this.search)},this.shouldShowStageList=()=>{var t,e,i;"LIVESTREAM"===(null===(t=this.meeting)||void 0===t?void 0:t.meta.viewType)?this.showStageList="ON_STAGE"===(null===(i=null===(e=this.meeting)||void 0===e?void 0:e.stage)||void 0===i?void 0:i.status):this.showStageList=!0},this.meeting=void 0,this.config=n.d,this.size=void 0,this.iconPack=a.d,this.view="sidebar",this.t=(0,r.u)(),this.search="",this.participants=[],this.showStageList=!1}connectedCallback(){this.meetingChanged(this.meeting),this.searchChanged(this.search)}disconnectedCallback(){var t,e;const{participants:i,self:s}=this.meeting;null!=this.meeting&&(this.participantJoinedListener&&this.meeting.participants.joined.removeListener("participantJoined",this.participantJoinedListener),this.participantLeftListener&&this.meeting.participants.joined.removeListener("participantLeft",this.participantLeftListener),i.joined.removeListener("peerStartedPresenting",this.updateParticipants),i.joined.removeListener("peerStoppedPresenting",this.updateParticipants),s.removeListener("stageJoined",this.updateParticipants),s.removeListener("stageLeft",this.updateParticipants),s.removeListener("removedFromStage",this.updateParticipants),null===(e=null===(t=this.meeting)||void 0===t?void 0:t.stage)||void 0===e||e.removeListener("stageStatusUpdate",this.shouldShowStageList))}meetingChanged(t){var e;null!=t&&(this.participantJoinedListener=t=>{if("WEBINAR"===this.meeting.meta.viewType&&"ON_STAGE"!==t.webinarStageStatus)return;const e=this.search.toLowerCase();t.name.toLowerCase().includes(e)&&t.id.toLowerCase().includes(e)&&(this.participants=[...this.participants.filter((e=>e.id!==t.id)),t])},this.participantLeftListener=t=>{this.participants=this.participants.filter((e=>e.id!==t.id))},t.participants.joined.addListener("participantJoined",this.participantJoinedListener),t.participants.joined.addListener("participantLeft",this.participantLeftListener),t.participants.joined.addListener("peerStartedPresenting",this.updateParticipants),t.participants.joined.addListener("peerStoppedPresenting",this.updateParticipants),t.self.addListener("stageJoined",this.updateParticipants),t.self.addListener("stageLeft",this.updateParticipants),t.self.addListener("removedFromStage",this.updateParticipants),this.shouldShowStageList(),null===(e=null==t?void 0:t.stage)||void 0===e||e.on("stageStatusUpdate",this.shouldShowStageList))}searchChanged(t){this.getParticipants(t)}getParticipants(t){let e=[this.meeting.self,...this.meeting.participants.joined.toArray()];"WEBINAR"===this.meeting.meta.viewType&&(e=e.filter((t=>"ON_STAGE"===t.webinarStageStatus))),this.participants=""===t?e:e.filter((e=>{var i;return(null!==(i=e.name)&&void 0!==i?i:e.id).toLowerCase().includes(t.toLowerCase())}))}render(){if(!this.showStageList)return;const t={meeting:this.meeting,view:this.view,t:this.t,config:this.config,states:p.s,size:this.size,iconPack:this.iconPack};return(0,s.h)(s.H,null,(0,s.h)("div",{class:"participants-container"},(0,s.h)("div",{class:"heading-count",part:"heading-count"},this.t("participants")," (",this.participants.length,")"),(0,s.h)("ul",{class:"participants",part:"participants"},this.participants.map((e=>(0,s.h)(o.R,{element:"dyte-participant",defaults:t,props:{role:"listitem",participant:e},childProps:Object.assign(Object.assign({},t),{participant:e,size:this.size}),deepProps:!0}))),0===this.participants.length&&(0,s.h)("div",{class:"empty-message",part:"empty-message"},this.search.length>0?this.t("search.could_not_find"):this.t("search.empty")))))}static get watchers(){return{meeting:["meetingChanged"],search:["searchChanged"]}}};c.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;width:100%;flex-direction:column;font-size:14px}.participants-container{margin-bottom:var(--dyte-space-4, 16px);width:100%}h3,.heading-count{margin:var(--dyte-space-0, 0px);display:flex;align-items:center;justify-content:center;padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:400;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));text-align:center}.heading-count{font-size:14px}.participants{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.empty-message{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-4, 16px);text-align:center;font-size:12px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}dyte-participant{width:100%}"},90362:(t,e,i)=>{i.d(e,{R:()=>r});var s=i(65733);const a=({elements:t,defaults:e,props:i={},deepProps:a=!1,elementProps:n={}})=>Array.isArray(t)&&0!==t.length?t.map((t=>(0,s.h)(r,{element:t,defaults:e,props:i,childProps:a&&i,elementProps:n}))):null,r=({element:t,defaults:e,childProps:i={},props:r={},onlyChildren:n=!1,asHost:o=!1,deepProps:p=!1,elementProps:c={}},d)=>{var h;const{config:l,size:g,states:f}=e;let u,m={},y=[];Array.isArray(t)?[u,m,...y]=t:u=t;const v=null===(h=null==l?void 0:l.root)||void 0===h?void 0:h[u];null!=v&&"props"in v&&(r=Object.assign(Object.assign({},v.props),r)),r=Object.assign(Object.assign({},r),m),u in c&&(r=Object.assign(Object.assign({},r),c[u]));const L=(({element:t,size:e,states:i={},config:s={}})=>{let a=[];const r=null==s?void 0:s.root[t],n=t=>{a.push(t),"string"==typeof e&&a.push(`${t}.${e}`)};if(n(t),"object"==typeof r&&!Array.isArray(r)&&null!==r){const{state:e,states:s}=r;let a=t,o=[];if(Array.isArray(s)){o=s.filter((t=>i[t])),o.sort();for(const t of o)n(`${a}.${t}`);o.length>1&&n([a,...o].join("."))}if("string"==typeof e){const s=`${t}[${e}=${i[e]}]`;n(s);for(const t of o)n(`${s}.${t}`);o.length>1&&n([s,...o].join("."))}}return a})({element:u,size:g,states:f,config:l}),P=(({selectors:t,root:e})=>{if(!e||!Array.isArray(t))return[];let i=[];for(const s of t){const t=e[s];if(Array.isArray(t))i=[...t];else if(t){if(t.children&&(i=[...t.children]),Array.isArray(t.remove))for(const e of t.remove)i=i.filter((t=>"string"==typeof t?t!==e:!Array.isArray(t)||t[0]!==e));if(t.addBefore)for(const[e,s]of Object.entries(t.addBefore)){const t=i.findIndex((t=>"string"==typeof t?t===e:!!Array.isArray(t)&&t[0]===e));t>=0&&i.splice(t,0,...s)}Array.isArray(t.add)&&(i=i.concat(t.add)),Array.isArray(t.prepend)&&(i=t.prepend.concat(i))}}return i})({selectors:L,root:l.root});if(n)return(0,s.h)(a,{elements:P,defaults:e,props:i,deepProps:p,elementProps:c});const A=(({selectors:t,styles:e})=>{if(!Array.isArray(t)||null==e)return{};const i={};for(const s of t){const t=e[s];null!=t&&Object.assign(i,t)}return i})({selectors:L,styles:l.styles});if(o)return(0,s.h)(s.H,Object.assign({},e,{style:A},r),(0,s.h)(a,{elements:P,defaults:e,props:i,deepProps:p,elementProps:c}),d,y.map((t=>{if(Array.isArray(t)){const[i,a]=t;return(0,s.h)(i,Object.assign({},e,a))}return t})));if(["dyte-header","dyte-controlbar"].includes(u)&&(r.disableRender=!0),u.startsWith("dyte-"))return(0,s.h)(u,Object.assign({},e,{style:A},r),(0,s.h)(a,{elements:P,defaults:e,props:i,deepProps:p,elementProps:c}),d,y.map((t=>{if(Array.isArray(t)){const[i,a]=t;return(0,s.h)(i,Object.assign({},e,a))}return t})));{const[t,n]=u.split("#");return(0,s.h)(t,Object.assign({id:n,style:A},r),(0,s.h)(a,{elements:P,defaults:e,props:i,deepProps:p,elementProps:c}),d,y.map((t=>{if(Array.isArray(t)){const[i,a]=t;return(0,s.h)(i,Object.assign({},e,a))}return t})))}}}}]);